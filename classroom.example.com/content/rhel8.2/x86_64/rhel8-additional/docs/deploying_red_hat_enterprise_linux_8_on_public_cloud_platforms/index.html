<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="d4eb60f7-2c62-4bf6-8549-3d60940f1be4" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="a27b5f6b682bca64a8f46317438b088a5a22e204:en-us" page="00da390e-6957-4b5b-a75f-95edb052bae5" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/index" />
<meta property="og:title" content="Deploying Red Hat Enterprise Linux 8 on public cloud platforms Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="You can create and deploy custom Red Hat Enterprise Linux images to various cloud platforms, including Microsoft Azure, Amazon Web Services (AWS), and Google Cloud Platform (GCP).    You can also create and configure a Red Hat High Availability cluster on each cloud platform. This document describes two choices for creating images: Cloud Access images and on-demand (marketplace) images. It includes procedures for creating HA clusters, including installing required packages and agents, configuring fencing, and installing network resource agents.    Each cloud provider has its own chapter that describes creating and deploying a custom image. There is also a separate chapter for configuring HA clusters for each cloud provider." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/index" />
<meta name="twitter:title" content="Deploying Red Hat Enterprise Linux 8 on public cloud platforms Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="You can create and deploy custom Red Hat Enterprise Linux images to various cloud platforms, including Microsoft Azure, Amazon Web Services (AWS), and Google Cloud Platform (GCP).    You can also create and configure a Red Hat High Availability cluster on each cloud platform. This document describes two choices for creating images: Cloud Access images and on-demand (marketplace) images. It includes procedures for creating HA clusters, including installing required packages and agents, configuring fencing, and installing network resource agents.    Each cloud provider has its own chapter that describes creating and deploying a custom image. There is also a separate chapter for configuring HA clusters for each cloud provider." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Deploying Red Hat Enterprise Linux 8 on public cloud platforms Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs05.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="6f12fc6" />
<meta name="cp-chrome-build-date" content="2020-06-23T22:47:47.449Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "6f12fc6",
        builddate : "2020-06-23T22:47:47.449Z",
        fetchdate : "2020-06-24T10:43:26-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=6f12fc6.css" />

<link href="chosen.css%3Fv=6f12fc6.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=6f12fc6" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__9KHtXrIGK7UhLs_peypOVV_qqUEhk0WY1m6BXUOA27E__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'd4eb60f7-2c62-4bf6-8549-3d60940f1be4');
attributes.set('ResourceTitle',    'Deploying Red Hat Enterprise Linux 8 on public cloud platforms');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       'a27b5f6b682bca64a8f46317438b088a5a22e204:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Deploying Red Hat Enterprise Linux 8 on public cloud platforms", "/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"7pLOH7kewy3cYeU4FGhCuPki1FT8MdAEz9BIzLGMe6k","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs05-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="index.html">English</a></li>
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/">日本語</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/Red_Hat_Enterprise_Linux-8-Deploying_Red_Hat_Enterprise_Linux_8_on_public_cloud_platforms-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/deploying_red_hat_enterprise_linux_8_on_public_cloud_platforms/Red_Hat_Enterprise_Linux-8-Deploying_Red_Hat_Enterprise_Linux_8_on_public_cloud_platforms-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Deploying Red Hat Enterprise Linux 8 on public cloud platforms</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_cloud-content">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#assembly_deploying-a-rhel-image-as-a-virtual-machine-on-microsoft-azure_cloud-content">1. Deploying a Red Hat Enterprise Linux 8 image as a virtual machine on Microsoft Azure</a><ol class="menu"><li class=" leaf"><a href="index.html#azure-image-options_deploying-a-virtual-machine-on-microsoft-azure">1.1. Red Hat Enterprise Linux image options on Azure</a></li><li class=" leaf"><a href="index.html#understanding-base-images-azure_deploying-a-virtual-machine-on-microsoft-azure">1.2. Understanding base images</a><ol class="menu"><li class=" leaf"><a href="index.html#about-vm-images_understanding-base-images-azure">1.2.1. Using a custom base image</a></li><li class=" leaf"><a href="index.html#required-system-packages_understanding-base-images-azure">1.2.2. Required system packages</a></li><li class=" leaf"><a href="index.html#azure-vm-configuration-settings_understanding-base-images-azure">1.2.3. Azure virtual machine configuration settings</a></li><li class=" leaf"><a href="index.html#create-a-vm-from-a-kvm-guest-image_understanding-base-images-azure">1.2.4. Creating a base image from a KVM Guest Image</a></li><li class=" leaf"><a href="index.html#create-a-vm-from-an-iso-image_understanding-base-images-azure">1.2.5. Creating a base image from an ISO image</a></li></ol></li><li class=" leaf"><a href="index.html#configure-the-image-azure_deploying-a-virtual-machine-on-microsoft-azure">1.3. Configuring the base image for Microsoft Azure</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-hyperv-drivers_configure-the-image-azure">1.3.1. Installing Hyper-V device drivers</a></li><li class=" leaf"><a href="index.html#making-configuration-changes_configure-the-image-azure">1.3.2. Making additional configuration changes</a></li></ol></li><li class=" leaf"><a href="index.html#convert-the-image_deploying-a-virtual-machine-on-microsoft-azure">1.4. Converting the image to a fixed VHD format</a></li><li class=" leaf"><a href="index.html#install-the-azure-cli_deploying-a-virtual-machine-on-microsoft-azure">1.5. Installing the Azure CLI</a></li><li class=" leaf"><a href="index.html#create-azure-resources_deploying-a-virtual-machine-on-microsoft-azure">1.6. Creating resources in Azure</a></li><li class=" leaf"><a href="index.html#upload-image-to-azure_deploying-a-virtual-machine-on-microsoft-azure">1.7. Uploading and creating an Azure image</a></li><li class=" leaf"><a href="index.html#create-start-the-VM_deploying-a-virtual-machine-on-microsoft-azure">1.8. Creating and starting the VM in Azure</a></li><li class=" leaf"><a href="index.html#other-methods">1.9. Other authentication methods</a></li><li class=" leaf"><a href="index.html#attaching-subscriptions_deploying-a-virtual-machine-on-microsoft-azure">1.10. Attaching Red Hat subscriptions</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-rhel-high-availability-on-azure_cloud-content">2. Configuring a Red Hat High Availability cluster on Microsoft Azure</a><ol class="menu"><li class=" leaf"><a href="index.html#create-azure-resources-for-ha_configuring-rhel-high-availability-on-azure">2.1. Creating resources in Azure</a></li><li class=" leaf"><a href="index.html#required-system-packages-for-azure-ha_configuring-rhel-high-availability-on-azure">2.2. Required system packages for HA</a></li><li class=" leaf"><a href="index.html#azure-vm-configuration-settings_configuring-rhel-high-availability-on-azure">2.3. Azure virtual machine configuration settings</a></li><li class=" leaf"><a href="index.html#installing-hyperv-drivers_configuring-rhel-high-availability-on-azure">2.4. Installing Hyper-V device drivers</a></li><li class=" leaf"><a href="index.html#making-configuration-changes_configuring-rhel-high-availability-on-azure">2.5. Making additional configuration changes</a></li><li class=" leaf"><a href="index.html#azure-create-an-azure-directory-application-in-ha_configuring-rhel-high-availability-on-azure">2.6. Creating an Azure Active Directory Application</a></li><li class=" leaf"><a href="index.html#convert-the-image_configuring-rhel-high-availability-on-azure">2.7. Converting the image to a fixed VHD format</a></li><li class=" leaf"><a href="index.html#upload-image-to-azure_configuring-rhel-high-availability-on-azure">2.8. Uploading and creating an Azure image</a></li><li class=" leaf"><a href="index.html#azure-install-red-hat-ha-packages-and-agents_configuring-rhel-high-availability-on-azure">2.9. Installing Red Hat HA packages and agents</a></li><li class=" leaf"><a href="index.html#azure-create-cluster-in-ha_configuring-rhel-high-availability-on-azure">2.10. Creating a cluster</a></li><li class=" leaf"><a href="index.html#azure-fencing-overview-in-ha_configuring-rhel-high-availability-on-azure">2.11. Fencing overview</a></li><li class=" leaf"><a href="index.html#azure-create-a-fencing-device-in-ha_configuring-rhel-high-availability-on-azure">2.12. Creating a fencing device</a></li><li class=" leaf"><a href="index.html#azure-create-internal-load-balancer-in-azure-ha_configuring-rhel-high-availability-on-azure">2.13. Creating an Azure internal load balancer</a></li><li class=" leaf"><a href="index.html#azure-configure-the-load-balancer-resource-agent-in-ha_configuring-rhel-high-availability-on-azure">2.14. Configuring the load balancer resource agent</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_deploying-a-virtual-machine-on-aws_cloud-content">3. Deploying a Red Hat Enterprise Linux image as an EC2 instance on Amazon Web Services</a><ol class="menu"><li class=" leaf"><a href="index.html#aws-image-options_deploying-a-virtual-machine-on-aws">3.1. Red Hat Enterprise Linux Image options on AWS</a></li><li class=" leaf"><a href="index.html#assembly_understanding-base-images_deploying-a-virtual-machine-on-aws">3.2. Understanding base images</a><ol class="menu"><li class=" leaf"><a href="index.html#using-a-custom-base-image_deploying-a-virtual-machine-on-aws">3.2.1. Using a custom base image</a></li><li class=" leaf"><a href="index.html#aws-vm-configuration-settings_deploying-a-virtual-machine-on-aws">3.2.2. Virtual machine configuration settings</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_create-vm-from-kvm-guest-image_deploying-a-virtual-machine-on-aws">3.3. Creating a base image from a KVM Guest Image</a><ol class="menu"><li class=" leaf"><a href="index.html#downloading-the-kvm-guest-image_deploying-a-virtual-machine-on-aws">3.3.1. Downloading the KVM Guest Image</a></li><li class=" leaf"><a href="index.html#creating-the-vm-from-the-guest-image_deploying-a-virtual-machine-on-aws">3.3.2. Creating the VM from the KVM Guest Image</a></li><li class=" leaf"><a href="index.html#setting-up-root-access-to-your-image_deploying-a-virtual-machine-on-aws">3.3.3. Setting up root access to your KVM Guest Image</a></li></ol></li><li class=" leaf"><a href="index.html#creating-a-base-vm-from-an-iso-image_deploying-a-virtual-machine-on-aws">3.4. Creating a base VM from an ISO image</a><ol class="menu"><li class=" leaf"><a href="index.html#downloading-the-iso-image_deploying-a-virtual-machine-on-aws">3.4.1. Downloading the ISO image</a></li><li class=" leaf"><a href="index.html#creating-a-vm-from-the-ISO-image_deploying-a-virtual-machine-on-aws">3.4.2. Creating a VM from the ISO image</a></li><li class=" leaf"><a href="index.html#completing-the-rhel-installation_deploying-a-virtual-machine-on-aws">3.4.3. Completing the RHEL installation</a></li></ol></li><li class=" leaf"><a href="index.html#uploading-the-rhel-image-to-aws_deploying-a-virtual-machine-on-aws">3.5. Uploading the Red Hat Enterprise Linux image to AWS</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-aws-command-line-interface_deploying-a-virtual-machine-on-aws">3.5.1. Installing the AWS CLI</a></li><li class=" leaf"><a href="index.html#creating-an-s3-bucket_deploying-a-virtual-machine-on-aws">3.5.2. Creating an S3 bucket</a></li><li class=" leaf"><a href="index.html#creating-the-vmimport-role_deploying-a-virtual-machine-on-aws">3.5.3. Creating the vmimport role</a></li><li class=" leaf"><a href="index.html#converting-and-pushing-your-image-to-s3_deploying-a-virtual-machine-on-aws">3.5.4. Converting and pushing your image to S3</a></li><li class=" leaf"><a href="index.html#importing-your-image-as-a-snapshot_deploying-a-virtual-machine-on-aws">3.5.5. Importing your image as a snapshot</a></li><li class=" leaf"><a href="index.html#creating-an-ami-from-the-uploaded-snapshot_deploying-a-virtual-machine-on-aws">3.5.6. Creating an AMI from the uploaded snapshot</a></li><li class=" leaf"><a href="index.html#launching-an-instance-from-the-ami_deploying-a-virtual-machine-on-aws">3.5.7. Launching an instance from the AMI</a></li><li class=" leaf"><a href="index.html#attaching-subscriptions_deploying-a-virtual-machine-on-aws">3.5.8. Attaching Red Hat subscriptions</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#configuring-a-red-hat-high-availability-cluster-on-aws_deploying-a-virtual-machine-on-aws">4. Configuring a Red Hat High Availability cluster on AWS</a><ol class="menu"><li class=" leaf"><a href="index.html#aws-creating-access-key-and-secret-key_configuring-a-red-hat-high-availability-cluster-on-aws">4.1. Creating the AWS Access Key and AWS Secret Access Key</a></li><li class=" leaf"><a href="index.html#installing-aws-command-line-interface_configuring-a-red-hat-high-availability-cluster-on-aws">4.2. Installing the AWS CLI</a></li><li class=" leaf"><a href="index.html#aws-creating-a-rhel-ha-ec2-instance_configuring-a-red-hat-high-availability-cluster-on-aws">4.3. Creating an HA EC2 instance</a></li><li class=" leaf"><a href="index.html#aws-configuring-the-private-key-in-ha_configuring-a-red-hat-high-availability-cluster-on-aws">4.4. Configuring the private key</a></li><li class=" leaf"><a href="index.html#aws-connecting-to-an-instance_configuring-a-red-hat-high-availability-cluster-on-aws">4.5. Connecting to an instance</a></li><li class=" leaf"><a href="index.html#aws-installing-rhel-ha-packages-and-agents_configuring-a-red-hat-high-availability-cluster-on-aws">4.6. Installing the HA packages and agents</a></li><li class=" leaf"><a href="index.html#azure-create-cluster-in-ha_configuring-a-red-hat-high-availability-cluster-on-aws">4.7. Creating a cluster</a></li><li class=" leaf"><a href="index.html#aws-configuring-fencing_configuring-a-red-hat-high-availability-cluster-on-aws">4.8. Configuring fencing</a></li><li class=" leaf"><a href="index.html#aws-installing-the-aws-cli-on-cluster-nodes_configuring-a-red-hat-high-availability-cluster-on-aws">4.9. Installing the AWS CLI on cluster nodes</a></li><li class=" leaf"><a href="index.html#aws-installing-network-resource-agents_configuring-a-red-hat-high-availability-cluster-on-aws">4.10. Installing network resource agents</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform_deploying-a-virtual-machine-on-aws">5. Deploying a Red Hat Enterprise Linux image as a Google Compute Engine instance on Google Cloud Platform</a><ol class="menu"><li class=" leaf"><a href="index.html#gcp-image-options_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.1. Red Hat Enterprise Linux image options on GCP</a></li><li class=" leaf"><a href="index.html#assembly_understanding-base-images_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.2. Understanding base images</a><ol class="menu"><li class=" leaf"><a href="index.html#using-a-custom-base-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.2.1. Using a custom base image</a></li><li class=" leaf"><a href="index.html#aws-vm-configuration-settings_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.2.2. Virtual machine configuration settings</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_create-vm-from-kvm-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.3. Creating a base image from a KVM Guest Image</a><ol class="menu"><li class=" leaf"><a href="index.html#downloading-the-kvm-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.3.1. Downloading the KVM Guest Image</a></li><li class=" leaf"><a href="index.html#creating-the-vm-from-the-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.3.2. Creating the VM from the KVM Guest Image</a></li><li class=" leaf"><a href="index.html#setting-up-root-access-to-your-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.3.3. Setting up root access to your KVM Guest Image</a></li></ol></li><li class=" leaf"><a href="index.html#creating-a-base-vm-from-an-iso-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.4. Creating a base VM from an ISO image</a><ol class="menu"><li class=" leaf"><a href="index.html#downloading-the-iso-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.4.1. Downloading the ISO image</a></li><li class=" leaf"><a href="index.html#creating-a-vm-from-the-ISO-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.4.2. Creating a VM from the ISO image</a></li><li class=" leaf"><a href="index.html#completing-the-rhel-installation_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.4.3. Completing the RHEL installation</a></li></ol></li><li class=" leaf"><a href="index.html#uploading-the-rhel-image-to-gcp_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform">5.5. Uploading the RHEL image to GCP</a><ol class="menu"><li class=" leaf"><a href="index.html#creating-a-new-project-on-the-google-cloud-platform_uploading-the-rhel-image-to-gcp">5.5.1. Creating a new project on GCP</a></li><li class=" leaf"><a href="index.html#installing-the-google-cloud-sdk_uploading-the-rhel-image-to-gcp">5.5.2. Installing the Google Cloud SDK</a></li><li class=" leaf"><a href="index.html#creating-ssh-keys-for-google-compute-engine_uploading-the-rhel-image-to-gcp">5.5.3. Creating SSH keys for Google Compute Engine</a></li><li class=" leaf"><a href="index.html#creating-a-storage-bucket-in-gcp-storage_uploading-the-rhel-image-to-gcp">5.5.4. Creating a storage bucket in GCP Storage</a></li><li class=" leaf"><a href="index.html#converting-and-uploading-your-image-to-your-gcp-bucket_uploading-the-rhel-image-to-gcp">5.5.5. Converting and uploading your image to your GCP Bucket</a></li><li class=" leaf"><a href="index.html#creating-an-image-from-the-object-in-the-gcp-bucket_uploading-the-rhel-image-to-gcp">5.5.6. Creating an image from the object in the GCP bucket</a></li><li class=" leaf"><a href="index.html#creating-a-compute-engine-instance-from-an-image_uploading-the-rhel-image-to-gcp">5.5.7. Creating a Google Compute Engine instance from an image</a></li><li class=" leaf"><a href="index.html#connecting-to-your-instance_uploading-the-rhel-image-to-gcp">5.5.8. Connecting to your instance</a></li><li class=" leaf"><a href="index.html#attaching-subscriptions_uploading-the-rhel-image-to-gcp">5.5.9. Attaching Red Hat subscriptions</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#configuring-rhel-ha-on-gcp_deploying-a-virtual-machine-on-aws">6. Configuring Red Hat High Availability Cluster on Google Cloud Platform</a><ol class="menu"><li class=" leaf"><a href="index.html#required-system-packages_configuring-rhel-ha-on-gcp">6.1. Required system packages</a></li><li class=" leaf"><a href="index.html#gcp-image-options_configuring-rhel-ha-on-gcp">6.2. Red Hat Enterprise Linux image options on GCP</a></li><li class=" leaf"><a href="index.html#installing-the-google-cloud-sdk_configuring-rhel-ha-on-gcp">6.3. Installing the Google Cloud SDK</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-a-gcp-image-bucket_configuring-rhel-ha-on-gcp">6.4. Creating a GCP image bucket</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-vpc-network-and-subnet_configuring-rhel-ha-on-gcp">6.5. Creating a custom virtual private cloud network and subnet</a></li><li class=" leaf"><a href="index.html#gcp-ha-preparing-and-importing-base-gcp-image_configuring-rhel-ha-on-gcp">6.6. Preparing and importing a base GCP image</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-and-configuring-a-base-gcp-instance_configuring-rhel-ha-on-gcp">6.7. Creating and configuring a base GCP instance</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-a-snapshot-image_configuring-rhel-ha-on-gcp">6.8. Creating a snapshot image</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-rhel-ha-node-template-instance-and-rhel-ha-nodes_configuring-rhel-ha-on-gcp">6.9. Creating an HA node template instance and HA nodes</a></li><li class=" leaf"><a href="index.html#gcp-ha-installing-rhel-ha-packages-and-agents_configuring-rhel-ha-on-gcp">6.10. Installing HA packages and agents</a></li><li class=" leaf"><a href="index.html#gcp-ha-configuring-rhel-ha-services_configuring-rhel-ha-on-gcp">6.11. Configuring HA services</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-cluster-in-gcp_configuring-rhel-ha-on-gcp">6.12. Creating a cluster</a></li><li class=" leaf"><a href="index.html#gcp-ha-creating-a-fencing-device_configuring-rhel-ha-on-gcp">6.13. Creating a fencing device</a></li><li class=" leaf"><a href="index.html#gcp-ha-configuring-gcp-node-authorization_configuring-rhel-ha-on-gcp">6.14. Configuring GCP node authorization</a></li><li class=" leaf"><a href="index.html#gcp-ha-configuring-the-gcp-vcp-move-vip-resource-agent_configuring-rhel-ha-on-gcp">6.15. Configuring the gcp-vcp-move-vip resource agent</a></li></ol></li><li class=" leaf"><a href="index.html#idm139836707573568">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Deploying Red Hat Enterprise Linux 8 on public cloud platforms</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm139836697096896"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">Creating custom Red Hat Enterprise Linux images and configuring a Red Hat High Availability cluster for public cloud platforms</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm139836707573568">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				You can create and deploy custom Red Hat Enterprise Linux images to various cloud platforms, including Microsoft Azure, Amazon Web Services (AWS), and Google Cloud Platform (GCP).
			</div><div class="para">
				You can also create and configure a Red Hat High Availability cluster on each cloud platform. This document describes two choices for creating images: Cloud Access images and on-demand (marketplace) images. It includes procedures for creating HA clusters, including installing required packages and agents, configuring fencing, and installing network resource agents.
			</div><div class="para">
				Each cloud provider has its own chapter that describes creating and deploying a custom image. There is also a separate chapter for configuring HA clusters for each cloud provider.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_cloud-content"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="assembly_deploying-a-rhel-image-as-a-virtual-machine-on-microsoft-azure_cloud-content"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Deploying a Red Hat Enterprise Linux 8 image as a virtual machine on Microsoft Azure</h1></div></div></div><p>
			You have a number of options for deploying a Red Hat Enterprise Linux (RHEL) 8 image on Azure. This chapter discusses your options for choosing an image and lists or refers to system requirements for your host system and virtual machine (VM). This chapter also provides procedures for creating a custom image, uploading it to Azure, and launching an Azure VM instance.
		</p><p>
			This chapter refers to the Azure documentation in a number of places. For many procedures, see the referenced Azure documentation for additional detail.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				For a list of Red Hat products that you can use securely on Azure, see <a class="link" href="https://access.redhat.com/public-cloud/microsoft-azure">Red Hat on Microsoft Azure</a>.
			</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Sign up for a <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal</a> account.
				</li><li class="listitem">
					Sign up for a <a class="link" href="https://azure.microsoft.com/en-us/">Microsoft Azure</a> account.
				</li><li class="listitem">
					Enable your subscriptions in the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access</a> program. The Red Hat Cloud Access program allows you to move your Red Hat subscriptions from physical or on-premise systems to Azure with full support from Red Hat.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/2758981">Frequently Asked Questions and Recommended Practices for Microsoft Azure</a>
				</li></ul></div><section class="section" id="azure-image-options_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.1. Red Hat Enterprise Linux image options on Azure</h2></div></div></div><p>
				The following table lists image choices and notes the differences in the image options.
			</p><div class="table" id="idm139836722939344"><p class="title"><strong>Table 1.1. Image options</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836698390352" scope="col">Image option</th><th align="left" valign="top" id="idm139836698389264" scope="col">Subscriptions</th><th align="left" valign="top" id="idm139836706420320" scope="col">Sample scenario</th><th align="left" valign="top" id="idm139836706419232" scope="col">Considerations</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836698390352"> <p>
								Choose to deploy a Red Hat Gold Image.
							</p>
							 </td><td align="left" valign="top" headers="idm139836698389264"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706420320"> <p>
								Enable subscriptions through <a class="link" href="https://access.redhat.com/public-cloud">the Red Hat Cloud Access program</a>, and then choose a Red Hat Gold Image on Azure. See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a> for details on Gold Images and how to access them on Azure.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706419232"> <p>
								The subscription includes the Red Hat product cost, and you pay Microsoft for all other instance costs.
							</p>
							 <p>
								Red Hat Gold Images are called "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836698390352"> <p>
								Choose to deploy a custom image that you move to Azure.
							</p>
							 </td><td align="left" valign="top" headers="idm139836698389264"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706420320"> <p>
								Enable subscriptions through the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>, upload your custom image, and attach your subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706419232"> <p>
								The subscription includes the Red Hat product cost, and you pay Microsoft for all other instance costs.
							</p>
							 <p>
								Custom images that you move to Azure are "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836698390352"> <p>
								Choose to deploy an existing Azure image that includes RHEL.
							</p>
							 </td><td align="left" valign="top" headers="idm139836698389264"> <p>
								The Azure images include a Red Hat product.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706420320"> <p>
								Choose a RHEL image when you create a VM using the Azure console, or choose a VM from the <a class="link" href="https://azuremarketplace.microsoft.com/en-us/marketplace/">Azure Marketplace</a>.
							</p>
							 </td><td align="left" valign="top" headers="idm139836706419232"> <p>
								You pay Microsoft hourly on a pay-as-you-go model. Such images are called "on-demand." Azure provides support for on-demand images through a support agreement.
							</p>
							 <p>
								Red Hat provides updates to the images. Azure makes the updates available through the Red Hat Update Infrastructure (RHUI).
							</p>
							 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can create a custom image for Azure using Red Hat Image Builder. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a> for more information.
				</p></div></div><p>
				The remainder of this chapter includes information and procedures pertaining to Red Hat Enterprise Linux custom images.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/using_red_hat_gold_images#con-gold-image-azure">Red Hat Gold Images on Microsoft Azure</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>
					</li><li class="listitem">
						<a class="link" href="https://azuremarketplace.microsoft.com/en-us/marketplace/">Azure Marketplace</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/marketplace/marketplace-commercial-transaction-capabilities-and-considerations">Billing options in the Azure Marketplace</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/workloads/redhat/byos">Red Hat Enterprise Linux Bring-Your-Own-Subscription Gold Images in Azure</a>
					</li></ul></div></section><section class="section" id="understanding-base-images-azure_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.2. Understanding base images</h2></div></div></div><p>
				This section includes information on using preconfigured base images and their configuration settings.
			</p><section class="section" id="about-vm-images_understanding-base-images-azure"><div class="titlepage"><div><div><h3 class="title">1.2.1. Using a custom base image</h3></div></div></div><p>
					To manually configure a VM, you start with a base (starter) VM image. Once you have created the base VM image, you can modify configuration settings and add the packages the VM requires to operate on the cloud. You can make additional configuration changes for your specific application after you upload the image.
				</p><p>
					To prepare a KVM cloud image of RHEL, follow the instructions below. To prepare a Hyper-V cloud image of RHEL, see the <a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/redhat-create-upload-vhd#prepare-a-red-hat-based-virtual-machine-from-kvm">Microsoft Documentation</a>.
				</p><p>
					The recommended base VM image to use for all public cloud platforms is the <span class="strong strong"><strong>Red Hat Enterprise Linux 8 KVM Guest Image</strong></span>, which you download from the <a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Customer Portal</a>. The KVM Guest Image is preconfigured with the following cloud configuration settings.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>The root account is disabled.</em></span> You temporarily enable root account access to make configuration changes and install packages that the cloud may require. This guide provides instructions for enabling root account access.
						</li><li class="listitem">
							<span class="emphasis"><em>The image has <code class="literal">cloud-init</code> installed and enabled.</em></span> <code class="literal">cloud-init</code> is a service that handles provisioning of the VM (or instance) at initial boot.
						</li></ul></div><p>
					You can choose to use a custom Red Hat Enterprise Linux ISO image; however, when using a custom ISO image, you may need to make additional configuration changes.
				</p><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						<a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
					</p></div></section><section class="section" id="required-system-packages_understanding-base-images-azure"><div class="titlepage"><div><div><h3 class="title">1.2.2. Required system packages</h3></div></div></div><p>
					The procedures in this chapter assume you are using a host system running Red Hat Enterprise Linux. To successfully complete the procedures, your host system must have the following packages installed.
				</p><div class="table" id="idm139836706268336"><p class="title"><strong>Table 1.2. System packages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836706950864" scope="col">Package</th><th align="left" valign="top" id="idm139836706949776" scope="col">Repository</th><th align="left" valign="top" id="idm139836706948688" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836706950864"> <p>
									libvirt
								</p>
								 </td><td align="left" valign="top" headers="idm139836706949776"> <p>
									rhel-8-for-x86_64-appstream-rpms
								</p>
								 </td><td align="left" valign="top" headers="idm139836706948688"> <p>
									Open source API, daemon, and management tool for managing platform virtualization
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706950864"> <p>
									virt-install
								</p>
								 </td><td align="left" valign="top" headers="idm139836706949776"> <p>
									rhel-8-for-x86_64-appstream-rpms
								</p>
								 </td><td align="left" valign="top" headers="idm139836706948688"> <p>
									A command-line utility for building VMs
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706950864"> <p>
									libguestfs
								</p>
								 </td><td align="left" valign="top" headers="idm139836706949776"> <p>
									rhel-8-for-x86_64-appstream-rpms
								</p>
								 </td><td align="left" valign="top" headers="idm139836706948688"> <p>
									A library for accessing and modifying VM file systems
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706950864"> <p>
									libguestfs-tools
								</p>
								 </td><td align="left" valign="top" headers="idm139836706949776"> <p>
									rhel-8-for-x86_64-appstream-rpms
								</p>
								 </td><td align="left" valign="top" headers="idm139836706948688"> <p>
									System administration tools for VMs; includes the guestfish utility
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="azure-vm-configuration-settings_understanding-base-images-azure"><div class="titlepage"><div><div><h3 class="title">1.2.3. Azure virtual machine configuration settings</h3></div></div></div><p>
					Azure VMs must have the following configuration settings. Some of these settings are enabled during the initial VM creation. Other settings are set when provisioning the VM image for Azure. Keep these settings in mind as you move through the procedures, and refer back to them if you need to.
				</p><div class="table" id="idm139836706281472"><p class="title"><strong>Table 1.3. VM configuration settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836706276672" scope="col">Setting</th><th align="left" valign="top" id="idm139836697164080" scope="col">Recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836706276672"> <p>
									ssh
								</p>
								 </td><td align="left" valign="top" headers="idm139836697164080"> <p>
									ssh must be enabled to provide remote access to your Azure VMs.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706276672"> <p>
									dhcp
								</p>
								 </td><td align="left" valign="top" headers="idm139836697164080"> <p>
									The primary virtual adapter should be configured for dhcp (IPv4 only).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706276672"> <p>
									Swap Space
								</p>
								 </td><td align="left" valign="top" headers="idm139836697164080"> <p>
									Do not create a dedicated swap file or swap partition. You can configure swap space with the Windows Azure Linux Agent (WALinuxAgent).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706276672"> <p>
									NIC
								</p>
								 </td><td align="left" valign="top" headers="idm139836697164080"> <p>
									Choose <span class="strong strong"><strong>virtio</strong></span> for the primary virtual network adapter.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836706276672"> <p>
									encryption
								</p>
								 </td><td align="left" valign="top" headers="idm139836697164080"> <p>
									For custom images, use Network Bound Disk Encryption (NBDE) for full disk encryption on Azure.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="create-a-vm-from-a-kvm-guest-image_understanding-base-images-azure"><div class="titlepage"><div><div><h3 class="title">1.2.4. Creating a base image from a KVM Guest Image</h3></div></div></div><p>
					Red Hat and the open source community continually optimize the KVM Guest Image for virtualized environments. Once you have configured the image, you can use the image as a template for creating additional VM instances.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux 8 KVM Guest Image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name kvmtest --memory 2048 --vcpus 2 --disk rhel-8.0-x86_64-kvm.qcow2,bus=virtio --import --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> size to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li><li class="listitem">
							Shut down the new VM after a login prompt appears.
						</li><li class="listitem"><p class="simpara">
							Set up root access to the VM. From your system, use the <code class="literal command">virt-customize</code> command to generate a root password for the VM.
						</p><pre class="literallayout white-space-pre"># virt-customize -a &lt;guest-image-path&gt; --root-password password:&lt;PASSWORD&gt;</pre><p class="simpara">
							Example:
						</p><pre class="screen"># virt-customize -a /var/lib/libvirt/images/rhel-guest-image-8.0-120.x86_64.qcow2 --root-password password:redhat!
[   0.0] Examining the guest ...
[ 103.0] Setting a random seed
[ 103.0] Setting passwords
[ 112.0] Finishing off</pre></li><li class="listitem">
							Verify root access by starting the RHEL VM and logging in as <code class="literal">root</code>.
						</li><li class="listitem">
							Once you log in as <code class="literal">root</code>, you can configure the image.
						</li></ol></div></section><section class="section" id="create-a-vm-from-an-iso-image_understanding-base-images-azure"><div class="titlepage"><div><div><h3 class="title">1.2.5. Creating a base image from an ISO image</h3></div></div></div><p>
					The following procedure lists the steps and initial configuration requirements for creating a custom ISO image. Once you have configured the image, you can use the image as a template for creating additional VM instances.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux 8 Binary DVD ISO image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name isotest --memory 2048 --vcpus 2 --disk size=8,bus=virtio --location rhel-8.0-x86_64-dvd.iso --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> and <span class="strong strong"><strong>Storage Size</strong></span> to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Review the following additional installation selection and modifications.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Select <span class="strong strong"><strong>Minimal Install</strong></span> with the <span class="strong strong"><strong>standard RHEL</strong></span> option.
								</li><li class="listitem"><p class="simpara">
									For <span class="strong strong"><strong>Installation Destination</strong></span>, select <span class="strong strong"><strong>Custom Storage Configuration</strong></span>. Use the following configuration information to make your selections.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Verify at least 500 MB for <span class="strong strong"><strong>/boot</strong></span>.
										</li><li class="listitem">
											For file system, use xfs, ext4, or ext3 for both <span class="strong strong"><strong>boot</strong></span> and <span class="strong strong"><strong>root</strong></span> partitions.
										</li><li class="listitem">
											Remove swap space. Swap space is configured on the physical blade server in Azure by the WALinuxAgent.
										</li></ul></div></li><li class="listitem">
									On the <span class="strong strong"><strong>Installation Summary</strong></span> screen, select <span class="strong strong"><strong>Network and Host Name</strong></span>. Switch <span class="strong strong"><strong>Ethernet</strong></span> to <span class="strong strong"><strong>On</strong></span>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							When the install starts:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Create a <code class="literal">root</code> password.
								</li><li class="listitem">
									Create an administrative user account.
								</li></ul></div></li><li class="listitem">
							When installation is complete, reboot the VM and log in to the root account.
						</li><li class="listitem">
							Once you are logged in as <code class="literal">root</code>, you can configure the image.
						</li></ol></div></section></section><section class="section" id="configure-the-image-azure_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.3. Configuring the base image for Microsoft Azure</h2></div></div></div><p>
				The base image requires configuration changes to serve as your RHEL 8 VM image in Azure. The following sections provide the additional configuration changes that Azure requires.
			</p><section class="section" id="installing-hyperv-drivers_configure-the-image-azure"><div class="titlepage"><div><div><h3 class="title">1.3.1. Installing Hyper-V device drivers</h3></div></div></div><p>
					Microsoft provides network and storage device drivers as part of their Linux Integration Services for Hyper-V package. You may need to install Hyper-V device drivers on the VM image prior to provisioning it as an Azure VM. Use the <code class="literal">lsinitrd | grep hv</code> command to verify that the drivers are installed.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enter the following <code class="literal command">grep</code> command to determine if the required Hyper-V device drivers are installed.
						</p><pre class="literallayout white-space-pre"># lsinitrd | grep hv</pre><p class="simpara">
							In the example below, all required drivers are installed.
						</p><pre class="literallayout white-space-pre"># lsinitrd | grep hv
drwxr-xr-x   2 root     root            0 Aug 12 14:21 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/hv
-rw-r--r--   1 root     root        31272 Aug 11 08:45 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/hv/hv_vmbus.ko.xz
-rw-r--r--   1 root     root        25132 Aug 11 08:46 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/net/hyperv/hv_netvsc.ko.xz
-rw-r--r--   1 root     root         9796 Aug 11 08:45 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/scsi/hv_storvsc.ko.xz</pre><p class="simpara">
							If all the drivers are not installed, complete the remaining steps.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								An <code class="literal">hv_vmbus</code> driver may exist in the environment. Even if this driver is present, complete the following steps.
							</p></div></div></li><li class="listitem">
							Create a file named <code class="literal">hv.conf</code> in <code class="literal">/etc/dracut.conf.d</code>.
						</li><li class="listitem"><p class="simpara">
							Add the following driver parameters to the <code class="literal">hv.conf</code> file.
						</p><pre class="screen">add_drivers+=" hv_vmbus "
add_drivers+=" hv_netvsc "
add_drivers+=" hv_storvsc "</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Note the spaces before and after the quotes, for example, <code class="literal">add_drivers+=" hv_vmbus "</code>. This ensures that unique drivers are loaded in the event that other Hyper-V drivers already exist in the environment.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Regenerate the <code class="literal">initramfs</code> image.
						</p><pre class="screen"># dracut -f -v --regenerate-all</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Reboot the machine.
						</li><li class="listitem">
							Run the <code class="literal command">lsinitrd | grep hv</code> command to verify that the drivers are installed.
						</li></ol></div></section><section class="section" id="making-configuration-changes_configure-the-image-azure"><div class="titlepage"><div><div><h3 class="title">1.3.2. Making additional configuration changes</h3></div></div></div><p>
					The VM requires further configuration changes to operate in Azure. Perform the following procedure to make the additional changes.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							If necessary, power on the VM.
						</li><li class="listitem"><p class="simpara">
							Register the VM and enable the Red Hat Enterprise Linux 8 repository.
						</p><pre class="screen"># subscription-manager register --auto-attach</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Stopping and removing cloud-init</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Stop the <code class="literal">cloud-init</code> service (if present).
						</p><pre class="screen"># systemctl stop cloud-init</pre></li><li class="listitem"><p class="simpara">
							Remove the <code class="literal">cloud-init</code> software.
						</p><pre class="screen"># yum remove cloud-init</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Completing other VM changes</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Edit the <code class="literal">/etc/ssh/sshd_config</code> file and enable password authentication.
						</p><pre class="screen">PasswordAuthentication yes</pre></li><li class="listitem"><p class="simpara">
							Set a generic host name.
						</p><pre class="screen"># hostnamectl set-hostname localhost.localdomain</pre></li><li class="listitem"><p class="simpara">
							Edit (or create) the <code class="literal">/etc/sysconfig/network-scripts/ifcfg-eth0</code> file. Use only the parameters listed below.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal">ifcfg-eth0</code> file does not exist on the RHEL 8 DVD ISO image and must be created.
							</p></div></div><pre class="screen">DEVICE="eth0"
ONBOOT="yes"
BOOTPROTO="dhcp"
TYPE="Ethernet"
USERCTL="yes"
PEERDNS="yes"
IPV6INIT="no"</pre></li><li class="listitem"><p class="simpara">
							Remove all persistent network device rules (if present).
						</p><pre class="screen"># rm -f /etc/udev/rules.d/70-persistent-net.rules
# rm -f /etc/udev/rules.d/75-persistent-net-generator.rules
# rm -f /etc/udev/rules.d/80-net-name-slot-rules</pre></li><li class="listitem"><p class="simpara">
							Set <code class="literal">ssh</code> to start automatically.
						</p><pre class="screen"># systemctl enable sshd
# systemctl is-enabled sshd</pre></li><li class="listitem"><p class="simpara">
							Modify the kernel boot parameters.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Add <code class="literal">crashkernel=256M</code> to the start of the <code class="literal">GRUB_CMDLINE_LINUX</code> line in the <code class="literal">/etc/default/grub</code> file. If <code class="literal">crashkernel=auto</code> is present, change it to <code class="literal">crashkernel=256M</code>.
								</li><li class="listitem"><p class="simpara">
									Add the following lines to the end of the <code class="literal">GRUB_CMDLINE_LINUX</code> line (if not present).
								</p><pre class="screen">earlyprintk=ttyS0
console=ttyS0
rootdelay=300</pre></li><li class="listitem"><p class="simpara">
									Remove the following options (if present).
								</p><pre class="screen">rhgb
quiet</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Regenerate the <code class="literal">grub.cfg</code> file.
						</p><pre class="screen"># grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
							Install and enable the Windows Azure Linux Agent (WALinuxAgent). Red Hat Enterprise Linux 8 Application Stream (AppStream) includes the WALinuxAgent. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_managing_and_removing_user-space_components/using-appstream_using-appstream">Using AppStream</a> for more information.
						</p><pre class="screen"># yum install WALinuxAgent -y
# systemctl enable waagent</pre></li><li class="listitem"><p class="simpara">
							Edit the following lines in the <code class="literal">/etc/waagent.conf</code> file to configure swap space for provisioned VMs. Set swap space for whatever is appropriate for your provisioned VMs.
						</p><pre class="screen">Provisioning.DeleteRootPassword=n
ResourceDisk.Filesystem=ext4
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=2048</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Preparing to provision</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Unregister the VM from Red Hat Subscription Manager.
						</p><pre class="screen"># subscription-manager unregister</pre></li><li class="listitem"><p class="simpara">
							Prepare the VM for Azure provisioning by cleaning up the existing provisioning details. Azure reprovisions the VM in Azure. This command generates warnings, which is expected.
						</p><pre class="screen"># waagent -force -deprovision</pre></li><li class="listitem"><p class="simpara">
							Clean the shell history and shut down the VM.
						</p><pre class="screen"># export HISTSIZE=0
# poweroff</pre></li></ol></div></section></section><section class="section" id="convert-the-image_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.4. Converting the image to a fixed VHD format</h2></div></div></div><p>
				All Microsoft Azure VM images must be in a fixed <code class="literal">VHD</code> format. The image must be aligned on a 1 MB boundary before it is converted to VHD. This section describes how to convert the image from <code class="literal">qcow2</code> to a fixed <code class="literal">VHD</code> format and align the image, if necessary. Once you have converted the image, you can upload it to Azure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Convert the image from <code class="literal">qcow2</code> to <code class="literal">raw</code> format.
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f qcow2 -O raw &lt;image-name&gt;.qcow2 &lt;image-name&gt;.raw</pre></li><li class="listitem"><p class="simpara">
						Create a shell script using the contents below.
					</p><pre class="literallayout white-space-pre">#!/bin/bash
MB=$((1024 * 1024))
size=$(qemu-img info -f raw --output json "$1" | gawk 'match($0, /"virtual-size": ([0-9]+),/, val) {print val[1]}')
rounded_size=$((($size/$MB + 1) * $MB))
if [ $(($size % $MB)) -eq  0 ]
then
 echo "Your image is already aligned. You do not need to resize."
 exit 1
fi
echo "rounded size = $rounded_size"
export rounded_size</pre></li><li class="listitem"><p class="simpara">
						Run the script. This example uses the name <code class="literal">align.sh</code>.
					</p><pre class="screen">$ sh align.sh &lt;image-xxx&gt;.raw</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If the message <span class="emphasis"><em>"Your image is already aligned. You do not need to resize."</em></span> displays, proceed to the following step.
							</li><li class="listitem">
								If a value displays, your image is not aligned.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Use the following command to convert the file to a fixed <code class="literal">VHD</code> format.
					</p><p class="simpara">
						<span class="strong strong"><strong>The sample uses qemu-img version 2.12.0.</strong></span>
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f raw -o subformat=fixed,force_size -O vpc &lt;image-xxx&gt;.raw &lt;image.xxx&gt;.vhd</pre><p class="simpara">
						Once converted, the <code class="literal">VHD</code> file is ready to upload to Azure.
					</p></li></ol></div><p>
				<span class="strong strong"><strong>Aligning the image</strong></span>
			</p><p>
				Complete the following steps only if the <code class="literal">raw</code> file is not aligned.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Resize the <code class="literal">raw</code> file using the rounded value displayed when you ran the verification script.
					</p><pre class="screen">$ qemu-img resize -f raw &lt;image-xxx&gt;.raw &lt;rounded-value&gt;</pre></li><li class="listitem"><p class="simpara">
						Convert the <code class="literal">raw</code> image file to a <code class="literal">VHD</code> format.
					</p><p class="simpara">
						<span class="strong strong"><strong>The sample uses qemu-img version 2.12.0.</strong></span>
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f raw -o subformat=fixed,force_size -O vpc &lt;image-xxx&gt;.raw &lt;image.xxx&gt;.vhd</pre><p class="simpara">
						Once converted, the <code class="literal">VHD</code> file is ready to upload to Azure.
					</p></li></ol></div></section><section class="section" id="install-the-azure-cli_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.5. Installing the Azure CLI</h2></div></div></div><p>
				Complete the following steps to install the Azure command line interface (Azure CLI 2.1). Azure CLI 2.1 is a Python-based utility that creates and manages VMs in Azure.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You need to have an account with <a class="link" href="https://azure.microsoft.com/en-us/free/">Microsoft Azure</a> before you can use the Azure CLI.
					</li><li class="listitem">
						The Azure CLI installation requires Python 3.x.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Import the Microsoft repository key.
					</p><pre class="screen">$ sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc</pre></li><li class="listitem"><p class="simpara">
						Create a local Azure CLI repository entry.
					</p><pre class="literallayout white-space-pre">$ sudo sh -c 'echo -e "[azure-cli]\nname=Azure CLI\nbaseurl=https://packages.microsoft.com/yumrepos/azure-cli\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" &gt; /etc/yum.repos.d/azure-cli.repo'</pre></li><li class="listitem"><p class="simpara">
						Update the <code class="literal">yum</code> package index.
					</p><pre class="screen">$ yum check-update</pre></li><li class="listitem"><p class="simpara">
						Check your Python version (<code class="literal">python --version</code>) and install Python 3.x, if necessary.
					</p><pre class="screen">$ sudo yum install python3</pre></li><li class="listitem"><p class="simpara">
						Install the Azure CLI.
					</p><pre class="screen">$ sudo yum install -y azure-cli</pre></li><li class="listitem"><p class="simpara">
						Run the Azure CLI.
					</p><pre class="screen">$ az</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest">Azure CLI</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/cli/azure/reference-index?view=azure-cli-latest">Azure CLI command reference</a>
					</li></ul></div></section><section class="section" id="create-azure-resources_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.6. Creating resources in Azure</h2></div></div></div><p>
				Complete the following procedure to create the Azure resources that you need before you can upload the <code class="literal">VHD</code> file and create the Azure image.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to authenticate your system with Azure and log in.
					</p><pre class="screen">$ az login</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If a browser is available in your environment, the CLI opens your browser to the Azure sign-in page. See <a class="link" href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?view=azure-cli-latest">Sign in with Azure CLI</a> for more information and options.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create a resource group in an Azure region.
					</p><pre class="literallayout white-space-pre">$ az group create --name &lt;resource-group&gt; --location &lt;azure-region&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az group create --name azrhelclirsgrp --location southcentralus
{
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp",
  "location": "southcentralus",
  "managedBy": null,
  "name": "azrhelclirsgrp",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null
}</pre></li><li class="listitem"><p class="simpara">
						Create a storage account. See <a class="link" href="https://docs.microsoft.com/en-us/rest/api/storagerp/srp_sku_types">SKU Types</a> for more information about valid SKU values.
					</p><pre class="literallayout white-space-pre">$ az storage account create -l &lt;azure-region&gt; -n &lt;storage-account-name&gt; -g &lt;resource-group&gt; --sku &lt;sku_type&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage account create -l southcentralus -n azrhelclistact -g azrhelclirsgrp --sku Standard_LRS
{
  "accessTier": null,
  "creationTime": "2017-04-05T19:10:29.855470+00:00",
  "customDomain": null,
  "encryption": null,
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Storage/storageAccounts/azrhelclistact",
  "kind": "StorageV2",
  "lastGeoFailoverTime": null,
  "location": "southcentralus",
  "name": "azrhelclistact",
  "primaryEndpoints": {
    "blob": "https://azrhelclistact.blob.core.windows.net/",
    "file": "https://azrhelclistact.file.core.windows.net/",
    "queue": "https://azrhelclistact.queue.core.windows.net/",
    "table": "https://azrhelclistact.table.core.windows.net/"
},
"primaryLocation": "southcentralus",
"provisioningState": "Succeeded",
"resourceGroup": "azrhelclirsgrp",
"secondaryEndpoints": null,
"secondaryLocation": null,
"sku": {
  "name": "Standard_LRS",
  "tier": "Standard"
},
"statusOfPrimary": "available",
"statusOfSecondary": null,
"tags": {},
  "type": "Microsoft.Storage/storageAccounts"
}</pre></li><li class="listitem"><p class="simpara">
						Get the storage account connection string.
					</p><pre class="literallayout white-space-pre">$ az storage account show-connection-string -n &lt;storage-account-name&gt; -g &lt;resource-group&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage account show-connection-string -n azrhelclistact -g azrhelclirsgrp
{
  "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=azrhelclistact;AccountKey=NreGk...=="
}</pre></li><li class="listitem"><p class="simpara">
						Export the connection string by copying the connection string and pasting it into the following command. This string connects your system to the storage account.
					</p><pre class="literallayout white-space-pre">$ export AZURE_STORAGE_CONNECTION_STRING="&lt;storage-connection-string&gt;"</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ export AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=azrhelclistact;AccountKey=NreGk...=="</pre></li><li class="listitem"><p class="simpara">
						Create the storage container.
					</p><pre class="literallayout white-space-pre">$ az storage container create -n &lt;container-name&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage container create -n azrhelclistcont
{
  "created": true
}</pre></li><li class="listitem"><p class="simpara">
						Create a virtual network.
					</p><pre class="literallayout white-space-pre">$ az network vnet create -g &lt;resource group&gt; --name &lt;vnet-name&gt; --subnet-name &lt;subnet-name&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az network vnet create --resource-group azrhelclirsgrp --name azrhelclivnet1 --subnet-name azrhelclisubnet1
{
  "newVNet": {
    "addressSpace": {
      "addressPrefixes": [
      "10.0.0.0/16"
      ]
  },
  "dhcpOptions": {
    "dnsServers": []
  },
  "etag": "W/\"\"",
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Network/virtualNetworks/azrhelclivnet1",
  "location": "southcentralus",
  "name": "azrhelclivnet1",
  "provisioningState": "Succeeded",
  "resourceGroup": "azrhelclirsgrp",
  "resourceGuid": "0f25efee-e2a6-4abe-a4e9-817061ee1e79",
  "subnets": [
    {
      "addressPrefix": "10.0.0.0/24",
      "etag": "W/\"\"",
      "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Network/virtualNetworks/azrhelclivnet1/subnets/azrhelclisubnet1",
      "ipConfigurations": null,
      "name": "azrhelclisubnet1",
      "networkSecurityGroup": null,
      "provisioningState": "Succeeded",
      "resourceGroup": "azrhelclirsgrp",
      "resourceNavigationLinks": null,
      "routeTable": null
    }
  ],
  "tags": {},
  "type": "Microsoft.Network/virtualNetworks",
  "virtualNetworkPeerings": null
  }
}</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/managed-disks-overview">Azure Managed Disks Overview</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/rest/api/storagerp/srp_sku_types">SKU Types</a>
					</li></ul></div></section><section class="section" id="upload-image-to-azure_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.7. Uploading and creating an Azure image</h2></div></div></div><p>
				Complete the following steps to upload the <code class="literal">VHD</code> file to your container and create an Azure custom image.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The exported storage connection string does not persist after a system reboot. If any of the commands in the following steps fail, export the connection string again.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Upload the <code class="literal">VHD</code> file to the storage container. It may take several minutes. To get a list of storage containers, enter <code class="literal">az storage container list</code>.
					</p><pre class="literallayout white-space-pre">$ az storage blob upload --account-name &lt;storage-account-name&gt; --container-name &lt;container-name&gt; --type page --file &lt;path-to-vhd&gt; --name &lt;image-name&gt;.vhd</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage blob upload --account-name azrhelclistact --container-name azrhelclistcont --type page --file rhel-image-8.vhd --name rhel-image-8.vhd
Percent complete: %100.0</pre></li><li class="listitem"><p class="simpara">
						Get the URL for the uploaded <code class="literal">VHD</code> file to use in the following step.
					</p><pre class="literallayout white-space-pre">$ az storage blob url -c &lt;container-name&gt; -n &lt;image-name&gt;.vhd</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage blob url -c azrhelclistcont -n rhel-image-8.vhd
"https://azrhelclistact.blob.core.windows.net/azrhelclistcont/rhel-image-8.vhd"</pre></li><li class="listitem"><p class="simpara">
						Create the Azure custom image.
					</p><pre class="literallayout white-space-pre">$ az image create -n &lt;image-name&gt; -g &lt;resource-group&gt; -l &lt;azure-region&gt; --source &lt;URL&gt; --os-type linux</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The default hypervisor generation of the virtual machine is V1. You can optionally specify a V2 hypervisor generation by including the option <code class="literal">--hyper-v-generation V2</code>. Generation 2 VMs use a UEFI-based boot architecture. See <a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/generation-2">Support for generation 2 VMs on Azure</a> for information on generation 2 VMs.
						</p><p>
							The command may return the error "Only blobs formatted as VHDs can be imported." This error may mean that the image was not aligned to the nearest 1 MB boundary before it was converted to <code class="literal">VHD</code>.
						</p></div></div><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az image create -n rhel8 -g azrhelclirsgrp2 -l southcentralus --source https://azrhelclistact.blob.core.windows.net/azrhelclistcont/rhel-image-8.vhd --os-type linux</pre></li></ol></div></section><section class="section" id="create-start-the-VM_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.8. Creating and starting the VM in Azure</h2></div></div></div><p>
				The following steps provide the minimum command options to create a managed-disk Azure VM from the image. See <a class="link" href="https://docs.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-create">az vm create</a> for additional options.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to create the VM.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The option <code class="literal">--generate-ssh-keys</code> creates a private/public key pair. Private and public key files are created in <code class="literal">~/.ssh</code> on your system. The public key is added to the <code class="literal">authorized_keys</code> file on the VM for the user specified by the <code class="literal">--admin-username</code> option. See <a class="link" href="index.html#other-methods" title="1.9. Other authentication methods">Other authentication methods</a> for additional information.
						</p></div></div><pre class="literallayout white-space-pre">$ az vm create -g &lt;resource-group&gt; -l &lt;azure-region&gt; -n &lt;vm-name&gt; --vnet-name &lt;vnet-name&gt; --subnet &lt;subnet-name&gt; --size Standard_A2 --os-disk-name &lt;simple-name&gt; --admin-username &lt;administrator-name&gt; --generate-ssh-keys --image &lt;path-to-image&gt;</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az vm create -g azrhelclirsgrp2 -l southcentralus -n rhel-azure-vm-1 --vnet-name azrhelclivnet1 --subnet azrhelclisubnet1  --size Standard_A2 --os-disk-name vm-1-osdisk --admin-username clouduser --generate-ssh-keys --image rhel8

{
  "fqdns": "",
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Compute/virtualMachines/rhel-azure-vm-1",
  "location": "southcentralus",
  "macAddress": "",
  "powerState": "VM running",
  "privateIpAddress": "10.0.0.4",
  "publicIpAddress": "&lt;public-IP-address&gt;",
  "resourceGroup": "azrhelclirsgrp2"</pre><p class="simpara">
						Note the <code class="literal">publicIpAddress</code>. You need this address to log in to the VM in the following step.
					</p></li><li class="listitem"><p class="simpara">
						Start an SSH session and log in to the VM.
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ ssh  -i /home/clouduser/.ssh/id_rsa clouduser@&lt;public-IP-address&gt;.
The authenticity of host ',&lt;public-IP-address&gt;' can't be established.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '&lt;public-IP-address&gt;' (ECDSA) to the list of known hosts.

[clouduser@rhel-azure-vm-1 ~]$</pre></li></ol></div><p>
				If you see a user prompt, you have successfully deployed your Azure VM.
			</p><p>
				You can now go to the Microsoft Azure portal and check the audit logs and properties of your resources. You can manage your VMs directly in this portal. If you are managing multiple VMs, you should use the Azure CLI. The Azure CLI provides a powerful interface to your resources in Azure. Enter <code class="literal">az --help</code> in the CLI or see the <a class="link" href="https://docs.microsoft.com/en-us/cli/azure/reference-index?view=azure-cli-latest">Azure CLI command reference</a> to learn more about the commands you use to manage your VMs in Microsoft Azure.
			</p></section><section class="section" id="other-methods"><div class="titlepage"><div><div><h2 class="title">1.9. Other authentication methods</h2></div></div></div><p>
				While recommended for increased security, using the Azure-generated key pair is not required. The following examples show two methods for SSH authentication.
			</p><p>
				<span class="strong strong"><strong>Example 1:</strong></span> These command options provision a new VM without generating a public key file. They allow SSH authentication using a password.
			</p><pre class="literallayout white-space-pre">$ az vm create -g &lt;resource-group&gt; -l &lt;azure-region&gt; -n &lt;vm-name&gt; --vnet-name &lt;vnet-name&gt; --subnet &lt;subnet-name&gt; --size Standard_A2 --os-disk-name &lt;simple-name&gt; --authentication-type password --admin-username &lt;administrator-name&gt; --admin-password &lt;ssh-password&gt; --image &lt;path-to-image&gt;</pre><pre class="literallayout white-space-pre">$ ssh &lt;admin-username&gt;@&lt;public-ip-address&gt;</pre><p>
				<span class="strong strong"><strong>Example 2:</strong></span> These command options provision a new Azure VM and allow SSH authentication using an existing public key file.
			</p><pre class="literallayout white-space-pre">$ az vm create -g &lt;resource-group&gt; -l &lt;azure-region&gt; -n &lt;vm-name&gt; --vnet-name &lt;vnet-name&gt; --subnet &lt;subnet-name&gt; --size Standard_A2 --os-disk-name &lt;simple-name&gt; --admin-username &lt;administrator-name&gt; --ssh-key-value &lt;path-to-existing-ssh-key&gt; --image &lt;path-to-image&gt;</pre><pre class="literallayout white-space-pre">$ ssh -i &lt;path-to-existing-ssh-key&gt; &lt;admin-username&gt;@&lt;public-ip-address&gt;</pre></section><section class="section" id="attaching-subscriptions_deploying-a-virtual-machine-on-microsoft-azure"><div class="titlepage"><div><div><h2 class="title">1.10. Attaching Red Hat subscriptions</h2></div></div></div><p>
				Complete the following steps to attach the subscriptions you previously enabled through the Red Hat Cloud Access program.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You must have enabled your subscriptions.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Register your system.
					</p><pre class="screen">subscription-manager register --auto-attach</pre></li><li class="listitem"><p class="simpara">
						Attach your subscriptions.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								You can use an activation key to attach subscriptions. See <a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>.
							</li><li class="listitem">
								Alternatively, you can manually attach a subscription using the ID of the subscription pool (Pool ID). See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>.
							</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html-single/rhsm/index">Using and Configuring Red Hat Subscription Manager</a>
					</li></ul></div></section></section><section class="chapter" id="configuring-rhel-high-availability-on-azure_cloud-content"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Configuring a Red Hat High Availability cluster on Microsoft Azure</h1></div></div></div><p>
			This chapter includes information and procedures for configuring a Red Hat High Availability (HA) cluster on Azure using Azure virtual machine (VM) instances as cluster nodes. The procedures in this chapter assume you are creating a custom image for Azure. You have a number of options for obtaining the RHEL 8 images you use for your cluster. See <a class="link" href="index.html#azure-image-options_deploying-a-virtual-machine-on-microsoft-azure" title="1.1. Red Hat Enterprise Linux image options on Azure">Red Hat Enterprise Linux Image Options on Azure</a> for information on image options for Azure.
		</p><p>
			The chapter includes prerequisite procedures for setting up your environment for Azure. Once you have set up your environment, you can create and configure Azure VM instances.
		</p><p>
			The chapter also includes procedures specific to the creation of HA clusters, which transform individual nodes into a cluster of HA nodes on Azure. These include procedures for installing the High Availability packages and agents on each cluster node, configuring fencing, and installing Azure network resource agents.
		</p><p>
			The chapter refers to the Azure documentation in a number of places. For many procedures, see the referenced Azure documentation for more information.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Sign up for a <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal account</a>.
				</li><li class="listitem">
					Sign up for a <a class="link" href="https://azure.microsoft.com/en-us/">Microsoft Azure account</a> with administrator privileges.
				</li><li class="listitem">
					You need to install Azure command line interface (CLI). For more information, see <a class="xref" href="index.html#install-the-azure-cli_deploying-a-virtual-machine-on-microsoft-azure" title="1.5. Installing the Azure CLI">Section 1.5, “Installing the Azure CLI”</a>.
				</li><li class="listitem">
					Enable your subscriptions in the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>. The Red Hat Cloud Access program allows you to move your Red Hat subscriptions from physical or on-premise systems onto Azure with full support from Red Hat.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/3131341">Support Policies for RHEL High Availability Clusters - Microsoft Azure Virtual Machines as Cluster Members</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_high_availability_clusters/index">Configuring and Managing High Availability Clusters</a>
				</li></ul></div><section class="section" id="create-azure-resources-for-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.1. Creating resources in Azure</h2></div></div></div><p>
				Complete the following procedure to create a region, resource group, storage account, virtual network, and availability set. You need these resources to complete subsequent tasks in this chapter.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Authenticate your system with Azure and log in.
					</p><pre class="screen">$ az login</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If a browser is available in your environment, the CLI opens your browser to the Azure sign-in page.
						</p></div></div><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az login
To sign in, use a web browser to open the page https://aka.ms/devicelogin and enter the code FDMSCMETZ to authenticate.
  [
    {
      "cloudName": "AzureCloud",
      "id": "<span class="emphasis"><em>Subscription ID</em></span>",
      "isDefault": true,
      "name": "<span class="emphasis"><em>MySubscriptionName</em></span>",
      "state": "Enabled",
      "tenantId": "<span class="emphasis"><em>Tenant ID</em></span>",
      "user": {
        "name": "<span class="emphasis"><em>clouduser@company.com</em></span>",
        "type": "user"
      }
    }
  ]</pre></li><li class="listitem"><p class="simpara">
						Create a resource group in an Azure region.
					</p><pre class="literallayout white-space-pre">$ az group create --name <span class="emphasis"><em>resource-group</em></span> --location <span class="emphasis"><em>azure-region</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az group create --name <span class="emphasis"><em>azrhelclirsgrp</em></span> --location <span class="emphasis"><em>southcentralus</em></span>
{
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp",
  "location": "southcentralus",
  "managedBy": null,
  "name": "azrhelclirsgrp",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null
}</pre></li><li class="listitem"><p class="simpara">
						Create a storage account.
					</p><pre class="literallayout white-space-pre">$ az storage account create -l <span class="emphasis"><em>azure-region</em></span> -n <span class="emphasis"><em>storage-account-name</em></span> -g <span class="emphasis"><em>resource-group</em></span> --sku <span class="emphasis"><em>sku_type</em></span> --kind StorageV2</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage account create -l southcentralus -n azrhelclistact -g azrhelclirsgrp --sku Standard_LRS --kind StorageV2
{
  "accessTier": null,
  "creationTime": "2017-04-05T19:10:29.855470+00:00",
  "customDomain": null,
  "encryption": null,
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Storage/storageAccounts/azrhelclistact",
  "kind": "StorageV2",
  "lastGeoFailoverTime": null,
  "location": "southcentralus",
  "name": "azrhelclistact",
  "primaryEndpoints": {
    "blob": "https://azrhelclistact.blob.core.windows.net/",
    "file": "https://azrhelclistact.file.core.windows.net/",
    "queue": "https://azrhelclistact.queue.core.windows.net/",
    "table": "https://azrhelclistact.table.core.windows.net/"
},
"primaryLocation": "southcentralus",
"provisioningState": "Succeeded",
"resourceGroup": "azrhelclirsgrp",
"secondaryEndpoints": null,
"secondaryLocation": null,
"sku": {
  "name": "Standard_LRS",
  "tier": "Standard"
},
"statusOfPrimary": "available",
"statusOfSecondary": null,
"tags": {},
  "type": "Microsoft.Storage/storageAccounts"
}</pre></li><li class="listitem"><p class="simpara">
						Get the storage account connection string.
					</p><pre class="literallayout white-space-pre">$ az storage account show-connection-string -n <span class="emphasis"><em>storage-account-name</em></span> -g <span class="emphasis"><em>resource-group</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage account show-connection-string -n azrhelclistact -g azrhelclirsgrp
{
  "connectionString": "DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=azrhelclistact;AccountKey=NreGk...=="
}</pre></li><li class="listitem"><p class="simpara">
						Export the connection string by copying the connection string and pasting it into the following command. This string connects your system to the storage account.
					</p><pre class="literallayout white-space-pre">$ export AZURE_STORAGE_CONNECTION_STRING="<span class="emphasis"><em>storage-connection-string</em></span>"</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ export AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;EndpointSuffix=core.windows.net;AccountName=azrhelclistact;AccountKey=NreGk...=="</pre></li><li class="listitem"><p class="simpara">
						Create the storage container.
					</p><pre class="literallayout white-space-pre">$ az storage container create -n <span class="emphasis"><em>container-name</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage container create -n azrhelclistcont
{
  "created": true
}</pre></li><li class="listitem"><p class="simpara">
						Create a virtual network. All cluster nodes must be in the same virtual network.
					</p><pre class="literallayout white-space-pre">$ az network vnet create -g <span class="emphasis"><em>resource group</em></span> --name <span class="emphasis"><em>vnet-name</em></span> --subnet-name <span class="emphasis"><em>subnet-name</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az network vnet create --resource-group azrhelclirsgrp --name azrhelclivnet1 --subnet-name azrhelclisubnet1
{
  "newVNet": {
    "addressSpace": {
      "addressPrefixes": [
      "10.0.0.0/16"
      ]
  },
  "dhcpOptions": {
    "dnsServers": []
  },
  "etag": "W/\"\"",
  "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Network/virtualNetworks/azrhelclivnet1",
  "location": "southcentralus",
  "name": "azrhelclivnet1",
  "provisioningState": "Succeeded",
  "resourceGroup": "azrhelclirsgrp",
  "resourceGuid": "0f25efee-e2a6-4abe-a4e9-817061ee1e79",
  "subnets": [
    {
      "addressPrefix": "10.0.0.0/24",
      "etag": "W/\"\"",
      "id": "/subscriptions//resourceGroups/azrhelclirsgrp/providers/Microsoft.Network/virtualNetworks/azrhelclivnet1/subnets/azrhelclisubnet1",
      "ipConfigurations": null,
      "name": "azrhelclisubnet1",
      "networkSecurityGroup": null,
      "provisioningState": "Succeeded",
      "resourceGroup": "azrhelclirsgrp",
      "resourceNavigationLinks": null,
      "routeTable": null
    }
  ],
  "tags": {},
  "type": "Microsoft.Network/virtualNetworks",
  "virtualNetworkPeerings": null
  }
}</pre></li><li class="listitem"><p class="simpara">
						Create an availability set. All cluster nodes must be in the same availability set.
					</p><pre class="literallayout white-space-pre">$ az vm availability-set create --name <span class="emphasis"><em>MyAvailabilitySet</em></span> --resource-group <span class="emphasis"><em>MyResourceGroup</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az vm availability-set create --name rhelha-avset1 --resource-group azrhelclirsgrp
{
  "additionalProperties": {},
    "id": "/subscriptions/.../resourceGroups/azrhelclirsgrp/providers/Microsoft.Compute/availabilitySets/rhelha-avset1",
    "location": "southcentralus",
    "name": “rhelha-avset1",
    "platformFaultDomainCount": 2,
    "platformUpdateDomainCount": 5,

...omitted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?view=azure-cli-latest">Sign in with Azure CLI</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/rest/api/storagerp/srp_sku_types">SKU Types</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/managed-disks-overview">Azure Managed Disks Overview</a>
					</li></ul></div></section><section class="section" id="required-system-packages-for-azure-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.2. Required system packages for HA</h2></div></div></div><p>
				The procedure assumes you are creating a VM image for Azure HA using Red Hat Enterprise Linux. To successfully complete the procedure, you need to have the packages listed in the following table installed.
			</p><div class="table" id="idm139836706394976"><p class="title"><strong>Table 2.1. System packages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836698007712" scope="col">Package</th><th align="left" valign="top" id="idm139836698006624" scope="col">Repository</th><th align="left" valign="top" id="idm139836698005536" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836698007712"> <p>
								libvirt
							</p>
							 </td><td align="left" valign="top" headers="idm139836698006624"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836698005536"> <p>
								Open source API, daemon, and management tool for managing platform virtualization
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836698007712"> <p>
								virt-install
							</p>
							 </td><td align="left" valign="top" headers="idm139836698006624"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836698005536"> <p>
								A command-line utility for building VMs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836698007712"> <p>
								libguestfs
							</p>
							 </td><td align="left" valign="top" headers="idm139836698006624"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836698005536"> <p>
								A library for accessing and modifying virtual machine file systems
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836698007712"> <p>
								libguestfs-tools
							</p>
							 </td><td align="left" valign="top" headers="idm139836698006624"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836698005536"> <p>
								System administration tools for virtual machines; includes the guestfish utility
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="azure-vm-configuration-settings_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.3. Azure virtual machine configuration settings</h2></div></div></div><p>
				Azure VMs must have the following configuration settings. Some of these settings are enabled during the initial VM creation. Other settings are set when provisioning the VM image for Azure. Keep these settings in mind as you move through the procedures, and refer back to them if you need to.
			</p><div class="table" id="idm139836700507024"><p class="title"><strong>Table 2.2. VM configuration settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836697179632" scope="col">Setting</th><th align="left" valign="top" id="idm139836697178544" scope="col">Recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836697179632"> <p>
								ssh
							</p>
							 </td><td align="left" valign="top" headers="idm139836697178544"> <p>
								ssh must be enabled to provide remote access to your Azure VMs.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697179632"> <p>
								dhcp
							</p>
							 </td><td align="left" valign="top" headers="idm139836697178544"> <p>
								The primary virtual adapter should be configured for dhcp (IPv4 only).
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697179632"> <p>
								Swap Space
							</p>
							 </td><td align="left" valign="top" headers="idm139836697178544"> <p>
								Do not create a dedicated swap file or swap partition. You can configure swap space with the Windows Azure Linux Agent (WALinuxAgent).
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697179632"> <p>
								NIC
							</p>
							 </td><td align="left" valign="top" headers="idm139836697178544"> <p>
								Choose <span class="strong strong"><strong>virtio</strong></span> for the primary virtual network adapter.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697179632"> <p>
								encryption
							</p>
							 </td><td align="left" valign="top" headers="idm139836697178544"> <p>
								For custom images, use Network Bound Disk Encryption (NBDE) for full disk encryption on Azure.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="installing-hyperv-drivers_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.4. Installing Hyper-V device drivers</h2></div></div></div><p>
				Microsoft provides network and storage device drivers as part of their Linux Integration Services for Hyper-V package. You may need to install Hyper-V device drivers on the VM image prior to provisioning it as an Azure VM. Use the <code class="literal">lsinitrd | grep hv</code> command to verify that the drivers are installed.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following <code class="literal command">grep</code> command to determine if the required Hyper-V device drivers are installed.
					</p><pre class="literallayout white-space-pre"># lsinitrd | grep hv</pre><p class="simpara">
						In the example below, all required drivers are installed.
					</p><pre class="literallayout white-space-pre"># lsinitrd | grep hv
drwxr-xr-x   2 root     root            0 Aug 12 14:21 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/hv
-rw-r--r--   1 root     root        31272 Aug 11 08:45 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/hv/hv_vmbus.ko.xz
-rw-r--r--   1 root     root        25132 Aug 11 08:46 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/net/hyperv/hv_netvsc.ko.xz
-rw-r--r--   1 root     root         9796 Aug 11 08:45 usr/lib/modules/3.10.0-932.el7.x86_64/kernel/drivers/scsi/hv_storvsc.ko.xz</pre><p class="simpara">
						If all the drivers are not installed, complete the remaining steps.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							An <code class="literal">hv_vmbus</code> driver may exist in the environment. Even if this driver is present, complete the following steps.
						</p></div></div></li><li class="listitem">
						Create a file named <code class="literal">hv.conf</code> in <code class="literal">/etc/dracut.conf.d</code>.
					</li><li class="listitem"><p class="simpara">
						Add the following driver parameters to the <code class="literal">hv.conf</code> file.
					</p><pre class="screen">add_drivers+=" hv_vmbus "
add_drivers+=" hv_netvsc "
add_drivers+=" hv_storvsc "</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Note the spaces before and after the quotes, for example, <code class="literal">add_drivers+=" hv_vmbus "</code>. This ensures that unique drivers are loaded in the event that other Hyper-V drivers already exist in the environment.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Regenerate the <code class="literal">initramfs</code> image.
					</p><pre class="screen"># dracut -f -v --regenerate-all</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Reboot the machine.
					</li><li class="listitem">
						Run the <code class="literal command">lsinitrd | grep hv</code> command to verify that the drivers are installed.
					</li></ol></div></section><section class="section" id="making-configuration-changes_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.5. Making additional configuration changes</h2></div></div></div><p>
				The VM requires further configuration changes to operate in Azure. Perform the following procedure to make the additional changes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						If necessary, power on the VM.
					</li><li class="listitem"><p class="simpara">
						Register the VM and enable the Red Hat Enterprise Linux 8 repository.
					</p><pre class="screen"># subscription-manager register --auto-attach</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Stopping and removing cloud-init</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Stop the <code class="literal">cloud-init</code> service (if present).
					</p><pre class="screen"># systemctl stop cloud-init</pre></li><li class="listitem"><p class="simpara">
						Remove the <code class="literal">cloud-init</code> software.
					</p><pre class="screen"># yum remove cloud-init</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Completing other VM changes</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/ssh/sshd_config</code> file and enable password authentication.
					</p><pre class="screen">PasswordAuthentication yes</pre></li><li class="listitem"><p class="simpara">
						Set a generic host name.
					</p><pre class="screen"># hostnamectl set-hostname localhost.localdomain</pre></li><li class="listitem"><p class="simpara">
						Edit (or create) the <code class="literal">/etc/sysconfig/network-scripts/ifcfg-eth0</code> file. Use only the parameters listed below.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">ifcfg-eth0</code> file does not exist on the RHEL 8 DVD ISO image and must be created.
						</p></div></div><pre class="screen">DEVICE="eth0"
ONBOOT="yes"
BOOTPROTO="dhcp"
TYPE="Ethernet"
USERCTL="yes"
PEERDNS="yes"
IPV6INIT="no"</pre></li><li class="listitem"><p class="simpara">
						Remove all persistent network device rules (if present).
					</p><pre class="screen"># rm -f /etc/udev/rules.d/70-persistent-net.rules
# rm -f /etc/udev/rules.d/75-persistent-net-generator.rules
# rm -f /etc/udev/rules.d/80-net-name-slot-rules</pre></li><li class="listitem"><p class="simpara">
						Set <code class="literal">ssh</code> to start automatically.
					</p><pre class="screen"># systemctl enable sshd
# systemctl is-enabled sshd</pre></li><li class="listitem"><p class="simpara">
						Modify the kernel boot parameters.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Add <code class="literal">crashkernel=256M</code> to the start of the <code class="literal">GRUB_CMDLINE_LINUX</code> line in the <code class="literal">/etc/default/grub</code> file. If <code class="literal">crashkernel=auto</code> is present, change it to <code class="literal">crashkernel=256M</code>.
							</li><li class="listitem"><p class="simpara">
								Add the following lines to the end of the <code class="literal">GRUB_CMDLINE_LINUX</code> line (if not present).
							</p><pre class="screen">earlyprintk=ttyS0
console=ttyS0
rootdelay=300</pre></li><li class="listitem"><p class="simpara">
								Remove the following options (if present).
							</p><pre class="screen">rhgb
quiet</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Regenerate the <code class="literal">grub.cfg</code> file.
					</p><pre class="screen"># grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
						Install and enable the Windows Azure Linux Agent (WALinuxAgent). Red Hat Enterprise Linux 8 Application Stream (AppStream) includes the WALinuxAgent. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/installing_managing_and_removing_user-space_components/using-appstream_using-appstream">Using AppStream</a> for more information.
					</p><pre class="screen"># yum install WALinuxAgent -y
# systemctl enable waagent</pre></li><li class="listitem"><p class="simpara">
						Edit the following lines in the <code class="literal">/etc/waagent.conf</code> file to configure swap space for provisioned VMs. Set swap space for whatever is appropriate for your provisioned VMs.
					</p><pre class="screen">Provisioning.DeleteRootPassword=n
ResourceDisk.Filesystem=ext4
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=2048</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Preparing to provision</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Unregister the VM from Red Hat Subscription Manager.
					</p><pre class="screen"># subscription-manager unregister</pre></li><li class="listitem"><p class="simpara">
						Prepare the VM for Azure provisioning by cleaning up the existing provisioning details. Azure reprovisions the VM in Azure. This command generates warnings, which is expected.
					</p><pre class="screen"># waagent -force -deprovision</pre></li><li class="listitem"><p class="simpara">
						Clean the shell history and shut down the VM.
					</p><pre class="screen"># export HISTSIZE=0
# poweroff</pre></li></ol></div></section><section class="section" id="azure-create-an-azure-directory-application-in-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.6. Creating an Azure Active Directory Application</h2></div></div></div><p>
				Complete the following procedures to create an Azure AD Application. The Azure AD Application authorizes and automates access for HA operations for all nodes in the cluster.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You need to install <a class="link" href="index.html#install-the-azure-cli_deploying-a-virtual-machine-on-microsoft-azure" title="1.5. Installing the Azure CLI">Azure Command Line Interface (CLI)</a>.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Ensure you are an Administrator or Owner for the Microsoft Azure subscription. You need this authorization to create an Azure AD application.
					</li><li class="listitem"><p class="simpara">
						Log in to your Azure account.
					</p><pre class="literallayout white-space-pre">$ az login</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create the Azure AD Application. To use your own password, add the <code class="literal command">--password</code> option to the command. Ensure that you create a strong password.
					</p><pre class="literallayout white-space-pre">$ az ad sp create-for-rbac --name <span class="emphasis"><em>FencingApplicationName</em></span> --role owner --scopes "/subscriptions/<span class="emphasis"><em>SubscriptionID</em></span>/resourceGroups/<span class="emphasis"><em>MyResourseGroup</em></span>"</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost ~] $ az ad sp create-for-rbac --name FencingApp --role owner --scopes "/subscriptions/2586c64b-xxxxxx-xxxxxxx-xxxxxxx/resourceGroups/azrhelclirsgrp"
Retrying role assignment creation: 1/36
Retrying role assignment creation: 2/36
Retrying role assignment creation: 3/36
{
  "appId": "1a3dfe06-df55-42ad-937b-326d1c211739",
  "displayName": "FencingApp",
  "name": "http://FencingApp",
  "password": "43a603f0-64bb-482e-800d-402efe5f3d47",
  "tenant": "77ecefb6-xxxxxxxxxx-xxxxxxx-757a69cb9485"
}</pre></li><li class="listitem"><p class="simpara">
						Save the following information before proceeding. You need this information to set up the fencing agent.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Azure AD Application ID
							</li><li class="listitem">
								Azure AD Application Password
							</li><li class="listitem">
								Tenant ID
							</li><li class="listitem">
								Microsoft Azure Subscription ID
							</li></ul></div></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://docs.microsoft.com/en-us/azure/role-based-access-control/check-access">View the access a user has to Azure resources</a>
				</p></div></section><section class="section" id="convert-the-image_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.7. Converting the image to a fixed VHD format</h2></div></div></div><p>
				All Microsoft Azure VM images must be in a fixed <code class="literal">VHD</code> format. The image must be aligned on a 1 MB boundary before it is converted to VHD. This section describes how to convert the image from <code class="literal">qcow2</code> to a fixed <code class="literal">VHD</code> format and align the image, if necessary. Once you have converted the image, you can upload it to Azure.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Convert the image from <code class="literal">qcow2</code> to <code class="literal">raw</code> format.
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f qcow2 -O raw &lt;image-name&gt;.qcow2 &lt;image-name&gt;.raw</pre></li><li class="listitem"><p class="simpara">
						Create a shell script using the contents below.
					</p><pre class="literallayout white-space-pre">#!/bin/bash
MB=$((1024 * 1024))
size=$(qemu-img info -f raw --output json "$1" | gawk 'match($0, /"virtual-size": ([0-9]+),/, val) {print val[1]}')
rounded_size=$((($size/$MB + 1) * $MB))
if [ $(($size % $MB)) -eq  0 ]
then
 echo "Your image is already aligned. You do not need to resize."
 exit 1
fi
echo "rounded size = $rounded_size"
export rounded_size</pre></li><li class="listitem"><p class="simpara">
						Run the script. This example uses the name <code class="literal">align.sh</code>.
					</p><pre class="screen">$ sh align.sh &lt;image-xxx&gt;.raw</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If the message <span class="emphasis"><em>"Your image is already aligned. You do not need to resize."</em></span> displays, proceed to the following step.
							</li><li class="listitem">
								If a value displays, your image is not aligned.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Use the following command to convert the file to a fixed <code class="literal">VHD</code> format.
					</p><p class="simpara">
						<span class="strong strong"><strong>The sample uses qemu-img version 2.12.0.</strong></span>
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f raw -o subformat=fixed,force_size -O vpc &lt;image-xxx&gt;.raw &lt;image.xxx&gt;.vhd</pre><p class="simpara">
						Once converted, the <code class="literal">VHD</code> file is ready to upload to Azure.
					</p></li></ol></div><p>
				<span class="strong strong"><strong>Aligning the image</strong></span>
			</p><p>
				Complete the following steps only if the <code class="literal">raw</code> file is not aligned.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Resize the <code class="literal">raw</code> file using the rounded value displayed when you ran the verification script.
					</p><pre class="screen">$ qemu-img resize -f raw &lt;image-xxx&gt;.raw &lt;rounded-value&gt;</pre></li><li class="listitem"><p class="simpara">
						Convert the <code class="literal">raw</code> image file to a <code class="literal">VHD</code> format.
					</p><p class="simpara">
						<span class="strong strong"><strong>The sample uses qemu-img version 2.12.0.</strong></span>
					</p><pre class="literallayout white-space-pre">$ qemu-img convert -f raw -o subformat=fixed,force_size -O vpc &lt;image-xxx&gt;.raw &lt;image.xxx&gt;.vhd</pre><p class="simpara">
						Once converted, the <code class="literal">VHD</code> file is ready to upload to Azure.
					</p></li></ol></div></section><section class="section" id="upload-image-to-azure_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.8. Uploading and creating an Azure image</h2></div></div></div><p>
				Complete the following steps to upload the <code class="literal">VHD</code> file to your container and create an Azure custom image.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The exported storage connection string does not persist after a system reboot. If any of the commands in the following steps fail, export the connection string again.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Upload the <code class="literal">VHD</code> file to the storage container. It may take several minutes. To get a list of storage containers, enter <code class="literal">az storage container list</code>.
					</p><pre class="literallayout white-space-pre">$ az storage blob upload --account-name &lt;storage-account-name&gt; --container-name &lt;container-name&gt; --type page --file &lt;path-to-vhd&gt; --name &lt;image-name&gt;.vhd</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage blob upload --account-name azrhelclistact --container-name azrhelclistcont --type page --file rhel-image-8.vhd --name rhel-image-8.vhd
Percent complete: %100.0</pre></li><li class="listitem"><p class="simpara">
						Get the URL for the uploaded <code class="literal">VHD</code> file to use in the following step.
					</p><pre class="literallayout white-space-pre">$ az storage blob url -c &lt;container-name&gt; -n &lt;image-name&gt;.vhd</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az storage blob url -c azrhelclistcont -n rhel-image-8.vhd
"https://azrhelclistact.blob.core.windows.net/azrhelclistcont/rhel-image-8.vhd"</pre></li><li class="listitem"><p class="simpara">
						Create the Azure custom image.
					</p><pre class="literallayout white-space-pre">$ az image create -n &lt;image-name&gt; -g &lt;resource-group&gt; -l &lt;azure-region&gt; --source &lt;URL&gt; --os-type linux</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The default hypervisor generation of the virtual machine is V1. You can optionally specify a V2 hypervisor generation by including the option <code class="literal">--hyper-v-generation V2</code>. Generation 2 VMs use a UEFI-based boot architecture. See <a class="link" href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/generation-2">Support for generation 2 VMs on Azure</a> for information on generation 2 VMs.
						</p><p>
							The command may return the error "Only blobs formatted as VHDs can be imported." This error may mean that the image was not aligned to the nearest 1 MB boundary before it was converted to <code class="literal">VHD</code>.
						</p></div></div><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost]$ az image create -n rhel8 -g azrhelclirsgrp2 -l southcentralus --source https://azrhelclistact.blob.core.windows.net/azrhelclistcont/rhel-image-8.vhd --os-type linux</pre></li></ol></div></section><section class="section" id="azure-install-red-hat-ha-packages-and-agents_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.9. Installing Red Hat HA packages and agents</h2></div></div></div><p>
				Complete the following steps on all nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Launch an SSH terminal session and connect to the VM using the administrator name and public IP address.
					</p><pre class="literallayout white-space-pre">$ ssh administrator@PublicIP</pre><p class="simpara">
						To get the public IP address for an Azure VM, open the VM properties in the Azure portal or enter the following Azure CLI command.
					</p><pre class="literallayout white-space-pre">$ az vm list -g &lt;resource-group&gt; -d --output table</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[clouduser@localhost ~] $ az vm list -g <span class="emphasis"><em>azrhelclirsgrp</em></span> -d --output table
Name    ResourceGroup           PowerState      PublicIps        Location
------  ----------------------  --------------  -------------    --------------
node01  azrhelclirsgrp          VM running      192.98.152.251    southcentralus</pre></li><li class="listitem"><p class="simpara">
						Register the VM with Red Hat.
					</p><pre class="literallayout white-space-pre">$ sudo -i
# subscription-manager register --auto-attach</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If <code class="literal">--auto-attach</code> fails, manually register the VM to your subscription.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Disable all repositories.
					</p><pre class="literallayout white-space-pre"># subscription-manager repos --disable=*</pre></li><li class="listitem"><p class="simpara">
						Enable the RHEL 8 Server and RHEL 8 Server HA repositories.
					</p><pre class="literallayout white-space-pre"># subscription-manager repos --enable=rhel-8-server-rpms
# subscription-manager repos --enable=rhel-ha-for-rhel-8-server-rpms</pre></li><li class="listitem"><p class="simpara">
						Update all packages.
					</p><pre class="literallayout white-space-pre"># yum update -y</pre></li><li class="listitem"><p class="simpara">
						Install the Red Hat High Availability Add-On software packages, along with all available fencing agents from the High Availability channel.
					</p><pre class="literallayout white-space-pre"># yum install pcs pacemaker fence-agents-azure-arm</pre></li><li class="listitem"><p class="simpara">
						The user <code class="literal">hacluster</code> was created during the pcs and pacemaker installation in the previous step. Create a password for <code class="literal">hacluster</code> on all cluster nodes. Use the same password for all nodes.
					</p><pre class="literallayout white-space-pre"># passwd hacluster</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">high availability</code> service to the RHEL Firewall if <code class="literal">firewalld.service</code> is installed.
					</p><pre class="literallayout white-space-pre"># firewall-cmd --permanent --add-service=high-availability
# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcs</code> service and enable it to start on boot.
					</p><pre class="literallayout white-space-pre"># systemctl start pcsd.service
# systemctl enable pcsd.service

Created symlink from /etc/systemd/system/multi-user.target.wants/pcsd.service to /usr/lib/systemd/system/pcsd.service.</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Ensure the <code class="literal">pcs</code> service is running.
				</p></div><pre class="literallayout white-space-pre"># systemctl status pcsd.service
pcsd.service - PCS GUI and remote configuration interface
Loaded: loaded (/usr/lib/systemd/system/pcsd.service; enabled; vendor preset: disabled)
Active: active (running) since Fri 2018-02-23 11:00:58 EST; 1min 23s ago
Docs: man:pcsd(8)
          man:pcs(8)
Main PID: 46235 (pcsd)
  CGroup: /system.slice/pcsd.service
          └─46235 /usr/bin/ruby /usr/lib/pcsd/pcsd &gt; /dev/null &amp;</pre></section><section class="section" id="azure-create-cluster-in-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.10. Creating a cluster</h2></div></div></div><p>
				Complete the following steps to create the cluster of nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On one of the nodes, enter the following command to authenticate the pcs user <code class="literal">hacluster</code>. In the command, specify the name of each node in the cluster.
					</p><pre class="literallayout white-space-pre"># pcs host auth  <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> <span class="emphasis"><em>hostname3</em></span>
Username: hacluster
Password:
hostname1: Authorized
hostname2: Authorized
hostname3: Authorized</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs host auth node01 node02 node03
Username: hacluster
Password:
node01: Authorized
node02: Authorized
node03: Authorized</pre></li><li class="listitem"><p class="simpara">
						Create the cluster.
					</p><pre class="literallayout white-space-pre"># pcs cluster setup cluster-name <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> <span class="emphasis"><em>hostname3</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster setup --name newcluster node01 node02 node03

...omitted

Synchronizing pcsd certificates on nodes node01, node02, node03...
node02: Success
node03: Success
node01: Success
Restarting pcsd on the nodes in order to reload the certificates...
node02: Success
node03: Success
node01: Success</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the cluster.
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster enable --all</pre></li><li class="listitem"><p class="simpara">
						Start the cluster.
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster start --all</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster enable --all
node02: Cluster Enabled
node03: Cluster Enabled
node01: Cluster Enabled

[root@node01 clouduser]# pcs cluster start --all
node02: Starting Cluster...
node03: Starting Cluster...
node01: Starting Cluster...</pre></li></ol></div></section><section class="section" id="azure-fencing-overview-in-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.11. Fencing overview</h2></div></div></div><p>
				If communication with a single node in the cluster fails, then other nodes in the cluster must be able to restrict or release access to resources that the failed cluster node may have access to. This cannot be accomplished by contacting the cluster node itself as the cluster node may not be responsive. Instead, you must provide an external method, which is called fencing with a fence agent.
			</p><p>
				A node that is unresponsive may still be accessing data. The only way to be certain that your data is safe is to fence the node using STONITH. STONITH is an acronym for "Shoot The Other Node In The Head," and it protects your data from being corrupted by rogue nodes or concurrent access. Using STONITH, you can be certain that a node is truly offline before allowing the data to be accessed from another node.
			</p><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://access.redhat.com/solutions/15575">Fencing in Red Hat High Availability Cluster</a>
				</p></div></section><section class="section" id="azure-create-a-fencing-device-in-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.12. Creating a fencing device</h2></div></div></div><p>
				Complete the following steps to configure fencing. Complete these commands from any node in the cluster
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You need to set the cluster property <code class="literal">stonith-enabled</code> to <code class="literal">true</code>.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify the Azure node name for each RHEL VM. You use the Azure node names to configure the fence device.
					</p><pre class="literallayout"># fence_azure_arm -l <span class="emphasis"><em>AD-Application-ID</em></span> -p <span class="emphasis"><em>AD-Password</em></span> --resourceGroup <span class="emphasis"><em>MyResourceGroup</em></span> --tenantId <span class="emphasis"><em>Tenant-ID</em></span> --subscriptionId <span class="emphasis"><em>Subscription-ID</em></span> -o list</pre><p class="simpara">
						Example:
					</p><pre class="literallayout">[root@node01 clouduser]# fence_azure_arm -l e04a6a49-9f00-xxxx-xxxx-a8bdda4af447 -p z/a05AwCN0IzAjVwXXXXXXXEWIoeVp0xg7QT//JE= --resourceGroup azrhelclirsgrp --tenantId 77ecefb6-cff0-XXXX-XXXX-757XXXX9485 --subscriptionId XXXXXXXX-38b4-4527-XXXX-012d49dfc02c -o list
node01,
node02,
node03,</pre></li><li class="listitem"><p class="simpara">
						View the options for the Azure ARM STONITH agent.
					</p><pre class="literallayout">pcs stonith describe fence_azure_arm</pre><p class="simpara">
						Example:
					</p><pre class="literallayout"># pass:quotes[<code class="literal">pcs stonith describe fence_apc</code>]
Stonith options:
password: Authentication key
password_script: Script to run to retrieve password</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							For fence agents that provide a method option, do not specify a value of cycle as it is not supported and can cause data corruption.
						</p></div></div><p class="simpara">
						Some fence devices can fence only a single node, while other devices can fence multiple nodes. The parameters you specify when you create a fencing device depend on what your fencing device supports and requires.
					</p><p class="simpara">
						You can use the <code class="literal">pcmk_host_list</code> parameter when creating a fencing device to specify all of the machines that are controlled by that fencing device.
					</p><p class="simpara">
						You can use <code class="literal">pcmk_host_map</code> parameter when creating a fencing device to map host names to the specifications that comprehends the fence device.
					</p></li><li class="listitem"><p class="simpara">
						Create a fence device.
					</p><pre class="literallayout"># pcs stonith create <span class="emphasis"><em>clusterfence</em></span> fence_azure_arm</pre></li><li class="listitem"><p class="simpara">
						Test the fencing agent for one of the other nodes.
					</p><pre class="literallayout"># pcs stonith fence <span class="emphasis"><em>azurenodename</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: node01 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Fri Feb 23 11:44:35 2018
Last change: Fri Feb 23 11:21:01 2018 by root via cibadmin on node01

3 nodes configured
1 resource configured

Online: [ node01 node03 ]
OFFLINE: [ node02 ]

Full list of resources:

  clusterfence  (stonith:fence_azure_arm):  Started node01

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre></li><li class="listitem"><p class="simpara">
						Start the node that was fenced in the previous step.
					</p><pre class="literallayout"># pcs cluster start <span class="emphasis"><em>hostname</em></span></pre></li><li class="listitem"><p class="simpara">
						Check the status to verify the node started.
					</p><pre class="literallayout"># pcs status</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: node01 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Fri Feb 23 11:34:59 2018
Last change: Fri Feb 23 11:21:01 2018 by root via cibadmin on node01

3 nodes configured
1 resource configured

Online: [ node01 node02 node03 ]

Full list of resources:

clusterfence    (stonith:fence_azure_arm):  Started node01

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/15575">Fencing in a Red Hat High Availability Cluster</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_high_availability_clusters/index?lb_target=production#tb-fencedevice-props-HAAR">General Properties of Fencing Devices</a>
					</li></ul></div></section><section class="section" id="azure-create-internal-load-balancer-in-azure-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.13. Creating an Azure internal load balancer</h2></div></div></div><p>
				The Azure internal load balancer removes cluster nodes that do not answer health probe requests.
			</p><p>
				Perform the following procedure to create an Azure internal load balancer. Each step references a specific Microsoft procedure and includes the settings for customizing the load balancer for HA.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://azure.microsoft.com/en-us/features/azure-portal/">Azure control panel</a>
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/load-balancer/tutorial-load-balancer-basic-internal-portal#create-a-basic-load-balancer">Create a Basic load balancer</a>. Select <span class="strong strong"><strong>Internal load balancer</strong></span>, the <span class="strong strong"><strong>Basic SKU</strong></span>, and <span class="strong strong"><strong>Dynamic</strong></span> for the type of IP address assignment.
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/load-balancer/tutorial-load-balancer-basic-internal-portal#create-a-back-end-address-pool">Create a back-end address pool</a>. Associate the backend pool to the availability set created while creating Azure resources in HA. Do not set any target network IP configurations.
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/load-balancer/tutorial-load-balancer-basic-internal-portal#create-a-health-probe">Create a health probe</a>. For the health probe, select <span class="strong strong"><strong>TCP</strong></span> and enter port <span class="strong strong"><strong>61000</strong></span>. You can use TCP port number that does not interfere with another service. For certain HA product applications (for example, SAP HANA and SQL Server), you may need to work with Microsoft to identify the correct port to use.
					</li><li class="listitem">
						<a class="link" href="https://docs.microsoft.com/en-us/azure/load-balancer/tutorial-load-balancer-basic-internal-portal#create-a-load-balancer-rule">Create a load balancer rule</a>. To create the load balancing rule, the default values are prepopulated. Ensure to set <span class="strong strong"><strong>Floating IP (direct server return)</strong></span> to <span class="strong strong"><strong>Enabled</strong></span>.
					</li></ol></div></section><section class="section" id="azure-configure-the-load-balancer-resource-agent-in-ha_configuring-rhel-high-availability-on-azure"><div class="titlepage"><div><div><h2 class="title">2.14. Configuring the load balancer resource agent</h2></div></div></div><p>
				After you have created the health probe, you must configure the <code class="literal">load balancer</code> resource agent. This resource agent runs a service that answers health probe requests from the Azure load balancer and removes cluster nodes that do not answer requests.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">nmap-ncat</code> resource agents on all nodes.
					</p><pre class="screen"># yum install nmap-ncat resource-agents</pre><p class="simpara">
						Perform the following steps on a single node.
					</p></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">pcs</code> resources and group. Use your load balancer FrontendIP for the IPaddr2 address.
					</p><pre class="literallayout"># pcs resource create <span class="emphasis"><em>resource-name</em></span> IPaddr2 ip="10.0.0.7" --group <span class="emphasis"><em>cluster-resources-group</em></span></pre></li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">load balancer</code> resource agent.
					</p><pre class="literallayout"># pcs resource create <span class="emphasis"><em>resource-loadbalancer-name</em></span> azure-lb port=<span class="emphasis"><em>port-number</em></span> --group <span class="emphasis"><em>cluster-resources-group</em></span></pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Run <code class="literal">pcs status</code> to see the results.
				</p></div><pre class="screen">[root@node01 clouduser]# pcs status</pre><p>
				Example:
			</p><pre class="screen">Cluster name: clusterfence01
Stack: corosync
Current DC: node02 (version 1.1.16-12.el7_4.7-94ff4df) - partition with quorum
Last updated: Tue Jan 30 12:42:35 2018
Last change: Tue Jan 30 12:26:42 2018 by root via cibadmin on node01

3 nodes configured
3 resources configured

Online: [ node01 node02 node03 ]

Full list of resources:

clusterfence (stonith:fence_azure_arm):      Started node01
Resource Group: g_azure
    vip_azure  (ocf::heartbeat:IPaddr2):       Started node02
    lb_azure   (ocf::heartbeat:azure-lb):      Started node02

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre></section></section><section class="chapter" id="assembly_deploying-a-virtual-machine-on-aws_cloud-content"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Deploying a Red Hat Enterprise Linux image as an EC2 instance on Amazon Web Services</h1></div></div></div><p>
			You have a number of options for deploying a Red Hat Enterprise Linux (RHEL) 8 image as an EC2 instance on Amazon Web Services (AWS). This chapter discusses your options for choosing an image and lists or refers to system requirements for your host system and virtual machine (VM). The chapter also provides procedures for creating a custom image, uploading it to EC2, and launching an EC2 instance.
		</p><p>
			This chapter refers to the Amazon documentation in a number of places. For many procedures, see the referenced Amazon documentation for additional detail.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				For a list of Red Hat products that you can use securely on AWS, see <a class="link" href="https://access.redhat.com/public-cloud/aws">Red Hat on Amazon Web Services</a>.
			</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Sign up for a <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal</a> account.
				</li><li class="listitem">
					Sign up for AWS and set up your AWS resources. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a> for more information.
				</li><li class="listitem">
					Enable your subscriptions in <a class="link" href="https://access.redhat.com/public-cloud">the Red Hat Cloud Access program</a>. The Red Hat Cloud Access program allows you to move your Red Hat subscriptions from physical or on-premise systems onto AWS with full support from Red Hat.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
				</li><li class="listitem">
					<a class="link" href="https://aws.amazon.com/partners/redhat/faqs/">Red Hat Enterprise Linux on Amazon EC2 - FAQs</a>
				</li><li class="listitem">
					<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud/aws">Red Hat on Amazon Web Services</a>
				</li></ul></div><section class="section" id="aws-image-options_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h2 class="title">3.1. Red Hat Enterprise Linux Image options on AWS</h2></div></div></div><p>
				The following table lists image choices and notes the differences in the image options.
			</p><div class="table" id="idm139836697190800"><p class="title"><strong>Table 3.1. Image options</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836700963104" scope="col">Image option</th><th align="left" valign="top" id="idm139836700962016" scope="col">Subscriptions</th><th align="left" valign="top" id="idm139836700960928" scope="col">Sample scenario</th><th align="left" valign="top" id="idm139836700959840" scope="col">Considerations</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836700963104"> <p>
								Choose to deploy a Red Hat Gold Image.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700962016"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700960928"> <p>
								Enable subscriptions through <a class="link" href="https://access.redhat.com/public-cloud">the Red Hat Cloud Access program</a>, and then choose a Red Hat Gold Image on AWS.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700959840"> <p>
								The subscription includes the Red Hat product cost; you pay Amazon for all other instance costs.
							</p>
							 <p>
								Red Hat Gold Images are called "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836700963104"> <p>
								Choose to deploy a custom image that you move to AWS.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700962016"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700960928"> <p>
								Enable subscriptions through <a class="link" href="https://access.redhat.com/public-cloud">the Red Hat Cloud Access program</a>, upload your custom image, and attach your subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700959840"> <p>
								The subscription includes the Red Hat product cost; you pay Amazon for all other instance costs.
							</p>
							 <p>
								Custom images that you move to AWS are "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836700963104"> <p>
								Choose to deploy an existing Amazon image that includes RHEL.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700962016"> <p>
								The AWS EC2 images include a Red Hat product.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700960928"> <p>
								Choose a Red Hat Enterprise Linux image when you launch an instance on the <a class="link" href="https://aws.amazon.com/console/">AWS Management Console</a>, or choose an image from the <a class="link" href="https://aws.amazon.com/marketplace/">AWS Marketplace</a>.
							</p>
							 </td><td align="left" valign="top" headers="idm139836700959840"> <p>
								You pay Amazon hourly on a pay-as-you-go model. Such images are called "on-demand" images. Amazon provides support for on-demand images.
							</p>
							 <p>
								Red Hat provides updates to the images. AWS makes the updates available through the Red Hat Update Infrastructure (RHUI).
							</p>
							 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can create a custom image for AWS using Red Hat Image Builder. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a> for more information.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You cannot convert an on-demand instance to a Red Hat Cloud Access instance. To change from an on-demand image to a Red Hat Cloud Access (BYOS) image, create a new Red Hat Cloud Access instance and migrate data from your on-demand instance. Cancel your on-demand instance after you migrate your data to avoid double billing.
				</p></div></div><p>
				The remainder of this chapter includes information and procedures pertaining to custom images.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a>
					</li><li class="listitem">
						<a class="link" href="https://aws.amazon.com/console/">AWS Management Console</a>
					</li><li class="listitem">
						<a class="link" href="https://aws.amazon.com/marketplace/search?page=1&amp;filters=operating_system%2Cfulfillment_options&amp;operating_system=RHEL&amp;fulfillment_options=AMI&amp;category=2649367011">AWS Marketplace</a>
					</li></ul></div></section><section class="section" id="assembly_understanding-base-images_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h2 class="title">3.2. Understanding base images</h2></div></div></div><p>
				This section includes information on using preconfigured base images and their configuration settings.
			</p><section class="section" id="using-a-custom-base-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.2.1. Using a custom base image</h3></div></div></div><p>
					To manually configure a VM, you start with a base (starter) VM image. Once you have created the base VM image, you can modify configuration settings and add the packages the VM requires to operate on the cloud. You can make additional configuration changes for your specific application after you upload the image.
				</p><p>
					The recommended base VM image is the <span class="strong strong"><strong>Red Hat Enterprise Linux 8 KVM Guest Image</strong></span>, which you download from the <a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Customer Portal</a>. The KVM Guest Image is preconfigured with the following cloud configuration settings.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>The root account is disabled.</em></span> You temporarily enable root account access to make configuration changes and install packages that the cloud may require. This guide provides instructions for enabling root account access.
						</li><li class="listitem">
							<span class="emphasis"><em>A user account named <code class="literal">cloud-user</code> is preconfigured on the image.</em></span> The <code class="literal">cloud-user</code> account has sudo access.
						</li><li class="listitem">
							<span class="emphasis"><em>The image has <code class="literal">cloud-init</code> installed and enabled.</em></span> <code class="literal">cloud-init</code> is a service that handles provisioning of the VM (or instance) at initial boot.
						</li></ul></div><p>
					You can choose to use a custom Red Hat Enterprise Linux ISO image; however, when using a custom ISO image, you may need to make additional configuration changes.
				</p><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						<a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
					</p></div></section><section class="section" id="aws-vm-configuration-settings_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.2.2. Virtual machine configuration settings</h3></div></div></div><p>
					Cloud VMs must have the following configuration settings.
				</p><div class="table" id="idm139836699688064"><p class="title"><strong>Table 3.2. VM configuration settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836699683216" scope="col">Setting</th><th align="left" valign="top" id="idm139836699682128" scope="col">Recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836699683216"> <p>
									ssh
								</p>
								 </td><td align="left" valign="top" headers="idm139836699682128"> <p>
									ssh must be enabled to provide remote access to your VMs.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836699683216"> <p>
									dhcp
								</p>
								 </td><td align="left" valign="top" headers="idm139836699682128"> <p>
									The primary virtual adapter should be configured for dhcp.
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section" id="assembly_create-vm-from-kvm-guest-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h2 class="title">3.3. Creating a base image from a KVM Guest Image</h2></div></div></div><p>
				Follow the procedures in this section to create a base image from a KVM Guest Image.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enable virtualization</a> for your Red Hat Enterprise Linux 8 host machine.
				</p></div><section class="section" id="downloading-the-kvm-guest-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.3.1. Downloading the KVM Guest Image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux KVM Guest Image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Move the image to <code class="literal">/var/lib/libvirt/images</code>.
						</li></ol></div></section><section class="section" id="creating-the-vm-from-the-guest-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.3.2. Creating the VM from the KVM Guest Image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name kvmtest --memory 2048 --vcpus 2 --disk rhel-8.0-x86_64-kvm.qcow2,bus=virtio --import --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> size to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li><li class="listitem">
							Shut down the new VM after a login prompt appears.
						</li></ol></div></section><section class="section" id="setting-up-root-access-to-your-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.3.3. Setting up root access to your KVM Guest Image</h3></div></div></div><p>
					You need root access to make additional configuration changes to your image. You can also use <code class="literal">root</code> as one method of accessing your image once you have uploaded the image to the cloud. Perform the following procedure to enable root access to your VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							From your host system, use the <code class="literal command">virt-customize</code> command to generate a root password for the VM.
						</p><pre class="screen"># virt-customize -a &lt;guest-image-path&gt; --root-password password:&lt;PASSWORD&gt;</pre><p class="simpara">
							Example:
						</p><pre class="screen"># virt-customize -a /var/lib/libvirt/images/rhel-guest-image-8.0-120.x86_64.qcow2 --root-password password:redhat!
[   0.0] Examining the guest ...
[ 103.0] Setting a random seed
[ 103.0] Setting passwords
[ 112.0] Finishing off</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virt-edit</code> command to edit the <code class="literal">cloud.cfg</code> file on your VM. Within the file, enable root login and password authentication by setting <code class="literal">disable_root</code> to <code class="literal">0</code> and <code class="literal">ssh_pwauth</code> to <code class="literal">1</code>.
						</p><pre class="screen"># virt-edit -a &lt;guest-image-path&gt; /etc/cloud/cloud.cfg</pre></li><li class="listitem">
							Verify root access by starting the RHEL VM and logging in as <code class="literal">root</code>.
						</li><li class="listitem">
							Configure the image.
						</li><li class="listitem">
							Power down the VM.
						</li></ol></div></section></section><section class="section" id="creating-a-base-vm-from-an-iso-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h2 class="title">3.4. Creating a base VM from an ISO image</h2></div></div></div><p>
				Follow the procedures in this section to create a base image from an ISO image.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enable virtualization</a> for your Red Hat Enterprise Linux 8 host machine.
				</p></div><section class="section" id="downloading-the-iso-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.4.1. Downloading the ISO image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux ISO image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Move the image to <code class="literal">/var/lib/libvirt/images</code>.
						</li></ol></div></section><section class="section" id="creating-a-vm-from-the-ISO-image_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.4.2. Creating a VM from the ISO image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name isotest --memory 2048 --vcpus 2 --disk size=8,bus=virtio --location rhel-8.0-x86_64-dvd.iso --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> and <span class="strong strong"><strong>Storage Size</strong></span> to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li></ol></div></section><section class="section" id="completing-the-rhel-installation_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.4.3. Completing the RHEL installation</h3></div></div></div><p>
					Perform the following steps to complete the installation and to enable root access once the VM launches.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Choose the language you want to use during the installation process.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Installation Summary</strong></span> view:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click <span class="strong strong"><strong>Software Selection</strong></span> and check <span class="strong strong"><strong>Minimal Install</strong></span>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Done</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>Installation Destination</strong></span> and check <span class="strong strong"><strong>Custom</strong></span> under <span class="strong strong"><strong>Storage Configuration</strong></span>.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Verify at least 500 MB for <code class="literal">/boot</code>. You can use the remaining space for root <code class="literal">/</code>.
										</li><li class="listitem">
											Standard partitions are recommended, but you can use Logical Volume Management (LVM).
										</li><li class="listitem">
											You can use xfs, ext4, or ext3 for File System.
										</li><li class="listitem">
											Click <span class="strong strong"><strong>Done</strong></span> when you are finished with changes.
										</li></ul></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Begin Installation</strong></span>.
						</li><li class="listitem">
							Set a <span class="strong strong"><strong>Root Password</strong></span>. Create other users as applicable.
						</li><li class="listitem">
							Reboot the VM and log in as <code class="literal">root</code> once the installation completes.
						</li><li class="listitem"><p class="simpara">
							Configure the image.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Ensure that the <code class="literal">cloud-init</code> package is installed and enabled.
							</p></div></div></li><li class="listitem">
							Power down the VM.
						</li></ol></div></section></section><section class="section" id="uploading-the-rhel-image-to-aws_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h2 class="title">3.5. Uploading the Red Hat Enterprise Linux image to AWS</h2></div></div></div><p>
				Follow the procedures in this section to upload your image to AWS.
			</p><section class="section" id="installing-aws-command-line-interface_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.1. Installing the AWS CLI</h3></div></div></div><p>
					Many of the procedures in this chapter include using the AWS CLI. Complete the following steps to install the AWS CLI.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						You need to have created and have access to an AWS Access Key ID and an AWS Secret Access Key. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration">Quickly Configuring the AWS CLI</a> for information and instructions.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install Python 3 and the <code class="literal command">pip</code> tool.
						</p><pre class="screen"># yum install python3
# yum install python3-pip</pre></li><li class="listitem"><p class="simpara">
							Install the <a class="link" href="https://aws.amazon.com/cli/">AWS command line tools</a> with the <code class="literal command">pip</code> command.
						</p><pre class="screen"># pip3 install awscli</pre></li><li class="listitem"><p class="simpara">
							Run the <code class="literal command">aws --version</code> command to verify that you installed the AWS CLI.
						</p><pre class="screen">$ aws --version
aws-cli/1.16.182 Python/2.7.5 Linux/3.10.0-957.21.3.el7.x86_64 botocore/1.12.172</pre></li><li class="listitem"><p class="simpara">
							Configure the AWS command line client according to your AWS access details.
						</p><pre class="screen">$ aws configure
AWS Access Key ID [None]:
AWS Secret Access Key [None]:
Default region name [None]:
Default output format [None]:</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration">Quickly Configuring the AWS CLI</a>
						</li><li class="listitem">
							<a class="link" href="https://aws.amazon.com/cli/">AWS command line tools</a>
						</li></ul></div></section><section class="section" id="creating-an-s3-bucket_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.2. Creating an S3 bucket</h3></div></div></div><p>
					Importing to AWS requires an Amazon S3 bucket. An Amazon S3 bucket is an Amazon resource where you store objects. As part of the process for uploading your image, you create an S3 bucket and then move your image to the bucket. Complete the following steps to create a bucket.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Launch the <a class="link" href="https://console.aws.amazon.com/s3/">Amazon S3 Console</a>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create Bucket</strong></span>. The <span class="strong strong"><strong>Create Bucket</strong></span> dialog appears.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Name and region</strong></span> view:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Enter a <span class="strong strong"><strong>Bucket name</strong></span>.
								</li><li class="listitem">
									Enter a <span class="strong strong"><strong>Region</strong></span>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Next</strong></span>.
								</li></ol></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Configure options</strong></span> view, select desired options and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Set permissions</strong></span> view, change or accept the default options and click <span class="strong strong"><strong>Next</strong></span>.
						</li><li class="listitem">
							Review your bucket configuration.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create bucket</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can use the AWS CLI to create a bucket. For example, <code class="literal">aws s3 mb s3://my-new-bucket</code> creates an S3 bucket named <code class="literal">my-new-bucket</code>. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/reference/s3/mb.html">the AWS CLI Command Reference</a> for information on the <code class="literal command">mb</code> command.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://console.aws.amazon.com/s3/">Amazon S3 Console</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/cli/latest/reference/s3/mb.html">AWS CLI Command Reference</a>
						</li></ul></div></section><section class="section" id="creating-the-vmimport-role_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.3. Creating the vmimport role</h3></div></div></div><p>
					Perform the following procedure to create the <code class="literal">vmimport</code> role, which is required by VM import. See <a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-image-import.html">VM Import Service Role</a> in the Amazon documentation for more information.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a file named <code class="literal">trust-policy.json</code> and include the following policy. Save the file on your system and note its location.
						</p><pre class="screen">{
   "Version": "2012-10-17",
   "Statement": [
      {
         "Effect": "Allow",
         "Principal": { "Service": "vmie.amazonaws.com" },
         "Action": "sts:AssumeRole",
         "Condition": {
            "StringEquals":{
               "sts:Externalid": "vmimport"
            }
         }
      }
   ]
}</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">create role</code> command to create the <code class="literal">vmimport</code> role. Specify the full path to the location of the <code class="literal">trust-policy.json</code> file. Prefix <code class="literal">file://</code> to the path. A sample follows.
						</p><pre class="screen">aws iam create-role --role-name vmimport --assume-role-policy-document file:///home/sample/ImportService/trust-policy.json</pre></li><li class="listitem"><p class="simpara">
							Create a file named <code class="literal">role-policy.json</code> and include the following policy. Replace <code class="literal">s3-bucket-name</code> with the name of your S3 bucket.
						</p><pre class="screen">{
   "Version":"2012-10-17",
   "Statement":[
      {
         "Effect":"Allow",
         "Action":[
            "s3:GetBucketLocation",
            "s3:GetObject",
            "s3:ListBucket"
         ],
         "Resource":[
            "arn:aws:s3:::s3-bucket-name",
            "arn:aws:s3:::s3-bucket-name/*"
         ]
      },
      {
         "Effect":"Allow",
         "Action":[
            "ec2:ModifySnapshotAttribute",
            "ec2:CopySnapshot",
            "ec2:RegisterImage",
            "ec2:Describe*"
         ],
         "Resource":"*"
      }
   ]
}</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">put-role-policy</code> command to attach the policy to the role you created. Specify the full path of the <code class="literal">role-policy.json</code> file. A sample follows.
						</p><pre class="screen">aws iam put-role-policy --role-name vmimport --policy-name vmimport --policy-document file:///home/sample/ImportService/role-policy.json</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-image-import.html">VM Import Service Role</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmie_prereqs.html#vmimport-role">Required Service Role</a>
						</li></ul></div></section><section class="section" id="converting-and-pushing-your-image-to-s3_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.4. Converting and pushing your image to S3</h3></div></div></div><p>
					Complete the following procedure to convert and push your image to S3. The samples are representative; they convert an image formatted in the <code class="literal">qcow2</code> file format to <code class="literal">raw</code> format. Amazon accepts images in <code class="literal">OVA</code>, <code class="literal">VHD</code>, <code class="literal">VHDX</code>, <code class="literal">VMDK</code>, and <code class="literal">raw</code> formats. See <a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/how-vm-import-export-works.html">How VM Import/Export Works</a> for more information on image formats that Amazon accepts.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">qemu-img</code> command to convert your image. A sample follows.
						</p><pre class="screen">qemu-img convert -f qcow2 -O raw rhel-8.1-x86_64-kvm.qcow2 rhel-8.1-x86_64-kvm.raw</pre></li><li class="listitem"><p class="simpara">
							Push the image to S3.
						</p><pre class="screen">aws s3 cp rhel-8.1-x86_64-kvm.raw s3://s3-bucket-name</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This procedure could take a few minutes. After completion, you can check that your image uploaded successfully to your S3 bucket using the <a class="link" href="https://console.aws.amazon.com/s3/">AWS S3 Console</a>.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/how-vm-import-export-works.html">How VM Import/Export Works</a>
						</li><li class="listitem">
							<a class="link" href="https://console.aws.amazon.com/s3/">AWS S3 Console</a>
						</li></ul></div></section><section class="section" id="importing-your-image-as-a-snapshot_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.5. Importing your image as a snapshot</h3></div></div></div><p>
					Perform the following procedure to import an image as a snapshot.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a file to specify a bucket and path for your image. Name the file <code class="literal">containers.json</code>. In the sample that follows, replace <code class="literal">s3-bucket-name</code> with your bucket name and <code class="literal">s3-key</code> with your key. You can get the key for the image using the Amazon S3 Console.
						</p><pre class="screen">{
    "Description": "rhel-8.1-x86_64-kvm.raw",
    "Format": "raw",
    "UserBucket": {
        "S3Bucket": "s3-bucket-name",
        "S3Key": "s3-key"
    }
}</pre></li><li class="listitem"><p class="simpara">
							Import the image as a snapshot. This example uses a public Amazon S3 file; you can use the <a class="link" href="https://console.aws.amazon.com/s3/">Amazon S3 Console</a> to change permissions settings on your bucket.
						</p><pre class="screen">aws ec2 import-snapshot --disk-container file://containers.json</pre><p class="simpara">
							The terminal displays a message such as the following. Note the <code class="literal">ImportTaskID</code> within the message.
						</p><pre class="screen">{
    "SnapshotTaskDetail": {
        "Status": "active",
        "Format": "RAW",
        "DiskImageSize": 0.0,
        "UserBucket": {
            "S3Bucket": "s3-bucket-name",
            "S3Key": "rhel-8.1-x86_64-kvm.raw"
        },
        "Progress": "3",
        "StatusMessage": "pending"
    },
    "ImportTaskId": "import-snap-06cea01fa0f1166a8"
}</pre></li><li class="listitem"><p class="simpara">
							Track the progress of the import using the <code class="literal command">describe-import-snapshot-tasks</code> command. Include the <code class="literal">ImportTaskID</code>.
						</p><pre class="screen">aws ec2 describe-import-snapshot-tasks --import-task-ids import-snap-06cea01fa0f1166a8</pre><p class="simpara">
							The returned message shows the current status of the task. When complete, <code class="literal">Status</code> shows <code class="literal">completed</code>. Within the status, note the snapshot ID.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://console.aws.amazon.com/s3/">Amazon S3 Console</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/vm-import/latest/userguide/vmimport-import-snapshot.html">Importing a Disk as a Snapshot Using VM Import/Export</a>
						</li></ul></div></section><section class="section" id="creating-an-ami-from-the-uploaded-snapshot_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.6. Creating an AMI from the uploaded snapshot</h3></div></div></div><p>
					Within EC2, you must choose an Amazon Machine Image (AMI) when launching an instance. Perform the following procedure to create an AMI from your uploaded snapshot.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Go to the AWS EC2 Dashboard.
						</li><li class="listitem">
							Under <span class="strong strong"><strong>Elastic Block Store</strong></span>, select <span class="strong strong"><strong>Snapshots</strong></span>.
						</li><li class="listitem">
							Search for your snapshot ID (for example, <code class="literal">snap-0e718930bd72bcda0</code>).
						</li><li class="listitem">
							Right-click on the snapshot and select <span class="strong strong"><strong>Create image</strong></span>.
						</li><li class="listitem">
							Name your image.
						</li><li class="listitem">
							Under <span class="strong strong"><strong>Virtualization type</strong></span>, choose <span class="strong strong"><strong>Hardware-assisted virtualization</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create</strong></span>. In the note regarding image creation, there is a link to your image.
						</li><li class="listitem"><p class="simpara">
							Click on the image link. Your image shows up under <span class="strong strong"><strong>Images&gt;AMIs</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can use the AWS CLI <code class="literal command">import-image</code> command to create an AMI from a snapshot. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/reference/ec2/import-image.html">import-image</a> for more information. A simple example follows.
							</p><pre class="screen">aws ec2 import-image --disk-containers SnapshotId="snap-0f46e21a568913808"</pre><p>
								You can check the status of the <code class="literal command">import-image</code> command by running the <code class="literal command">describe-import-image-tasks</code> command. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-import-image-tasks.html">describe-import-image-tasks</a> for more information.
							</p></div></div></li></ol></div></section><section class="section" id="launching-an-instance-from-the-ami_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.7. Launching an instance from the AMI</h3></div></div></div><p>
					Perform the following procedure to launch and configure an instance from the AMI.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							From the AWS EC2 Dashboard, select <span class="strong strong"><strong>Images</strong></span> and then <span class="strong strong"><strong>AMIs</strong></span>.
						</li><li class="listitem">
							Right-click on your image and select <span class="strong strong"><strong>Launch</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Choose an <span class="strong strong"><strong>Instance Type</strong></span> that meets or exceeds the requirements of your workload.
						</p><p class="simpara">
							Refer to <a class="link" href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types</a> for information on instance types.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Next: Configure Instance Details</strong></span>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Enter the <span class="strong strong"><strong>Number of instances</strong></span> you want to create.
								</li><li class="listitem">
									For <span class="strong strong"><strong>Network</strong></span>, select the VPC you created when <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html#create-a-vpc">setting up your AWS environment</a>. Select a subnet for the instance or create a new subnet.
								</li><li class="listitem"><p class="simpara">
									Select <span class="strong strong"><strong>Enable</strong></span> for Auto-assign Public IP.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										These are the minimum configuration options necessary to create a basic instance. Review additional options based on your application requirements.
									</p></div></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next: Add Storage</strong></span>. Verify that the default storage is sufficient.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Next: Add Tags</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Tags can help you manage your AWS resources. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html?icmpid=docs_ec2_console">Tagging Your Amazon EC2 Resources</a> for information on tagging.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Next: Configure Security Group</strong></span>. Select the security group you created when <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html#create-a-base-security-group">setting up your AWS environment</a>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Review and Launch</strong></span>. Verify your selections.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Launch</strong></span>. You are prompted to select an existing key pair or create a new key pair. Select the key pair you created when <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html#create-a-key-pair">setting up your AWS environment</a>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Verify that the permissions for your private key are correct. Use the command options <code class="literal command">chmod 400 &lt;keyname&gt;.pem</code> to change the permissions, if necessary.
							</p></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Launch Instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>View Instances</strong></span>. You can name the instance(s).
						</p><p class="simpara">
							You can now launch an SSH session to your instance(s) by selecting an instance and clicking <span class="strong strong"><strong>Connect</strong></span>. Use the example provided for <span class="strong strong"><strong>A standalone SSH client</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can launch an instance using the AWS CLI. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-services-ec2-instances.html">Launching, Listing, and Terminating Amazon EC2 Instances</a> in the Amazon documentation for more information.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://console.aws.amazon.com/console/">AWS Management Console</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Instances.html">Amazon EC2 Instances</a>
						</li><li class="listitem">
							<a class="link" href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types</a>
						</li></ul></div></section><section class="section" id="attaching-subscriptions_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h3 class="title">3.5.8. Attaching Red Hat subscriptions</h3></div></div></div><p>
					Complete the following steps to attach the subscriptions you previously enabled through the Red Hat Cloud Access program.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						You must have enabled your subscriptions.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Register your system.
						</p><pre class="screen">subscription-manager register --auto-attach</pre></li><li class="listitem"><p class="simpara">
							Attach your subscriptions.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									You can use an activation key to attach subscriptions. See <a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>.
								</li><li class="listitem">
									Alternatively, you can manually attach a subscription using the ID of the subscription pool (Pool ID). See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>.
								</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html-single/rhsm/index">Using and Configuring Red Hat Subscription Manager</a>
						</li></ul></div></section></section></section><section class="chapter" id="configuring-a-red-hat-high-availability-cluster-on-aws_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Configuring a Red Hat High Availability cluster on AWS</h1></div></div></div><p>
			This chapter includes information and procedures for configuring a Red Hat High Availability (HA) cluster on Amazon Web Services (AWS) using EC2 instances as cluster nodes. Note that you have a number of options for obtaining the Red Hat Enterprise Linux (RHEL) images you use for your cluster. For information on image options for AWS, see <a class="link" href="index.html#aws-image-options_deploying-a-virtual-machine-on-aws" title="3.1. Red Hat Enterprise Linux Image options on AWS">Red Hat Enterprise Linux Image Options on AWS</a>.
		</p><p>
			The chapter includes prerequisite procedures for setting up your environment for AWS. Once you have set up your environment, you can create and configure EC2 instances.
		</p><p>
			The chapter also includes procedures specific to the creation of HA clusters, which transform individual nodes into a cluster of HA nodes on AWS. These include procedures for installing the High Availability packages and agents on each cluster node, configuring fencing, and installing AWS network resource agents.
		</p><p>
			The chapter refers to the Amazon documentation in a number of places. For many procedures, see the referenced Amazon documentation for more information.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Sign up for a <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal</a> account.
				</li><li class="listitem">
					Sign up for AWS and set up your AWS resources. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a> for more information.
				</li><li class="listitem">
					Enable your subscriptions in the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>. The Red Hat Cloud Access program allows you to move your Red Hat subscriptions from physical or on-premise systems onto AWS with full support from Red Hat.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
				</li><li class="listitem">
					<a class="link" href="https://aws.amazon.com/partners/redhat/faqs/">Red Hat Enterprise Linux on Amazon EC2 - FAQs</a>
				</li><li class="listitem">
					<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud/aws">Red Hat on Amazon Web Services</a>
				</li></ul></div><section class="section" id="aws-creating-access-key-and-secret-key_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.1. Creating the AWS Access Key and AWS Secret Access Key</h2></div></div></div><p>
				You need to create an AWS Access Key and AWS Secret Access Key before you install the AWS CLI. The fencing and resource agent APIs use the AWS Access Key and Secret Access Key to connect to each node in the cluster.
			</p><p>
				Complete the following steps to create these keys.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					Your IAM user account must have Programmatic access. For more information see <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting up the AWS Environment</a>.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Launch the <a class="link" href="https://console.aws.amazon.com/console/">AWS Console</a>.
					</li><li class="listitem">
						Click on your AWS Account ID to display the drop-down menu and select <span class="strong strong"><strong>My Security Credentials</strong></span>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Users</strong></span>.
					</li><li class="listitem">
						Select the user and open the <span class="strong strong"><strong>Summary</strong></span> screen.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Security credentials</strong></span> tab.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create access key</strong></span>.
					</li><li class="listitem">
						Download the <code class="literal">.csv</code> file (or save both keys). You need to enter these keys when creating the fencing device.
					</li></ol></div></section><section class="section" id="installing-aws-command-line-interface_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.2. Installing the AWS CLI</h2></div></div></div><p>
				Many of the procedures in this chapter include using the AWS CLI. Complete the following steps to install the AWS CLI.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You need to have created and have access to an AWS Access Key ID and an AWS Secret Access Key. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration">Quickly Configuring the AWS CLI</a> for information and instructions.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install Python 3 and the <code class="literal command">pip</code> tool.
					</p><pre class="screen"># yum install python3
# yum install python3-pip</pre></li><li class="listitem"><p class="simpara">
						Install the <a class="link" href="https://aws.amazon.com/cli/">AWS command line tools</a> with the <code class="literal command">pip</code> command.
					</p><pre class="screen"># pip3 install awscli</pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal command">aws --version</code> command to verify that you installed the AWS CLI.
					</p><pre class="screen">$ aws --version
aws-cli/1.16.182 Python/2.7.5 Linux/3.10.0-957.21.3.el7.x86_64 botocore/1.12.172</pre></li><li class="listitem"><p class="simpara">
						Configure the AWS command line client according to your AWS access details.
					</p><pre class="screen">$ aws configure
AWS Access Key ID [None]:
AWS Secret Access Key [None]:
Default region name [None]:
Default output format [None]:</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#cli-quick-configuration">Quickly Configuring the AWS CLI</a>
					</li><li class="listitem">
						<a class="link" href="https://aws.amazon.com/cli/">AWS command line tools</a>
					</li></ul></div></section><section class="section" id="aws-creating-a-rhel-ha-ec2-instance_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.3. Creating an HA EC2 instance</h2></div></div></div><p>
				Complete the following steps to create the instances that you then use as your HA cluster nodes. Note that you have a number of options for obtaining the RHEL images you use for your cluster. See <a class="link" href="index.html#aws-image-options_deploying-a-virtual-machine-on-aws" title="3.1. Red Hat Enterprise Linux Image options on AWS">Red Hat Enterprise Linux Image Options on AWS</a> for information on image options for AWS.
			</p><p>
				You can create and upload a custom image that you then use for your cluster nodes, or you could choose a Gold Image (Cloud Access image) or an on-demand image.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You need to have set up an AWS environment. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a> for more information.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the AWS EC2 Dashboard, select <span class="strong strong"><strong>Images</strong></span> and then <span class="strong strong"><strong>AMIs</strong></span>.
					</li><li class="listitem">
						Right-click on your image and select <span class="strong strong"><strong>Launch</strong></span>.
					</li><li class="listitem">
						Choose an <span class="strong strong"><strong>Instance Type</strong></span> that meets or exceeds the requirements of your workload. Depending on your HA application, each instance may need to have higher capacity.
					</li></ol></div><p>
				See <a class="link" href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types</a> for information on instance types.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Next: Configure Instance Details</strong></span>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enter the <span class="strong strong"><strong>Number of instances</strong></span> you want to create for the cluster. The examples in this chapter use three cluster nodes.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Do not launch into an Auto Scaling Group.
								</p></div></div></li><li class="listitem">
								For <span class="strong strong"><strong>Network</strong></span>, select the VPC you created in <a class="link" href="https://access.redhat.com/articles/3354781#header11">Set up the AWS environment</a>. Select the subnet for the instance to create a new subnet.
							</li><li class="listitem"><p class="simpara">
								Select <span class="strong strong"><strong>Enable</strong></span> for Auto-assign Public IP. These are the minimum selections you need to make for <span class="strong strong"><strong>Configure Instance Details</strong></span>. Depending on your specific HA application, you may need to make additional selections.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									These are the minimum configuration options necessary to create a basic instance. Review additional options based on your HA application requirements.
								</p></div></div></li></ol></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next: Add Storage</strong></span> and verify that the default storage is sufficient. You do not need to modify these settings unless your HA application requires other storage options.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Next: Add Tags</strong></span>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Tags can help you manage your AWS resources. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html">Tagging Your Amazon EC2 Resources</a> for information on tagging.
						</p></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Next: Configure Security Group</strong></span>. Select the existing security group you created in <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting up the AWS environment</a>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Review and Launch</strong></span> and verify your selections.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Launch</strong></span>. You are prompted to select an existing key pair or create a new key pair. Select the key pair you created when <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting up the AWS environment</a>.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Launch Instances</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>View Instances</strong></span>. You can name the instance(s).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Alternatively, you can launch instances using the AWS CLI. See <a class="link" href="https://docs.aws.amazon.com/cli/latest/userguide/cli-services-ec2-instances.html">Launching, Listing, and Terminating Amazon EC2 Instances</a> in the Amazon documentation for more information.
						</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://console.aws.amazon.com/console/home">AWS Management Console</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html">Setting Up with Amazon EC2</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Instances.html">Amazon EC2 Instances</a>
					</li><li class="listitem">
						<a class="link" href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 Instance Types</a>
					</li></ul></div></section><section class="section" id="aws-configuring-the-private-key-in-ha_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.4. Configuring the private key</h2></div></div></div><p>
				Complete the following configuration tasks to use the private ssh key file (<code class="literal">.pem</code>) before it can be used in an SSH session.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Move the key file from the <code class="literal">Downloads</code> directory to your <code class="literal">Home</code> directory or to your <code class="literal">~/.ssh directory</code>.
					</li><li class="listitem"><p class="simpara">
						Enter the following command to change the permissions of the key file so that only the root user can read it.
					</p><pre class="screen"># chmod 400 KeyName.pem</pre></li></ol></div></section><section class="section" id="aws-connecting-to-an-instance_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.5. Connecting to an instance</h2></div></div></div><p>
				Complete the following steps on all nodes to connect to an instance.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Launch the <a class="link" href="https://console.aws.amazon.com">AWS Console</a> and select the EC2 instance.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Connect</strong></span> and select <span class="strong strong"><strong>A standalone SSH client</strong></span>.
					</li><li class="listitem">
						From your SSH terminal session, connect to the instance using the AWS example provided in the pop-up window. Add the correct path to your <code class="literal">KeyName.pem</code> file if the path is not shown in the example.
					</li></ol></div></section><section class="section" id="aws-installing-rhel-ha-packages-and-agents_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.6. Installing the HA packages and agents</h2></div></div></div><p>
				Complete the following steps on all nodes to install the HA packages and agents.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to remove the AWS Red Hat Update Infrastructure (RHUI) client. Because you are going to use a Red Hat Cloud Access subscription, you should not use AWS RHUI in addition to your subscription.
					</p><pre class="screen">$ sudo -i
# yum -y remove rh-amazon-rhui-client*</pre></li><li class="listitem"><p class="simpara">
						Register the VM with Red Hat.
					</p><pre class="screen"># subscription-manager register --auto-attach</pre></li><li class="listitem"><p class="simpara">
						Disable all repositories.
					</p><pre class="screen"># subscription-manager repos --disable=*</pre></li><li class="listitem"><p class="simpara">
						Enable the RHEL 8 Server and RHEL 8 Server HA repositories.
					</p><pre class="screen"># subscription-manager repos --enable=rhel-8-server-rpms
# subscription-manager repos --enable=rhel-ha-for-rhel-8-server-rpms</pre></li><li class="listitem"><p class="simpara">
						Update the RHEL AWS instance.
					</p><pre class="screen"># yum update -y</pre></li><li class="listitem"><p class="simpara">
						Install the Red Hat High Availability Add-On software packages, along with all available fencing agents from the High Availability channel.
					</p><pre class="screen"># yum install pcs pacemaker fence-agents-aws</pre></li><li class="listitem"><p class="simpara">
						The user <code class="literal">hacluster</code> was created during the <code class="literal">pcs</code> and <code class="literal">pacemaker</code> installation in the previous step. Create a password for <code class="literal">hacluster</code> on all cluster nodes. Use the same password for all nodes.
					</p><pre class="screen"># passwd hacluster</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">high availability</code> service to the RHEL Firewall if <code class="literal">firewalld.service</code> is installed.
					</p><pre class="screen"># firewall-cmd --permanent --add-service=high-availability
# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcs</code> service and enable it to start on boot.
					</p><pre class="screen"># systemctl start pcsd.service
# systemctl enable pcsd.service</pre></li><li class="listitem">
						Edit <code class="literal">/etc/hosts</code> and add RHEL host names and internal IP addresses. See <a class="link" href="https://access.redhat.com/solutions/81123">How should the /etc/hosts file be set up on RHEL cluster nodes?</a> for details.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Ensure the <code class="literal">pcs</code> service is running.
				</p></div><pre class="screen"># systemctl status pcsd.service

pcsd.service - PCS GUI and remote configuration interface
Loaded: loaded (/usr/lib/systemd/system/pcsd.service; enabled; vendor preset: disabled)
Active: active (running) since Thu 2018-03-01 14:53:28 UTC; 28min ago
Docs: man:pcsd(8)
man:pcs(8)
Main PID: 5437 (pcsd)
CGroup: /system.slice/pcsd.service
     └─5437 /usr/bin/ruby /usr/lib/pcsd/pcsd &gt; /dev/null &amp;
Mar 01 14:53:27 ip-10-0-0-48.ec2.internal systemd[1]: Starting PCS GUI and remote configuration interface…
Mar 01 14:53:28 ip-10-0-0-48.ec2.internal systemd[1]: Started PCS GUI and remote configuration interface.</pre></section><section class="section" id="azure-create-cluster-in-ha_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.7. Creating a cluster</h2></div></div></div><p>
				Complete the following steps to create the cluster of nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On one of the nodes, enter the following command to authenticate the pcs user <code class="literal">hacluster</code>. In the command, specify the name of each node in the cluster.
					</p><pre class="literallayout white-space-pre"># pcs host auth  <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> <span class="emphasis"><em>hostname3</em></span>
Username: hacluster
Password:
hostname1: Authorized
hostname2: Authorized
hostname3: Authorized</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs host auth node01 node02 node03
Username: hacluster
Password:
node01: Authorized
node02: Authorized
node03: Authorized</pre></li><li class="listitem"><p class="simpara">
						Create the cluster.
					</p><pre class="literallayout white-space-pre"># pcs cluster setup cluster-name <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> <span class="emphasis"><em>hostname3</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster setup --name newcluster node01 node02 node03

...omitted

Synchronizing pcsd certificates on nodes node01, node02, node03...
node02: Success
node03: Success
node01: Success
Restarting pcsd on the nodes in order to reload the certificates...
node02: Success
node03: Success
node01: Success</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the cluster.
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster enable --all</pre></li><li class="listitem"><p class="simpara">
						Start the cluster.
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster start --all</pre><p class="simpara">
						Example:
					</p><pre class="literallayout white-space-pre">[root@node01 clouduser]# pcs cluster enable --all
node02: Cluster Enabled
node03: Cluster Enabled
node01: Cluster Enabled

[root@node01 clouduser]# pcs cluster start --all
node02: Starting Cluster...
node03: Starting Cluster...
node01: Starting Cluster...</pre></li></ol></div></section><section class="section" id="aws-configuring-fencing_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.8. Configuring fencing</h2></div></div></div><p>
				Complete the following steps to configure fencing.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following AWS metadata query to get the Instance ID for each node. You need these IDs to configure the fence device. See <a class="link" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html">Instance Metadata and User Data</a> for additional information.
					</p><pre class="screen"># echo $(curl -s http://169.254.169.254/latest/meta-data/instance-id)</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# echo $(curl -s http://169.254.169.254/latest/meta-data/instance-id) i-07f1ac63af0ec0ac6</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to configure the fence device. Use <code class="literal">pcmk_host_map</code> to map the RHEL host name to the Instance ID. Use the AWS Access Key and AWS Secret Access Key you previously set up.
					</p><pre class="literallayout"># pcs stonith create name fence_aws access_key=access-key secret_key=<span class="emphasis"><em>secret-access-key</em></span> region=<span class="emphasis"><em>region</em></span> pcmk_host_map="rhel-hostname-1:Instance-ID-1;rhel-hostname-2:Instance-ID-2;rhel-hostname-3:Instance-ID-3" power_timeout=240 pcmk_reboot_timeout=480 pcmk_reboot_retries=4</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs stonith create clusterfence fence_aws access_key=AKIAI*******6MRMJA secret_key=a75EYIG4RVL3h*******K7koQ8dzaDyn5yoIZ/ region=us-east-1 pcmk_host_map="ip-10-0-0-48:i-07f1ac63af0ec0ac6;ip-10-0-0-46:i-063fc5fe93b4167b2;ip-10-0-0-58:i-08bd39eb03a6fd2c7" power_timeout=240 pcmk_reboot_timeout=480 pcmk_reboot_retries=4</pre></li><li class="listitem"><p class="simpara">
						Test the fencing agent for one of the other nodes.
					</p><pre class="literallayout"># pcs stonith fence <span class="emphasis"><em>awsnodename</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The command response may take several minutes to display. If you watch the active terminal session for the node being fenced, you see that the terminal connection is immediately terminated after you enter the fence command.
						</p></div></div><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs stonith fence ip-10-0-0-58
Node: ip-10-0-0-58 fenced</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the status to verify that the node is fenced.
					</p><pre class="screen"># pcs status</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: ip-10-0-0-46 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Fri Mar  2 19:55:41 2018
Last change: Fri Mar  2 19:24:59 2018 by root via cibadmin on ip-10-0-0-46

3 nodes configured
1 resource configured

Online: [ ip-10-0-0-46 ip-10-0-0-48 ]
OFFLINE: [ ip-10-0-0-58 ]

Full list of resources:
clusterfence  (stonith:fence_aws):    Started ip-10-0-0-46

Daemon Status:
corosync: active/disabled
pacemaker: active/disabled
pcsd: active/enabled</pre></li><li class="listitem"><p class="simpara">
						Start the node that was fenced in the previous step.
					</p><pre class="literallayout"># pcs cluster start <span class="emphasis"><em>awshostname</em></span></pre></li><li class="listitem"><p class="simpara">
						Check the status to verify the node started.
					</p><pre class="screen"># pcs status</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: ip-10-0-0-46 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Fri Mar  2 20:01:31 2018
Last change: Fri Mar  2 19:24:59 2018 by root via cibadmin on ip-10-0-0-48

3 nodes configured
1 resource configured

Online: [ ip-10-0-0-46 ip-10-0-0-48 ip-10-0-0-58 ]

Full list of resources:

  clusterfence  (stonith:fence_aws):    Started ip-10-0-0-46

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre></li></ol></div></section><section class="section" id="aws-installing-the-aws-cli-on-cluster-nodes_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.9. Installing the AWS CLI on cluster nodes</h2></div></div></div><p>
				Previously, you installed the AWS CLI on your host system. You now need to install the AWS CLI on cluster nodes before you configure the network resource agents.
			</p><p>
				Complete the following procedure on each cluster node.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You must have created an AWS Access Key and AWS Secret Access Key. See <a class="link" href="index.html#aws-creating-access-key-and-secret-key_configuring-a-red-hat-high-availability-cluster-on-aws" title="4.1. Creating the AWS Access Key and AWS Secret Access Key">Creating the AWS Access Key and AWS Secret Access Key</a> for more information.
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Perform the procedure <a class="link" href="index.html#installing-aws-command-line-interface_configuring-a-red-hat-high-availability-cluster-on-aws" title="4.2. Installing the AWS CLI">Installing the AWS CLI</a>.
					</li><li class="listitem"><p class="simpara">
						Enter the following command to verify that the AWS CLI is configured properly. The instance IDs and instance names should display.
					</p><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# aws ec2 describe-instances --output text --query 'Reservations[*].Instances[*].[InstanceId,Tags[?Key==`Name`].Value]'
i-07f1ac63af0ec0ac6
ip-10-0-0-48
i-063fc5fe93b4167b2
ip-10-0-0-46
i-08bd39eb03a6fd2c7
ip-10-0-0-58</pre></li></ol></div></section><section class="section" id="aws-installing-network-resource-agents_configuring-a-red-hat-high-availability-cluster-on-aws"><div class="titlepage"><div><div><h2 class="title">4.10. Installing network resource agents</h2></div></div></div><p>
				For HA operations to work, the cluster uses AWS networking resource agents to enable failover functionality. If a node does not respond to a heartbeat check in a set time, the node is fenced and operations fail over to an additional node in the cluster. Network resource agents need to be configured for this to work.
			</p><p>
				Add the two resources to the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/high_availability_add-on_reference/#s1-resourcegroups-HAAR">same group</a> to enforce <code class="literal">order</code> and <code class="literal">colocation</code> constraints.
			</p><p>
				<span class="strong strong"><strong>Create a secondary private IP resource and virtual IP resource</strong></span>
			</p><p>
				Complete the following procedure to add a secondary private IP address and create a virtual IP. You can complete this procedure from any node in the cluster.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to view the <code class="literal">AWS Secondary Private IP Address</code> resource agent (awsvip) description. This shows the options and default operations for this agent.
					</p><pre class="screen"># pcs resource describe awsvip</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create the Secondary Private IP address using an unused private IP address in the <code class="literal">VPC CIDR</code> block.
					</p><pre class="literallayout"># pcs resource create privip awsvip secondary_private_ip=<span class="emphasis"><em>Unused-IP-Address</em></span> --group <span class="emphasis"><em>group-name</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs resource create privip awsvip secondary_private_ip=10.0.0.68 --group networking-group</pre></li><li class="listitem"><p class="simpara">
						Create a virtual IP resource. This is a VPC IP address that can be rapidly remapped from the fenced node to the failover node, masking the failure of the fenced node within the subnet.
					</p><pre class="literallayout"># pcs resource create vip IPaddr2 ip=<span class="emphasis"><em>secondary-private-IP</em></span> --group <span class="emphasis"><em>group-name</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen">root@ip-10-0-0-48 ~]# pcs resource create vip IPaddr2 ip=10.0.0.68 --group networking-group</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Enter the <code class="literal command">pcs status</code> command to verify that the resources are running.
				</p></div><pre class="screen"># pcs status</pre><p>
				Example:
			</p><pre class="screen">[root@ip-10-0-0-48 ~]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: ip-10-0-0-46 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Fri Mar  2 22:34:24 2018
Last change: Fri Mar  2 22:14:58 2018 by root via cibadmin on ip-10-0-0-46

3 nodes configured
3 resources configured

Online: [ ip-10-0-0-46 ip-10-0-0-48 ip-10-0-0-58 ]

Full list of resources:

clusterfence    (stonith:fence_aws):    Started ip-10-0-0-46
 Resource Group: networking-group
     privip (ocf::heartbeat:awsvip):    Started ip-10-0-0-48
     vip    (ocf::heartbeat:IPaddr2):   Started ip-10-0-0-58

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre><p>
				<span class="strong strong"><strong>Create an elastic IP address</strong></span>
			</p><p>
				An elastic IP address is a public IP address that can be rapidly remapped from the fenced node to the failover node, masking the failure of the fenced node.
			</p><p>
				Note that this is different from the virtual IP resource created earlier. The elastic IP address is used for public-facing Internet connections instead of subnet connections.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Add the two resources to the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/high_availability_add-on_reference/#s1-resourcegroups-HAAR">same group</a> that was previously created to enforce <code class="literal">order</code> and <code class="literal">colocation</code> constraints.
					</li><li class="listitem"><p class="simpara">
						Enter the following AWS CLI command to create an elastic IP address.
					</p><pre class="screen">[root@ip-10-0-0-48 ~]# aws ec2 allocate-address --domain vpc --output text
eipalloc-4c4a2c45   vpc 35.169.153.122</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to view the AWS Secondary Elastic IP Address resource agent (awseip) description. This shows the options and default operations for this agent.
					</p><pre class="screen"># pcs resource describe awseip</pre></li><li class="listitem"><p class="simpara">
						Create the Secondary Elastic IP address resource using the allocated IP address created in Step 1.
					</p><pre class="screen"># pcs resource create elastic awseip elastic_ip=_Elastic-IP-Address_allocation_id=_Elastic-IP-Association-ID_ --group networking-group</pre><p class="simpara">
						Example:
					</p><pre class="screen"># pcs resource create elastic awseip elastic_ip=35.169.153.122 allocation_id=eipalloc-4c4a2c45 --group networking-group</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Enter the <code class="literal command">pcs status</code> command to verify that the resource is running.
				</p></div><pre class="screen"># pcs status</pre><p>
				Example:
			</p><pre class="screen">[root@ip-10-0-0-58 ~]# pcs status
Cluster name: newcluster
Stack: corosync
Current DC: ip-10-0-0-58 (version 1.1.18-11.el7-2b07d5c5a9) - partition with quorum
Last updated: Mon Mar  5 16:27:55 2018
Last change: Mon Mar  5 15:57:51 2018 by root via cibadmin on ip-10-0-0-46

3 nodes configured
4 resources configured

Online: [ ip-10-0-0-46 ip-10-0-0-48 ip-10-0-0-58 ]

Full list of resources:

 clusterfence   (stonith:fence_aws):    Started ip-10-0-0-46
 Resource Group: networking-group
     privip (ocf::heartbeat:awsvip):  Started ip-10-0-0-48
     vip    (ocf::heartbeat:IPaddr2):    Started ip-10-0-0-48
     elastic (ocf::heartbeat:awseip):    Started ip-10-0-0-48

Daemon Status:
  corosync: active/disabled
  pacemaker: active/disabled
  pcsd: active/enabled</pre><p>
				<span class="strong strong"><strong>Test the elastic IP address</strong></span>
			</p><p>
				Enter the following commands to verify the virtual IP (awsvip) and elastic IP (awseip) resources are working.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Launch an SSH session from your local workstation to the elastic IP address previously created.
					</p><pre class="screen">$ ssh -l ec2-user -i ~/.ssh/&lt;KeyName&gt;.pem elastic-IP</pre><p class="simpara">
						Example:
					</p><pre class="screen">$ ssh -l ec2-user -i ~/.ssh/cluster-admin.pem 35.169.153.122</pre></li><li class="listitem">
						Verify that the host you connected to via SSH is the host associated with the elastic resource created.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/high_availability_add-on_overview/">High Availability Add-On Overview</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/high_availability_add-on_administration/">High Availability Add-On Administration</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/high_availability_add-on_reference/">High Availability Add-On Reference</a>
					</li></ul></div></section></section><section class="chapter" id="assembly_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Deploying a Red Hat Enterprise Linux image as a Google Compute Engine instance on Google Cloud Platform</h1></div></div></div><p>
			You have a number of options for deploying a Red Hat Enterprise Linux (RHEL) 8 image as a Google Compute Engine (GCE) instance on Google Cloud Platform (GCP). This chapter discusses your options for choosing an image and lists or refers to system requirements for your host system and VM. The chapter provides procedures for creating a custom image, uploading to GCE, and launching an instance.
		</p><p>
			This chapter refers to the Google documentation in a number of places. For many procedures, see the referenced Google documentation for additional detail.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				For a list of Red Hat product certifications for GCP, see <a class="link" href="https://access.redhat.com/ecosystem/cloud-provider/868283">Red Hat on Google Cloud Platform</a>.
			</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You need a <a class="link" href="https://access.redhat.com/">Red Hat Customer Portal</a> account to complete the procedures in this chapter.
				</li><li class="listitem">
					Create an account with GCP to access the Google Cloud Platform Console. See <a class="link" href="https://cloud.google.com/">Google Cloud</a> for more information.
				</li><li class="listitem">
					Enable your Red Hat subscriptions through the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>. The Red Hat Cloud Access program allows you to move your Red Hat subscriptions from physical or on-premise systems onto GCP with full support from Red Hat.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
				</li><li class="listitem">
					<a class="link" href="https://cloud.google.com/">Google Cloud</a>
				</li></ul></div><section class="section" id="gcp-image-options_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h2 class="title">5.1. Red Hat Enterprise Linux image options on GCP</h2></div></div></div><p>
				The following table lists image choices and the differences in the image options.
			</p><div class="table" id="idm139836700694064"><p class="title"><strong>Table 5.1. Image options</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836697296688" scope="col">Image option</th><th align="left" valign="top" id="idm139836697295600" scope="col">Subscriptions</th><th align="left" valign="top" id="idm139836697294512" scope="col">Sample scenario</th><th align="left" valign="top" id="idm139836697293424" scope="col">Considerations</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836697296688"> <p>
								Choose to deploy a custom image that you move to GCP.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697295600"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697294512"> <p>
								Enable subscriptions through the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>, upload your custom image, and attach your subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697293424"> <p>
								The subscription includes the Red Hat product cost; you pay all other instance costs.
							</p>
							 <p>
								Custom images that you move to GCP are called "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697296688"> <p>
								Choose to deploy an existing GCP image that includes RHEL.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697295600"> <p>
								The GCP images include a Red Hat product.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697294512"> <p>
								Choose a RHEL image when you launch an instance on the <a class="link" href="https://console.cloud.google.com/compute/instances">GCP Compute Engine</a>, or choose an image from the <a class="link" href="https://cloud.google.com/marketplace/">Google Cloud Platform Marketplace</a>.
							</p>
							 </td><td align="left" valign="top" headers="idm139836697293424"> <p>
								You pay GCP hourly on a pay-as-you-go model. Such images are called "on-demand" images. GCP offers support for on-demand images through a support agreement.
							</p>
							 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can create a custom image for GCP using Red Hat Image Builder. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a> for more information.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You cannot convert an on-demand instance to a Red Hat Cloud Access instance. To change from an on-demand image to a Red Hat Cloud Access (BYOS) image, create a new Red Hat Cloud Access instance and migrate data from your on-demand instance. Cancel your on-demand instance after you migrate your data to avoid double billing.
				</p></div></div><p>
				The remainder of this chapter includes information and procedures pertaining to custom images.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/compute/docs/images">Images</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/compute/docs/instances/create-start-instance#creating_an_instance_from_a_custom_image">Creating an instance from a custom image</a>
					</li></ul></div></section><section class="section" id="assembly_understanding-base-images_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h2 class="title">5.2. Understanding base images</h2></div></div></div><p>
				This section includes information on using preconfigured base images and their configuration settings.
			</p><section class="section" id="using-a-custom-base-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.2.1. Using a custom base image</h3></div></div></div><p>
					To manually configure a VM, you start with a base (starter) VM image. Once you have created the base VM image, you can modify configuration settings and add the packages the VM requires to operate on the cloud. You can make additional configuration changes for your specific application after you upload the image.
				</p><p>
					The recommended base VM image is the <span class="strong strong"><strong>Red Hat Enterprise Linux 8 KVM Guest Image</strong></span>, which you download from the <a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Customer Portal</a>. The KVM Guest Image is preconfigured with the following cloud configuration settings.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="emphasis"><em>The root account is disabled.</em></span> You temporarily enable root account access to make configuration changes and install packages that the cloud may require. This guide provides instructions for enabling root account access.
						</li><li class="listitem">
							<span class="emphasis"><em>A user account named <code class="literal">cloud-user</code> is preconfigured on the image.</em></span> The <code class="literal">cloud-user</code> account has sudo access.
						</li><li class="listitem">
							<span class="emphasis"><em>The image has <code class="literal">cloud-init</code> installed and enabled.</em></span> <code class="literal">cloud-init</code> is a service that handles provisioning of the VM (or instance) at initial boot.
						</li></ul></div><p>
					You can choose to use a custom Red Hat Enterprise Linux ISO image; however, when using a custom ISO image, you may need to make additional configuration changes.
				</p><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						<a class="link" href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
					</p></div></section><section class="section" id="aws-vm-configuration-settings_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.2.2. Virtual machine configuration settings</h3></div></div></div><p>
					Cloud VMs must have the following configuration settings.
				</p><div class="table" id="idm139836702084000"><p class="title"><strong>Table 5.2. VM configuration settings</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836702079152" scope="col">Setting</th><th align="left" valign="top" id="idm139836702078064" scope="col">Recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836702079152"> <p>
									ssh
								</p>
								 </td><td align="left" valign="top" headers="idm139836702078064"> <p>
									ssh must be enabled to provide remote access to your VMs.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139836702079152"> <p>
									dhcp
								</p>
								 </td><td align="left" valign="top" headers="idm139836702078064"> <p>
									The primary virtual adapter should be configured for dhcp.
								</p>
								 </td></tr></tbody></table></div></div></section></section><section class="section" id="assembly_create-vm-from-kvm-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h2 class="title">5.3. Creating a base image from a KVM Guest Image</h2></div></div></div><p>
				Follow the procedures in this section to create a base image from a KVM Guest Image.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enable virtualization</a> for your Red Hat Enterprise Linux 8 host machine.
				</p></div><section class="section" id="downloading-the-kvm-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.3.1. Downloading the KVM Guest Image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux KVM Guest Image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Move the image to <code class="literal">/var/lib/libvirt/images</code>.
						</li></ol></div></section><section class="section" id="creating-the-vm-from-the-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.3.2. Creating the VM from the KVM Guest Image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name kvmtest --memory 2048 --vcpus 2 --disk rhel-8.0-x86_64-kvm.qcow2,bus=virtio --import --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> size to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li><li class="listitem">
							Shut down the new VM after a login prompt appears.
						</li></ol></div></section><section class="section" id="setting-up-root-access-to-your-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.3.3. Setting up root access to your KVM Guest Image</h3></div></div></div><p>
					You need root access to make additional configuration changes to your image. You can also use <code class="literal">root</code> as one method of accessing your image once you have uploaded the image to the cloud. Perform the following procedure to enable root access to your VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							From your host system, use the <code class="literal command">virt-customize</code> command to generate a root password for the VM.
						</p><pre class="screen"># virt-customize -a &lt;guest-image-path&gt; --root-password password:&lt;PASSWORD&gt;</pre><p class="simpara">
							Example:
						</p><pre class="screen"># virt-customize -a /var/lib/libvirt/images/rhel-guest-image-8.0-120.x86_64.qcow2 --root-password password:redhat!
[   0.0] Examining the guest ...
[ 103.0] Setting a random seed
[ 103.0] Setting passwords
[ 112.0] Finishing off</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virt-edit</code> command to edit the <code class="literal">cloud.cfg</code> file on your VM. Within the file, enable root login and password authentication by setting <code class="literal">disable_root</code> to <code class="literal">0</code> and <code class="literal">ssh_pwauth</code> to <code class="literal">1</code>.
						</p><pre class="screen"># virt-edit -a &lt;guest-image-path&gt; /etc/cloud/cloud.cfg</pre></li><li class="listitem">
							Verify root access by starting the RHEL VM and logging in as <code class="literal">root</code>.
						</li><li class="listitem">
							Configure the image.
						</li><li class="listitem">
							Power down the VM.
						</li></ol></div></section></section><section class="section" id="creating-a-base-vm-from-an-iso-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h2 class="title">5.4. Creating a base VM from an ISO image</h2></div></div></div><p>
				Follow the procedures in this section to create a base image from an ISO image.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enable virtualization</a> for your Red Hat Enterprise Linux 8 host machine.
				</p></div><section class="section" id="downloading-the-iso-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.4.1. Downloading the ISO image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the latest Red Hat Enterprise Linux ISO image from the <a class="link" href="https://access.redhat.com/downloads/content/479/">Red Hat Customer Portal</a>.
						</li><li class="listitem">
							Move the image to <code class="literal">/var/lib/libvirt/images</code>.
						</li></ol></div></section><section class="section" id="creating-a-vm-from-the-ISO-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.4.2. Creating a VM from the ISO image</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Ensure that you have enabled your host machine for virtualization. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#enabling-virtualization-in-rhel8_virt-getting-started">Enabling virtualization in RHEL 8</a> for information and procedures.
						</li><li class="listitem"><p class="simpara">
							Create and start a basic Red Hat Enterprise Linux VM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#assembly_creating-virtual-machines_virt-getting-started">Creating virtual machines</a> for instructions.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									If you use the command line to create your VM, ensure that you set the default memory and CPUs to the capacity you want for the VM. Set your virtual network interface to <span class="strong strong"><strong>virtio</strong></span>.
								</p><p class="simpara">
									A basic command-line sample follows.
								</p><pre class="screen">virt-install --name isotest --memory 2048 --vcpus 2 --disk size=8,bus=virtio --location rhel-8.0-x86_64-dvd.iso --os-variant=rhel8.0</pre></li><li class="listitem"><p class="simpara">
									If you use the web console to create your VM, follow the procedure in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8_configuring-and-managing-virtualization#creating-vms-and-installing-an-os-using-the-rhel-8-web-console_assembly_creating-virtual-machines">Creating virtual machines using the web console</a>, with these caveats:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Do not check <span class="strong strong"><strong>Immediately Start VM</strong></span>.
										</li><li class="listitem">
											Change your <span class="strong strong"><strong>Memory</strong></span> and <span class="strong strong"><strong>Storage Size</strong></span> to your preferred settings.
										</li><li class="listitem">
											Before you start the installation, ensure that you have changed <span class="strong strong"><strong>Model</strong></span> under <span class="strong strong"><strong>Virtual Network Interface Settings</strong></span> to <span class="strong strong"><strong>virtio</strong></span> and change your <span class="strong strong"><strong>vCPUs</strong></span> to the capacity settings you want for the VM.
										</li></ul></div></li></ol></div></li></ol></div></section><section class="section" id="completing-the-rhel-installation_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h3 class="title">5.4.3. Completing the RHEL installation</h3></div></div></div><p>
					Perform the following steps to complete the installation and to enable root access once the VM launches.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Choose the language you want to use during the installation process.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Installation Summary</strong></span> view:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click <span class="strong strong"><strong>Software Selection</strong></span> and check <span class="strong strong"><strong>Minimal Install</strong></span>.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Done</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>Installation Destination</strong></span> and check <span class="strong strong"><strong>Custom</strong></span> under <span class="strong strong"><strong>Storage Configuration</strong></span>.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Verify at least 500 MB for <code class="literal">/boot</code>. You can use the remaining space for root <code class="literal">/</code>.
										</li><li class="listitem">
											Standard partitions are recommended, but you can use Logical Volume Management (LVM).
										</li><li class="listitem">
											You can use xfs, ext4, or ext3 for File System.
										</li><li class="listitem">
											Click <span class="strong strong"><strong>Done</strong></span> when you are finished with changes.
										</li></ul></div></li></ol></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Begin Installation</strong></span>.
						</li><li class="listitem">
							Set a <span class="strong strong"><strong>Root Password</strong></span>. Create other users as applicable.
						</li><li class="listitem">
							Reboot the VM and log in as <code class="literal">root</code> once the installation completes.
						</li><li class="listitem"><p class="simpara">
							Configure the image.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Ensure that the <code class="literal">cloud-init</code> package is installed and enabled.
							</p></div></div></li><li class="listitem">
							Power down the VM.
						</li></ol></div></section></section><section class="section" id="uploading-the-rhel-image-to-gcp_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform"><div class="titlepage"><div><div><h2 class="title">5.5. Uploading the RHEL image to GCP</h2></div></div></div><p>
				Follow the procedures in this section to upload your image to GCP.
			</p><section class="section" id="creating-a-new-project-on-the-google-cloud-platform_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.1. Creating a new project on GCP</h3></div></div></div><p>
					Complete the following steps to create a new project on GCP.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						You must have created an account with GCP. If you have not, see <a class="link" href="https://cloud.google.com/">Google Cloud</a> for more information.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Launch the <a class="link" href="https://console.cloud.google.com/">GCP Console</a>.
						</li><li class="listitem">
							Click the drop-down to the right of <span class="strong strong"><strong>Google Cloud Platform</strong></span>.
						</li><li class="listitem">
							From the pop-up, click <span class="strong strong"><strong>NEW PROJECT</strong></span>.
						</li><li class="listitem">
							From the <span class="strong strong"><strong>New Project</strong></span> window, enter a name for your new project.
						</li><li class="listitem">
							Check the <span class="strong strong"><strong>Organization</strong></span>. Click the drop-down menu to change the organization, if necessary.
						</li><li class="listitem">
							Confirm the <span class="strong strong"><strong>Location</strong></span> of your parent organization or folder. Click <span class="strong strong"><strong>Browse</strong></span> to search for and change this value, if necessary.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>CREATE</strong></span> to create your new GCP project.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Once you have installed the Google Cloud SDK, you can use the <code class="literal command">gcloud projects create</code> CLI command to create a project. A simple example follows.
							</p><pre class="screen">gcloud projects create my-gcp-project3 --name project3</pre><p>
								The example creates a project with the project ID <code class="literal">my-gcp-project3</code> and the project name <code class="literal">project3</code>. See <a class="link" href="https://cloud.google.com/sdk/gcloud/reference/projects/create">gcloud project create</a> for more information.
							</p></div></div></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						<a class="link" href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">Creating and Managing Resources</a>
					</p></div></section><section class="section" id="installing-the-google-cloud-sdk_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.2. Installing the Google Cloud SDK</h3></div></div></div><p>
					Complete the following steps to install the Google Cloud SDK.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a project on the GCP if you have not already done so. See <a class="link" href="index.html#creating-a-new-project-on-the-google-cloud-platform_uploading-the-rhel-image-to-gcp" title="5.5.1. Creating a new project on GCP">Creating a new project on the Google Cloud Platform</a> for more information.
						</li><li class="listitem">
							Ensure that your host system includes Python 2.7. If it does not, install Python 2.7.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Follow the GCP instructions for downloading and extracting the Google Cloud SDK archive. See the GCP document <a class="link" href="https://cloud.google.com/sdk/docs/quickstart-linux">Quickstart for Linux</a> for details.
						</li><li class="listitem"><p class="simpara">
							Follow the same instructions for initializing the Google Cloud SDK.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Once you have initialized the Google Cloud SDK, you can use the gcloud CLI commands to perform tasks and obtain information about your project and instances. For example, you can display project information with the <code class="literal command">gcloud compute project-info describe --project &lt;project-name&gt;</code> command.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/docs/quickstart-linux">Quickstart for Linux</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/gcloud/reference/">gcloud command reference</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/gcloud/">gcloud command-line tool overview</a>
						</li></ul></div></section><section class="section" id="creating-ssh-keys-for-google-compute-engine_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.3. Creating SSH keys for Google Compute Engine</h3></div></div></div><p>
					Perform the following procedure to generate and register SSH keys with GCE so that you can SSH directly into an instance using its public IP address.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">ssh-keygen</code> command to generate an SSH key pair for use with GCE.
						</p><pre class="screen"># ssh-keygen -t rsa -f ~/.ssh/google_compute_engine</pre></li><li class="listitem">
							From the <a class="link" href="https://console.cloud.google.com/home/dashboard">GCP Console Dashboard page</a>, click the <span class="strong strong"><strong>Navigation</strong></span> menu to the left of the Google <span class="strong strong"><strong>Cloud Console banner</strong></span> and select <span class="strong strong"><strong>Compute Engine</strong></span> and then select <span class="strong strong"><strong>Metadata</strong></span>.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>SSH Keys</strong></span> and then click <span class="strong strong"><strong>Edit</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Enter the output generated from the <code class="literal">~/.ssh/google_compute_engine.pub</code> file and click <span class="strong strong"><strong>Save</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If the Red Hat image you configured was a KVM Guest Image, the user name for your key must be <code class="literal">cloud-user</code>, which is the default user.
							</p></div></div><p class="simpara">
							You can now connect to your instance using standard SSH.
						</p><pre class="screen"># ssh -i ~/.ssh/google_compute_engine &lt;username&gt;@&lt;instance_external_ip&gt;</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You can run the <code class="literal command">gcloud compute config-ssh</code> command to populate your config file with aliases for your instances. The aliases allow simple SSH connections by instance name. For information on the <code class="literal command">gcloud compute config-ssh</code> command, see <a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/config-ssh">gcloud compute config-ssh</a>.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/config-ssh">gcloud compute config-ssh</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">Connecting to instances</a>
						</li></ul></div></section><section class="section" id="creating-a-storage-bucket-in-gcp-storage_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.4. Creating a storage bucket in GCP Storage</h3></div></div></div><p>
					Importing to GCP requires a GCP Storage Bucket. Complete the following steps to create a bucket.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							If you are not already logged in to GCP, log in with the following command.
						</p><pre class="screen"># gcloud auth login</pre></li><li class="listitem"><p class="simpara">
							Create a storage bucket.
						</p><pre class="screen"># gsutil mb gs://bucket_name</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can use the Google Cloud Console to create a bucket. See <a class="link" href="https://cloud.google.com/storage/docs/quickstart-console#create_a_bucket">Create a bucket</a> for information.
							</p></div></div></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						<a class="link" href="https://cloud.google.com/storage/docs/quickstart-console#create_a_bucket">Create a bucket</a>
					</p></div></section><section class="section" id="converting-and-uploading-your-image-to-your-gcp-bucket_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.5. Converting and uploading your image to your GCP Bucket</h3></div></div></div><p>
					Complete the following procedure to convert and upload your image to your GCP Bucket. The samples are representative; they convert a <code class="literal">qcow2</code> image to <code class="literal">raw</code> format and then tar that image for upload.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">qemu-img</code> command to convert your image. The converted image must have the name <code class="literal">disk.raw</code>.
						</p><pre class="screen"># qemu-img convert -f qcow2 -O raw gc-iso-dvd.qcow2 disk.raw</pre></li><li class="listitem"><p class="simpara">
							Tar the image.
						</p><pre class="screen"># tar --format=oldgnu -Sczf disk.raw.tar.gz disk.raw</pre></li><li class="listitem"><p class="simpara">
							Upload the image to the bucket you created previously. Upload could take a few minutes.
						</p><pre class="screen"># gsutil cp disk.raw.tar.gz gs://bucket_name</pre></li><li class="listitem">
							From the <span class="strong strong"><strong>Google Cloud Platform</strong></span> home screen, click the collapsed menu icon and select <span class="strong strong"><strong>Storage</strong></span> and then select <span class="strong strong"><strong>Browser</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click the name of your bucket.
						</p><p class="simpara">
							The tarred image is listed under your bucket name.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You can also upload your image using the <span class="strong strong"><strong>GCP Console</strong></span>. To do so, click the name of your bucket and then click <span class="strong strong"><strong>Upload files</strong></span>.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://cloud.google.com/compute/docs/import/import-existing-image">Manually importing virtual disks</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/compute/docs/import/">Choosing an import method</a>
						</li></ul></div></section><section class="section" id="creating-an-image-from-the-object-in-the-gcp-bucket_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.6. Creating an image from the object in the GCP bucket</h3></div></div></div><p>
					Perform the following procedure to create an image from the object in your GCP bucket.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command to create an image for GCE. Specify the name of the image you are creating, the bucket name, and the name of the tarred image.
						</p><pre class="screen"># gcloud compute images create my-image-name --source-uri gs://my-bucket-name/disk.raw.tar.gz</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can use the Google Cloud Console to create an image. See <a class="link" href="https://cloud.google.com/compute/docs/images/create-delete-deprecate-private-images">Creating, deleting, and deprecating custom images</a> for information.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Optionally, find the image in the GCP Console.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Click the <span class="strong strong"><strong>Navigation</strong></span> menu to the left of the <span class="strong strong"><strong>Google Cloud Console</strong></span> banner.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Compute Engine</strong></span> and then <span class="strong strong"><strong>Images</strong></span>.
								</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://cloud.google.com/compute/docs/images/create-delete-deprecate-private-images">Creating, deleting, and deprecating custom images</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/images/create">gcloud compute images create</a>
						</li></ul></div></section><section class="section" id="creating-a-compute-engine-instance-from-an-image_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.7. Creating a Google Compute Engine instance from an image</h3></div></div></div><p>
					Complete the following steps to configure a GCE VM instance using the GCP Console.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The following procedure provides instructions for creating a basic VM instance using the GCP Console. See <a class="link" href="https://cloud.google.com/compute/docs/instances/create-start-instance">Creating and starting a VM instance</a> for more information on GCE VM instances and their configuration options.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							From the <a class="link" href="https://console.cloud.google.com/home/dashboard">GCP Console Dashboard page</a>, click the <span class="strong strong"><strong>Navigation</strong></span> menu to the left of the Google <span class="strong strong"><strong>Cloud Console banner</strong></span> and select <span class="strong strong"><strong>Compute Engine</strong></span> and then select <span class="strong strong"><strong>Images</strong></span>.
						</li><li class="listitem">
							Select your image.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Create Instance</strong></span>.
						</li><li class="listitem">
							On the <span class="strong strong"><strong>Create an instance</strong></span> page, enter a <span class="strong strong"><strong>Name</strong></span> for your instance.
						</li><li class="listitem">
							Choose a <span class="strong strong"><strong>Region</strong></span> and <span class="strong strong"><strong>Zone</strong></span>.
						</li><li class="listitem">
							Choose a <span class="strong strong"><strong>Machine configuration</strong></span> that meets or exceeds the requirements of your workload.
						</li><li class="listitem">
							Ensure that <span class="strong strong"><strong>Boot disk</strong></span> specifies the name of your image.
						</li><li class="listitem">
							Optionally, under <span class="strong strong"><strong>Firewall</strong></span>, select <span class="strong strong"><strong>Allow HTTP traffic</strong></span> or <span class="strong strong"><strong>Allow HTTPS traffic</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Create</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								These are the minimum configuration options necessary to create a basic instance. Review additional options based on your application requirements.
							</p></div></div></li><li class="listitem">
							Find your image under <span class="strong strong"><strong>VM instances</strong></span>.
						</li><li class="listitem"><p class="simpara">
							From the GCP Console Dashboard, click the <span class="strong strong"><strong>Navigation</strong></span> menu to the left of the Google <span class="strong strong"><strong>Cloud Console banner</strong></span> and select <span class="strong strong"><strong>Compute Engine</strong></span> and then select <span class="strong strong"><strong>VM instances</strong></span>.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Alternatively, you can use the <code class="literal command">gcloud compute instances create</code> CLI command to create a GCE VM instance from an image. A simple example follows.
							</p><pre class="screen">gcloud compute instances create myinstance3 --zone=us-central1-a --image test-iso2-image</pre><p>
								The example creates a VM instance named <code class="literal">myinstance3</code> in zone <code class="literal">us-central1-a</code> based upon the existing image <code class="literal">test-iso2-image</code>. See <a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/instances/create">gcloud compute instances create</a> for more information.
							</p></div></div></li></ol></div></section><section class="section" id="connecting-to-your-instance_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.8. Connecting to your instance</h3></div></div></div><p>
					Perform the following procedure to connect to your GCE instance using its public IP address.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command to ensure that your instance is running. The command lists information about your GCE instance, including whether the instance is running, and, if so, the public IP address of the running instance.
						</p><pre class="screen"># gcloud compute instances list</pre></li><li class="listitem"><p class="simpara">
							Connect to your instance using standard SSH. The example uses the <code class="literal">google_compute_engine</code> key created earlier.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If the Red Hat image you configured was a KVM Guest Image, use <code class="literal">cloud-user</code>, which is the default user name.
							</p></div></div><pre class="screen"># ssh -i ~/.ssh/google_compute_engine &lt;user_name&gt;@&lt;instance_external_ip&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								GCP offers a number of ways to SSH into your instance. See <a class="link" href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">Connecting to instances</a> for more information. You can also connect to your instance using the root account and password you set previously.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/instances/list">gcloud compute instances list</a>
						</li><li class="listitem">
							<a class="link" href="https://cloud.google.com/compute/docs/instances/connecting-to-instance">Connecting to instances</a>
						</li></ul></div></section><section class="section" id="attaching-subscriptions_uploading-the-rhel-image-to-gcp"><div class="titlepage"><div><div><h3 class="title">5.5.9. Attaching Red Hat subscriptions</h3></div></div></div><p>
					Complete the following steps to attach the subscriptions you previously enabled through the Red Hat Cloud Access program.
				</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
						You must have enabled your subscriptions.
					</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Register your system.
						</p><pre class="screen">subscription-manager register --auto-attach</pre></li><li class="listitem"><p class="simpara">
							Attach your subscriptions.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									You can use an activation key to attach subscriptions. See <a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>.
								</li><li class="listitem">
									Alternatively, you can manually attach a subscription using the ID of the subscription pool (Pool ID). See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>.
								</li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/articles/1378093">Creating Red Hat Customer Portal Activation Keys</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/quick_registration_for_rhel/sub-cli">Attaching and Removing Subscriptions Through the Command Line</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html-single/rhsm/index">Using and Configuring Red Hat Subscription Manager</a>
						</li></ul></div></section></section></section><section class="chapter" id="configuring-rhel-ha-on-gcp_deploying-a-virtual-machine-on-aws"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Configuring Red Hat High Availability Cluster on Google Cloud Platform</h1></div></div></div><p>
			This chapter includes information and procedures for configuring a Red Hat High Availability (HA) cluster on Google Cloud Platform (GCP) using Google Compute Engine (GCE) virtual machine (VM) instances as cluster nodes.
		</p><p>
			The chapter includes prerequisite procedures for setting up your environment for GCP. Once you have set up your environment, you can create and configure VM instances.
		</p><p>
			The chapter also includes procedures specific to the creation of HA clusters, which transform individual nodes into a cluster of HA nodes on GCP. These include procedures for installing the High Availability packages and agents on each cluster node, configuring fencing, and installing network resource agents.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					You must be enrolled in the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a> and have unused RHEL subscriptions. The attached subscription must include access to the following repositories for each GCP instance.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Red Hat Enterprise Linux 8 Server: rhel-8-server-rpms/8Server/x86_64
						</li><li class="listitem">
							Red Hat Enterprise Linux 8 Server (High Availability): rhel-8-server-ha-rpms/8Server/x86_64
						</li></ul></div></li><li class="listitem">
					You must belong to an active GCP project and have sufficient permissions to create resources in the project.
				</li><li class="listitem">
					Your project should have a <a class="link" href="https://cloud.google.com/iam/docs/understanding-service-accounts">service account</a> that belongs to a VM instance and not an individual user. See <a class="link" href="https://cloud.google.com/compute/docs/access/create-enable-service-accounts-for-instances#using_the_compute_engine_default_service_account">Using the Compute Engine Default Service Account</a> for information about using the default service account instead of creating a separate service account.
				</li></ul></div><p>
			If you or your project administrator create a custom service account, the service account should be configured for the following roles.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Cloud Trace Agent
				</li><li class="listitem">
					Compute Admin
				</li><li class="listitem">
					Compute Network Admin
				</li><li class="listitem">
					Cloud Datastore User
				</li><li class="listitem">
					Logging Admin
				</li><li class="listitem">
					Monitoring Editor
				</li><li class="listitem">
					Monitoring Metric Writer
				</li><li class="listitem">
					Service Account Administrator
				</li><li class="listitem">
					Storage Admin
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/3131341">Support Policies for RHEL High Availability Clusters - Microsoft Azure Virtual Machines as Cluster Members</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/3071021">Support Policies for RHEL High Availability clusters - Transport Protocols</a>
				</li><li class="listitem">
					<a class="link" href="https://cloud.google.com/vpc/docs/vpc">VPC network overview</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/2679211">Exploring RHEL High Availability’s Components, Concepts, and Features - Overview of Transport Protocols</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/articles/2679251">Design Guidance for RHEL High Availability Clusters - Selecting the Transport Protocol</a>
				</li></ul></div><section class="section" id="required-system-packages_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.1. Required system packages</h2></div></div></div><p>
				The procedures in this chapter assume you are using a host system running Red Hat Enterprise Linux. To successfully complete the procedures, your host system must have the following packages installed.
			</p><div class="table" id="idm139836699254304"><p class="title"><strong>Table 6.1. System packages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836697959664" scope="col">Package</th><th align="left" valign="top" id="idm139836697958576" scope="col">Repository</th><th align="left" valign="top" id="idm139836697957488" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836697959664"> <p>
								libvirt
							</p>
							 </td><td align="left" valign="top" headers="idm139836697958576"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836697957488"> <p>
								Open source API, daemon, and management tool for managing platform virtualization
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697959664"> <p>
								virt-install
							</p>
							 </td><td align="left" valign="top" headers="idm139836697958576"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836697957488"> <p>
								A command-line utility for building VMs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697959664"> <p>
								libguestfs
							</p>
							 </td><td align="left" valign="top" headers="idm139836697958576"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836697957488"> <p>
								A library for accessing and modifying VM file systems
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836697959664"> <p>
								libguestfs-tools
							</p>
							 </td><td align="left" valign="top" headers="idm139836697958576"> <p>
								rhel-8-for-x86_64-appstream-rpms
							</p>
							 </td><td align="left" valign="top" headers="idm139836697957488"> <p>
								System administration tools for VMs; includes the guestfish utility
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="gcp-image-options_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.2. Red Hat Enterprise Linux image options on GCP</h2></div></div></div><p>
				The following table lists image choices and the differences in the image options.
			</p><div class="table" id="idm139836697931984"><p class="title"><strong>Table 6.2. Image options</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139836701715120" scope="col">Image option</th><th align="left" valign="top" id="idm139836701714032" scope="col">Subscriptions</th><th align="left" valign="top" id="idm139836701712944" scope="col">Sample scenario</th><th align="left" valign="top" id="idm139836701711856" scope="col">Considerations</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139836701715120"> <p>
								Choose to deploy a custom image that you move to GCP.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701714032"> <p>
								Leverage your existing Red Hat subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701712944"> <p>
								Enable subscriptions through the <a class="link" href="https://access.redhat.com/public-cloud">Red Hat Cloud Access program</a>, upload your custom image, and attach your subscriptions.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701711856"> <p>
								The subscription includes the Red Hat product cost; you pay all other instance costs.
							</p>
							 <p>
								Custom images that you move to GCP are called "Cloud Access" images because you leverage your existing Red Hat subscriptions. Red Hat provides support directly for Cloud Access images.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139836701715120"> <p>
								Choose to deploy an existing GCP image that includes RHEL.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701714032"> <p>
								The GCP images include a Red Hat product.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701712944"> <p>
								Choose a RHEL image when you launch an instance on the <a class="link" href="https://console.cloud.google.com/compute/instances">GCP Compute Engine</a>, or choose an image from the <a class="link" href="https://cloud.google.com/marketplace/">Google Cloud Platform Marketplace</a>.
							</p>
							 </td><td align="left" valign="top" headers="idm139836701711856"> <p>
								You pay GCP hourly on a pay-as-you-go model. Such images are called "on-demand" images. GCP offers support for on-demand images through a support agreement.
							</p>
							 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can create a custom image for GCP using Red Hat Image Builder. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a> for more information.
				</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					You cannot convert an on-demand instance to a Red Hat Cloud Access instance. To change from an on-demand image to a Red Hat Cloud Access (BYOS) image, create a new Red Hat Cloud Access instance and migrate data from your on-demand instance. Cancel your on-demand instance after you migrate your data to avoid double billing.
				</p></div></div><p>
				The remainder of this chapter includes information and procedures pertaining to custom images.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/compute/docs/images">Images</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_subscription_management/1/html/red_hat_cloud_access_reference_guide/index">Red Hat Cloud Access Reference Guide</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/composing_a_customized_rhel_system_image/index">Composing a Customized RHEL System Image</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/compute/docs/instances/create-start-instance#creating_an_instance_from_a_custom_image">Creating an instance from a custom image</a>
					</li></ul></div></section><section class="section" id="installing-the-google-cloud-sdk_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.3. Installing the Google Cloud SDK</h2></div></div></div><p>
				Complete the following steps to install the Google Cloud SDK.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Create a project on the GCP if you have not already done so. See <a class="link" href="index.html#creating-a-new-project-on-the-google-cloud-platform_uploading-the-rhel-image-to-gcp" title="5.5.1. Creating a new project on GCP">Creating a new project on the Google Cloud Platform</a> for more information.
					</li><li class="listitem">
						Ensure that your host system includes Python 2.7. If it does not, install Python 2.7.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Follow the GCP instructions for downloading and extracting the Google Cloud SDK archive. See the GCP document <a class="link" href="https://cloud.google.com/sdk/docs/quickstart-linux">Quickstart for Linux</a> for details.
					</li><li class="listitem"><p class="simpara">
						Follow the same instructions for initializing the Google Cloud SDK.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Once you have initialized the Google Cloud SDK, you can use the gcloud CLI commands to perform tasks and obtain information about your project and instances. For example, you can display project information with the <code class="literal command">gcloud compute project-info describe --project &lt;project-name&gt;</code> command.
						</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://cloud.google.com/sdk/docs/quickstart-linux">Quickstart for Linux</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/sdk/gcloud/reference/">gcloud command reference</a>
					</li><li class="listitem">
						<a class="link" href="https://cloud.google.com/sdk/gcloud/">gcloud command-line tool overview</a>
					</li></ul></div></section><section class="section" id="gcp-ha-creating-a-gcp-image-bucket_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.4. Creating a GCP image bucket</h2></div></div></div><p>
				The following document includes the minimum requirements for creating a <a class="link" href="https://cloud.google.com/storage/docs/storage-classes#multi-regional">multi-regional</a> bucket in your default location.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					GCP storage utility (gsutil)
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you are not already logged in to Google Cloud Platform, log in with the following command.
					</p><pre class="screen"># gcloud auth login</pre></li><li class="listitem"><p class="simpara">
						Create a storage bucket.
					</p><pre class="literallayout">$ gsutil mb gs://<span class="emphasis"><em>BucketName</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen">$ gsutil mb gs://rhel-ha-bucket</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://cloud.google.com/storage/docs/gsutil/commands/mb">Make buckets</a>
				</p></div></section><section class="section" id="gcp-ha-creating-vpc-network-and-subnet_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.5. Creating a custom virtual private cloud network and subnet</h2></div></div></div><p>
				Complete the following steps to create a custom virtual private cloud (VPC) network and subnet.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Launch the GCP Console.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>VPC networks</strong></span> under <span class="strong strong"><strong>Networking</strong></span> in the left navigation pane.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create VPC Network</strong></span>.
					</li><li class="listitem">
						Enter a name for the VPC network.
					</li><li class="listitem">
						Under the <span class="strong strong"><strong>New subnet</strong></span>, create a <span class="strong strong"><strong>Custom subnet</strong></span> in the region where you want to create the cluster.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</li></ol></div></section><section class="section" id="gcp-ha-preparing-and-importing-base-gcp-image_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.6. Preparing and importing a base GCP image</h2></div></div></div><p>
				Complete the following steps to prepare the image for GCP. The following procedures assume you have created an image from a KVM Guest Image.
			</p><p>
				See <a class="link" href="index.html#assembly_create-vm-from-kvm-guest-image_deploying-a-rhel-image-as-a-compute-engine-instance-on-google-cloud-platform" title="5.3. Creating a base image from a KVM Guest Image">Create a VM from a KVM Guest image</a> for more information.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to convert the file. Images uploaded to GCP must be in <code class="literal">raw</code> format and named <code class="literal">disk.raw</code>.
					</p><pre class="literallayout">$ qemu-img convert -f qcow2 <span class="emphasis"><em>ImageName</em></span>.qcow2 -O raw disk.raw</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to compress the <code class="literal">raw</code> file. Images uploaded to GCP must be compressed.
					</p><pre class="literallayout">$ tar -Sczf <span class="emphasis"><em>ImageName</em></span>.tar.gz disk.raw</pre></li><li class="listitem"><p class="simpara">
						Import the compressed image to the bucket created earlier.
					</p><pre class="literallayout">$ gsutil cp <span class="emphasis"><em>ImageName</em></span>.tar.gz gs://<span class="emphasis"><em>BucketName</em></span></pre></li></ol></div></section><section class="section" id="gcp-ha-creating-and-configuring-a-base-gcp-instance_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.7. Creating and configuring a base GCP instance</h2></div></div></div><p>
				Complete the following steps to create and configure a GCP instance that complies with GCP operating and security requirements.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to create an image from the compressed file in the bucket.
					</p><pre class="literallayout">$ gcloud compute images create <span class="emphasis"><em>BaseImageName</em></span> --source-uri gs://<span class="emphasis"><em>BucketName</em></span>/<span class="emphasis"><em>BaseImageName</em></span>.tar.gz</pre><p class="simpara">
						Example:
					</p><pre class="screen">[admin@localhost ~] $ gcloud compute images create rhel-76-server --source-uri gs://user-rhelha/rhel-server-76.tar.gz
Created [https://www.googleapis.com/compute/v1/projects/MyProject/global/images/rhel-server-76].
NAME            PROJECT                 FAMILY  DEPRECATED  STATUS
rhel-76-server  rhel-ha-testing-on-gcp                      READY</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create a template instance from the image. The minimum size required for a base RHEL instance is n1-standard-2. See <a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/instances/create">gcloud compute instances create</a> for additional configuration options.
					</p><pre class="literallayout">$ gcloud compute instances create <span class="emphasis"><em>BaseInstanceName</em></span> --can-ip-forward --machine-type n1-standard-2 --image <span class="emphasis"><em>BaseImageName</em></span> --service-account ServiceAccountEmail</pre><p class="simpara">
						Example:
					</p><pre class="screen">[admin@localhost ~] $ gcloud compute instances create rhel-76-server-base-instance --can-ip-forward --machine-type n1-standard-2 --image rhel-76-server --service-account account@project-name-on-gcp.iam.gserviceaccount.com
Created [https://www.googleapis.com/compute/v1/projects/rhel-ha-testing-on-gcp/zones/us-east1-b/instances/rhel-76-server-base-instance].
NAME   ZONE   MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP     STATUS
rhel-76-server-base-instance  us-east1-bn1-standard-2          10.10.10.3   192.227.54.211  RUNNING</pre></li><li class="listitem"><p class="simpara">
						Connect to the instance with an SSH terminal session.
					</p><pre class="screen">$ ssh root@PublicIPaddress</pre></li><li class="listitem"><p class="simpara">
						Update the RHEL software.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Register with Red Hat Subscription Manager (RHSM).
							</li><li class="listitem">
								Enable a Subscription pool ID (or use the <code class="literal commnad">--auto-attach</code> command).
							</li><li class="listitem"><p class="simpara">
								Disable all repositories.
							</p><pre class="screen"># subscription-manager repos --disable=*</pre></li><li class="listitem"><p class="simpara">
								Enable the following repository.
							</p><pre class="screen"># subscription-manager repos --enable=rhel-8-server-rpms</pre></li><li class="listitem"><p class="simpara">
								Run <code class="literal">yum update</code>.
							</p><pre class="screen"># yum update -y</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Install the GCP Linux Guest Environment on the running instance (in-place installation).
					</p><p class="simpara">
						See <a class="link" href="https://cloud.google.com/compute/docs/images/install-guest-environment#in_place">Install the guest environment in-place</a> for instructions.
					</p></li><li class="listitem">
						Select the <span class="strong strong"><strong>CentOS/RHEL</strong></span> option.
					</li><li class="listitem">
						Copy the command script and paste it at the command prompt to run the script immediately.
					</li><li class="listitem"><p class="simpara">
						Make the following configuration changes to the instance. These changes are based on GCP recommendations for custom images. See <a class="link" href="https://cloud.google.com/sdk/gcloud/reference/compute/images/list">gcloudcompute images list</a> for more information.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Edit the <code class="literal">/etc/chrony.conf</code> file and remove all NTP servers.
							</li><li class="listitem"><p class="simpara">
								Add the following NTP server.
							</p><pre class="screen">metadata.google.internal iburst Google NTP server</pre></li><li class="listitem"><p class="simpara">
								Remove any persistent network device rules.
							</p><pre class="screen"># rm -f /etc/udev/rules.d/70-persistent-net.rules

# rm -f /etc/udev/rules.d/75-persistent-net-generator.rules</pre></li><li class="listitem"><p class="simpara">
								Set the network service to start automatically.
							</p><pre class="screen"># chkconfig network on</pre></li><li class="listitem"><p class="simpara">
								Set the ssh service to start automatically.
							</p><pre class="screen"># systemctl enable sshd
# systemctl is-enabled sshd</pre></li><li class="listitem"><p class="simpara">
								Enter the following command to set the time zone to UTC.
							</p><pre class="screen"># ln -sf /usr/share/zoneinfo/UTC /etc/localtime</pre></li><li class="listitem"><p class="simpara">
								(Optional) Edit the <code class="literal">/etc/ssh/ssh_config</code> file and add the following lines to the end of the file. This keeps your SSH session alive during longer periods of inactivity.
							</p><pre class="screen"># Server times out connections after several minutes of inactivity.
# Keep alive ssh connections by sending a packet every 7 minutes.
ServerAliveInterval 420</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/ssh/sshd_config</code> file and make the following changes, if necessary. The <span class="strong strong"><strong>ClientAliveInterval 420</strong></span> setting is optional; this keeps your SSH session alive during longer periods of inactivity.
							</p><pre class="screen">PermitRootLogin no
PasswordAuthentication no
AllowTcpForwarding yes
X11Forwarding no
PermitTunnel no
# Compute times out connections after 10 minutes of inactivity.
# Keep ssh connections alive by sending a packet every 7 minutes.
ClientAliveInterval 420</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Enter the following command to disable password access. Edit the <code class="literal">/etc/cloud/cloud.cfg</code> file.
					</p><pre class="screen">ssh_pwauth from 1 to 0.
ssh_pwauth: 0</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Previously, you enabled password access to allow SSH session access to configure the instance. You must disable password access. All SSH session access must be passwordless.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Enter the following command to unregister the instance from the subscription manager.
					</p><pre class="screen"># subscription-manager unregister</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to clean the shell history. Keep the instance running for the next procedure.
					</p><pre class="screen"># export HISTSIZE=0</pre></li></ol></div></section><section class="section" id="gcp-ha-creating-a-snapshot-image_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.8. Creating a snapshot image</h2></div></div></div><p>
				Complete the following steps to preserve the instance configuration settings and create a snapshot.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the running instance, enter the following command to synchronize data to disk.
					</p><pre class="screen"># sync</pre></li><li class="listitem"><p class="simpara">
						On your host system, enter the following command to create the snapshot.
					</p><pre class="literallayout">$ gcloud compute disks snapshot <span class="emphasis"><em>InstanceName</em></span> --snapshot-names <span class="emphasis"><em>SnapshotName</em></span></pre></li><li class="listitem"><p class="simpara">
						On your host system, enter the following command to create the configured image from the snapshot.
					</p><pre class="literallayout">$ gcloud compute images create <span class="emphasis"><em>ConfiguredImageFromSnapshot</em></span> --source-snapshot <span class="emphasis"><em>SnapshotName</em></span></pre></li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://cloud.google.com/compute/docs/disks/create-snapshots">Creating Persistent Disk Snapshots</a>
				</p></div></section><section class="section" id="gcp-ha-creating-rhel-ha-node-template-instance-and-rhel-ha-nodes_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.9. Creating an HA node template instance and HA nodes</h2></div></div></div><p>
				Once you have configured an image from the snapshot, you can create a node template. Use this template to create all HA nodes. Complete the following steps to create the template and HA nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to create an instance template.
					</p><pre class="literallayout">$ gcloud compute instance-templates create <span class="emphasis"><em>InstanceTemplateName</em></span> --can-ip-forward --machine-type n1-standard-2  --image <span class="emphasis"><em>ConfiguredImageFromSnapshot</em></span> --service-account <span class="emphasis"><em>ServiceAccountEmailAddress</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout">[admin@localhost ~] $ gcloud compute instance-templates create rhel-81-instance-template --can-ip-forward --machine-type n1-standard-2 --image rhel-81-gcp-image --service-account account@project-name-on-gcp.iam.gserviceaccount.com
Created [https://www.googleapis.com/compute/v1/projects/project-name-on-gcp/global/instanceTemplates/rhel-81-instance-template].
NAME  MACHINE_TYPE   PREEMPTIBLE  CREATION_TIMESTAMP
rhel-81-instance-template   n1-standard-2          2018-07-25T11:09:30.506-07:00</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create multiple nodes in one zone.
					</p><pre class="literallayout"># gcloud compute instances create <span class="emphasis"><em>NodeName01</em></span> <span class="emphasis"><em>NodeName02</em></span> --source-instance-template <span class="emphasis"><em>InstanceTemplateName</em></span> --zone <span class="emphasis"><em>RegionZone</em></span> --network=<span class="emphasis"><em>NetworkName</em></span> --subnet=<span class="emphasis"><em>SubnetName</em></span></pre><p class="simpara">
						Example:
					</p><pre class="literallayout">[admin@localhost ~] $ gcloud compute instances create rhel81-node-01 rhel81-node-02 rhel81-node-03 --source-instance-template rhel-81-instance-template --zone us-west1-b --network=projectVPC --subnet=range0
Created [https://www.googleapis.com/compute/v1/projects/project-name-on-gcp/zones/us-west1-b/instances/rhel81-node-01].
Created [https://www.googleapis.com/compute/v1/projects/project-name-on-gcp/zones/us-west1-b/instances/rhel81-node-02].
Created [https://www.googleapis.com/compute/v1/projects/project-name-on-gcp/zones/us-west1-b/instances/rhel81-node-03].
NAME            ZONE        MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS
rhel81-node-01  us-west1-b  n1-standard-2               10.10.10.4   192.230.25.81   RUNNING
rhel81-node-02  us-west1-b  n1-standard-2               10.10.10.5   192.230.81.253  RUNNING
rhel81-node-03  us-east1-b  n1-standard-2               10.10.10.6   192.230.102.15  RUNNING</pre></li></ol></div></section><section class="section" id="gcp-ha-installing-rhel-ha-packages-and-agents_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.10. Installing HA packages and agents</h2></div></div></div><p>
				Complete the following steps on all nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the Google Cloud Console, select <span class="strong strong"><strong>Compute Engine</strong></span> and then select <span class="strong strong"><strong>VM instances</strong></span>.
					</li><li class="listitem">
						Select the instance, click the arrow next to <span class="strong strong"><strong>SSH</strong></span>, and select the <span class="strong strong"><strong>View</strong></span> gcloud command option.
					</li><li class="listitem">
						Paste this command at a command prompt for passwordless access to the instance.
					</li><li class="listitem">
						Enable sudo account access and register with Red Hat Subscription Manager.
					</li><li class="listitem">
						Enable a Subscription pool ID (or use the <code class="literal command">--auto-attach</code> command).
					</li><li class="listitem"><p class="simpara">
						Disable all repositories.
					</p><pre class="screen"># subscription-manager repos --disable=*</pre></li><li class="listitem"><p class="simpara">
						Enable the following repositories.
					</p><pre class="screen"># subscription-manager repos --enable=rhel-8-server-rpms
# subscription-manager repos --enable=rhel-ha-for-rhel-8-server-rpms</pre></li><li class="listitem"><p class="simpara">
						Install <code class="literal">pcs pacemaker</code>, the fence agents, and the resource agents.
					</p><pre class="screen"># yum install -y pcs pacemaker fence-agents-gce resource-agents-gcp</pre></li><li class="listitem"><p class="simpara">
						Update all packages.
					</p><pre class="screen"># yum update -y</pre></li></ol></div></section><section class="section" id="gcp-ha-configuring-rhel-ha-services_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.11. Configuring HA services</h2></div></div></div><p>
				Complete the following steps on all nodes to configure HA services.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						The user <code class="literal">hacluster</code> was created during the <code class="literal">pcs</code> and <code class="literal">pacemaker</code> installation in the previous step. Create a password for the user <code class="literal">hacluster</code> on all cluster nodes. Use the same password for all nodes.
					</p><pre class="screen"># passwd hacluster</pre></li><li class="listitem"><p class="simpara">
						If the <code class="literal">firewalld</code> service is installed, enter the following command to add the HA service.
					</p><pre class="screen"># firewall-cmd --permanent --add-service=high-availability

# firewall-cmd --reload</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to start the <code class="literal">pcs</code> service and enable it to start on boot.
					</p><pre class="screen"># systemctl start pcsd.service

# systemctl enable pcsd.service

Created symlink from /etc/systemd/system/multi-user.target.wants/pcsd.service to /usr/lib/systemd/system/pcsd.service.</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure the <code class="literal">pcs</code> service is running.
					</p><pre class="screen"># systemctl status pcsd.service

pcsd.service - PCS GUI and remote configuration interface
Loaded: loaded (/usr/lib/systemd/system/pcsd.service; enabled; vendor preset: disabled)
Active: active (running) since Mon 2018-06-25 19:21:42 UTC; 15s ago
Docs: man:pcsd(8)
man:pcs(8)
Main PID: 5901 (pcsd)
CGroup: /system.slice/pcsd.service
└─5901 /usr/bin/ruby /usr/lib/pcsd/pcsd &gt; /dev/null &amp;</pre></li><li class="listitem">
						Edit the <code class="literal">/etc/hosts</code> file. Add RHEL host names and internal IP addresses for all nodes.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://access.redhat.com/solutions/81123">How should the /etc/hosts file be set up on RHEL cluster nodes?</a>
				</p></div></section><section class="section" id="gcp-ha-creating-cluster-in-gcp_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.12. Creating a cluster</h2></div></div></div><p>
				Complete the following steps to create the cluster of nodes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On one of the nodes, enter the following command to authenticate the pcs user. Specify the name of each node in the cluster in the command.
					</p><pre class="literallayout"># pcs host auth  <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> <span class="emphasis"><em>hostname3</em></span>
Username: hacluster
Password:
<span class="emphasis"><em>hostname1</em></span>: Authorized
<span class="emphasis"><em>hostname2</em></span>: Authorized
<span class="emphasis"><em>hostname3</em></span>: Authorized</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create the cluster.
					</p><pre class="literallayout"># pcs cluster setup cluster-name <span class="emphasis"><em>hostname1</em></span> <span class="emphasis"><em>hostname2</em></span> _hostname3-</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the following command to enable nodes to join the cluster automatically when started.
					</p><pre class="screen"># pcs cluster enable --all</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to start the cluster.
					</p><pre class="screen"># pcs cluster start --all</pre></li></ol></div></section><section class="section" id="gcp-ha-creating-a-fencing-device_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.13. Creating a fencing device</h2></div></div></div><p>
				For most default configurations, the GCP instance names and the RHEL host names are identical.
			</p><p>
				Complete the following steps to create a fencing device.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to get GCP instance names. Note that the output also shows the internal ID for the instance.
					</p><pre class="literallayout"># fence_gce --zone us-west1-b --project=rhel-ha-on-gcp -o list</pre><p class="simpara">
						Example:
					</p><pre class="screen">Example:
[root@rhel81-node-01 ~]# fence_gce --zone us-west1-b --project=rhel-ha-testing-on-gcp -o list
44358**********3181,InstanceName-3
40819**********6811,InstanceName-1
71736**********3341,InstanceName-2</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create a fence device.
					</p><pre class="screen"># pcs stonith create _FenceDeviceName_ fence_gce zone=_Region-Zone_ project=_MyProject_</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification step</strong></p><p>
					Verify that the fence devices started.
				</p></div><pre class="screen"># pcs status</pre><p>
				Example:
			</p><pre class="screen">[root@rhel81-node-01 ~]# pcs status
Cluster name: gcp-cluster
Stack: corosync
Current DC: rhel81-node-02 (version 1.1.18-11.el7_5.3-2b07d5c5a9) - partition with quorum
Last updated: Fri Jul 27 12:53:25 2018
Last change: Fri Jul 27 12:51:43 2018 by root via cibadmin on rhel81-node-01

3 nodes configured
3 resources configured

Online: [ rhel81-node-01 rhel81-node-02 rhel81-node-03 ]

Full list of resources:

us-west1-b-fence    (stonith:fence_gce):    Started rhel81-node-01

Daemon Status:
corosync: active/enabled
pacemaker: active/enabled
pcsd: active/enabled</pre></section><section class="section" id="gcp-ha-configuring-gcp-node-authorization_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.14. Configuring GCP node authorization</h2></div></div></div><p>
				Configure cloud SDK tools to use your account credentials to access GCP.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Enter the following command on each node to initialize each node with your project ID and account credentials.
				</p></div><pre class="screen"># gcloud-ra init</pre></section><section class="section" id="gcp-ha-configuring-the-gcp-vcp-move-vip-resource-agent_configuring-rhel-ha-on-gcp"><div class="titlepage"><div><div><h2 class="title">6.15. Configuring the gcp-vcp-move-vip resource agent</h2></div></div></div><p>
				The <code class="literal">gcp-vpc-move-vip</code> resource agent attaches a secondary IP address (alias IP) to a running instance. This is a floating IP address that can be passed between different nodes in the cluster.
			</p><p>
				Enter the following command to show more information about this resource.
			</p><pre class="screen"># pcs resource describe gcp-vpc-move-vip</pre><p>
				You can configure the resource agent to use a primary subnet address range or a secondary subnet address range. This section includes procedures for both.
			</p><p>
				<span class="strong strong"><strong>Primary subnet address range</strong></span>
			</p><p>
				Complete the following steps to configure the resource for the primary VPC subnet.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to create the <code class="literal">aliasip</code> resource. Include an unused internal IP address. Include the CIDR block in the command.
					</p><pre class="literallayout"># pcs resource create aliasip gcp-vpc-move-vip  alias_ip=<span class="emphasis"><em>UnusedIPaddress/CIDRblock</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource create aliasip gcp-vpc-move-vip alias_ip=10.10.10.200/32</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create an <code class="literal">IPaddr2</code> resource for managing the IP on the node.
					</p><pre class="literallayout"># pcs resource create vip IPaddr2 nic=<span class="emphasis"><em>interface</em></span> ip=<span class="emphasis"><em>AliasIPaddress</em></span> cidr_netmask=32</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource create vip IPaddr2 nic=eth0 ip=10.10.10.200 cidr_netmask=32</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to group the network resources under <code class="literal">vipgrp</code>.
					</p><pre class="screen"># pcs resource group add vipgrp aliasip vip</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to verify that the resources have started and are grouped under <code class="literal">vipgrp</code>.
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs status</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to verify that the resource can move to a different node.
					</p><pre class="screen"># pcs resource move vip _Node_</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource move vip rhel81-node-03</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to verify that the <code class="literal">vip</code> successfully started on a different node.
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs status</pre></li></ol></div><p>
				<span class="strong strong"><strong>Secondary subnet address range</strong></span>
			</p><p>
				Complete the following steps to configure the resource for a secondary subnet address range.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					<a class="link" href="https://access.redhat.com/articles/3479821#header41">Create a custom network and subnet</a>
				</p></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to create a secondary subnet address range.
					</p><pre class="literallayout"># gcloud-ra compute networks subnets update <span class="emphasis"><em>SubnetName</em></span> --region <span class="emphasis"><em>RegionName</em></span> --add-secondary-ranges <span class="emphasis"><em>SecondarySubnetName</em></span>=<span class="emphasis"><em>SecondarySubnetRange</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen"># gcloud-ra compute networks subnets update range0 --region us-west1 --add-secondary-ranges range1=10.10.20.0/24</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create the <code class="literal">aliasip</code> resource. Create an unused internal IP address in the secondary subnet address range. Include the CIDR block in the command.
					</p><pre class="literallayout"># pcs resource create aliasip gcp-vpc-move-vip alias_ip=<span class="emphasis"><em>UnusedIPaddress/CIDRblock</em></span></pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource create aliasip gcp-vpc-move-vip alias_ip=10.10.20.200/32</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to create an <code class="literal">IPaddr2</code> resource for managing the IP on the node.
					</p><pre class="literallayout"># pcs resource create vip IPaddr2 nic=<span class="emphasis"><em>interface</em></span> ip=<span class="emphasis"><em>AliasIPaddress</em></span> cidr_netmask=32</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource create vip IPaddr2 nic=eth0 ip=10.10.20.200 cidr_netmask=32</pre></li><li class="listitem"><p class="simpara">
						Group the network resources under <code class="literal">vipgrp</code>.
					</p><pre class="screen"># pcs resource group add vipgrp aliasip vip</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification steps</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to verify that the resources have started and are grouped under <code class="literal">vipgrp</code>.
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs status</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to verify that the resource can move to a different node.
					</p><pre class="screen"># pcs resource move vip _Node_</pre><p class="simpara">
						Example:
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs resource move vip rhel81-node-03</pre></li><li class="listitem"><p class="simpara">
						Enter the following command to verify that the <code class="literal">vip</code> successfully started on a different node.
					</p><pre class="screen">[root@rhel81-node-01 ~]# pcs status</pre></li></ol></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm139836707573568"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
