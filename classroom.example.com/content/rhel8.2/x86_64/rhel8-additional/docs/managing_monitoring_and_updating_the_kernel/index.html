<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="81fe5550-3fb1-4f14-ac33-4b91eb1f1fd0" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="d13b5deed0a4b7c4b2bc6e6a6be8d3bd05ccc876:en-us" page="fd2a48f0-8f45-427c-9c61-011a78df877f" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index" />
<meta property="og:title" content="Managing, monitoring and updating the kernel Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This document provides the users and administrators with necessary information about configuring their workstations on the Linux kernel level. Such adjustments bring performance enhancements, easier troubleshooting or optimized system." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index" />
<meta name="twitter:title" content="Managing, monitoring and updating the kernel Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This document provides the users and administrators with necessary information about configuring their workstations on the Linux kernel level. Such adjustments bring performance enhancements, easier troubleshooting or optimized system." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Managing, monitoring and updating the kernel Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs07.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="6f12fc6" />
<meta name="cp-chrome-build-date" content="2020-06-23T22:47:47.449Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "6f12fc6",
        builddate : "2020-06-23T22:47:47.449Z",
        fetchdate : "2020-06-24T10:40:11-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=6f12fc6.css" />

<link href="chosen.css%3Fv=6f12fc6.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=6f12fc6" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__9KHtXrIGK7UhLs_peypOVV_qqUEhk0WY1m6BXUOA27E__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       '81fe5550-3fb1-4f14-ac33-4b91eb1f1fd0');
attributes.set('ResourceTitle',    'Managing, monitoring and updating the kernel');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       'd13b5deed0a4b7c4b2bc6e6a6be8d3bd05ccc876:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Managing, monitoring and updating the kernel", "/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"y7CPYAWLHIm7nasV2e9Nvbt3AkP2-sJpgFsLydiFL7o","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs07-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/">日本語</a></li>
                      <li><a href="index.html">English</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/managing_monitoring_and_updating_the_kernel/Red_Hat_Enterprise_Linux-8-Managing_monitoring_and_updating_the_kernel-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/managing_monitoring_and_updating_the_kernel/Red_Hat_Enterprise_Linux-8-Managing_monitoring_and_updating_the_kernel-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Managing, monitoring and updating the kernel</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#the-linux-kernel-rpm_managing-monitoring-and-updating-the-kernel">1. The Linux kernel RPM</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-an-rpm_the-linux-kernel-rpm">1.1. What an RPM is</a></li><li class=" leaf"><a href="index.html#the-linux-kernel-rpm-package-overview_the-linux-kernel-rpm">1.2. The Linux kernel RPM package overview</a></li><li class=" leaf"><a href="index.html#displaying-contents-of-the-kernel-package_the-linux-kernel-rpm">1.3. Displaying contents of the kernel package</a></li></ol></li><li class=" leaf"><a href="index.html#updating-kernel-with-yum_managing-monitoring-and-updating-the-kernel">2. Updating kernel with yum</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-the-kernel_updating-kernel-with-yum">2.1. What is the kernel</a></li><li class=" leaf"><a href="index.html#what-is-yum_updating-kernel-with-yum">2.2. What is yum</a></li><li class=" leaf"><a href="index.html#updating-the-kernel_updating-kernel-with-yum">2.3. Updating the kernel</a></li><li class=" leaf"><a href="index.html#installing-the-kernel_updating-kernel-with-yum">2.4. Installing the kernel</a></li></ol></li><li class=" leaf"><a href="index.html#managing-kernel-modules_managing-monitoring-and-updating-the-kernel">3. Managing kernel modules</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-kernel-modules_managing-kernel-modules">3.1. Introduction to kernel modules</a></li><li class=" leaf"><a href="index.html#introduction-to-bootloader-specification_managing-kernel-modules">3.2. Introduction to bootloader specification</a></li><li class=" leaf"><a href="index.html#kernel-module-dependencies_managing-kernel-modules">3.3. Kernel module dependencies</a></li><li class=" leaf"><a href="index.html#listing-currently-loaded-kernel-modules_managing-kernel-modules">3.4. Listing currently loaded kernel modules</a></li><li class=" leaf"><a href="index.html#listing-all-installed-kernels_managing-kernel-modules">3.5. Listing all installed kernels</a></li><li class=" leaf"><a href="index.html#setting-a-kernel-as-default_managing-kernel-modules">3.6. Setting a kernel as default</a></li><li class=" leaf"><a href="index.html#displaying-information-about-kernel-modules_managing-kernel-modules">3.7. Displaying information about kernel modules</a></li><li class=" leaf"><a href="index.html#loading-kernel-modules-at-system-runtime_managing-kernel-modules">3.8. Loading kernel modules at system runtime</a></li><li class=" leaf"><a href="index.html#unloading-kernel-modules-at-system-runtime_managing-kernel-modules">3.9. Unloading kernel modules at system runtime</a></li><li class=" leaf"><a href="index.html#loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules">3.10. Loading kernel modules automatically at system boot time</a></li><li class=" leaf"><a href="index.html#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules">3.11. Preventing kernel modules from being automatically loaded at system boot time</a></li><li class=" leaf"><a href="index.html#signing-kernel-modules-for-secure-boot_managing-kernel-modules">3.12. Signing kernel modules for secure boot</a><ol class="menu"><li class=" leaf"><a href="index.html#authenticating-kernel-modules-with-x-509-keys_signing-kernel-modules-for-secure-boot">3.12.1. Authenticating kernel modules with X.509 keys</a></li><li class=" leaf"><a href="index.html#enrolling-public-key-on-target-system_signing-kernel-modules-for-secure-boot">3.12.2. Enrolling public key on target system</a></li><li class=" leaf"><a href="index.html#signing-kernel-modules-with-the-private-key_signing-kernel-modules-for-secure-boot">3.12.3. Signing kernel modules with the private key</a></li><li class=" leaf"><a href="index.html#loading-signed-kernel-modules_signing-kernel-modules-for-secure-boot">3.12.4. Loading signed kernel modules</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel">4. Configuring kernel command-line parameters</a><ol class="menu"><li class=" leaf"><a href="index.html#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters">4.1. Understanding kernel command-line parameters</a></li><li class=" leaf"><a href="index.html#what-grubby-is_configuring-kernel-command-line-parameters">4.2. What grubby is</a></li><li class=" leaf"><a href="index.html#what-boot-entries-are_configuring-kernel-command-line-parameters">4.3. What boot entries are</a></li><li class=" leaf"><a href="index.html#setting-kernel-command-line-parameters_configuring-kernel-command-line-parameters">4.4. Setting kernel command-line parameters</a><ol class="menu"><li class=" leaf"><a href="index.html#changing-kernel-command-line-parameters-for-all-boot-entries_setting-kernel-command-line-parameters">4.4.1. Changing kernel command-line parameters for all boot entries</a></li><li class=" leaf"><a href="index.html#changing-kernel-command-line-parameters-for-a-single-boot-entry_setting-kernel-command-line-parameters">4.4.2. Changing kernel command-line parameters for a single boot entry</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel">5. Configuring kernel parameters at runtime</a><ol class="menu"><li class=" leaf"><a href="index.html#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime">5.1. What are kernel parameters</a></li><li class=" leaf"><a href="index.html#setting-kernel-parameters-at-runtime_configuring-kernel-parameters-at-runtime">5.2. Setting kernel parameters at runtime</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-kernel-parameters-temporarily-with-sysctl_setting-kernel-parameters-at-runtime">5.2.1. Configuring kernel parameters temporarily with sysctl</a></li><li class=" leaf"><a href="index.html#configuring-kernel-parameters-permanently-with-sysctl_setting-kernel-parameters-at-runtime">5.2.2. Configuring kernel parameters permanently with sysctl</a></li><li class=" leaf"><a href="index.html#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_setting-kernel-parameters-at-runtime">5.2.3. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</a></li><li class=" leaf"><a href="index.html#configuring-kernel-parameters-temporarily-through-proc-sys_setting-kernel-parameters-at-runtime">5.2.4. Configuring kernel parameters temporarily through /proc/sys/</a></li></ol></li><li class=" leaf"><a href="index.html#keeping-kernel-panic-parameters-disabled-in-virtualized-environments_configuring-kernel-parameters-at-runtime">5.3. Keeping kernel panic parameters disabled in virtualized environments</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments">5.3.1. What is a soft lockup</a></li><li class=" leaf"><a href="index.html#parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments">5.3.2. Parameters controlling kernel panic</a></li><li class=" leaf"><a href="index.html#spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments">5.3.3. Spurious soft lockups in virtualized environments</a></li></ol></li><li class=" leaf"><a href="index.html#adjusting-kernel-parameters-for-database-servers_configuring-kernel-parameters-at-runtime">5.4. Adjusting kernel parameters for database servers</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-databases_adjusting-kernel-parameters-for-database-servers">5.4.1. Introduction to database servers</a></li><li class=" leaf"><a href="index.html#parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers">5.4.2. Parameters affecting performance of database applications</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel">6. Getting started with kernel logging</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging">6.1. What is the kernel ring buffer</a></li><li class=" leaf"><a href="index.html#role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging">6.2. Role of printk on log-levels and kernel logging</a></li></ol></li><li class=" leaf"><a href="index.html#installing-and-configuring-kdump_managing-monitoring-and-updating-the-kernel">7. Installing and configuring kdump</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-kdump_installing-and-configuring-kdump">7.1. What is kdump</a></li><li class=" leaf"><a href="index.html#installing-kdump_installing-and-configuring-kdump">7.2. Installing kdump</a></li><li class=" leaf"><a href="index.html#configuring-kdump-on-the-command-line_installing-and-configuring-kdump">7.3. Configuring kdump on the command line</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-kdump-memory-usage_configuring-kdump-on-the-command-line">7.3.1. Configuring kdump memory usage</a></li><li class=" leaf"><a href="index.html#configuring-the-kdump-target_configuring-kdump-on-the-command-line">7.3.2. Configuring the kdump target</a></li><li class=" leaf"><a href="index.html#configuring-the-core-collector_configuring-kdump-on-the-command-line">7.3.3. Configuring the core collector</a></li><li class=" leaf"><a href="index.html#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line">7.3.4. Configuring the kdump default failure responses</a></li><li class=" leaf"><a href="index.html#enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line">7.3.5. Enabling and disabling the kdump service</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-kdump-in-the-web-console_installing-and-configuring-kdump">7.4. Configuring kdump in the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console">7.4.1. Configuring kdump memory usage and target location in web console</a></li></ol></li><li class=" leaf"><a href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump">7.5. Supported kdump configurations and targets</a><ol class="menu"><li class=" leaf"><a href="index.html#memory-requirements-for-kdump_supported-kdump-configurations-and-targets">7.5.1. Memory requirements for kdump</a></li><li class=" leaf"><a href="index.html#minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets">7.5.2. Minimum threshold for automatic memory reservation</a></li><li class=" leaf"><a href="index.html#supported-kdump-targets_supported-kdump-configurations-and-targets">7.5.3. Supported kdump targets</a></li><li class=" leaf"><a href="index.html#supported-kdump-filtering-levels_supported-kdump-configurations-and-targets">7.5.4. Supported kdump filtering levels</a></li><li class=" leaf"><a href="index.html#supported-default-failure-responses_supported-kdump-configurations-and-targets">7.5.5. Supported default failure responses</a></li><li class=" leaf"><a href="index.html#estimating-kdump-size_supported-kdump-configurations-and-targets">7.5.6. Estimating kdump size</a></li></ol></li><li class=" leaf"><a href="index.html#testing-the-kdump-configuration_installing-and-configuring-kdump">7.6. Testing the kdump configuration</a></li><li class=" leaf"><a href="index.html#using-kexec-to-reboot-the-kernel_installing-and-configuring-kdump">7.7. Using kexec to reboot the kernel</a></li><li class=" leaf"><a href="index.html#blacklisting-kernel-drivers-for-kdump_installing-and-configuring-kdump">7.8. Blacklisting kernel drivers for kdump</a></li><li class=" leaf"><a href="index.html#running-kdump-on-systems-with-encrypted-disk_installing-and-configuring-kdump">7.9. Running kdump on systems with encrypted disk</a></li><li class=" leaf"><a href="index.html#analyzing-a-core-dump_installing-and-configuring-kdump">7.10. Analyzing a core dump</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-the-crash-utility_analyzing-a-core-dump">7.10.1. Installing the crash utility</a></li><li class=" leaf"><a href="index.html#running-and-exiting-the-crash-utility_analyzing-a-core-dump">7.10.2. Running and exiting the crash utility</a></li><li class=" leaf"><a href="index.html#displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump">7.10.3. Displaying various indicators in the crash utility</a></li><li class=" leaf"><a href="index.html#using-kernel-oops-analyzer_analyzing-a-core-dump">7.10.4. Using Kernel Oops Analyzer</a></li></ol></li><li class=" leaf"><a href="index.html#using-early-kdump-to-capture-boot-time-crashes_installing-and-configuring-kdump">7.11. Using early kdump to capture boot time crashes</a><ol class="menu"><li class=" leaf"><a href="index.html#what-is-early-kdump_using-early-kdump-to-capture-boot-time-crashes">7.11.1. What is early kdump</a></li><li class=" leaf"><a href="index.html#enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes">7.11.2. Enabling early kdump</a></li></ol></li><li class=" leaf"><a href="index.html#related-information_installing-and-configuring-kdump">7.12. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel">8. Applying patches with kernel live patching</a><ol class="menu"><li class=" leaf"><a href="index.html#limitations-of-kpatch_applying-patches-with-kernel-live-patching">8.1. Limitations of kpatch</a></li><li class=" leaf"><a href="index.html#support-for-third-party-live-patching_applying-patches-with-kernel-live-patching">8.2. Support for third-party live patching</a></li><li class=" leaf"><a href="index.html#access-to-kernel-live-patches_applying-patches-with-kernel-live-patching">8.3. Access to kernel live patches</a></li><li class=" leaf"><a href="index.html#components-of-kernel-live-patching_applying-patches-with-kernel-live-patching">8.4. Components of kernel live patching</a></li><li class=" leaf"><a href="index.html#how-kernel-live-patching-works_applying-patches-with-kernel-live-patching">8.5. How kernel live patching works</a></li><li class=" leaf"><a href="index.html#enabling-kernel-live-patching_applying-patches-with-kernel-live-patching">8.6. Enabling kernel live patching</a><ol class="menu"><li class=" leaf"><a href="index.html#subscribing-to-the-live-patching-stream_enabling-kernel-live-patching">8.6.1. Subscribing to the live patching stream</a></li></ol></li><li class=" leaf"><a href="index.html#updating-kernel-patch-modules_applying-patches-with-kernel-live-patching">8.7. Updating kernel patch modules</a></li><li class=" leaf"><a href="index.html#disabling-kernel-live-patching_applying-patches-with-kernel-live-patching">8.8. Disabling kernel live patching</a><ol class="menu"><li class=" leaf"><a href="index.html#removing-the-live-patching-package_disabling-kernel-live-patching">8.8.1. Removing the live patching package</a></li><li class=" leaf"><a href="index.html#uninstalling-the-kernel-patch-module_disabling-kernel-live-patching">8.8.2. Uninstalling the kernel patch module</a></li><li class=" leaf"><a href="index.html#disabling-kpatch-service_disabling-kernel-live-patching">8.8.3. Disabling kpatch.service</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel">9. Setting limits for applications</a><ol class="menu"><li class=" leaf"><a href="index.html#understanding-control-groups_setting-limits-for-applications">9.1. Understanding control groups</a></li><li class=" leaf"><a href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications">9.2. What kernel resource controllers are</a></li><li class=" leaf"><a href="index.html#using-control-groups-through-a-virtual-file-system_setting-limits-for-applications">9.3. Using control groups through a virtual file system</a><ol class="menu"><li class=" leaf"><a href="index.html#setting-cpu-limits-to-applications-using-cgroups-v1_using-control-groups-through-a-virtual-file-system">9.3.1. Setting CPU limits to applications using cgroups-v1</a></li><li class=" leaf"><a href="index.html#setting-cpu-limits-to-applications-using-cgroups-v2_using-control-groups-through-a-virtual-file-system">9.3.2. Setting CPU limits to applications using cgroups-v2</a></li></ol></li><li class=" leaf"><a href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications">9.4. Role of systemd in control groups version 1</a></li><li class=" leaf"><a href="index.html#using-control-groups-version-1-with-systemd_setting-limits-for-applications">9.5. Using control groups version 1 with systemd</a><ol class="menu"><li class=" leaf"><a href="index.html#creating-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd">9.5.1. Creating control groups version 1 with systemd</a></li><li class=" leaf"><a href="index.html#modifying-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd">9.5.2. Modifying control groups version 1 with systemd</a></li><li class=" leaf"><a href="index.html#removing-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd">9.5.3. Removing control groups version 1 with systemd</a></li></ol></li><li class=" leaf"><a href="index.html#obtaining-information-about-control-groups-version-1_setting-limits-for-applications">9.6. Obtaining information about control groups version 1</a><ol class="menu"><li class=" leaf"><a href="index.html#listing-systemd_units_obtaining-information-about-control-groups-version-1">9.6.1. Listing systemd units</a></li><li class=" leaf"><a href="index.html#viewing-a-control-group-version-1-hierarchy_obtaining-information-about-control-groups-version-1">9.6.2. Viewing a control group version 1 hierarchy</a></li><li class=" leaf"><a href="index.html#viewing-resource-controllers_obtaining-information-about-control-groups-version-1">9.6.3. Viewing resource controllers</a></li><li class=" leaf"><a href="index.html#monitoring-resource-consumption_obtaining-information-about-control-groups-version-1">9.6.4. Monitoring resource consumption</a></li></ol></li><li class=" leaf"><a href="index.html#what-namespaces-are_setting-limits-for-applications">9.7. What namespaces are</a></li></ol></li><li class=" leaf"><a href="index.html#analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel">10. Analyzing system performance with BPF Compiler Collection</a><ol class="menu"><li class=" leaf"><a href="index.html#bcc_analyzing-system-performance-with-bpf-compiler_collection">10.1. A brief introduction to BCC</a></li><li class=" leaf"><a href="index.html#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection">10.2. Installing the bcc-tools package</a></li><li class=" leaf"><a href="index.html#using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection">10.3. Using selected bcc-tools for performance analyses</a></li></ol></li><li class=" leaf"><a href="index.html#enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel">11. Enhancing security with the kernel integrity subsystem</a><ol class="menu"><li class=" leaf"><a href="index.html#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem">11.1. The kernel integrity subsystem</a></li><li class=" leaf"><a href="index.html#integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem">11.2. Integrity measurement architecture</a></li><li class=" leaf"><a href="index.html#extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem">11.3. Extended verification module</a></li><li class=" leaf"><a href="index.html#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem">11.4. Trusted and encrypted keys</a><ol class="menu"><li class=" leaf"><a href="index.html#working-with-trusted-keys_trusted-and-encrypted-keys">11.4.1. Working with trusted keys</a></li><li class=" leaf"><a href="index.html#working-with-encrypted-keys_trusted-and-encrypted-keys">11.4.2. Working with encrypted keys</a></li></ol></li><li class=" leaf"><a href="index.html#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem">11.5. Enabling integrity measurement architecture and extended verification module</a></li><li class=" leaf"><a href="index.html#collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem">11.6. Collecting file hashes with integrity measurement architecture</a></li><li class=" leaf"><a href="index.html#related-information-enhancing-security-with-the-kernel-integrity-subsystem">11.7. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#idm139829861115232">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Managing, monitoring and updating the kernel</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm139829853012896"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">A guide to managing the Linux kernel on Red Hat Enterprise Linux 8</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm139829861115232">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides the users and administrators with necessary information about configuring their workstations on the Linux kernel level. Such adjustments bring performance enhancements, easier troubleshooting or optimized system.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="the-linux-kernel-rpm_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 1. The Linux kernel RPM</h1></div></div></div><p>
			The following sections describe the Linux kernel RPM package provided and maintained by Red Hat.
		</p><section class="section" id="what-is-an-rpm_the-linux-kernel-rpm"><div class="titlepage"><div><div><h2 class="title">1.1. What an RPM is</h2></div></div></div><p>
				An RPM package is a file containing other files and their metadata (information about the files that are needed by the system).
			</p><p>
				Specifically, an RPM package consists of the <code class="literal">cpio</code> archive.
			</p><p>
				The <code class="literal">cpio</code> archive contains:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Files
					</li><li class="listitem"><p class="simpara">
						RPM header (package metadata)
					</p><p class="simpara">
						The <code class="literal">rpm</code> package manager uses this metadata to determine dependencies, where to install files, and other information.
					</p></li></ul></div><h4 id="types_of_rpm_packages">Types of RPM packages</h4><p>
				There are two types of RPM packages. Both types share the file format and tooling, but have different contents and serve different purposes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Source RPM (SRPM)
					</p><p class="simpara">
						An SRPM contains source code and a SPEC file, which describes how to build the source code into a binary RPM. Optionally, the patches to source code are included as well.
					</p></li><li class="listitem"><p class="simpara">
						Binary RPM
					</p><p class="simpara">
						A binary RPM contains the binaries built from the sources and patches.
					</p></li></ul></div></section><section class="section" id="the-linux-kernel-rpm-package-overview_the-linux-kernel-rpm"><div class="titlepage"><div><div><h2 class="title">1.2. The Linux kernel RPM package overview</h2></div></div></div><p>
				The <code class="literal">kernel</code> RPM is a meta package that does not contain any files, but rather ensures that the following sub-packages are properly installed:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal package">kernel-core</code> - contains a minimal number of kernel modules needed for core functionality. This sub-package alone could be used in virtualized and cloud environments to provide a Red Hat Enterprise Linux 8 kernel with a quick boot time and a small disk size footprint.
					</li><li class="listitem">
						<code class="literal package">kernel-modules</code> - contains further kernel modules.
					</li><li class="listitem">
						<code class="literal package">kernel-modules-extra</code> - contains kernel modules for rare hardware.
					</li></ul></div><p>
				The small set of <code class="literal package">kernel</code> sub-packages above aims to provide a reduced maintenance surface to system administrators especially in virtualized and cloud environments.
			</p><p>
				The other common kernel packages are for example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal package">kernel-debug</code> — Contains a kernel with numerous debugging options enabled for kernel diagnosis, at the expense of reduced performance.
					</li><li class="listitem">
						<code class="literal package">kernel-tools</code> — Contains tools for manipulating the Linux kernel and supporting documentation.
					</li><li class="listitem">
						<code class="literal package">kernel-devel</code> — Contains the kernel headers and makefiles sufficient to build modules against the <code class="literal package">kernel</code> package.
					</li><li class="listitem">
						<code class="literal package">kernel-abi-whitelists</code> — Contains information pertaining to the Red Hat Enterprise Linux kernel ABI, including a list of kernel symbols that are needed by external Linux kernel modules and a <code class="literal package">yum</code> plug-in to aid enforcement.
					</li><li class="listitem">
						<code class="literal package">kernel-headers</code> — Includes the C header files that specify the interface between the Linux kernel and user-space libraries and programs. The header files define structures and constants that are needed for building most standard programs.
					</li></ul></div></section><section class="section" id="displaying-contents-of-the-kernel-package_the-linux-kernel-rpm"><div class="titlepage"><div><div><h2 class="title">1.3. Displaying contents of the kernel package</h2></div></div></div><p>
				The following procedure describes how to view the contents of the kernel package and its sub-packages without installing them using the <code class="literal">rpm</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Obtained <code class="literal package">kernel</code>, <code class="literal package">kernel-core</code>, <code class="literal package">kernel-modules</code>, <code class="literal package">kernel-modules-extra</code> RPM packages for your CPU architecture
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List modules for <code class="literal packge">kernel</code>:
					</p><pre class="literallayout"><code class="literal command">$ rpm -qlp &lt;<span class="emphasis"><em>kernel_rpm</em></span>&gt;</code>
(contains no files)
…​</pre></li><li class="listitem"><p class="simpara">
						List modules for <code class="literal package">kernel-core</code>:
					</p><pre class="literallayout"><code class="literal command">$ rpm -qlp &lt;<span class="emphasis"><em>kernel-core_rpm</em></span>&gt;</code>
…​
/lib/modules/4.18.0-80.el8.x86_64/kernel/fs/udf/udf.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/fs/xfs
/lib/modules/4.18.0-80.el8.x86_64/kernel/fs/xfs/xfs.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/kernel
/lib/modules/4.18.0-80.el8.x86_64/kernel/kernel/trace
/lib/modules/4.18.0-80.el8.x86_64/kernel/kernel/trace/ring_buffer_benchmark.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/lib
/lib/modules/4.18.0-80.el8.x86_64/kernel/lib/cordic.ko.xz
…​</pre></li><li class="listitem"><p class="simpara">
						List modules for <code class="literal package">kernel-modules</code>:
					</p><pre class="literallayout"><code class="literal command">$ rpm -qlp &lt;<span class="emphasis"><em>kernel-modules_rpm</em></span>&gt;</code>
…​
/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/infiniband/hw/mlx4/mlx4_ib.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/infiniband/hw/mlx5/mlx5_ib.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/infiniband/hw/qedr/qedr.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/infiniband/hw/usnic/usnic_verbs.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/kernel/drivers/infiniband/hw/vmw_pvrdma/vmw_pvrdma.ko.xz
…​</pre></li><li class="listitem"><p class="simpara">
						List modules for <code class="literal package">kernel-modules-extra</code>:
					</p><pre class="literallayout"><code class="literal command">$ rpm -qlp &lt;<span class="emphasis"><em>kernel-modules-extra_rpm</em></span>&gt;</code>
…​
/lib/modules/4.18.0-80.el8.x86_64/extra/net/sched/sch_cbq.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/extra/net/sched/sch_choke.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/extra/net/sched/sch_drr.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/extra/net/sched/sch_dsmark.ko.xz
/lib/modules/4.18.0-80.el8.x86_64/extra/net/sched/sch_gred.ko.xz
…​</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For information on how to use the <code class="literal">rpm</code> command on already installed <code class="literal package">kernel</code> RPM, including its sub-packages, see the <code class="literal">rpm(8)</code> manual page.
					</li><li class="listitem">
						Introduction to <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/packaging_and_distributing_software/index#rpm-packages_packaging-software">RPM packages</a></span></em></span>
					</li></ul></div></section></section><section class="chapter" id="updating-kernel-with-yum_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Updating kernel with yum</h1></div></div></div><p>
			The following sections bring information about the Linux kernel provided and maintained by Red Hat (Red Hat kernel), and how to keep the Red Hat kernel updated. As a consequence, the operating system will have all the latest bug fixes, performance enhancements, and patches ensuring compatibility with new hardware.
		</p><section class="section" id="what-is-the-kernel_updating-kernel-with-yum"><div class="titlepage"><div><div><h2 class="title">2.1. What is the kernel</h2></div></div></div><p>
				The kernel is a core part of a Linux operating system, which manages the system resources, and provides interface between hardware and software applications. The Red Hat kernel is a custom-built kernel based on the upstream Linux mainline kernel that Red Hat engineers further develop and harden with a focus on stability and compatibility with the latest technologies and hardware.
			</p><p>
				Before Red Hat releases a new kernel version, the kernel needs to pass a set of rigorous quality assurance tests.
			</p><p>
				The Red Hat kernels are packaged in the RPM format so that they are easy to upgrade and verify by the <span class="strong strong"><strong><span class="application application">yum</span></strong></span> package manager.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Kernels that have not been compiled by Red Hat are <span class="strong strong"><strong>not</strong></span> supported by Red Hat.
				</p></div></div></section><section class="section" id="what-is-yum_updating-kernel-with-yum"><div class="titlepage"><div><div><h2 class="title">2.2. What is yum</h2></div></div></div><p>
				This section refers to description of the <code class="literal application">yum</code> <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#introduction-to-yum-functionality">package manager</a></span></em></span>.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on <code class="literal application">yum</code> see the relevant sections of <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#installing-software-with-yum">Configuring basic system settings</a></span></em></span>.
					</li></ul></div></section><section class="section" id="updating-the-kernel_updating-kernel-with-yum"><div class="titlepage"><div><div><h2 class="title">2.3. Updating the kernel</h2></div></div></div><p>
				The following procedure describes how to update the kernel using the <span class="strong strong"><strong><span class="application application">yum</span></strong></span> package manager.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To update the kernel, use the following:
					</p><pre class="screen"><code class="literal command"># yum</code> <code class="literal option">update</code> <code class="literal option">kernel</code></pre><p class="simpara">
						This command updates the kernel along with all dependencies to the latest available version.
					</p></li><li class="listitem">
						Reboot your system for the changes to take effect.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When upgrading from Red Hat Enterprise Linux 7 to Red Hat Enterprise Linux 8, follow relevant sections of the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/upgrading_from_rhel_7_to_rhel_8/index">Upgrading from RHEL 7 to RHEL 8</a></span></em></span> document.
				</p></div></div></section><section class="section" id="installing-the-kernel_updating-kernel-with-yum"><div class="titlepage"><div><div><h2 class="title">2.4. Installing the kernel</h2></div></div></div><p>
				The following procedure describes how to install new kernels using the <span class="strong strong"><strong><span class="application application">yum</span></strong></span> package manager.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To install a specific kernel version, use the following:
					</p><pre class="screen"><code class="literal command"># yum</code> <code class="literal option">install</code> <code class="literal option">kernel-{version}</code></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For a list of available kernels, refer to <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/rhcb/">Red Hat Code Browser</a></span></em></span>.
					</li><li class="listitem">
						For a list of release dates of specific kernel versions, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/3078">this article</a></span></em></span>.
					</li></ul></div></section></section><section class="chapter" id="managing-kernel-modules_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Managing kernel modules</h1></div></div></div><p>
			The following sections explain what kernel modules are, how to display their information, and how to perform basic administrative tasks with kernel modules.
		</p><section class="section" id="introduction-to-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.1. Introduction to kernel modules</h2></div></div></div><p>
				The Red Hat Enterprise Linux kernel can be extended with optional, additional pieces of functionality, called kernel modules, without having to reboot the system. On Red Hat Enterprise Linux 8, kernel modules are extra kernel code which is built into compressed <code class="literal file">&lt;KERNEL_MODULE_NAME&gt;.ko.xz</code> object files.
			</p><p>
				The most common functionality enabled by kernel modules are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Device driver which adds support for new hardware
					</li><li class="listitem">
						Support for a file system such as <code class="literal">GFS2</code> or <code class="literal">NFS</code>
					</li><li class="listitem">
						System calls
					</li></ul></div><p>
				On modern systems, kernel modules are automatically loaded when needed. However, in some cases it is necessary to load or unload modules manually.
			</p><p>
				Like the kernel itself, the modules can take parameters that customize their behavior if needed.
			</p><p>
				Tooling is provided to inspect which modules are currently running, which modules are available to load into the kernel and which parameters a module accepts. The tooling also provides a mechanism to load and unload kernel modules into the running kernel.
			</p></section><section class="section" id="introduction-to-bootloader-specification_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.2. Introduction to bootloader specification</h2></div></div></div><p>
				The BootLoader Specification (BLS) defines a scheme and the file format to manage the bootloader configuration for each boot option in the drop-in directory without the need to manipulate the bootloader configuration files. Unlike earlier approaches, each boot entry is now represented by a separate configuration file in the drop-in directory. The drop-in directory extends its configuration without having the need to edit or regenerate the configuration files. The BLS extends this concept for the boot menu entries.
			</p><p>
				Using BLS, you can manage the bootloader menu options by adding, removing, or editing individual boot entry files in a directory. This makes the kernel installation process significantly simpler and consistent across the different architectures.
			</p><p>
				The <code class="literal">grubby</code> tool is a thin wrapper script around the BLS and it supports the same <code class="literal">grubby</code> arguments and options. It runs the <code class="literal">dracut</code> to create an initial ramdisk image. With this setup, the core bootloader configuration files are static and are not modified after kernel installation.
			</p><p>
				This premise is particularly relevant in Red Hat Enterprise Linux 8 because the same bootloader is not used in all architectures. <code class="literal">GRUB2</code> is used in most of them such as the 64-bit ARM, but little-endian variants of IBM Power Systems with Open Power Abstraction Layer (OPAL) uses <code class="literal">Petitboot</code> and the IBM Z architecture uses <code class="literal">zipl</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal">grubby</code> utility, see <a class="link" href="index.html#what-grubby-is_configuring-kernel-command-line-parameters" title="4.2. What grubby is">What is grubby</a>.
					</li><li class="listitem">
						For more details for boot entries, see <a class="link" href="index.html#what-boot-entries-are_configuring-kernel-command-line-parameters" title="4.3. What boot entries are">What are Boot Entries</a>
					</li><li class="listitem">
						For more details, see the <code class="literal">grubby(8)</code> manual page.
					</li></ul></div></section><section class="section" id="kernel-module-dependencies_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.3. Kernel module dependencies</h2></div></div></div><p>
				Certain kernel modules sometimes depend on one or more other kernel modules. The <code class="literal file">/lib/modules/&lt;KERNEL_VERSION&gt;/modules.dep</code> file contains a complete list of kernel module dependencies for the respective kernel version.
			</p><p>
				The dependency file is generated by the <code class="literal utility">depmod</code> program, which is a part of the <code class="literal package">kmod</code> package. Many of the utilities provided by <code class="literal package">kmod</code> take module dependencies into account when performing operations so that <span class="strong strong"><strong>manual</strong></span> dependency-tracking is rarely necessary.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					The code of kernel modules is executed in kernel-space in the unrestricted mode. Because of this, you should be mindful of what modules you are loading.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal file">/lib/modules/&lt;KERNEL_VERSION&gt;/modules.dep</code>, refer to the <code class="literal">modules.dep(5)</code> manual page.
					</li><li class="listitem">
						For further details including the synopsis and options of <code class="literal utility">depmod</code>, see the <code class="literal">depmod(8)</code> manual page.
					</li></ul></div></section><section class="section" id="listing-currently-loaded-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.4. Listing currently loaded kernel modules</h2></div></div></div><p>
				The following procedure describes how to view the currently loaded kernel modules.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list all currently loaded kernel modules, execute:
					</p><pre class="literallayout">$ lsmod

Module                  Size  Used by
fuse                  126976  3
uinput                 20480  1
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  1
xt_conntrack           16384  1
ipt_REJECT             16384  1
nft_counter            16384  16
nf_nat_tftp            16384  0
nf_conntrack_tftp      16384  1 nf_nat_tftp
tun                    49152  1
bridge                192512  0
stp                    16384  1 bridge
llc                    16384  2 bridge,stp
nf_tables_set          32768  5
nft_fib_inet           16384  1
…​</pre><p class="simpara">
						In the example above:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The first column provides the <span class="strong strong"><strong>names</strong></span> of currently loaded modules.
							</li><li class="listitem">
								The second column displays the amount of <span class="strong strong"><strong>memory</strong></span> per module in kilobytes.
							</li><li class="listitem">
								The last column shows the number, and optionally the names of modules that are <span class="strong strong"><strong>dependent</strong></span> on a particular module.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal package">kmod</code>, refer to the <code class="literal">/usr/share/doc/kmod/README</code> file or the <code class="literal">lsmod(8)</code> manual page.
					</li></ul></div></section><section class="section" id="listing-all-installed-kernels_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.5. Listing all installed kernels</h2></div></div></div><p>
				The following procedure describes how to use the command line tool <code class="literal">grubby</code> to list the <code class="literal">GRUB2</code> boot entries.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list the boot entries of the kernel, execute:
					</p><pre class="screen"># grubby --info=ALL | grep title</pre><p class="simpara">
						The following output displays the boot entries of the kernel. The <code class="literal">kernel</code> field shows the kernel path.
					</p><pre class="screen">title=Red Hat Enterprise Linux (4.18.0-20.el8.x86_64) 8.0 (Ootpa)
title=Red Hat Enterprise Linux (4.18.0-19.el8.x86_64) 8.0 (Ootpa)
title=Red Hat Enterprise Linux (4.18.0-12.el8.x86_64) 8.0 (Ootpa)
title=Red Hat Enterprise Linux (4.18.0) 8.0 (Ootpa)
title=Red Hat Enterprise Linux (0-rescue-2fb13ddde2e24fde9e6a246a942caed1) 8.0 (Ootpa)</pre></li></ul></div></section><section class="section" id="setting-a-kernel-as-default_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.6. Setting a kernel as default</h2></div></div></div><p>
				The following procedure describes how to set a specific kernel as default using the <code class="literal">grubby</code> command-line tool and <code class="literal">GRUB2</code>.
			</p><div class="variablelist"><p class="title"><strong>Procedure</strong></p><dl class="variablelist"><dt><span class="term">Setting the kernel as default, using the <code class="literal">grubby</code> tool</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Execute the following command to set the kernel as default using the <code class="literal">grubby</code> tool:
								</li></ul></div><pre class="screen"># grubby --set-default $kernel_path</pre><p class="simpara">
							The command uses a machine ID without the <code class="literal">.conf</code> suffix as an argument.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The machine ID is located in the <code class="literal">/boot/loader/entries/</code> directory.
							</p></div></div></dd><dt><span class="term">Setting the kernel as default, using the <code class="literal">id</code> argument</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									List the boot entries using the <code class="literal">id</code> argument and then set an intended kernel as default:
								</li></ul></div><pre class="screen"># grubby --info ALL | grep id
# grubby --set-default /boot/vmlinuz-&lt;version&gt;.&lt;architecture&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								To list the boot entries using the <code class="literal">title</code> argument, execute the <code class="literal"># grubby --info=ALL | grep title</code> command.
							</p></div></div></dd><dt><span class="term">Setting the default kernel for only the next boot</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Execute the following command to set the default kernel for only the next reboot using the <code class="literal">grub2-reboot</code> command:
								</li></ul></div><pre class="screen"># grub2-reboot &lt;index|title|id&gt;</pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								Set the default kernel for only the next boot with care. Installing new kernel RPM’s, self-built kernels, and manually adding the entries to the <code class="literal">/boot/loader/entries/</code> directory may change the index values.
							</p></div></div></dd></dl></div></section><section class="section" id="displaying-information-about-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.7. Displaying information about kernel modules</h2></div></div></div><p>
				When working with a kernel module, you may want to see further information about that module. This procedure describes how to display extra information about kernel modules.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display information about any kernel module, execute:
					</p><pre class="literallayout">$ modinfo &lt;<span class="emphasis"><em>KERNEL_MODULE_NAME</em></span>&gt;

For example:
$ modinfo virtio_net

filename:       /lib/modules/4.18.0-94.el8.x86_64/kernel/drivers/net/virtio_net.ko.xz
license:        GPL
description:    Virtio network driver
rhelversion:    8.1
srcversion:     2E9345B281A898A91319773
alias:          virtio:d00000001v*
depends:        net_failover
intree:         Y
name:           virtio_net
vermagic:       4.18.0-94.el8.x86_64 SMP mod_unload modversions
…​
parm:           napi_weight:int
parm:           csum:bool
parm:           gso:bool
parm:           napi_tx:bool</pre><p class="simpara">
						The <code class="literal command">modinfo</code> command displays some detailed information about the specified kernel module. You can query information about all available modules, regardless of whether they are loaded or not. The <code class="literal">parm</code> entries show parameters the user is able to set for the module, and what type of value they expect.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about the <code class="literal command">modinfo</code>, refer to the <code class="literal">modinfo(8)</code> manual page.
					</li></ul></div></section><section class="section" id="loading-kernel-modules-at-system-runtime_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.8. Loading kernel modules at system runtime</h2></div></div></div><p>
				The optimal way to expand the functionality of the Linux kernel is by loading kernel modules. The following procedure describes how to use the <code class="literal command">modprobe</code> command to find and load a kernel module into the currently running kernel.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li><li class="listitem">
						The respective kernel module is not loaded. To ensure this is the case, list the <a class="link" href="index.html#listing-currently-loaded-kernel-modules_managing-kernel-modules" title="3.4. Listing currently loaded kernel modules">loaded kernel modules</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel module you want to load.
					</p><p class="simpara">
						The modules are located in the <code class="literal">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Load the relevant kernel module:
					</p><pre class="literallayout"># modprobe &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optionally, verify the relevant module was loaded:
					</p><pre class="literallayout">$ lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</pre><p class="simpara">
						If the module was loaded correctly, this command displays the relevant kernel module. For example:
					</p><pre class="literallayout">$ lsmod | grep serio_raw
serio_raw              16384  0</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will not persist</strong></span> after rebooting the system.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further details about <code class="literal command">modprobe</code>, see the <code class="literal">modprobe(8)</code> manual page.
					</li></ul></div></section><section class="section" id="unloading-kernel-modules-at-system-runtime_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.9. Unloading kernel modules at system runtime</h2></div></div></div><p>
				At times, you find that you need to unload certain kernel modules from the running kernel. The following procedure describes how to use the <code class="literal command">modprobe</code> command to find and unload a kernel module at system runtime from the currently loaded kernel.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal command">lsmod</code> command and select a kernel module you want to unload.
					</p><p class="simpara">
						If a kernel module has dependencies, unload those prior to unloading the kernel module. For details on identifying modules with dependencies, see <a class="xref" href="index.html#listing-currently-loaded-kernel-modules_managing-kernel-modules" title="3.4. Listing currently loaded kernel modules">Section 3.4, “Listing currently loaded kernel modules”</a>.
					</p></li><li class="listitem"><p class="simpara">
						Unload the relevant kernel module:
					</p><pre class="literallayout"># modprobe -r &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</pre><p class="simpara">
						When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
					</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Do not unload kernel modules when they are used by the running system. Doing so can lead to an unstable or non-operational system.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optionally, verify the relevant module was unloaded:
					</p><pre class="literallayout">$ lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</pre><p class="simpara">
						If the module was unloaded successfully, this command does not display any output.
					</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					After finishing this procedure, the kernel modules that are defined to be automatically loaded on boot, <span class="strong strong"><strong>will not stay unloaded</strong></span> after rebooting the system. For information on how to counter this outcome, see <a class="link" href="index.html#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules" title="3.11. Preventing kernel modules from being automatically loaded at system boot time">Preventing kernel modules from being automatically loaded at system boot time</a>.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further details about <code class="literal command">modprobe</code>, see the <code class="literal">modprobe(8)</code> manual page.
					</li></ul></div></section><section class="section" id="loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.10. Loading kernel modules automatically at system boot time</h2></div></div></div><p>
				The following procedure describes how to configure a kernel module so that it is loaded automatically during the boot process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel module you want to load during the boot process.
					</p><p class="simpara">
						The modules are located in the <code class="literal">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Create a configuration file for the module:
					</p><pre class="literallayout"># echo &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt; &gt; /etc/modules-load.d/&lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;.conf</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Optionally, after reboot, verify the relevant module was loaded:
					</p><pre class="literallayout">$ lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</pre><p class="simpara">
						The example command above should succeed and display the relevant kernel module.
					</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will persist</strong></span> after rebooting the system.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further details about loading kernel modules during the boot process, see the <code class="literal">modules-load.d(5)</code> manual page.
					</li></ul></div></section><section class="section" id="preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.11. Preventing kernel modules from being automatically loaded at system boot time</h2></div></div></div><p>
				The following procedure describes how to add a kernel module to a blacklist so that it will not be automatically loaded during the boot process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li><li class="listitem">
						Ensure that a blacklisted kernel module is not vital for your current system configuration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel module that you want to blacklist:
					</p><pre class="literallayout">$ lsmod

Module                  Size  Used by
fuse                  126976  3
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  1
uinput                 20480  1
xt_conntrack           16384  1
…​</pre><p class="simpara">
						The <code class="literal command">lsmod</code> command displays a list of modules loaded to the currently running kernel.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Alternatively, identify an unloaded kernel module you want to prevent from potentially loading.
							</p><p class="simpara">
								All kernel modules are located in the <code class="literal">/lib/modules/&lt;KERNEL_VERSION&gt;/kernel/&lt;SUBSYSTEM&gt;/</code> directory.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Create a blacklist configuration file:
					</p><pre class="literallayout"># vim /etc/modprobe.d/blacklist.conf

	# Blacklists &lt;<span class="emphasis"><em>KERNEL_MODULE_1</em></span>&gt;
	blacklist &lt;<span class="emphasis"><em>MODULE_NAME_1</em></span>&gt;
	install &lt;<span class="emphasis"><em>MODULE_NAME_1</em></span>&gt; /bin/false

	# Blacklists &lt;<span class="emphasis"><em>KERNEL_MODULE_2</em></span>&gt;
	blacklist &lt;<span class="emphasis"><em>MODULE_NAME_2</em></span>&gt;
	install &lt;<span class="emphasis"><em>MODULE_NAME_2</em></span>&gt; /bin/false

	# Blacklists &lt;<span class="emphasis"><em>KERNEL_MODULE_n</em></span>&gt;
	blacklist &lt;<span class="emphasis"><em>MODULE_NAME_n</em></span>&gt;
	install &lt;<span class="emphasis"><em>MODULE_NAME_n</em></span>&gt; /bin/false
	…​</pre><p class="simpara">
						The example shows the contents of the <code class="literal file">blacklist.conf</code> file, edited by the <code class="literal utility">vim</code> editor. The <code class="literal">blacklist</code> line ensures that the relevant kernel module will not be automatically loaded during the boot process. The <code class="literal">blacklist</code> command, however, does not prevent the module from being loaded as a dependency for another kernel module that is not blacklisted. Therefore the <code class="literal">install</code> line causes the <code class="literal">/bin/false</code> to run instead of installing a module.
					</p><p class="simpara">
						The lines starting with a hash sign are comments to make the file more readable.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create a backup copy of the current initial ramdisk image before rebuilding:
					</p><pre class="literallayout"># cp /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).bak.$(date +%m-%d-%H%M%S).img</pre><p class="simpara">
						The command above creates a backup <code class="literal">initramfs</code> image in case the new version has an unexpected problem.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Alternatively, create a backup copy of other initial ramdisk image which corresponds to the kernel version for which you want to blacklist kernel modules:
							</p><pre class="literallayout"># cp /boot/initramfs-&lt;<span class="emphasis"><em>SOME_VERSION</em></span>&gt;.img /boot/initramfs-&lt;<span class="emphasis"><em>SOME_VERSION</em></span>&gt;.img.bak.$(date +%m-%d-%H%M%S)</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Generate a new initial ramdisk image to reflect the changes:
					</p><pre class="literallayout"># dracut -f -v</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you are building an initial ramdisk image for a different kernel version than you are currently booted into, specify both target <code class="literal">initramfs</code> and kernel version:
							</p><pre class="literallayout"># dracut -f -v /boot/initramfs-&lt;<span class="emphasis"><em>TARGET_VERSION</em></span>&gt;.img &lt;<span class="emphasis"><em>CORRESPONDING_TARGET_KERNEL_VERSION</em></span>&gt;</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="literallayout">$ reboot</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will take effect and persist</strong></span> after rebooting the system. Improper blacklisting of a key kernel module can result in an unstable or non-operational system.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further details concerning the <code class="literal">dracut</code> utility, refer to the <code class="literal">dracut(8)</code> manual page.
					</li></ul></div></section><section class="section" id="signing-kernel-modules-for-secure-boot_managing-kernel-modules"><div class="titlepage"><div><div><h2 class="title">3.12. Signing kernel modules for secure boot</h2></div></div></div><p>
				You can enhance the security of your system by using signed kernel modules. The following sections describe how to self-sign privately built kernel modules for use with RHEL 8 on UEFI-based build systems where Secure Boot is enabled. These sections also provide an overview of available options for importing your public key into a target system where you want to deploy your kernel modules.
			</p><p>
				To sign and load kernel modules, you need to:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						<a class="link" href="index.html#authenticating-kernel-modules-with-x-509-keys_signing-kernel-modules-for-secure-boot" title="3.12.1. Authenticating kernel modules with X.509 keys">Authenticate a kernel module</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#generating-a-public-and-private-key-pair_authenticating-kernel-modules-with-x-509-keys" title="3.12.1.3. Generating a public and private key pair">Generate a public and private key pair</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#enrolling-public-key-on-target-system_signing-kernel-modules-for-secure-boot" title="3.12.2. Enrolling public key on target system">Import the public key on the target system</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#signing-kernel-modules-with-the-private-key_signing-kernel-modules-for-secure-boot" title="3.12.3. Signing kernel modules with the private key">Sign the kernel module with the private key</a>.
					</li><li class="listitem">
						<a class="link" href="index.html#loading-signed-kernel-modules_signing-kernel-modules-for-secure-boot" title="3.12.4. Loading signed kernel modules">Load the signed kernel module</a>.
					</li></ol></div><p>
				If Secure Boot is enabled, the UEFI operating system boot loaders, the Red Hat Enterprise Linux kernel, and all kernel modules have to be signed with a private key and authenticated with the corresponding public key. If they are not signed and authenticated, the system will not be allowed to finish the booting process.
			</p><p>
				The RHEL 8 distribution includes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Signed boot loaders
					</li><li class="listitem">
						Signed kernels
					</li><li class="listitem">
						Signed kernel modules
					</li></ul></div><p>
				In addition, the signed first-stage boot loader and the signed kernel include embedded Red Hat public keys. These signed executable binaries and embedded keys enable RHEL 8 to install, boot, and run with the Microsoft UEFI Secure Boot Certification Authority keys that are provided by the UEFI firmware on systems that support UEFI Secure Boot. Note that not all UEFI-based systems include support for Secure Boot.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					To be able to sign externally built kernel modules, install the utilities listed in the following table on the build system.
				</p></div><div class="table" id="idm139829863862464"><p class="title"><strong>Table 3.1. Required utilities</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829861182832" scope="col">Utility</th><th align="left" valign="top" id="idm139829861181856" scope="col">Provided by package</th><th align="left" valign="top" id="idm139829861180768" scope="col">Used on</th><th align="left" valign="top" id="idm139829861179680" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829861182832"> <p>
								<code class="literal command">openssl</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861181856"> <p>
								<code class="literal package">openssl</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861180768"> <p>
								Build system
							</p>
							 </td><td align="left" valign="top" headers="idm139829861179680"> <p>
								Generates public and private X.509 key pair
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829861182832"> <p>
								<code class="literal command">sign-file</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861181856"> <p>
								<code class="literal package">kernel-devel</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861180768"> <p>
								Build system
							</p>
							 </td><td align="left" valign="top" headers="idm139829861179680"> <p>
								Executable file used to sign a kernel module with the private key
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829861182832"> <p>
								<code class="literal command">mokutil</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861181856"> <p>
								<code class="literal package">mokutil</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861180768"> <p>
								Target system
							</p>
							 </td><td align="left" valign="top" headers="idm139829861179680"> <p>
								Optional utility used to manually enroll the public key
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829861182832"> <p>
								<code class="literal command">keyctl</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861181856"> <p>
								<code class="literal package">keyutils</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139829861180768"> <p>
								Target system
							</p>
							 </td><td align="left" valign="top" headers="idm139829861179680"> <p>
								Optional utility used to display public keys in the system keyring
							</p>
							 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The build system, where you build and sign your kernel module, does not need to have UEFI Secure Boot enabled and does not even need to be a UEFI-based system.
				</p></div></div><section class="section" id="authenticating-kernel-modules-with-x-509-keys_signing-kernel-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">3.12.1. Authenticating kernel modules with X.509 keys</h3></div></div></div><p>
					In RHEL 8, when a kernel module is loaded, the module’s signature is checked using the public X.509 keys on the kernel’s system keyring, excluding keys on the kernel’s system black list keyring. The following sections provide an overview of sources of keys/keyrings, examples of loaded keys from different sources in the system. Also, the user can see what it takes to authenticate a kernel module.
				</p><section class="section" id="authentication-requirements_authenticating-kernel-modules-with-x-509-keys"><div class="titlepage"><div><div><h4 class="title">3.12.1.1. Authentication requirements</h4></div></div></div><p>
						This section explains what conditions have to be met for loading kernel modules on systems with enabled UEFI Secure Boot functionality.
					</p><p>
						If UEFI Secure Boot is enabled or if the <code class="literal option">module.sig_enforce</code> kernel parameter has been specified, you can only load signed kernel modules that are authenticated using a key on the system keyring. In addition, the public key must not be on the system black list keyring.
					</p><p>
						If UEFI Secure Boot is disabled and if the <code class="literal option">module.sig_enforce</code> kernel parameter has not been specified, you can load unsigned kernel modules and signed kernel modules without a public key. This is summarized in the table below.
					</p><div class="table" id="idm139829866794880"><p class="title"><strong>Table 3.2. Kernel module authentication requirements for loading</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 17%; " class="col_1"><!--Empty--></col><col style="width: 17%; " class="col_2"><!--Empty--></col><col style="width: 17%; " class="col_3"><!--Empty--></col><col style="width: 17%; " class="col_4"><!--Empty--></col><col style="width: 17%; " class="col_5"><!--Empty--></col><col style="width: 17%; " class="col_6"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829862200400" scope="col">Module signed</th><th align="left" valign="top" id="idm139829862199312" scope="col">Public key found and signature valid</th><th align="left" valign="top" id="idm139829862198256" scope="col">UEFI Secure Boot state</th><th align="left" valign="top" id="idm139829862197168" scope="col">sig_enforce</th><th align="left" valign="top" id="idm139829862196080" scope="col">Module load</th><th align="left" valign="top" id="idm139829862194992" scope="col">Kernel tainted</th></tr></thead><tbody><tr><td rowspan="3" align="left" valign="top" headers="idm139829862200400"> <p>
										Unsigned
									</p>
									 </td><td rowspan="3" align="left" valign="top" headers="idm139829862199312"> <p>
										-
									</p>
									 </td><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Succeeds
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										Yes
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Fails
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										-
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										-
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Fails
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										-
									</p>
									 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139829862200400"> <p>
										Signed
									</p>
									 </td><td rowspan="3" align="left" valign="top" headers="idm139829862199312"> <p>
										No
									</p>
									 </td><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Succeeds
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										Yes
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Fails
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										-
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										-
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Fails
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										-
									</p>
									 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139829862200400"> <p>
										Signed
									</p>
									 </td><td rowspan="3" align="left" valign="top" headers="idm139829862199312"> <p>
										Yes
									</p>
									 </td><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Succeeds
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Succeeds
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862198256"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829862197168"> <p>
										-
									</p>
									 </td><td align="left" valign="top" headers="idm139829862196080"> <p>
										Succeeds
									</p>
									 </td><td align="left" valign="top" headers="idm139829862194992"> <p>
										No
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="sources-for-public-keys_authenticating-kernel-modules-with-x-509-keys"><div class="titlepage"><div><div><h4 class="title">3.12.1.2. Sources for public keys</h4></div></div></div><p>
						During boot, the kernel loads X.509 keys into the system keyring or the system black list keyring from a set of persistent key stores as shown in the table below.
					</p><div class="table" id="idm139829863326832"><p class="title"><strong>Table 3.3. Sources for system keyrings</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829862535104" scope="col">Source of X.509 keys</th><th align="left" valign="top" id="idm139829862534016" scope="col">User ability to add keys</th><th align="left" valign="top" id="idm139829862532960" scope="col">UEFI Secure Boot state</th><th align="left" valign="top" id="idm139829864535248" scope="col">Keys loaded during boot</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829862535104"> <p>
										Embedded in kernel
									</p>
									 </td><td align="left" valign="top" headers="idm139829862534016"> <p>
										No
									</p>
									 </td><td align="left" valign="top" headers="idm139829862532960"> <p>
										-
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										<code class="literal">.system_keyring</code>
									</p>
									 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139829862535104"> <p>
										UEFI Secure Boot "db"
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm139829862534016"> <p>
										Limited
									</p>
									 </td><td align="left" valign="top" headers="idm139829862532960"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862532960"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										<code class="literal">.system_keyring</code>
									</p>
									 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139829862535104"> <p>
										UEFI Secure Boot "dbx"
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm139829862534016"> <p>
										Limited
									</p>
									 </td><td align="left" valign="top" headers="idm139829862532960"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862532960"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										<code class="literal">.system_keyring</code>
									</p>
									 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139829862535104"> <p>
										Embedded in <code class="literal">shim.efi</code> boot loader
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm139829862534016"> <p>
										No
									</p>
									 </td><td align="left" valign="top" headers="idm139829862532960"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862532960"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										<code class="literal">.system_keyring</code>
									</p>
									 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139829862535104"> <p>
										Machine Owner Key (MOK) list
									</p>
									 </td><td rowspan="2" align="left" valign="top" headers="idm139829862534016"> <p>
										Yes
									</p>
									 </td><td align="left" valign="top" headers="idm139829862532960"> <p>
										Not enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										No
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139829862532960"> <p>
										Enabled
									</p>
									 </td><td align="left" valign="top" headers="idm139829864535248"> <p>
										<code class="literal">.system_keyring</code>
									</p>
									 </td></tr></tbody></table></div></div><p>
						If the system is not UEFI-based or if UEFI Secure Boot is not enabled, then only the keys that are embedded in the kernel are loaded onto the system keyring. In that case you have no ability to augment that set of keys without rebuilding the kernel.
					</p><p>
						The system black list keyring is a list of X.509 keys which have been revoked. If your module is signed by a key on the black list then it will fail authentication even if your public key is in the system keyring.
					</p><p>
						You can display information about the keys on the system keyrings using the <code class="literal command">keyctl</code> utility. The following is a shortened example output from a RHEL 8 system where UEFI Secure Boot is not enabled.
					</p><pre class="literallayout"># keyctl list %:.system_keyring
3 keys in keyring:
...asymmetric: Red Hat Enterprise Linux Driver Update Program (key 3): bf57f3e87...
...asymmetric: Red Hat Enterprise Linux kernel signing key: 4249689eefc77e95880b...
...asymmetric: Red Hat Enterprise Linux kpatch signing key: 4d38fd864ebe18c5f0b7...</pre><p>
						The following is a shortened example output from a RHEL 8 system where UEFI Secure Boot is enabled.
					</p><pre class="literallayout"># keyctl list %:.system_keyring
6 keys in keyring:
...asymmetric: Red Hat Enterprise Linux Driver Update Program (key 3): bf57f3e87...
...asymmetric: Red Hat Secure Boot (CA key 1): 4016841644ce3a810408050766e8f8a29...
...asymmetric: Microsoft Corporation UEFI CA 2011: 13adbf4309bd82709c8cd54f316ed...
...asymmetric: Microsoft Windows Production PCA 2011: a92902398e16c49778cd90f99e...
...asymmetric: Red Hat Enterprise Linux kernel signing key: 4249689eefc77e95880b...
...asymmetric: Red Hat Enterprise Linux kpatch signing key: 4d38fd864ebe18c5f0b7...</pre><p>
						The above output shows the addition of two keys from the UEFI Secure Boot "db" keys as well as the <code class="literal">Red Hat Secure Boot (CA key 1)</code>, which is embedded in the <code class="literal">shim.efi</code> boot loader. You can also look for the kernel console messages that identify the keys with an UEFI Secure Boot related source. These include UEFI Secure Boot db, embedded shim, and MOK list.
					</p><pre class="literallayout"># dmesg | grep 'EFI: Loaded cert'
[5.160660] EFI: Loaded cert 'Microsoft Windows Production PCA 2011: a9290239...
[5.160674] EFI: Loaded cert 'Microsoft Corporation UEFI CA 2011: 13adbf4309b...
[5.165794] EFI: Loaded cert 'Red Hat Secure Boot (CA key 1): 4016841644ce3a8...</pre></section><section class="section" id="generating-a-public-and-private-key-pair_authenticating-kernel-modules-with-x-509-keys"><div class="titlepage"><div><div><h4 class="title">3.12.1.3. Generating a public and private key pair</h4></div></div></div><p>
						You need to generate a public and private X.509 key pair to succeed in your efforts of using kernel modules on a Secure Boot-enabled system. You will later use the private key to sign the kernel module. You will also have to add the corresponding public key to the Machine Owner Key (MOK) for Secure Boot to validate the signed module.
					</p><p>
						Some of the parameters for this key pair generation are best specified with a configuration file.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create a configuration file with parameters for the key pair generation:
							</p><pre class="literallayout"># cat &lt;&lt; EOF &gt; configuration_file.config
[ req ]
default_bits = 4096
distinguished_name = req_distinguished_name
prompt = no
string_mask = utf8only
x509_extensions = myexts

[ req_distinguished_name ]
O = <span class="emphasis"><em>Organization</em></span>
CN = <span class="emphasis"><em>Organization signing key</em></span>
emailAddress = <span class="emphasis"><em>E-mail address</em></span>

[ myexts ]
basicConstraints=critical,CA:FALSE
keyUsage=digitalSignature
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid
EOF</pre></li><li class="listitem"><p class="simpara">
								Create an X.509 public and private key pair as shown in the following example:
							</p><pre class="literallayout"># openssl req -x509 -new -nodes -utf8 -sha256 -days 36500 \
-batch -config configuration_file.config -outform DER \
-out my_signing_key_pub.der \
-keyout my_signing_key.priv</pre><p class="simpara">
								The public key will be written to the <code class="literal"><span class="emphasis"><em>my_signing_key_pub</em></span>.der</code> file and the private key will be written to the <code class="literal"><span class="emphasis"><em>my_signing_key</em></span>.priv</code> file.
							</p><p class="simpara">
								In RHEL 8, the validity dates of the key pair matter. The key does not expire, but the kernel module must be signed within the validity period of its signing key. For example, a key that is only valid in 2019 can be used to authenticate a kernel module signed in 2019 with that key. However, users cannot use that key to sign a kernel module in 2020.
							</p></li><li class="listitem"><p class="simpara">
								Optionally, you can review the validity dates of your public keys like in the example below:
							</p><pre class="literallayout"># openssl x509 -inform der -text -noout -in &lt;my_signing_key_pub.der&gt;

Validity
            Not Before: Feb 14 16:34:37 2019 GMT
            Not After : Feb 11 16:34:37 2029 GMT</pre></li><li class="listitem">
								Enroll your public key on all systems where you want to authenticate and load your kernel module.
							</li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							Apply strong security measures and access policies to guard the contents of your private key. In the wrong hands, the key could be used to compromise any system which is authenticated by the corresponding public key.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For details about enrolling public keys into target systems, see <a class="xref" href="index.html#manually-adding-public-key-to-the-mok-list_enrolling-public-key-on-target-system" title="3.12.2.2. Manually adding public key to the MOK list">Section 3.12.2.2, “Manually adding public key to the MOK list”</a>.
							</li></ul></div></section></section><section class="section" id="enrolling-public-key-on-target-system_signing-kernel-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">3.12.2. Enrolling public key on target system</h3></div></div></div><p>
					When RHEL 8 boots on a UEFI-based system with Secure Boot enabled, the kernel loads onto the system keyring all public keys that are in the Secure Boot db key database, but not in the dbx database of revoked keys. The sections below describe different ways of importing a public key on a target system so that the system keyring is able to use the public key to authenticate a kernel module.
				</p><section class="section" id="factory-firmware-image-including-public-key_enrolling-public-key-on-target-system"><div class="titlepage"><div><div><h4 class="title">3.12.2.1. Factory firmware image including public key</h4></div></div></div><p>
						To facilitate authentication of your kernel module on your systems, consider requesting your system vendor to incorporate your public key into the UEFI Secure Boot key database in their factory firmware image.
					</p></section><section class="section" id="manually-adding-public-key-to-the-mok-list_enrolling-public-key-on-target-system"><div class="titlepage"><div><div><h4 class="title">3.12.2.2. Manually adding public key to the MOK list</h4></div></div></div><p>
						The Machine Owner Key (MOK) facility feature can be used to expand the UEFI Secure Boot key database. When RHEL 8 boots on a UEFI-enabled system with Secure Boot enabled, the keys on the MOK list are also added to the system keyring in addition to the keys from the key database. The MOK list keys are also stored persistently and securely in the same fashion as the Secure Boot database keys, but these are two separate facilities. The MOK facility is supported by <code class="literal">shim.efi</code>, <code class="literal">MokManager.efi</code>, <code class="literal">grubx64.efi</code>, and the <code class="literal command">mokutil</code> utility.
					</p><p>
						Enrolling a MOK key requires manual interaction by a user at the UEFI system console on each target system. Nevertheless, the MOK facility provides a convenient method for testing newly generated key pairs and testing kernel modules signed with them.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Request the addition of your public key to the MOK list:
							</p><pre class="literallayout"># mokutil --import my_signing_key_pub.der</pre><p class="simpara">
								You will be asked to enter and confirm a password for this MOK enrollment request.
							</p></li><li class="listitem"><p class="simpara">
								Reboot the machine.
							</p><p class="simpara">
								The pending MOK key enrollment request will be noticed by <code class="literal">shim.efi</code> and it will launch <code class="literal">MokManager.efi</code> to allow you to complete the enrollment from the UEFI console.
							</p></li><li class="listitem"><p class="simpara">
								Enter the password you previously associated with this request and confirm the enrollment.
							</p><p class="simpara">
								Your public key is added to the MOK list, which is persistent.
							</p></li></ol></div><p>
						Once a key is on the MOK list, it will be automatically propagated to the system keyring on this and subsequent boots when UEFI Secure Boot is enabled.
					</p></section></section><section class="section" id="signing-kernel-modules-with-the-private-key_signing-kernel-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">3.12.3. Signing kernel modules with the private key</h3></div></div></div><p>
					Users are able to obtain enhanced security benefits on their systems by loading signed kernel modules if the UEFI Secure Boot mechanism is enabled. The following sections describe how to sign kernel modules with the private key.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You generated a public and private key pair and know the validity dates of your public keys. For details, see <a class="xref" href="index.html#generating-a-public-and-private-key-pair_authenticating-kernel-modules-with-x-509-keys" title="3.12.1.3. Generating a public and private key pair">Section 3.12.1.3, “Generating a public and private key pair”</a>.
						</li><li class="listitem">
							You enrolled your public key on the target system. For details, see <a class="xref" href="index.html#enrolling-public-key-on-target-system_signing-kernel-modules-for-secure-boot" title="3.12.2. Enrolling public key on target system">Section 3.12.2, “Enrolling public key on target system”</a>.
						</li><li class="listitem">
							You have a kernel module available for signing.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Execute the <code class="literal">sign-file</code> utility with parameters as shown in the example below:
						</p><pre class="literallayout"># /usr/src/kernels/$(uname -r)/scripts/sign-file \
sha256 \
my_signing_key.priv \
my_signing_key_pub.der \
my_module.ko</pre><p class="simpara">
							Your kernel module is in ELF image format and <code class="literal">sign-file</code> computes and appends the signature directly to the ELF image in your kernel module file. The <code class="literal command">modinfo</code> utility can be used to display information about the kernel module’s signature, if it is present.
						</p><p class="simpara">
							The appended signature is not contained in an ELF image section and is not a formal part of the ELF image. Therefore, utilities such as <code class="literal command">readelf</code> will not be able to display the signature on your kernel module.
						</p><p class="simpara">
							Your kernel module is now ready for loading. Note that your signed kernel module is also loadable on systems where UEFI Secure Boot is disabled or on a non-UEFI system. That means you do not need to provide both a signed and unsigned version of your kernel module.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								In RHEL 8, the validity dates of the key pair matter. The key does not expire, but the kernel module must be signed within the validity period of its signing key. The <code class="literal">sign-file</code> utility will not warn you of this. For example, a key that is only valid in 2019 can be used to authenticate a kernel module signed in 2019 with that key. However, users cannot use that key to sign a kernel module in 2020.
							</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For details on using <code class="literal command">modinfo</code> to obtain information about kernel modules, see <a class="xref" href="index.html#displaying-information-about-kernel-modules_managing-kernel-modules" title="3.7. Displaying information about kernel modules">Section 3.7, “Displaying information about kernel modules”</a>.
						</li></ul></div></section><section class="section" id="loading-signed-kernel-modules_signing-kernel-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">3.12.4. Loading signed kernel modules</h3></div></div></div><p>
					Once your public key is enrolled and is in the system keyring, use the <code class="literal command">mokutil</code> command to add your public key to the MOK list. Then sign the respective kernel module with your private key. In the end, manually load your signed kernel module with the <code class="literal command">modprobe</code> command as described in the following section.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You generated the public and private keypair. For details, see <a class="xref" href="index.html#generating-a-public-and-private-key-pair_authenticating-kernel-modules-with-x-509-keys" title="3.12.1.3. Generating a public and private key pair">Section 3.12.1.3, “Generating a public and private key pair”</a>.
						</li><li class="listitem">
							You enrolled the public key into the system keyring. For details, see <a class="xref" href="index.html#manually-adding-public-key-to-the-mok-list_enrolling-public-key-on-target-system" title="3.12.2.2. Manually adding public key to the MOK list">Section 3.12.2.2, “Manually adding public key to the MOK list”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optionally, verify that your kernel module will not load before you have enrolled your public key.
						</p><p class="simpara">
							For details on how to list currently loaded kernel modules, see <a class="xref" href="index.html#listing-currently-loaded-kernel-modules_managing-kernel-modules" title="3.4. Listing currently loaded kernel modules">Section 3.4, “Listing currently loaded kernel modules”</a>.
						</p></li><li class="listitem"><p class="simpara">
							Verify what keys have been added to the system keyring on the current boot:
						</p><pre class="literallayout"># keyctl list %:.system_keyring</pre><p class="simpara">
							Since your public key has not been enrolled yet, it should not be displayed in the output of the command.
						</p></li><li class="listitem"><p class="simpara">
							Request enrollment of your public key:
						</p><pre class="literallayout"># mokutil --import my_signing_key_pub.der</pre></li><li class="listitem"><p class="simpara">
							Reboot, and complete the enrollment at the UEFI console:
						</p><pre class="literallayout"># reboot</pre></li><li class="listitem"><p class="simpara">
							Verify the keys on the system keyring again:
						</p><pre class="literallayout"># keyctl list %:.system_keyring</pre></li><li class="listitem"><p class="simpara">
							Copy the kernel module into the <code class="literal">/extra/</code> directory of the kernel you want:
						</p><pre class="literallayout"># cp my_module.ko /lib/modules/$(uname -r)/extra/</pre></li><li class="listitem"><p class="simpara">
							Update the modular dependency list:
						</p><pre class="literallayout"># depmod -a</pre></li><li class="listitem"><p class="simpara">
							Load the kernel module and verify that it was successfully loaded:
						</p><pre class="literallayout"># modprobe -v my_module
# lsmod | grep my_module</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Optionally, to load the module on boot, add it to the <code class="literal">/etc/modules-loaded.d/my_module.conf</code> file:
								</p><pre class="literallayout"># echo "my_module" &gt; /etc/modules-load.d/my_module.conf</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For further information about loading kernel modules, see the relevant sections of <a class="xref" href="index.html#managing-kernel-modules_managing-monitoring-and-updating-the-kernel" title="Chapter 3. Managing kernel modules">Chapter 3, <em>Managing kernel modules</em></a>.
						</li></ul></div></section></section></section><section class="chapter" id="configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Configuring kernel command-line parameters</h1></div></div></div><p>
			Kernel command-line parameters are a way to change the behavior of certain aspects of the Red Hat Enterprise Linux kernel at boot time. As a system administrator, you have full control over what options get set at boot. Certain kernel behaviors are only able to be set at boot time, so understanding how to make this changes is a key administration skill.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				Opting to change the behavior of the system by modifying kernel command-line parameters may have negative effects on your system. You should therefore test changes prior to deploying them in production. For further guidance, contact Red Hat Support.
			</p></div></div><section class="section" id="understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h2 class="title">4.1. Understanding kernel command-line parameters</h2></div></div></div><p>
				Kernel command-line parameters are used for boot time configuration of:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Red Hat Enterprise Linux kernel
					</li><li class="listitem">
						The initial RAM disk
					</li><li class="listitem">
						The user space features
					</li></ul></div><p>
				Kernel boot time parameters are often used to overwrite default values and for setting specific hardware settings.
			</p><p>
				By default, the kernel command-line parameters for systems using the GRUB2 bootloader are defined in the <code class="literal">kernelopts</code> variable of the <code class="literal">/boot/grub2/grubenv</code> file for all kernel boot entries.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					For IBM Z, the kernel command-line parameters are stored in the boot entry configuration file because the zipl bootloader does not support environment variables. Thus, the <code class="literal">kernelopts</code> environment variable cannot be used.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about what kernel command-line parameters you can modify, see <code class="literal">kernel-command-line(7)</code>, <code class="literal">bootparam(7)</code> and <code class="literal">dracut.cmdline(7)</code> manual pages.
					</li><li class="listitem">
						For more information about the <code class="literal">kernelopts</code> variable, see the knowledge base article, <a class="link" href="https://access.redhat.com/articles/3938081">How to install and boot custom kernels in Red Hat Enterprise Linux 8</a>.
					</li></ul></div></section><section class="section" id="what-grubby-is_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h2 class="title">4.2. What grubby is</h2></div></div></div><p>
				<code class="literal">grubby</code> is a utility for manipulating bootloader-specific configuration files.
			</p><p>
				You can use <code class="literal">grubby</code> also for changing the default boot entry, and for adding/removing arguments from a GRUB2 menu entry.
			</p><p>
				For more details see the <code class="literal">grubby(8)</code> manual page.
			</p></section><section class="section" id="what-boot-entries-are_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h2 class="title">4.3. What boot entries are</h2></div></div></div><p>
				A boot entry is a collection of options which are stored in a configuration file and tied to a particular kernel version. In practice, you have at least as many boot entries as your system has installed kernels. The boot entry configuration file is located in the <code class="literal">/boot/loader/entries/</code> directory and can look like this:
			</p><pre class="screen">6f9cc9cb7d7845d49698c9537337cedc-4.18.0-5.el8.x86_64.conf</pre><p>
				The file name above consists of a machine ID stored in the <code class="literal">/etc/machine-id</code> file, and a kernel version.
			</p><p>
				The boot entry configuration file contains information about the kernel version, the initial ramdisk image, and the <code class="literal">kernelopts</code> environment variable, which contains the kernel command-line parameters. The contents of a boot entry config can be seen below:
			</p><pre class="screen">title Red Hat Enterprise Linux (4.18.0-74.el8.x86_64) 8.0 (Ootpa)
version 4.18.0-74.el8.x86_64
linux /vmlinuz-4.18.0-74.el8.x86_64
initrd /initramfs-4.18.0-74.el8.x86_64.img $tuned_initrd
options $kernelopts $tuned_params
id rhel-20190227183418-4.18.0-74.el8.x86_64
grub_users $grub_users
grub_arg --unrestricted
grub_class kernel</pre><p>
				The <code class="literal">kernelopts</code> environment variable is defined in the <code class="literal">/boot/grub2/grubenv</code> file.
			</p><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
					For more information about <code class="literal">kernelopts</code> variable, see knowledge base article <a class="link" href="https://access.redhat.com/articles/3938081">How to install and boot custom kernels in Red Hat Enterprise Linux 8</a>.
				</p></div></section><section class="section" id="setting-kernel-command-line-parameters_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h2 class="title">4.4. Setting kernel command-line parameters</h2></div></div></div><p>
				To adjust the behavior of your system from the early stages of the booting process, you need to set certain kernel command-line parameters.
			</p><p>
				This section explains how to change kernel command-line parameters on various CPU architectures.
			</p><section class="section" id="changing-kernel-command-line-parameters-for-all-boot-entries_setting-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.4.1. Changing kernel command-line parameters for all boot entries</h3></div></div></div><p>
					This procedure describes how to change kernel command-line parameters for all boot entries on your system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Verify that the <code class="literal">grubby</code> and <code class="literal">zipl</code> utilities are installed on your system.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To add a parameter:
						</p><pre class="literallayout"># grubby --update-kernel=ALL --args="&lt;<span class="emphasis"><em>NEW_PARAMETER</em></span>&gt;"</pre><p class="simpara">
							For systems that use the GRUB2 bootloader, the command updates the <code class="literal">/boot/grub2/grubenv</code> file by adding a new kernel parameter to the <code class="literal">kernelopts</code> variable in that file.
						</p><p class="simpara">
							On IBM Z that use the zIPL bootloader, the command adds a new kernel parameter to each <code class="literal">/boot/loader/entries/&lt;<span class="emphasis"><em>ENTRY</em></span>&gt;.conf</code> file.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									On IBM Z, execute the <code class="literal">zipl</code> command with no options to update the boot menu.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To remove a parameter:
						</p><pre class="literallayout"># grubby --update-kernel=ALL --remove-args="&lt;<span class="emphasis"><em>PARAMETER_TO_REMOVE</em></span>&gt;"</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									On IBM Z, execute the <code class="literal">zipl</code> command with no options to update the boot menu.
								</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about kernel command-line parameters, see <a class="xref" href="index.html#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters" title="4.1. Understanding kernel command-line parameters">Section 4.1, “Understanding kernel command-line parameters”</a>.
						</li><li class="listitem">
							For information on the <code class="literal">grubby</code> utility, see the <code class="literal">grubby(8)</code> manual page.
						</li><li class="listitem">
							For further examples on how to use <code class="literal">grubby</code>, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/sec-making_persistent_changes_to_a_grub_2_menu_using_the_grubby_tool">grubby tool</a></span></em></span>.
						</li><li class="listitem">
							For information about the <code class="literal">zipl</code> utility, see the <code class="literal">zipl(8)</code> manual page.
						</li></ul></div></section><section class="section" id="changing-kernel-command-line-parameters-for-a-single-boot-entry_setting-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.4.2. Changing kernel command-line parameters for a single boot entry</h3></div></div></div><p>
					This procedure describes how to change kernel command-line parameters for a single boot entry on your system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Verify that the <code class="literal">grubby</code> and <code class="literal">zipl</code> utilities are installed on your system.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To add a parameter:
						</p><pre class="literallayout"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="&lt;<span class="emphasis"><em>NEW_PARAMETER</em></span>&gt;"</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									On IBM Z, execute the <code class="literal">zipl</code> command with no options to update the boot menu.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To remove a parameter use the following:
						</p><pre class="literallayout"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --remove-args="&lt;<span class="emphasis"><em>PARAMETER_TO_REMOVE</em></span>&gt;"</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									On IBM Z, execute the <code class="literal">zipl</code> command with no options to update the boot menu.
								</li></ul></div></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						On systems that use the <code class="literal">grub.cfg</code> file, there is, by default, the <code class="literal">options</code> parameter for each kernel boot entry, which is set to the <code class="literal">kernelopts</code> variable. This variable is defined in the <code class="literal">/boot/grub2/grubenv</code> configuration file.
					</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						On GRUB 2 systems:
					</p><p>
						+ * If the kernel command-line parameters are modified for all boot entries, the <code class="literal">grubby</code> utility updates the <code class="literal">kernelopts</code> variable in the <code class="literal">/boot/grub2/grubenv</code> file.
					</p><p>
						+ * If kernel command-line parameters are modified for a single boot entry, the <code class="literal">kernelopts</code> variable is expanded, the kernel parameters are modified, and the resulting value is stored in the respective boot entry’s <code class="literal">/boot/loader/entries/&lt;RELEVANT_KERNEL_BOOT_ENTRY.conf&gt;</code> file.
					</p><p>
						+ * On zIPL systems, <code class="literal">grubby</code> modifies and stores the kernel command-line parameters of an individual kernel boot entry in the <code class="literal">/boot/loader/entries/&lt;<span class="emphasis"><em>ENTRY</em></span>&gt;.conf</code> file.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about kernel command-line parameters, see <a class="xref" href="index.html#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters" title="4.1. Understanding kernel command-line parameters">Section 4.1, “Understanding kernel command-line parameters”</a>.
						</li><li class="listitem">
							For information on the <code class="literal">grubby</code> utility, see the <code class="literal">grubby(8)</code> manual page.
						</li><li class="listitem">
							For further examples on how to use <code class="literal">grubby</code>, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/sec-making_persistent_changes_to_a_grub_2_menu_using_the_grubby_tool">grubby tool</a></span></em></span>.
						</li><li class="listitem">
							For information about the <code class="literal">zipl</code> utility, see the <code class="literal">zipl(8)</code> manual page.
						</li></ul></div></section></section></section><section class="chapter" id="configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Configuring kernel parameters at runtime</h1></div></div></div><p>
			As a system administrator, you can modify many facets of the Red Hat Enterprise Linux kernel’s behavior at runtime. This section describes how to configure kernel parameters at runtime by using the <code class="literal command">sysctl</code> command and by modifying the configuration files in the <code class="literal">/etc/sysctl.d/</code> and <code class="literal">/proc/sys/</code> directories.
		</p><section class="section" id="what-are-kernel-parameters_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h2 class="title">5.1. What are kernel parameters</h2></div></div></div><p>
				Kernel parameters are tunable values which you can adjust while the system is running. There is no requirement to reboot or recompile the kernel for changes to take effect.
			</p><p>
				It is possible to address the kernel parameters through:
			</p><p>
				+ * The <code class="literal command">sysctl</code> command
			</p><p>
				+ * The virtual file system mounted at the <code class="literal filename">/proc/sys/</code> directory
			</p><p>
				+ * The configuration files in the <code class="literal">/etc/sysctl.d/</code> directory
			</p><p>
				Tunables are divided into classes by the kernel subsystem. Red Hat Enterprise Linux has the following tunable classes:
			</p><div class="table" id="idm139829861254640"><p class="title"><strong>Table 5.1. Table of sysctl classes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829863997760" scope="col">Tunable class</th><th align="left" valign="top" id="idm139829863996672" scope="col">Subsystem</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								abi
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Execution domains and personalities
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								crypto
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Cryptographic interfaces
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								debug
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Kernel debugging interfaces
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								dev
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Device-specific information
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								fs
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Global and specific file system tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								kernel
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Global kernel tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								net
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Network tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								sunrpc
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Sun Remote Procedure Call (NFS)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								user
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								User Namespace limits
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829863997760"> <p>
								vm
							</p>
							 </td><td align="left" valign="top" headers="idm139829863996672"> <p>
								Tuning and management of memory, buffers, and cache
							</p>
							 </td></tr></tbody></table></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal command">sysctl</code>, see <code class="literal">sysctl(8)</code> manual pages.
					</li><li class="listitem">
						For more information about <code class="literal">/etc/sysctl.d/</code> see, <code class="literal">sysctl.d(5)</code> manual pages.
					</li></ul></div></section><section class="section" id="setting-kernel-parameters-at-runtime_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h2 class="title">5.2. Setting kernel parameters at runtime</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Configuring kernel parameters on a production system requires careful planning. Unplanned changes may render the kernel unstable, requiring a system reboot. Verify that you are using valid options before changing any kernel values.
				</p></div></div><section class="section" id="configuring-kernel-parameters-temporarily-with-sysctl_setting-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.2.1. Configuring kernel parameters temporarily with sysctl</h3></div></div></div><p>
					The following procedure describes how to use the <code class="literal command">sysctl</code> command to temporarily set kernel parameters at runtime. The command is also useful for listing and filtering tunables.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.1. What are kernel parameters">Kernel parameters introduction</a>
						</li><li class="listitem">
							Root permissions
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To list all parameters and their values, use the following:
						</p><pre class="literallayout"><code class="literal command"># sysctl -a</code></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The <code class="literal command"># sysctl -a</code> command displays kernel parameters, which can be adjusted at runtime and at boot time.
							</p></div></div></li><li class="listitem"><p class="simpara">
							To configure a parameter temporarily, use the command as in the following example:
						</p><pre class="literallayout"><code class="literal command"># sysctl &lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt;</code></pre><p class="simpara">
							The sample command above changes the parameter value while the system is running. The changes take effect immediately, without a need for restart.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The changes return back to default after your system reboots.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about <code class="literal command">sysctl</code>, see the <code class="literal">sysctl(8)</code> manual page.
						</li><li class="listitem">
							To permanently modify kernel parameters, either use the <a class="link" href="index.html#configuring-kernel-parameters-permanently-with-sysctl_setting-kernel-parameters-at-runtime" title="5.2.2. Configuring kernel parameters permanently with sysctl"><code class="literal command">sysctl</code> command</a> to write the values to the <code class="literal">/etc/sysctl.conf</code> file or make manual changes to the configuration files in the <a class="link" href="index.html#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_setting-kernel-parameters-at-runtime" title="5.2.3. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters"><code class="literal">/etc/sysctl.d/</code> directory</a>.
						</li></ul></div></section><section class="section" id="configuring-kernel-parameters-permanently-with-sysctl_setting-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.2.2. Configuring kernel parameters permanently with sysctl</h3></div></div></div><p>
					The following procedure describes how to use the <code class="literal command">sysctl</code> command to permanently set kernel parameters.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.1. What are kernel parameters">Kernel parameters introduction</a>
						</li><li class="listitem">
							Root permissions
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To list all parameters, use the following:
						</p><pre class="literallayout"><code class="literal command"># sysctl -a</code></pre><p class="simpara">
							The command displays all kernel parameters that can be configured at runtime.
						</p></li><li class="listitem"><p class="simpara">
							To configure a parameter permanently:
						</p><pre class="literallayout"><code class="literal command"># sysctl -w &lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt; &gt;&gt; /etc/sysctl.conf</code></pre><p class="simpara">
							The sample command changes the tunable value and writes it to the <code class="literal">/etc/sysctl.conf</code> file, which overrides the default values of kernel parameters. The changes take effect immediately and persistently, without a need for restart.
						</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To permanently modify kernel parameters you can also make manual changes to the configuration files in the <code class="literal">/etc/sysctl.d/</code> directory.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about <code class="literal command">sysctl</code>, see the <code class="literal">sysctl(8)</code> and <code class="literal">sysctl.conf(5)</code> manual pages.
						</li><li class="listitem">
							For more information about using the configuration files in the <code class="literal">/etc/sysctl.d/</code> directory to make permanent changes to kernel parameters, see <a class="link" href="index.html#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_setting-kernel-parameters-at-runtime" title="5.2.3. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters">Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</a> section.
						</li></ul></div></section><section class="section" id="using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_setting-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.2.3. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</h3></div></div></div><p>
					The following procedure describes how to manually modify configuration files in the <code class="literal">/etc/sysctl.d/</code> directory to permanently set kernel parameters.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.1. What are kernel parameters">Kernel parameters introduction</a>
						</li><li class="listitem">
							Root permissions
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a new configuration file in <code class="literal">/etc/sysctl.d/</code>:
						</p><pre class="literallayout"><code class="literal command"># vim /etc/sysctl.d/&lt;<span class="emphasis"><em>some_file.conf</em></span>&gt;</code></pre></li><li class="listitem"><p class="simpara">
							Include kernel parameters, one per line, as follows:
						</p><pre class="literallayout"><code class="literal command">&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt;</code>
<code class="literal command">&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt;</code></pre></li><li class="listitem">
							Save the configuration file.
						</li><li class="listitem"><p class="simpara">
							Reboot the machine for the changes to take effect.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Alternatively, to apply changes without rebooting, execute:
								</p><pre class="literallayout"><code class="literal command"># sysctl -p /etc/sysctl.d/&lt;<span class="emphasis"><em>some_file.conf</em></span>&gt;</code></pre><p class="simpara">
									The command enables you to read values from the configuration file, which you created earlier.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about <code class="literal command">sysctl</code>, see the <code class="literal">sysctl(8)</code> manual page.
						</li><li class="listitem">
							For more information about <code class="literal">/etc/sysctl.d/</code>, see the <code class="literal">sysctl.d(5)</code> manual page.
						</li></ul></div></section><section class="section" id="configuring-kernel-parameters-temporarily-through-proc-sys_setting-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.2.4. Configuring kernel parameters temporarily through /proc/sys/</h3></div></div></div><p>
					The following procedure describes how to set kernel parameters temporarily through the files in the virtual file system <code class="literal">/proc/sys/</code> directory.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.1. What are kernel parameters">Kernel parameters introduction</a>
						</li><li class="listitem">
							Root permissions
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify a kernel parameter you want to configure:
						</p><pre class="literallayout"><code class="literal command"># ls -l /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/</code></pre><p class="simpara">
							The writable files returned by the command can be used to configure the kernel. The files with read-only permissions provide feedback on the current settings.
						</p></li><li class="listitem"><p class="simpara">
							Assign a target value to the kernel parameter:
						</p><pre class="literallayout"><code class="literal command"># echo &lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt; &gt; /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;</code></pre><p class="simpara">
							The command makes configuration changes that will disappear once the system is restarted.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, verify the value of the newly set kernel parameter:
						</p><pre class="literallayout"><code class="literal command"># cat /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;</code></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To permanently modify kernel parameters, either use the <a class="link" href="index.html#configuring-kernel-parameters-permanently-with-sysctl_setting-kernel-parameters-at-runtime" title="5.2.2. Configuring kernel parameters permanently with sysctl"><code class="literal command">sysctl</code> command</a> or make manual changes to the configuration files in the <a class="link" href="index.html#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_setting-kernel-parameters-at-runtime" title="5.2.3. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters"><code class="literal">/etc/sysctl.d/</code> directory</a>.
						</li></ul></div></section></section><section class="section" id="keeping-kernel-panic-parameters-disabled-in-virtualized-environments_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h2 class="title">5.3. Keeping kernel panic parameters disabled in virtualized environments</h2></div></div></div><p>
				When configuring a virtualized environment in Red Hat Enterprise Linux 8 (RHEL 8), you should not enable the <code class="literal">softlockup_panic</code> and <code class="literal">nmi_watchdog</code> kernel parameters, as the virtualized environment may trigger a spurious soft lockup that should not require a system panic.
			</p><p>
				The following sections explain the reasons behind this advice by summarizing:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						What causes a soft lockup.
					</li><li class="listitem">
						Describing the kernel parameters that control a system’s behavior on a soft lockup.
					</li><li class="listitem">
						Explaining how soft lockups may be triggered in a virtualized environment.
					</li></ul></div><section class="section" id="what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">5.3.1. What is a soft lockup</h3></div></div></div><p>
					A soft lockup is a situation usually caused by a bug, when a task is executing in kernel space on a CPU without rescheduling. The task also does not allow any other task to execute on that particular CPU. As a result, a warning is displayed to a user through the system console. This problem is also referred to as the soft lockup firing.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For a technical reason behind a soft lockup, example log messages, and other details, see the following <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/371803">Knowledge Article</a></span></em></span>.
						</li></ul></div></section><section class="section" id="parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">5.3.2. Parameters controlling kernel panic</h3></div></div></div><p>
					The following kernel parameters can be set to control a system’s behavior when a soft lockup is detected.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">softlockup_panic</span></dt><dd><p class="simpara">
								Controls whether or not the kernel will panic when a soft lockup is detected.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139829862300560" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm139829862299472" scope="col">Value</th><th style="text-align: left; vertical-align: top; " id="idm139829862298384" scope="col">Effect</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139829862300560"> <p>
												Integer
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829862299472"> <p>
												0
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829862298384"> <p>
												kernel does not panic on soft lockup
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm139829862300560"> <p>
												Integer
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829862299472"> <p>
												1
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829862298384"> <p>
												kernel panics on soft lockup
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								By default, on RHEL8 this value is 0.
							</p><p class="simpara">
								In order to panic, the system needs to detect a hard lockup first. The detection is controlled by the <code class="literal">nmi_watchdog</code> parameter.
							</p></dd><dt><span class="term">nmi_watchdog</span></dt><dd><p class="simpara">
								Controls whether lockup detection mechanisms (<code class="literal">watchdogs</code>) are active or not. This parameter is of integer type.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139829881835280" scope="col">Value</th><th style="text-align: left; vertical-align: top; " id="idm139829881834192" scope="col">Effect</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139829881835280"> <p>
												0
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829881834192"> <p>
												disables lockup detector
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm139829881835280"> <p>
												1
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829881834192"> <p>
												enables lockup detector
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								The hard lockup detector monitors each CPU for its ability to respond to interrupts.
							</p></dd><dt><span class="term">watchdog_thresh</span></dt><dd><p class="simpara">
								Controls frequency of watchdog <code class="literal">hrtimer</code>, NMI events, and soft/hard lockup thresholds.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139829857884480" scope="col">Default threshold</th><th style="text-align: left; vertical-align: top; " id="idm139829857883392" scope="col">Soft lockup threshold</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139829857884480"> <p>
												10 seconds
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm139829857883392"> <p>
												2 * <code class="literal">watchdog_thresh</code>
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								Setting this parameter to zero disables lockup detection altogether.
							</p></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For further information about <code class="literal">nmi_watchdog</code> and <code class="literal">softlockup_panic</code>, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://www.kernel.org/doc/Documentation/lockup-watchdogs.txt">Softlockup detector and hardlockup detector</a></span></em></span> document.
						</li><li class="listitem">
							For more details about <code class="literal">watchdog_thresh</code>, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://www.kernel.org/doc/Documentation/sysctl/kernel.txt">Kernel sysctl</a></span></em></span> document.
						</li></ul></div></section><section class="section" id="spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">5.3.3. Spurious soft lockups in virtualized environments</h3></div></div></div><p>
					The soft lockup firing on physical hosts, as described in <a class="xref" href="index.html#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" title="5.3.1. What is a soft lockup">Section 5.3.1, “What is a soft lockup”</a>, usually represents a kernel or hardware bug. The same phenomenon happening on guest operating systems in virtualized environments may represent a false warning.
				</p><p>
					Heavy work-load on a host or high contention over some specific resource such as memory, usually causes a spurious soft lockup firing. This is because the host may schedule out the guest CPU for a period longer than 20 seconds. Then when the guest CPU is again scheduled to run on the host, it experiences a <span class="emphasis"><em>time jump</em></span> which triggers due timers. The timers include also watchdog <code class="literal">hrtimer</code>, which can consequently report a soft lockup on the guest CPU.
				</p><p>
					Because a soft lockup in a virtualized environment may be spurious, you should not enable the kernel parameters that would cause a system panic when a soft lockup is reported on a guest CPU.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						To understand soft lockups in guests, it is essential to know that the host schedules the guest as a task, and the guest then schedules its own tasks.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For soft lockup definition and technicalities behind its functioning, see <a class="xref" href="index.html#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" title="5.3.1. What is a soft lockup">Section 5.3.1, “What is a soft lockup”</a>.
						</li><li class="listitem">
							To learn about components of RHEL 8 virtualized environments and their interaction, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_and_managing_virtualization/index#rhel-8-virtual-machine-components-and-their-interaction_virt-overview">RHEL 8 virtual machine components and their interaction</a></span></em></span>.
						</li></ul></div></section></section><section class="section" id="adjusting-kernel-parameters-for-database-servers_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h2 class="title">5.4. Adjusting kernel parameters for database servers</h2></div></div></div><p>
				There are different sets of kernel parameters which can affect performance of specific database applications. The following sections explain what kernel parameters to configure to secure efficient operation of database servers and databases.
			</p><section class="section" id="introduction-to-databases_adjusting-kernel-parameters-for-database-servers"><div class="titlepage"><div><div><h3 class="title">5.4.1. Introduction to database servers</h3></div></div></div><p>
					A database server is a hardware device which has a certain amount of main memory, and a database (DB) application installed. This DB application provides services as a means of writing the cached data from the main memory, which is usually small and expensive, to DB files (database). These services are provided to multiple clients on a network. There can be as many DB servers as a machine’s main memory and storage allows.
				</p><p>
					Red Hat Enterprise Linux 8 provides the following database applications:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							MariaDB 10.3
						</li><li class="listitem">
							MySQL 8.0
						</li><li class="listitem">
							PostgreSQL 10
						</li><li class="listitem">
							PostgreSQL 9.6
						</li><li class="listitem">
							PostgreSQL 12 - available since RHEL 8.1.1
						</li></ul></div></section><section class="section" id="parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers"><div class="titlepage"><div><div><h3 class="title">5.4.2. Parameters affecting performance of database applications</h3></div></div></div><p>
					The following kernel parameters affect performance of database applications.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">fs.aio-max-nr</span></dt><dd><p class="simpara">
								Defines the maximum number of asynchronous I/O operations the system can handle on the server.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Raising the <code class="literal">fs.aio-max-nr</code> parameter produces no additional changes beyond increasing the aio limit.
								</p></div></div></dd><dt><span class="term">fs.file-max</span></dt><dd><p class="simpara">
								Defines the maximum number of file handles (temporary file names or IDs assigned to open files) the system supports at any instance.
							</p><p class="simpara">
								The kernel dynamically allocates file handles whenever a file handle is requested by an application. The kernel however does not free these file handles when they are released by the application. The kernel recycles these file handles instead. This means that over time the total number of allocated file handles will increase even though the number of currently used file handles may be low.
							</p></dd><dt><span class="term">kernel.shmall</span></dt><dd>
								Defines the total number of shared memory pages that can be used system-wide. To use the entire main memory, the value of the <code class="literal">kernel.shmall</code> parameter should be ≤ total main memory size.
							</dd><dt><span class="term">kernel.shmmax</span></dt><dd>
								Defines the maximum size in bytes of a single shared memory segment that a Linux process can allocate in its virtual address space.
							</dd><dt><span class="term">kernel.shmmni</span></dt><dd>
								Defines the maximum number of shared memory segments the database server is able to handle.
							</dd><dt><span class="term">net.ipv4.ip_local_port_range</span></dt><dd>
								Defines the port range the system can use for programs which want to connect to a database server without a specific port number.
							</dd><dt><span class="term">net.core.rmem_default</span></dt><dd>
								Defines the default receive socket memory through Transmission Control Protocol (TCP).
							</dd><dt><span class="term">net.core.rmem_max</span></dt><dd>
								Defines the maximum receive socket memory through Transmission Control Protocol (TCP).
							</dd><dt><span class="term">net.core.wmem_default</span></dt><dd>
								Defines the default send socket memory through Transmission Control Protocol (TCP).
							</dd><dt><span class="term">net.core.wmem_max</span></dt><dd>
								Defines the maximum send socket memory through Transmission Control Protocol (TCP).
							</dd><dt><span class="term">vm.dirty_bytes / vm.dirty_ratio</span></dt><dd>
								Defines a threshold in bytes / in percentage of dirty-able memory at which a process generating dirty data is started in the <code class="literal">write()</code> function.
							</dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						<span class="strong strong"><strong>Either</strong></span> <code class="literal">vm.dirty_bytes</code> <span class="strong strong"><strong>or</strong></span> <code class="literal">vm.dirty_ratio</code> can be specified at a time.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">vm.dirty_background_bytes / vm.dirty_background_ratio</span></dt><dd>
								Defines a threshold in bytes / in percentage of dirty-able memory at which the kernel tries to actively write dirty data to hard-disk.
							</dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						<span class="strong strong"><strong>Either</strong></span> <code class="literal">vm.dirty_background_bytes</code> <span class="strong strong"><strong>or</strong></span> <code class="literal">vm.dirty_background_ratio</code> can be specified at a time.
					</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">vm.dirty_writeback_centisecs</span></dt><dd><p class="simpara">
								Defines a time interval between periodic wake-ups of the kernel threads responsible for writing dirty data to hard-disk.
							</p><p class="simpara">
								This kernel parameters measures in 100th’s of a second.
							</p></dd><dt><span class="term">vm.dirty_expire_centisecs</span></dt><dd><p class="simpara">
								Defines the time after which dirty data is old enough to be written to hard-disk.
							</p><p class="simpara">
								This kernel parameters measures in 100th’s of a second.
							</p></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For explanation of dirty data writebacks, how they work, and what kernel parameters relate to them, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/45002#control-parameters-4">Dirty pagecache writeback and vm.dirty parameters</a></span></em></span> document.
						</li></ul></div></section></section></section><section class="chapter" id="getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Getting started with kernel logging</h1></div></div></div><p>
			Log files are files that contain messages about the system, including the kernel, services, and applications running on it. The logging system in Red Hat Enterprise Linux is based on the built-in <span class="strong strong"><strong>syslog</strong></span> protocol. Various utilities use this system to record events and organize them into log files. These files are useful when auditing the operating system or troubleshooting problems.
		</p><section class="section" id="what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging"><div class="titlepage"><div><div><h2 class="title">6.1. What is the kernel ring buffer</h2></div></div></div><p>
				During the boot process, the console provides a lot of important information about the initial phase of the system startup. To avoid loss of the early messages the kernel utilizes what is called a ring buffer. This buffer stores all messages, including boot messages, generated by the <code class="literal">printk()</code> function within the kernel code. The messages from the kernel ring buffer are then read and stored in log files on permanent storage, for example, by the <code class="literal">syslog</code> service.
			</p><p>
				The buffer mentioned above is a cyclic data structure which has a fixed size, and is hard-coded into the kernel. Users can display data stored in the kernel ring buffer through the <code class="literal">dmesg</code> command or the <code class="literal">/var/log/boot.log</code> file. When the ring buffer is full, the new data overwrites the old.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal">syslog</code>, see the <code class="literal">syslog(2)</code> manual page.
					</li><li class="listitem">
						For more details on how to examine or control boot log messages with <code class="literal">dmesg</code>, see the <code class="literal">dmesg(1)</code> manual page.
					</li></ul></div></section><section class="section" id="role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging"><div class="titlepage"><div><div><h2 class="title">6.2. Role of printk on log-levels and kernel logging</h2></div></div></div><p>
				Each message the kernel reports has a log-level associated with it that defines the importance of the message. The kernel ring buffer, as described in <a class="xref" href="index.html#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging" title="6.1. What is the kernel ring buffer">Section 6.1, “What is the kernel ring buffer”</a>, collects kernel messages of all log-levels. It is the <code class="literal">kernel.printk</code> parameter that defines what messages from the buffer are printed to the console.
			</p><p>
				The log-level values break down in this order:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						0 — Kernel emergency. The system is unusable.
					</li><li class="listitem">
						1 — Kernel alert. Action must be taken immediately.
					</li><li class="listitem">
						2 — Condition of the kernel is considered critical.
					</li><li class="listitem">
						3 — General kernel error condition.
					</li><li class="listitem">
						4 — General kernel warning condition.
					</li><li class="listitem">
						5 — Kernel notice of a normal but significant condition.
					</li><li class="listitem">
						6 — Kernel informational message.
					</li><li class="listitem">
						7 — Kernel debug-level messages.
					</li></ul></div><p>
				By default, <code class="literal">kernel.printk</code> in RHEL 8 contains the following four values:
			</p><pre class="literallayout"># sysctl kernel.printk
kernel.printk = 7	4	1	7</pre><p>
				The four values define the following:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						value. Console log-level, defines the lowest priority of messages printed to the console.
					</li><li class="listitem">
						value. Default log-level for messages without an explicit log-level attached to them.
					</li><li class="listitem">
						value. Sets the lowest possible log-level configuration for the console log-level.
					</li><li class="listitem"><p class="simpara">
						value. Sets default value for the console log-level at boot time.
					</p><p class="simpara">
						Each of these values above defines a different rule for handling error messages.
					</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Certain kernel command line parameters, such as <code class="literal">quiet</code> or <code class="literal">debug</code>, change the default <code class="literal">kernel.printk</code> values.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on <code class="literal">kernel.printk</code> and log-levels, see the <code class="literal">syslog(2)</code> manual page.
					</li></ul></div></section></section><section class="chapter" id="installing-and-configuring-kdump_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Installing and configuring kdump</h1></div></div></div><section class="section" id="what-is-kdump_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.1. What is kdump</h2></div></div></div><p>
				<code class="literal service">kdump</code> is a service providing a crash dumping mechanism. The service enables you to save the contents of the system’s memory for later analysis. <code class="literal service">kdump</code> uses the <code class="literal">kexec</code> system call to boot into the second kernel (a <span class="emphasis"><em>capture kernel</em></span>) without rebooting; and then captures the contents of the crashed kernel’s memory (a <span class="emphasis"><em>crash dump</em></span> or a <span class="emphasis"><em>vmcore</em></span>) and saves it. The second kernel resides in a reserved part of the system memory.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A kernel crash dump can be the only information available in the event of a system failure (a critical bug). Therefore, ensuring that <code class="literal">kdump</code> is operational is important in mission-critical environments. Red Hat advise that system administrators regularly update and test <code class="literal package">kexec-tools</code> in your normal kernel update cycle. This is especially important when new kernel features are implemented.
				</p></div></div></section><section class="section" id="installing-kdump_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.2. Installing kdump</h2></div></div></div><p>
				In many cases, the <code class="literal">kdump</code> service is installed and activated by default on the new Red Hat Enterprise Linux installations. The <span class="strong strong"><strong><span class="application application">Anaconda</span></strong></span> installer provides a screen for <code class="literal">kdump</code> configuration when performing an interactive installation using the graphical or text interface. The installer screen is titled <code class="literal">Kdump</code> and is available from the main <code class="literal">Installation Summary</code> screen, and only allows limited configuration - you can only select whether <code class="literal">kdump</code> is enabled and how much memory is reserved.
			</p><div class="informalfigure"><div class="mediaobject"><img src="anaconda-summary-hub-states.png" alt="Enable kdump during RHEL installation"/></div></div><p>
				Some installation options, such as custom Kickstart installations, in some cases do not install or enable <code class="literal">kdump</code> by default. If this is the case on your system, follow the procedure below to install <code class="literal">kdump</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An active Red Hat Enterprise Linux subscription
					</li><li class="listitem">
						A repository containing the <span class="strong strong"><strong><span class="package package">kexec-tools</span></strong></span> package for your system CPU architecture
					</li><li class="listitem">
						Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the following command to check whether <code class="literal">kdump</code> is installed on your system:
					</p><pre class="screen"><code class="literal">$</code> <code class="literal command">rpm -q kexec-tools</code></pre><p class="simpara">
						Output if the package is installed:
					</p><pre class="screen"><code class="literal command">kexec-tools-2.0.17-11.el8.x86_64</code></pre><p class="simpara">
						Output if the package is not installed:
					</p><pre class="screen"><code class="literal command">package kexec-tools is not installed</code></pre></li><li class="listitem"><p class="simpara">
						Install <code class="literal">kdump</code> and other necessary packages by:
					</p><pre class="screen"><code class="literal">#</code> yum install kexec-tools</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Starting with Red Hat Enterprise Linux 7.4 (kernel-3.10.0-693.el7) the <code class="literal">Intel IOMMU</code> driver is supported with <code class="literal">kdump</code>. For prior versions, Red Hat Enterprise Linux 7.3 (kernel-3.10.0-514[.XYZ].el7) and earlier, it is advised that <code class="literal">Intel IOMMU</code> support is disabled, otherwise kdump kernel is likely to become unresponsive.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Information about memory requirements for <code class="literal">kdump</code> is available in <a class="xref" href="index.html#memory-requirements-for-kdump_supported-kdump-configurations-and-targets" title="7.5.1. Memory requirements for kdump">Section 7.5.1, “Memory requirements for kdump”</a>.
					</li></ul></div></section><section class="section" id="configuring-kdump-on-the-command-line_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.3. Configuring kdump on the command line</h2></div></div></div><section class="section" id="configuring-kdump-memory-usage_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">7.3.1. Configuring kdump memory usage</h3></div></div></div><p>
					The memory reserved for the <code class="literal">kdump</code> feature is always reserved during the system boot. The amount of memory is specified in the system’s Grand Unified Bootloader (GRUB) 2 configuration. The procedure below describes how to configure the memory reserved for <code class="literal">kdump</code> through the command line.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Edit the <code class="literal">/etc/default/grub</code> file using the root permissions.
						</li><li class="listitem"><p class="simpara">
							Set the <code class="literal option">crashkernel=</code> option to the required value.
						</p><p class="simpara">
							For example, to reserve 128 MB of memory, use the following:
						</p><pre class="screen">crashkernel=128M</pre><p class="simpara">
							Alternatively, you can set the amount of reserved memory to a variable depending on the total amount of installed memory. The syntax for memory reservation into a variable is <code class="literal option">crashkernel=<span class="emphasis"><em>&lt;range1&gt;</em></span>:<span class="emphasis"><em>&lt;size1&gt;</em></span>,<span class="emphasis"><em>&lt;range2&gt;</em></span>:<span class="emphasis"><em>&lt;size2&gt;</em></span></code>. For example:
						</p><pre class="screen">crashkernel=512M-2G:64M,2G-:128M</pre><p class="simpara">
							The above example reserves 64 MB of memory if the total amount of system memory is 512 MB or higher and lower than 2 GB. If the total amount of memory is more than 2 GB, 128 MB is reserved for <code class="literal">kdump</code> instead.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Offset the reserved memory.
								</p><p class="simpara">
									Some systems require to reserve memory with a certain fixed offset since crashkernel reservation is very early, and it wants to reserve some area for special usage. If the offset is set, the reserved memory begins there. To offset the reserved memory, use the following syntax:
								</p><pre class="screen">crashkernel=128M@16M</pre><p class="simpara">
									The example above means that <code class="literal">kdump</code> reserves 128 MB of memory starting at 16 MB (physical address 0x01000000). If the offset parameter is set to 0 or omitted entirely, <code class="literal">kdump</code> offsets the reserved memory automatically. This syntax can also be used when setting a variable memory reservation as described above; in this case, the offset is always specified last (for example, <code class="literal option">crashkernel=512M-2G:64M,2G-:128M@16M</code>).
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Use the following command to update the GRUB2 configuration file:
						</p><pre class="screen"># grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The alternative way to configure memory for <code class="literal">kdump</code> is to append the <code class="literal">crashkernel=&lt;<span class="emphasis"><em>SOME_VALUE</em></span>&gt;</code> parameter to the <code class="literal">kernelopts</code> variable with the <code class="literal">grub2-editenv</code> which will update all of your boot entries. Or you can use the <code class="literal">grubby</code> utility to update kernel command line parameters of just one entry.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal option">crashkernel=</code> option can be defined in multiple ways. The <code class="literal">auto</code> value enables automatic configuration of reserved memory based on the total amount of memory in the system, following the guidelines described in <a class="xref" href="index.html#memory-requirements-for-kdump_supported-kdump-configurations-and-targets" title="7.5.1. Memory requirements for kdump">Section 7.5.1, “Memory requirements for kdump”</a>.
						</li><li class="listitem">
							For more information on boot entries, <code class="literal">kernelopts</code>, and how to work with <code class="literal">grub2-editenv</code> and <code class="literal">grubby</code> see <a class="xref" href="index.html#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel" title="Chapter 4. Configuring kernel command-line parameters">Chapter 4, <em>Configuring kernel command-line parameters</em></a>.
						</li></ul></div></section><section class="section" id="configuring-the-kdump-target_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">7.3.2. Configuring the kdump target</h3></div></div></div><p>
					When a kernel crash is captured, the core dump can be either stored as a file in a local file system, written directly to a device, or sent over a network using the <code class="literal">NFS</code> (Network File System) or <code class="literal">SSH</code> (Secure Shell) protocol. Only one of these options can be set at a time, and the default behavior is to store the vmcore file in the <code class="literal">/var/crash/</code> directory of the local file system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To store the <code class="literal">vmcore</code> file in <code class="literal">/var/crash/</code> directory of the local file system:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Edit the <code class="literal">/etc/kdump.conf</code> file and specify the path:
						</p><pre class="screen">path /var/crash</pre><p class="simpara">
							The option <code class="literal">path /var/crash</code> represents the path to the file system in which <code class="literal">kdump</code> saves the <code class="literal">vmcore</code> file. When you specify a dump target in the <code class="literal">/etc/kdump.conf</code> file, then the <code class="literal">path</code> is relative to the specified dump target.
						</p><p class="simpara">
							If you do not specify a dump target in the <code class="literal">/etc/kdump.conf</code> file, then the <code class="literal">path</code> represents the absolute path from the root directory. Depending on what is mounted in the current system, the dump target and the adjusted dump path are taken automatically.
						</p></li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						<code class="literal">kdump</code> saves the <code class="literal">vmcore</code> file in <code class="literal">/var/crash/var/crash</code> directory, when the dump target is mounted at <code class="literal">/var/crash</code> and the option <code class="literal">path</code> is also set as <code class="literal">/var/crash</code> in the <code class="literal">/etc/kdump.conf</code> file. For example, in the following instance, the <code class="literal">ext4</code> file system is already mounted at <code class="literal">/var/crash</code> and the <code class="literal">path</code> are set as <code class="literal">/var/crash</code>:
					</p><pre class="screen">grep -v ^# etc/kdump.conf | grep -v ^$
ext4 /dev/mapper/vg00-varcrashvol
path /var/crash
core_collector makedumpfile -c --message-level 1 -d 31</pre><p>
						This results in the <code class="literal">/var/crash/var/crash</code> path. To solve this problem, use the option <code class="literal">path /</code> instead of <code class="literal">path /var/crash</code>
					</p></div></div><p>
					To change the local directory in which the core dump is to be saved, as <code class="literal">root</code>, edit the <code class="literal">/etc/kdump.conf</code> configuration file as described below.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Remove the hash sign ("#") from the beginning of the <code class="literal">#path /var/crash</code> line.
						</li><li class="listitem"><p class="simpara">
							Replace the value with the intended directory path. For example:
						</p><pre class="screen">path /usr/local/cores</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								In Red Hat Enterprise Linux 8, the directory defined as the kdump target using the <code class="literal">path</code> directive must exist when the <code class="literal">kdump</code> systemd service is started - otherwise the service fails. This behavior is different from earlier releases of Red Hat Enterprise Linux, where the directory was being created automatically if it did not exist when starting the service.
							</p></div></div></li></ol></div><p>
					To write the file to a different partition, as <code class="literal">root</code>, edit the <code class="literal">/etc/kdump.conf</code> configuration file as described below.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Remove the hash sign ("#") from the beginning of the <code class="literal">#ext4</code> line, depending on your choice.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									device name (the <code class="literal">#ext4 /dev/vg/lv_kdump</code> line)
								</li><li class="listitem">
									file system label (the <code class="literal">#ext4 LABEL=/boot</code> line)
								</li><li class="listitem">
									UUID (the <code class="literal">#ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937</code> line)
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Change the file system type as well as the device name, label or UUID to the desired values. For example:
						</p><pre class="screen">ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								It is recommended to specify storage devices using a <code class="literal">LABEL=</code> or <code class="literal">UUID=</code>. Disk device names such as <code class="literal">/dev/sda3</code> are not guaranteed to be consistent across reboot.
							</p></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								When dumping to Direct Access Storage Device (DASD) on IBM Z hardware, it is essential that the dump devices are correctly specified in <code class="literal">/etc/dasd.conf</code> before proceeding.
							</p></div></div></li></ol></div><p>
					To write the dump directly to a device:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Remove the hash sign ("#") from the beginning of the <code class="literal">#raw /dev/vg/lv_kdump</code> line.
						</li><li class="listitem"><p class="simpara">
							Replace the value with the intended device name. For example:
						</p><pre class="screen">raw /dev/sdb1</pre></li></ol></div><p>
					To store the dump to a remote machine using the <code class="literal">NFS</code> protocol:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Remove the hash sign ("#") from the beginning of the <code class="literal">#nfs my.server.com:/export/tmp</code> line.
						</li><li class="listitem"><p class="simpara">
							Replace the value with a valid hostname and directory path. For example:
						</p><pre class="screen">nfs penguin.example.com:/export/cores</pre></li></ol></div><p>
					To store the dump to a remote machine using the <code class="literal">SSH</code> protocol:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Remove the hash sign ("#") from the beginning of the <code class="literal">#ssh <a class="link" href="mailto:user@my.server.com">user@my.server.com</a></code> line.
						</li><li class="listitem">
							Replace the value with a valid username and hostname.
						</li><li class="listitem"><p class="simpara">
							Include your <code class="literal">SSH</code> key in the configuration.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Remove the hash sign from the beginning of the <code class="literal">#sshkey /root/.ssh/kdump_id_rsa</code> line.
								</li><li class="listitem"><p class="simpara">
									Change the value to the location of a key valid on the server you are trying to dump to. For example:
								</p><pre class="screen">ssh john@penguin.example.com
sshkey /root/.ssh/mykey</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For a complete list of currently supported and unsupported targets sorted by type, see <a class="xref" href="index.html#supported-kdump-targets_supported-kdump-configurations-and-targets" title="7.5.3. Supported kdump targets">Section 7.5.3, “Supported kdump targets”</a>.
						</li><li class="listitem">
							For information on how to configure an SSH server and set up a key-based authentication, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#sec-SSH">Configuring basic system settings</a></span></em></span> in Red Hat Enterprise Linux.
						</li></ul></div></section><section class="section" id="configuring-the-core-collector_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">7.3.3. Configuring the core collector</h3></div></div></div><p>
					<code class="literal">kdump</code> uses a program specified as <code class="literal utility">core collector</code> to capture the vmcore. Currently, the only fully supported <code class="literal utility">core collector</code> is the <code class="literal utility">makedumpfile</code> utility. It has several configurable options, which affect the collection process. For example the extent of collected data, or whether the resulting vmcore should be compressed.
				</p><p>
					To enable and configure the <code class="literal utility">core collector</code>, follow the procedure below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							As <code class="literal">root</code>, edit the <code class="literal">/etc/kdump.conf</code> configuration file and remove the hash sign ("#") from the beginning of the <code class="literal">#core_collector makedumpfile -l --message-level 1 -d 31</code>.
						</li><li class="listitem"><p class="simpara">
							Add the <code class="literal option">-c</code> parameter. For example:
						</p><pre class="screen">core_collector makedumpfile -c</pre><p class="simpara">
							The command above enables the dump file compression.
						</p></li><li class="listitem"><p class="simpara">
							Add the <code class="literal option">-d <span class="emphasis"><em>value</em></span></code> parameter. For example:
						</p><pre class="screen">core_collector makedumpfile -d 17 -c</pre><p class="simpara">
							The command above removes both zero and free pages from the dump. The <span class="emphasis"><em>value</em></span> represents a bitmask, where each bit is associated with a certain type of memory pages and determines whether that type of pages will be collected. For description of respective bits see <a class="xref" href="index.html#supported-kdump-filtering-levels_supported-kdump-configurations-and-targets" title="7.5.4. Supported kdump filtering levels">Section 7.5.4, “Supported kdump filtering levels”</a>.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							See the <code class="literal">makedumpfile(8)</code> man page for a complete list of available options.
						</li></ul></div></section><section class="section" id="configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">7.3.4. Configuring the kdump default failure responses</h3></div></div></div><p>
					By default, when <code class="literal">kdump</code> fails to create a vmcore dump file at the target location specified in <a class="xref" href="index.html#configuring-the-kdump-target_configuring-kdump-on-the-command-line" title="7.3.2. Configuring the kdump target">Section 7.3.2, “Configuring the kdump target”</a>, the system reboots, and the dump is lost in the process. To change this behavior, follow the procedure below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							As <code class="literal">root</code>, remove the hash sign ("#") from the beginning of the <code class="literal">#default shell</code> line in the <code class="literal">/etc/kdump.conf</code> configuration file.
						</li><li class="listitem"><p class="simpara">
							Replace the value with a desired action as described in <a class="xref" href="index.html#supported-default-failure-responses_supported-kdump-configurations-and-targets" title="7.5.5. Supported default failure responses">Section 7.5.5, “Supported default failure responses”</a>. For example:
						</p><pre class="screen">default poweroff</pre></li></ol></div></section><section class="section" id="enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">7.3.5. Enabling and disabling the kdump service</h3></div></div></div><p>
					To start the <code class="literal">kdump</code> service at boot time, follow the procedure below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>.
						</li><li class="listitem">
							All <a class="link" href="index.html#configuring-kdump-on-the-command-line_installing-and-configuring-kdump" title="7.3. Configuring kdump on the command line">configuration</a> is set up according to your needs.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To enable the <code class="literal">kdump</code> service, use the following command:
						</p><pre class="screen"><code class="literal command"># systemctl</code> <code class="literal option">enable</code> <code class="literal option">kdump.service</code></pre><p class="simpara">
							This enables the service for <code class="literal">multi-user.target</code>.
						</p></li><li class="listitem"><p class="simpara">
							To start the service in the current session, use the following command:
						</p><pre class="screen"><code class="literal command"># systemctl</code> <code class="literal option">start</code> <code class="literal option">kdump.service</code></pre></li><li class="listitem"><p class="simpara">
							To stop the <code class="literal">kdump</code> service, type the following command:
						</p><pre class="screen"><code class="literal command"># systemctl</code> <code class="literal option">stop</code> <code class="literal option">kdump.service</code></pre></li><li class="listitem"><p class="simpara">
							To disable the <code class="literal">kdump</code> service, execute the following command:
						</p><pre class="screen"><code class="literal command"># systemctl</code> <code class="literal option">disable</code> <code class="literal option">kdump.service</code></pre></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						It is recommended to set <code class="literal">kptr_restrict=1</code> as default. When <code class="literal">kptr_restrict</code> is set to (1) as default, the <code class="literal">kdumpctl</code> service loads the crash kernel even if Kernel Address Space Layout (KASLR) is enabled or not enabled.
					</p></div></div><div class="formalpara"><p class="title"><strong>Troubleshooting step</strong></p><p>
						When <code class="literal">kptr_restrict</code> is not set to (1), and if KASLR is enabled, the contents of <code class="literal">/proc/kore</code> file are generated as all zeros. Consequently, the <code class="literal">kdumpctl</code> service fails to access the <code class="literal">/proc/kcore</code> and load the crash kernel.
					</p></div><p>
					To work around this problem, the <code class="literal">kexec-kdump-howto.txt</code> file displays a warning message, which specifies to keep the recommended setting as <code class="literal">kptr_restrict=1</code>.
				</p><p>
					To ensure that <code class="literal">kdumpctl</code> service loads the crash kernel, verify that:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Kernel <code class="literal">kptr_restrict=1</code> in the <code class="literal">sysctl.conf</code> file.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information on <code class="literal">systemd</code> and configuring services in general, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#managing-services-with-systemd">Configuring basic system settings</a></span></em></span> in Red Hat Enterprise Linux.
						</li></ul></div></section></section><section class="section" id="configuring-kdump-in-the-web-console_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.4. Configuring kdump in the web console</h2></div></div></div><p>
				The following sections provide an overview of how to setup and test the <code class="literal">kdump</code> configuration through the Red Hat Enterprise Linux web console. The web console is part of a default installation of Red Hat Enterprise Linux 8 and enables or disables the <code class="literal">kdump</code> service at boot time. Further, the web console conveniently enables you to configure the reserved memory for <code class="literal">kdump</code>; or to select the <span class="emphasis"><em>vmcore</em></span> saving location in an uncompressed or compressed format.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						See <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_systems_using_the_rhel_8_web_console/index#getting-started-with-the-rhel-8-web-console_system-management-using-the-RHEL-8-web-console">Red Hat Enterprise Linux web console</a></span></em></span> for further details.
					</li></ul></div><section class="section" id="configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">7.4.1. Configuring kdump memory usage and target location in web console</h3></div></div></div><p>
					The procedure below shows you how to use the <code class="literal">Kernel Dump</code> tab in the Red Hat Enterprise Linux web console interface to configure the amount of memory that is reserved for the kdump kernel. The procedure also describes how to specify the target location of the vmcore dump file and how to test your configuration.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Introduction to operating the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_systems_using_the_rhel_8_web_console/index">web console</a></span></em></span>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the <code class="literal button">Kernel Dump</code> tab and start the <code class="literal command">kdump</code> service.
						</li><li class="listitem">
							Configure the <code class="literal">kdump</code> memory usage through the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index#configuring-kdump-memory-usage_configuring-kdump-on-the-command-line">command line</a></span></em></span>.
						</li><li class="listitem"><p class="simpara">
							Click the link next to the <code class="literal option">Crash dump location</code> option.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web_console_initial_screen.png" alt="web console initial screen"/></div></div></li><li class="listitem"><p class="simpara">
							Select the <code class="literal option">Local Filesystem</code> option from the drop-down and specify the directory you want to save the dump in.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web_console_crashdump_target.png" alt="web console crashdump target"/></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Alternatively, select the <code class="literal option">Remote over SSH</code> option from the drop-down to send the vmcore to a remote machine using the SSH protocol.
								</p><p class="simpara">
									Fill the <code class="literal">Server</code>, <code class="literal">ssh key</code>, and <code class="literal">Directory</code> fields with the remote machine address, ssh key location, and a target directory.
								</p></li><li class="listitem"><p class="simpara">
									Another choice is to select the <code class="literal option">Remote over NFS</code> option from the drop-down and fill the <code class="literal">Mount</code> field to send the vmcore to a remote machine using the NFS protocol.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										Tick the <code class="literal">Compression</code> check box to reduce the size of the vmcore file.
									</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Test your configuration by crashing the kernel.
						</p><div class="informalfigure"><div class="mediaobject"><img src="web_console_test_kdump_config.png" alt="web console test kdump config"/></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								This step disrupts execution of the kernel and results in a system crash and loss of data.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For a complete list of currently supported targets for <code class="literal">kdump</code>, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/index#supported-kdump-targets_supported-kdump-configurations-and-targets">Supported kdump targets</a></span></em></span>.
						</li><li class="listitem">
							For information on how to configure an SSH server and set up a key-based authentication, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/securing_networks/using-secure-communications-between-two-systems-with-openssh_securing-networks">Using secure communications between two systems with OpenSSH</a></span></em></span>.
						</li></ul></div></section></section><section class="section" id="supported-kdump-configurations-and-targets_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.5. Supported kdump configurations and targets</h2></div></div></div><section class="section" id="memory-requirements-for-kdump_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.1. Memory requirements for kdump</h3></div></div></div><p>
					In order for <code class="literal">kdump</code> to be able to capture a kernel crash dump and save it for further analysis, a part of the system memory has to be permanently reserved for the capture kernel. When reserved, this part of the system memory is not available to the main kernel.
				</p><p>
					The memory requirements vary based on certain system parameters. One of the major factors is the system’s hardware architecture. To find out the exact machine architecture (such as Intel 64 and AMD64, also known as x86_64) and print it to standard output, use the following command:
				</p><pre class="screen"><code class="literal command">$ uname -m</code></pre><p>
					The table below contains a list of minimum memory requirements to automatically reserve a memory size for <code class="literal">kdump</code>. The size changes according to the system’s architecture and total available physical memory.
				</p><div class="table" id="idm139829857798656"><p class="title"><strong>Table 7.1. Minimum Amount of Reserved Memory Required for kdump</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829857792864" scope="col">Architecture</th><th align="left" valign="top" id="idm139829857791776" scope="col">Available Memory</th><th align="left" valign="top" id="idm139829857790688" scope="col">Minimum Reserved Memory</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829857792864"> <p>
									AMD64 and Intel 64 (<code class="literal">x86_64</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									1 GB to 64 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									160 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									64 GB to 1 TB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									256 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									1 TB and more
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									512 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> <p>
									64-bit ARM architecture (<code class="literal">arm64</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									2 GB and more
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									512 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> <p>
									IBM Power Systems (<code class="literal">ppc64le</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									2 GB to 4 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									384 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									4 GB to 16 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									512 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									16 GB to 64 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									1 GB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									64 GB to 128 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									2 GB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									128 GB and more
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									4 GB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> <p>
									IBM Z (<code class="literal">s390x</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									4 GB to 64 GB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									160 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									64 GB to 1 TB
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									256 MB of RAM.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857792864"> </td><td align="left" valign="top" headers="idm139829857791776"> <p>
									1 TB and more
								</p>
								 </td><td align="left" valign="top" headers="idm139829857790688"> <p>
									512 MB of RAM.
								</p>
								 </td></tr></tbody></table></div></div><p>
					On many systems, <code class="literal">kdump</code> is able to estimate the amount of required memory and reserve it automatically. This behavior is enabled by default, but only works on systems that have more than a <a class="link" href="index.html#minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets" title="7.5.2. Minimum threshold for automatic memory reservation">certain amount of total available memory</a>, which varies based on the system architecture.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The automatic configuration of reserved memory based on the total amount of memory in the system is a best effort estimation. The actual required memory may vary due to other factors such as I/O devices. Using not enough of memory might cause that a debug kernel is not able to boot as a capture kernel in case of a kernel panic. To avoid this problem, sufficiently increase the crash kernel memory.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on how to change memory settings on the command line, see <a class="xref" href="index.html#configuring-kdump-memory-usage_configuring-kdump-on-the-command-line" title="7.3.1. Configuring kdump memory usage">Section 7.3.1, “Configuring kdump memory usage”</a>.
						</li><li class="listitem">
							For instructions on how to set up the amount of reserved memory through the web console, see <a class="xref" href="index.html#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console" title="7.4.1. Configuring kdump memory usage and target location in web console">Section 7.4.1, “Configuring kdump memory usage and target location in web console”</a>.
						</li><li class="listitem">
							For more information about various Red Hat Enterprise Linux technology capabilities and limits, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/rhel-limits">technology capabilities and limits tables</a></span></em></span>.
						</li></ul></div></section><section class="section" id="minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.2. Minimum threshold for automatic memory reservation</h3></div></div></div><p>
					On some systems, it is possible to allocate memory for <code class="literal">kdump</code> automatically, either by using the <code class="literal option">crashkernel=auto</code> parameter in the boot loader configuration file, or by enabling this option in the graphical configuration utility. For this automatic reservation to work, however, a certain amount of total memory needs to be available in the system. The amount differs based on the system’s architecture.
				</p><p>
					The table below lists the thresholds for automatic memory allocation. If the system has less memory than specified in the table, the memory needs to be <a class="link" href="index.html#configuring-kdump-memory-usage_configuring-kdump-on-the-command-line" title="7.3.1. Configuring kdump memory usage">reserved manually</a>.
				</p><div class="table" id="idm139829857992976"><p class="title"><strong>Table 7.2. Minimum Amount of Memory Required for Automatic Memory Reservation</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829857726528" scope="col">Architecture</th><th align="left" valign="top" id="idm139829857725552" scope="col">Required Memory</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829857726528"> <p>
									AMD64 and Intel 64 (<code class="literal">x86_64</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857725552"> <p>
									2 GB
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857726528"> <p>
									IBM Power Systems (<code class="literal">ppc64le</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857725552"> <p>
									2 GB
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857726528"> <p>
									IBM  Z (<code class="literal">s390x</code>)
								</p>
								 </td><td align="left" valign="top" headers="idm139829857725552"> <p>
									4 GB
								</p>
								 </td></tr></tbody></table></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on how to manually change these settings on the command line, see <a class="xref" href="index.html#configuring-kdump-memory-usage_configuring-kdump-on-the-command-line" title="7.3.1. Configuring kdump memory usage">Section 7.3.1, “Configuring kdump memory usage”</a>.
						</li><li class="listitem">
							For instructions on how to manually change the amount of reserved memory through the web console, see <a class="xref" href="index.html#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console" title="7.4.1. Configuring kdump memory usage and target location in web console">Section 7.4.1, “Configuring kdump memory usage and target location in web console”</a>.
						</li></ul></div></section><section class="section" id="supported-kdump-targets_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.3. Supported kdump targets</h3></div></div></div><p>
					When a kernel crash is captured, the vmcore dump file can be either written directly to a device, stored as a file on a local file system, or sent over a network. The table below contains a complete list of dump targets that are currently supported or explicitly unsupported by <code class="literal">kdump</code>.
				</p><div class="table" id="idm139829857617392"><p class="title"><strong>Table 7.3. Supported kdump Targets</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829857611632" scope="col">Type</th><th align="left" valign="top" id="idm139829857610544" scope="col">Supported Targets</th><th align="left" valign="top" id="idm139829857609456" scope="col">Unsupported Targets</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829857611632"> <p>
									Raw device
								</p>
								 </td><td align="left" valign="top" headers="idm139829857610544"> <p>
									All locally attached raw disks and partitions.
								</p>
								 </td><td align="left" valign="top" headers="idm139829857609456"> </td></tr><tr><td align="left" valign="top" headers="idm139829857611632"> <p>
									Local file system
								</p>
								 </td><td align="left" valign="top" headers="idm139829857610544"> <p>
									<code class="literal">ext2</code>, <code class="literal">ext3</code>, <code class="literal">ext4</code>, and <code class="literal">xfs</code> file systems on directly attached disk drives, hardware RAID logical drives, LVM devices, and <code class="literal">mdraid</code> arrays.
								</p>
								 </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Any local file system not explicitly listed as supported in this table, including the <code class="literal">auto</code> type (automatic file system detection).
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857611632"> <p>
									Remote directory
								</p>
								 </td><td align="left" valign="top" headers="idm139829857610544"> <p>
									Remote directories accessed using the <code class="literal">NFS</code> or <code class="literal">SSH</code> protocol over <code class="literal">IPv4</code>.
								</p>
								 </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Remote directories on the <code class="literal">rootfs</code> file system accessed using the <code class="literal">NFS</code> protocol.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829857611632"> <p>
									Remote directories accessed using the <code class="literal">iSCSI</code> protocol over both hardware and software initiators.
								</p>
								 </td><td align="left" valign="top" headers="idm139829857610544"> <p>
									Remote directories accessed using the <code class="literal">iSCSI</code> protocol on <code class="literal">be2iscsi</code> hardware.
								</p>
								 </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Multipath-based storages.
								</p>
								 </td></tr><tr><td colspan="2" align="center" valign="top" headers="idm139829857611632 idm139829857610544"> </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Remote directories accessed over <code class="literal">IPv6</code>.
								</p>
								 </td></tr><tr><td colspan="2" align="center" valign="top" headers="idm139829857611632 idm139829857610544"> </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Remote directories accessed using the <code class="literal">SMB</code> or <code class="literal">CIFS</code> protocol.
								</p>
								 </td></tr><tr><td colspan="2" align="center" valign="top" headers="idm139829857611632 idm139829857610544"> </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Remote directories accessed using the <code class="literal">FCoE</code> (<span class="emphasis"><em>Fibre Channel over Ethernet</em></span>) protocol.
								</p>
								 </td></tr><tr><td colspan="2" align="center" valign="top" headers="idm139829857611632 idm139829857610544"> </td><td align="left" valign="top" headers="idm139829857609456"> <p>
									Remote directories accessed using wireless network interfaces.
								</p>
								 </td></tr></tbody></table></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Utilizing firmware assisted dump (<code class="literal">fadump</code>) to capture a vmcore and store it to a remote machine using SSH or NFS protocol causes renaming of the network interface to <code class="literal">kdump-&lt;interface-name&gt;</code>. The renaming happens if the <code class="literal">&lt;interface-name&gt;</code> is generic, for example <code class="literal">*eth#</code>, <code class="literal">net#</code>, and so on. This problem occurs because the vmcore capture scripts in the initial RAM disk (<code class="literal">initrd</code>) add the <span class="emphasis"><em>kdump-</em></span> prefix to the network interface name to secure persistent naming. Since the same <code class="literal">initrd</code> is used also for a regular boot, the interface name is changed for the production kernel too.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on how to configure the target type on the command line, see <a class="xref" href="index.html#configuring-the-kdump-target_configuring-kdump-on-the-command-line" title="7.3.2. Configuring the kdump target">Section 7.3.2, “Configuring the kdump target”</a>.
						</li><li class="listitem">
							For information on how to configure the target through the web console, see <a class="xref" href="index.html#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console" title="7.4.1. Configuring kdump memory usage and target location in web console">Section 7.4.1, “Configuring kdump memory usage and target location in web console”</a>.
						</li></ul></div></section><section class="section" id="supported-kdump-filtering-levels_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.4. Supported kdump filtering levels</h3></div></div></div><p>
					To reduce the size of the dump file, <code class="literal">kdump</code> uses the <code class="literal command">makedumpfile</code> core collector to compress the data and optionally to omit unwanted information. The table below contains a complete list of filtering levels that are currently supported by the <code class="literal command">makedumpfile</code> utility.
				</p><div class="table" id="idm139829856133664"><p class="title"><strong>Table 7.4. Supported Filtering Levels</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829856128816" scope="col">Option</th><th align="left" valign="top" id="idm139829856127728" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829856128816"> <p>
									<code class="literal option">1</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829856127728"> <p>
									Zero pages
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829856128816"> <p>
									<code class="literal option">2</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829856127728"> <p>
									Cache pages
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829856128816"> <p>
									<code class="literal option">4</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829856127728"> <p>
									Cache private
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829856128816"> <p>
									<code class="literal option">8</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829856127728"> <p>
									User pages
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829856128816"> <p>
									<code class="literal option">16</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829856127728"> <p>
									Free pages
								</p>
								 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal command">makedumpfile</code> command supports removal of transparent huge pages and hugetlbfs pages. Consider both these types of hugepages User Pages and remove them using the <code class="literal option">-8</code> level.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions on how to configure the core collector on the command line, see <a class="xref" href="index.html#configuring-the-core-collector_configuring-kdump-on-the-command-line" title="7.3.3. Configuring the core collector">Section 7.3.3, “Configuring the core collector”</a>.
						</li></ul></div></section><section class="section" id="supported-default-failure-responses_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.5. Supported default failure responses</h3></div></div></div><p>
					By default, when <code class="literal">kdump</code> fails to create a core dump, the operating system reboots. You can, however, configure <code class="literal">kdump</code> to perform a different operation in case it fails to save the core dump to the primary target. The table below lists all default actions that are currently supported.
				</p><div class="table" id="idm139829854932896"><p class="title"><strong>Table 7.5. Supported Default Actions</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829854928048" scope="col">Option</th><th align="left" valign="top" id="idm139829854926960" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829854928048"> <p>
									<code class="literal option">dump_to_rootfs</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829854926960"> <p>
									Attempt to save the core dump to the root file system. This option is especially useful in combination with a network target: if the network target is unreachable, this option configures kdump to save the core dump locally. The system is rebooted afterwards.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829854928048"> <p>
									<code class="literal option">reboot</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829854926960"> <p>
									Reboot the system, losing the core dump in the process.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829854928048"> <p>
									<code class="literal option">halt</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829854926960"> <p>
									Halt the system, losing the core dump in the process.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829854928048"> <p>
									<code class="literal option">poweroff</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829854926960"> <p>
									Power off the system, losing the core dump in the process.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm139829854928048"> <p>
									<code class="literal option">shell</code>
								</p>
								 </td><td align="left" valign="top" headers="idm139829854926960"> <p>
									Run a shell session from within the initramfs, allowing the user to record the core dump manually.
								</p>
								 </td></tr></tbody></table></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For detailed information on how to set up the default failure responses on the command line, see <a class="xref" href="index.html#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line" title="7.3.4. Configuring the kdump default failure responses">Section 7.3.4, “Configuring the kdump default failure responses”</a>.
						</li></ul></div></section><section class="section" id="estimating-kdump-size_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">7.5.6. Estimating kdump size</h3></div></div></div><p>
					When planning and building your kdump environment, it is necessary to know how much space is required for the dump file before one is produced.
				</p><p>
					The <code class="literal command">makedumpfile --mem-usage</code> command provides a useful report about excludable pages, and can be used to determine which dump level you want to assign. Run this command when the system is under representative load, otherwise <code class="literal command">makedumpfile --mem-usage</code> returns a smaller value than is expected in your production environment.
				</p><pre class="screen">[root@hostname ~]# makedumpfile --mem-usage /proc/kcore

TYPE            PAGES                   EXCLUDABLE      DESCRIPTION
----------------------------------------------------------------------
ZERO            501635                  yes             Pages filled with zero
CACHE           51657                   yes             Cache pages
CACHE_PRIVATE   5442                    yes             Cache pages + private
USER            16301                   yes             User process pages
FREE            77738211                yes             Free pages
KERN_DATA       1333192                 no              Dumpable kernel data</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The <code class="literal command">makedumpfile --mem-usage</code> command reports in <span class="strong strong"><strong>pages</strong></span>. This means that you have to calculate the size of memory in use against the kernel page size. By default the Red Hat Enterprise Linux kernel uses 4 KB sized pages for AMD64 and Intel 64 architectures, and 64 KB sized pages for IBM POWER architectures.
					</p></div></div></section></section><section class="section" id="testing-the-kdump-configuration_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.6. Testing the kdump configuration</h2></div></div></div><p>
				The following procedure describes how to test that the kernel dump process works and is valid before the machine enters production.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					The commands below cause the kernel to crash. Use caution when following these steps, and never carelessly use them on active production system.
				</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Reboot the system with <code class="literal">kdump</code> <a class="link" href="index.html#enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line" title="7.3.5. Enabling and disabling the kdump service">enabled</a>.
					</li><li class="listitem"><p class="simpara">
						Make sure that <code class="literal">kdump</code> is running:
					</p><pre class="screen">~]# systemctl is-active kdump
active</pre></li><li class="listitem"><p class="simpara">
						Force the Linux kernel to crash:
					</p><pre class="screen"><code class="literal command">echo 1 &gt; /proc/sys/kernel/sysrq</code>
<code class="literal command">echo c &gt; /proc/sysrq-trigger</code></pre><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
							The command above crashes the kernel and a reboot is required.
						</p></div></div><p class="simpara">
						Once booted again, the <code class="literal"><span class="emphasis"><em>address</em></span>-<span class="emphasis"><em>YYYY-MM-DD</em></span>-<span class="emphasis"><em>HH:MM:SS</em></span>/vmcore</code> file is created at the location you have <a class="link" href="index.html#configuring-the-kdump-target_configuring-kdump-on-the-command-line" title="7.3.2. Configuring the kdump target">specified</a> in <code class="literal">/etc/kdump.conf</code> (by default to <code class="literal">/var/crash/</code>).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							In addition to confirming the validity of the configuration, it is possible to use this action to record how long it takes for a crash dump to complete, while a representative load was running.
						</p></div></div></li></ol></div></section><section class="section" id="using-kexec-to-reboot-the-kernel_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.7. Using kexec to reboot the kernel</h2></div></div></div><p>
				The <code class="literal">kexec</code> system call enables loading and booting into another kernel from the currently running kernel, thus performing a function of a boot loader from within the kernel.
			</p><p>
				The <code class="literal">kexec</code> utility loads the kernel and the <code class="literal">initramfs</code> image for the <code class="literal">kexec</code> system call to boot into another kernel.
			</p><p>
				The following procedure describes how to manually invoke the <code class="literal">kexec</code> system call when using the <code class="literal">kexec</code> utility to reboot into another kernel.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal">kexec</code> utility:
					</p><pre class="screen"># kexec -l /boot/vmlinuz-3.10.0-1040.el7.x86_64 --initrd=/boot/initramfs-3.10.0-1040.el7.x86_64.img --reuse-cmdline</pre><p class="simpara">
						The command manually loads the kernel and the initramfs image for the <code class="literal">kexec</code> system call.
					</p></li><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="screen"># reboot</pre><p class="simpara">
						The command detects the kernel, shuts down all services and then calls the <code class="literal">kexec</code> system call to reboot into the kernel you provided in the previous step.
					</p></li></ol></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					When you use the <code class="literal">kexec -e</code> command to reboot the kernel, the system does not go through the standard shutdown sequence before starting the next kernel, which may cause data loss or an unresponsive system.
				</p></div></div></section><section class="section" id="blacklisting-kernel-drivers-for-kdump_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.8. Blacklisting kernel drivers for kdump</h2></div></div></div><p>
				Blacklisting kernel drivers for kdump is a mechanism to prevent the intended kernel drivers from loading. Blacklisting kernel drivers prevents the <code class="literal">oom killer</code> or other crash kernel failures.
			</p><p>
				To blacklist the kernel drivers, you may update the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> variable in the <code class="literal">/etc/sysconfig/kdump</code> file and specify one of the following blacklisting option:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">rd.driver.blacklist=&lt;modules&gt;</code>
					</li><li class="listitem">
						<code class="literal">modprobe.blacklist=&lt;modules&gt;</code>
					</li></ul></div><p>
				When you blacklist drivers in <code class="literal">/etc/sysconfig/kdump</code> file, it prevents the <code class="literal">kdump initramfs</code> from loading the blacklisted modules.
			</p><p>
				The following procedure describes how to blacklist a kernel driver to prevent crash kernel failures.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the kernel module that you intend to blacklist:
					</p><pre class="screen">$ lsmod

Module                  Size  Used by
fuse                  126976  3
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  1
uinput                 20480  1
xt_conntrack           16384  1</pre><p class="simpara">
						The <code class="literal">lsmod</code> command displays a list of modules that are loaded to the currently running kernel.
					</p></li><li class="listitem"><p class="simpara">
						Update the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> line in the <code class="literal">/etc/sysconfig/kdump</code> file as follows:
					</p><pre class="screen">KDUMP_COMMANDLINE_APPEND="rd.driver.blacklist=hv_vmbus,hv_storvsc,hv_utils,hv_netvsc,hid-hyperv"</pre></li><li class="listitem"><p class="simpara">
						You can also update the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> line in the <code class="literal">/etc/sysconfig/kdump</code> file as follows:
					</p><pre class="screen">KDUMP_COMMANDLINE_APPEND="modprobe.blacklist=emcp modprobe.blacklist=bnx2fc modprobe.blacklist=libfcoe modprobe.blacklist=fcoe"</pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">kdump</code> service:
					</p><pre class="screen">$ systemctl restart kdump</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information concerning the <code class="literal">oom killer</code>, see the following <a class="link" href="https://access.redhat.com/solutions/2986581">Knowledge Article</a>.
					</li><li class="listitem">
						The <code class="literal">dracut.cmdline</code> manpage for modules blacklist options.
					</li></ul></div></section><section class="section" id="running-kdump-on-systems-with-encrypted-disk_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.9. Running kdump on systems with encrypted disk</h2></div></div></div><p>
				When running an encrypted partition created by the Logical Volume Manager (LVM) tool, systems require a certain amount of available memory. If the system has less than the required amount of available memory, the <code class="literal">cryptsetup</code> utility fails to mount the partition. As a result, capturing the <code class="literal">vmcore</code> file to a local <code class="literal">kdump</code> target location (with LVM and enabled encryption), fails in the second kernel (capture kernel).
			</p><p>
				This procedure describes the running <code class="literal">kdump</code> mechanism by increasing the <code class="literal">crashkernel=</code> value, using a remote <code class="literal">kdump</code> target, or using a key derivation function (KDF).
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Run the <code class="literal">kdump</code> mechanism using one of the following procedures:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To run the <code class="literal">kdump</code> define one of the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Configure a remote <code class="literal">kdump</code> target.
							</li><li class="listitem">
								Define the dump to an unencrypted partition.
							</li><li class="listitem">
								Specify an increased <code class="literal">crashkernel=</code> value to the required level.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Add an extra key slot by using a key derivation function (KDF):
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								<code class="literal">cryptsetup luksAddKey --pbkdf pbkdf2 /dev/vda2</code>
							</li><li class="listitem">
								<code class="literal">cryptsetup config --key-slot 1 --priority prefer /dev/vda2</code>
							</li><li class="listitem">
								<code class="literal">cryptsetup luksDump /dev/vda2</code>
							</li></ol></div></li></ul></div><p>
				Using the default KDF of the encrypted partition may consume a lot of memory. You must manually provide the password in the second kernel (capture), even if you encounter an Out of Memory (OOM) error message.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Adding an extra key slot can have a negative effect on security, as multiple keys can decrypt an encrypted volume. This may cause a potential risk to the volume.
				</p></div></div></section><section class="section" id="analyzing-a-core-dump_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.10. Analyzing a core dump</h2></div></div></div><p>
				To determine the cause of the system crash, you can use the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> utility, which provides an interactive prompt very similar to the GNU Debugger (GDB). This utility allows you to interactively analyze a core dump created by <code class="literal">kdump</code>, <code class="literal">netdump</code>, <code class="literal">diskdump</code> or <code class="literal">xendump</code> as well as a running Linux system. Alternatively, you have the option to use the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/kdumphelper/">Kdump Helper</a></span></em></span> or <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/kerneloopsanalyzer/">Kernel Oops Analyzer</a></span></em></span>.
			</p><section class="section" id="installing-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">7.10.1. Installing the crash utility</h3></div></div></div><p>
					The following procedure describes how to install the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> analyzing tool.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enable the relevant <code class="literal">baseos</code> and <code class="literal">appstream</code> repositories:
						</p><pre class="screen"><code class="literal command"># subscription-manager repos --enable <span class="emphasis"><em>baseos repository</em></span></code></pre><pre class="screen"><code class="literal command"># subscription-manager repos --enable <span class="emphasis"><em>appstream repository</em></span></code></pre></li><li class="listitem"><p class="simpara">
							Install the <code class="literal package">crash</code> package:
						</p><pre class="screen"><code class="literal command"># yum install crash</code></pre></li><li class="listitem"><p class="simpara">
							Install the <code class="literal package">kernel-debuginfo</code> package:
						</p><pre class="screen"><code class="literal command"># yum install kernel-debuginfo</code></pre><p class="simpara">
							The package corresponds to your running kernel and provides the data necessary for the dump analysis.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about how to work with repositories using the <code class="literal application">subscription-manager</code> utility, see <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#sec-Installation-Basic-Tasks">Configuring basic system settings</a></span></em></span>.
						</li></ul></div></section><section class="section" id="running-and-exiting-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">7.10.2. Running and exiting the crash utility</h3></div></div></div><p>
					The following procedure describes how to start the crash utility for analyzing the cause of the system crash.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Identify the currently running kernel (for example <code class="literal">4.18.0-5.el8.x86_64</code>).
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To start the <code class="literal">crash</code> utility, two necessary parameters need to be passed to the command:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The debug-info (a decompressed vmlinuz image), for example <code class="literal">/usr/lib/debug/lib/modules/4.18.0-5.el8.x86_64/vmlinux</code> provided through a specific <code class="literal">kernel-debuginfo</code> package.
								</li><li class="listitem"><p class="simpara">
									The actual vmcore file, for example <code class="literal">/var/crash/127.0.0.1-2018-10-06-14:05:33/vmcore</code>
								</p><p class="simpara">
									The resulting <code class="literal command">crash</code> command then looks like this:
								</p><pre class="screen"><code class="literal command"># crash /usr/lib/debug/lib/modules/4.18.0-5.el8.x86_64/vmlinux /var/crash/127.0.0.1-2018-10-06-14:05:33/vmcore</code></pre><p class="simpara">
									Use the same <span class="emphasis"><em>&lt;kernel&gt;</em></span> version that was captured by <code class="literal">kdump</code>.
								</p><div class="example" id="idm139829853647696"><p class="title"><strong>Example 7.1. Running the crash utility</strong></p><div class="example-contents"><p>
										The following example shows analyzing a core dump created on October 6 2018 at 14:05 PM, using the 4.18.0-5.el8.x86_64 kernel.
									</p><pre class="screen">...
WARNING: kernel relocated [202MB]: patching 90160 gdb minimal_symbol values

      KERNEL: /usr/lib/debug/lib/modules/4.18.0-5.el8.x86_64/vmlinux
    DUMPFILE: /var/crash/127.0.0.1-2018-10-06-14:05:33/vmcore  [PARTIAL DUMP]
        CPUS: 2
        DATE: Sat Oct  6 14:05:16 2018
      UPTIME: 01:03:57
LOAD AVERAGE: 0.00, 0.00, 0.00
       TASKS: 586
    NODENAME: localhost.localdomain
     RELEASE: 4.18.0-5.el8.x86_64
     VERSION: #1 SMP Wed Aug 29 11:51:55 UTC 2018
     MACHINE: x86_64  (2904 Mhz)
      MEMORY: 2.9 GB
       PANIC: "sysrq: SysRq : Trigger a crash"
         PID: 10635
     COMMAND: "bash"
        TASK: ffff8d6c84271800  [THREAD_INFO: ffff8d6c84271800]
         CPU: 1
       STATE: TASK_RUNNING (SYSRQ)

crash&gt;</pre></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							To exit the interactive prompt and terminate <code class="literal application">crash</code>, type <code class="literal command">exit</code> or <code class="literal command">q</code>.
						</p><div class="example" id="idm139829853640512"><p class="title"><strong>Example 7.2. Exiting the crash utility</strong></p><div class="example-contents"><pre class="screen">crash&gt; exit
~]#</pre></div></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <code class="literal command">crash</code> command can also be used as a powerful tool for debugging a live system. However use it with caution so as not to break your system.
					</p></div></div></section><section class="section" id="displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">7.10.3. Displaying various indicators in the crash utility</h3></div></div></div><p>
					The following procedures describe how to use the crash utility and display various indicators, such as a kernel message buffer, a backtrace, a process status, virtual memory information and open files.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Displaying the message buffer</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To display the kernel message buffer, type the <code class="literal command">log</code> command at the interactive prompt as displayed in the example below:
									</li></ul></div><pre class="screen">crash&gt; log
<span class="strong strong"><strong>... several lines omitted ...</strong></span>
EIP: 0060:[&lt;c068124f&gt;] EFLAGS: 00010096 CPU: 2
EIP is at sysrq_handle_crash+0xf/0x20
EAX: 00000063 EBX: 00000063 ECX: c09e1c8c EDX: 00000000
ESI: c0a09ca0 EDI: 00000286 EBP: 00000000 ESP: ef4dbf24
 DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068
Process bash (pid: 5591, ti=ef4da000 task=f196d560 task.ti=ef4da000)
Stack:
 c068146b c0960891 c0968653 00000003 00000000 00000002 efade5c0 c06814d0
&lt;0&gt; fffffffb c068150f b7776000 f2600c40 c0569ec4 ef4dbf9c 00000002 b7776000
&lt;0&gt; efade5c0 00000002 b7776000 c0569e60 c051de50 ef4dbf9c f196d560 ef4dbfb4
Call Trace:
 [&lt;c068146b&gt;] ? __handle_sysrq+0xfb/0x160
 [&lt;c06814d0&gt;] ? write_sysrq_trigger+0x0/0x50
 [&lt;c068150f&gt;] ? write_sysrq_trigger+0x3f/0x50
 [&lt;c0569ec4&gt;] ? proc_reg_write+0x64/0xa0
 [&lt;c0569e60&gt;] ? proc_reg_write+0x0/0xa0
 [&lt;c051de50&gt;] ? vfs_write+0xa0/0x190
 [&lt;c051e8d1&gt;] ? sys_write+0x41/0x70
 [&lt;c0409adc&gt;] ? syscall_call+0x7/0xb
Code: a0 c0 01 0f b6 41 03 19 d2 f7 d2 83 e2 03 83 e0 cf c1 e2 04 09 d0 88 41 03 f3 c3 90 c7 05 c8 1b 9e c0 01 00 00 00 0f ae f8 89 f6 &lt;c6&gt; 05 00 00 00 00 01 c3 89 f6 8d bc 27 00 00 00 00 8d 50 d0 83
EIP: [&lt;c068124f&gt;] sysrq_handle_crash+0xf/0x20 SS:ESP 0068:ef4dbf24
CR2: 0000000000000000</pre><p class="simpara">
								Type <code class="literal command">help log</code> for more information on the command usage.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The kernel message buffer includes the most essential information about the system crash and, as such, it is always dumped first in to the <code class="literal">vmcore-dmesg.txt</code> file. This is useful when an attempt to get the full <code class="literal">vmcore</code> file failed, for example because of lack of space on the target location. By default, <code class="literal">vmcore-dmesg.txt</code> is located in the <code class="literal">/var/crash/</code> directory.
								</p></div></div></dd><dt><span class="term">Displaying a backtrace</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To display the kernel stack trace, use the <code class="literal command">bt</code> command.
									</li></ul></div><pre class="screen">crash&gt; bt
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
 #0 [ef4dbdcc] crash_kexec at c0494922
 #1 [ef4dbe20] oops_end at c080e402
 #2 [ef4dbe34] no_context at c043089d
 #3 [ef4dbe58] bad_area at c0430b26
 #4 [ef4dbe6c] do_page_fault at c080fb9b
 #5 [ef4dbee4] error_code (via page_fault) at c080d809
    EAX: 00000063  EBX: 00000063  ECX: c09e1c8c  EDX: 00000000  EBP: 00000000
    DS:  007b      ESI: c0a09ca0  ES:  007b      EDI: 00000286  GS:  00e0
    CS:  0060      EIP: c068124f  ERR: ffffffff  EFLAGS: 00010096
 #6 [ef4dbf18] sysrq_handle_crash at c068124f
 #7 [ef4dbf24] __handle_sysrq at c0681469
 #8 [ef4dbf48] write_sysrq_trigger at c068150a
 #9 [ef4dbf54] proc_reg_write at c0569ec2
#10 [ef4dbf74] vfs_write at c051de4e
#11 [ef4dbf94] sys_write at c051e8cc
#12 [ef4dbfb0] system_call at c0409ad5
    EAX: ffffffda  EBX: 00000001  ECX: b7776000  EDX: 00000002
    DS:  007b      ESI: 00000002  ES:  007b      EDI: b7776000
    SS:  007b      ESP: bfcb2088  EBP: bfcb20b4  GS:  0033
    CS:  0073      EIP: 00edc416  ERR: 00000004  EFLAGS: 00000246</pre><p class="simpara">
								Type <code class="literal command">bt <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display the backtrace of a specific process or type <code class="literal command">help bt</code> for more information on <code class="literal command">bt</code> usage.
							</p></dd><dt><span class="term">Displaying a process status</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To display the status of processes in the system, use the <code class="literal command">ps</code> command.
									</li></ul></div><pre class="screen">crash&gt; <code class="literal command">ps</code>
   PID    PPID  CPU   TASK    ST  %MEM     VSZ    RSS  COMM
&gt;     0      0   0  c09dc560  RU   0.0       0      0  [swapper]
&gt;     0      0   1  f7072030  RU   0.0       0      0  [swapper]
      0      0   2  f70a3a90  RU   0.0       0      0  [swapper]
&gt;     0      0   3  f70ac560  RU   0.0       0      0  [swapper]
      1      0   1  f705ba90  IN   0.0    2828   1424  init
<span class="strong strong"><strong>... several lines omitted ...</strong></span>
   5566      1   1  f2592560  IN   0.0   12876    784  auditd
   5567      1   2  ef427560  IN   0.0   12876    784  auditd
   5587   5132   0  f196d030  IN   0.0   11064   3184  sshd
&gt;  5591   5587   2  f196d560  RU   0.0    5084   1648  bash</pre><p class="simpara">
								Use <code class="literal command">ps <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display the status of a single specific process. Use <span class="emphasis"><em>help ps</em></span> for more information on <code class="literal command">ps</code> usage.
							</p></dd><dt><span class="term">Displaying virtual memory information</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To display basic virtual memory information, type the <code class="literal command">vm</code> command at the interactive prompt.
									</li></ul></div><pre class="screen">crash&gt; vm
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
   MM       PGD      RSS    TOTAL_VM
f19b5900  ef9c6000  1648k    5084k
  VMA       START      END    FLAGS  FILE
f1bb0310    242000    260000 8000875  /lib/ld-2.12.so
f26af0b8    260000    261000 8100871  /lib/ld-2.12.so
efbc275c    261000    262000 8100873  /lib/ld-2.12.so
efbc2a18    268000    3ed000 8000075  /lib/libc-2.12.so
efbc23d8    3ed000    3ee000 8000070  /lib/libc-2.12.so
efbc2888    3ee000    3f0000 8100071  /lib/libc-2.12.so
efbc2cd4    3f0000    3f1000 8100073  /lib/libc-2.12.so
efbc243c    3f1000    3f4000 100073
efbc28ec    3f6000    3f9000 8000075  /lib/libdl-2.12.so
efbc2568    3f9000    3fa000 8100071  /lib/libdl-2.12.so
efbc2f2c    3fa000    3fb000 8100073  /lib/libdl-2.12.so
f26af888    7e6000    7fc000 8000075  /lib/libtinfo.so.5.7
f26aff2c    7fc000    7ff000 8100073  /lib/libtinfo.so.5.7
efbc211c    d83000    d8f000 8000075  /lib/libnss_files-2.12.so
efbc2504    d8f000    d90000 8100071  /lib/libnss_files-2.12.so
efbc2950    d90000    d91000 8100073  /lib/libnss_files-2.12.so
f26afe00    edc000    edd000 4040075
f1bb0a18   8047000   8118000 8001875  /bin/bash
f1bb01e4   8118000   811d000 8101873  /bin/bash
f1bb0c70   811d000   8122000 100073
f26afae0   9fd9000   9ffa000 100073
<span class="strong strong"><strong>... several lines omitted ...</strong></span></pre><p class="simpara">
								Use <code class="literal command">vm <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display information on a single specific process, or use <code class="literal command">help vm</code> for more information on <code class="literal command">vm</code> usage.
							</p></dd><dt><span class="term">Displaying open files</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To display information about open files, use the <code class="literal command">files</code> command.
									</li></ul></div><pre class="screen">crash&gt; <code class="literal command">files</code>
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
ROOT: /    CWD: /root
 FD    FILE     DENTRY    INODE    TYPE  PATH
  0  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
  1  efade5c0  eee14090  f00431d4  REG   /proc/sysrq-trigger
  2  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
 10  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
255  f734f640  eedc2c6c  eecd6048  CHR   /pts/0</pre><p class="simpara">
								Use <code class="literal command">files <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display files opened by only one selected process, or use <code class="literal command">help files</code> for more information on <code class="literal command">files</code> usage.
							</p></dd></dl></div></section><section class="section" id="using-kernel-oops-analyzer_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">7.10.4. Using Kernel Oops Analyzer</h3></div></div></div><p>
					The Kernel Oops Analyzer is a tool that analyzes the crash dump by comparing the oops messages with known issues in the knowledge base.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Secure an oops message to feed the Kernel Oops Analyzer by following instructions in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/kerneloopsanalyzer/#instruction">Red Hat Labs</a></span></em></span>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Follow the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/kerneloopsanalyzer/">Kernel Oops Analyzer</a></span></em></span> link to access the tool.
						</li><li class="listitem"><p class="simpara">
							Browse for the oops message by hitting the <span class="guibutton">Browse</span> button.
						</p><div class="informalfigure"><div class="mediaobject"><img src="kdump-kernel_dump_analyzing-core_dump.png" alt="Kernel oops analyzer"/></div></div></li><li class="listitem">
							Click the <span class="guibutton">DETECT</span> button to compare the oops message based on information from <code class="literal command">makedumpfile</code> against known solutions.
						</li></ol></div></section></section><section class="section" id="using-early-kdump-to-capture-boot-time-crashes_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.11. Using early kdump to capture boot time crashes</h2></div></div></div><p>
				As a system administrator, you can utilize the <code class="literal">early kdump</code> support of the <code class="literal">kdump</code> service to capture a vmcore file of the crashing kernel during the early stages of the booting process. This section describes what <code class="literal">early kdump</code> is, how to configure it, and how to check the status of this mechanism.
			</p><section class="section" id="what-is-early-kdump_using-early-kdump-to-capture-boot-time-crashes"><div class="titlepage"><div><div><h3 class="title">7.11.1. What is early kdump</h3></div></div></div><p>
					Kernel crashes during the booting phase occur when the <code class="literal">kdump</code> service is not yet started, and cannot facilitate capturing and saving the contents of the crashed kernel’s memory. Therefore, the vital information for troubleshooting is lost.
				</p><p>
					To address this problem, RHEL 8 introduced the <code class="literal">early kdump</code> feature as a part of the <code class="literal">kdump</code> service.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about <code class="literal">early kdump</code> and its use, see the <code class="literal">/usr/share/doc/kexec-tools/early-kdump-howto.txt</code> file and <a class="link" href="https://access.redhat.com/solutions/3700611">What is early kdump support and how do I configure it?</a> solution.
						</li><li class="listitem">
							For more information about the <code class="literal">kdump</code> service, see the <a class="xref" href="index.html#what-is-kdump_installing-and-configuring-kdump" title="7.1. What is kdump">Section 7.1, “What is kdump”</a>.
						</li></ul></div></section><section class="section" id="enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes"><div class="titlepage"><div><div><h3 class="title">7.11.2. Enabling early kdump</h3></div></div></div><p>
					This section describes how to enable the <code class="literal">early kdump</code> feature to eliminate the risk of losing information about the early boot kernel crashes.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An active Red Hat Enterprise Linux subscription
						</li><li class="listitem">
							A repository containing the <code class="literal package">kexec-tools</code> package for your system CPU architecture
						</li><li class="listitem">
							Fulfilled <code class="literal">kdump</code> <a class="link" href="index.html#supported-kdump-configurations-and-targets_installing-and-configuring-kdump" title="7.5. Supported kdump configurations and targets">requirements</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">kdump</code> service is enabled and active:
						</p><pre class="literallayout"># systemctl is-enabled kdump.service &amp;&amp; systemctl is-active kdump.service
enabled
active</pre><p class="simpara">
							If <code class="literal">kdump</code> is not enabled and running see, <a class="xref" href="index.html#enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line" title="7.3.5. Enabling and disabling the kdump service">Section 7.3.5, “Enabling and disabling the kdump service”</a>.
						</p></li><li class="listitem"><p class="simpara">
							Rebuild the <code class="literal">initramfs</code> image of the booting kernel with the <code class="literal">early kdump</code> functionality:
						</p><pre class="literallayout">dracut -f --add earlykdump</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal">rd.earlykdump</code> kernel command line parameter:
						</p><pre class="literallayout">grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="rd.earlykdump"</pre></li><li class="listitem">
							Reboot
						</li><li class="listitem"><p class="simpara">
							Optionally, verify that <code class="literal">rd.earlykdump</code> was successfully added and <code class="literal">early kdump</code> feature was enabled:
						</p><pre class="literallayout"># cat /proc/cmdline
BOOT_IMAGE=(hd0,msdos1)/vmlinuz-4.18.0-187.el8.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet rd.earlykdump

# journalctl -x | grep early-kdump
Mar 20 15:44:41 redhat dracut-cmdline[304]: early-kdump is enabled.
Mar 20 15:44:42 redhat dracut-cmdline[304]: kexec: loaded early-kdump kernel</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information on enabling <code class="literal">early kdump</code>, see the <code class="literal">/usr/share/doc/kexec-tools/early-kdump-howto.txt</code> file and <a class="link" href="https://access.redhat.com/solutions/3700611">What is early kdump support and how do I configure it?</a> solution.
						</li></ul></div></section></section><section class="section" id="related-information_installing-and-configuring-kdump"><div class="titlepage"><div><div><h2 class="title">7.12. Related information</h2></div></div></div><p>
				The following section provides further information related to capturing crash information.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>kdump.conf</strong></span>(5) — a manual page for the <code class="literal">/etc/kdump.conf</code> configuration file containing the full documentation of available options.
					</li><li class="listitem">
						<span class="strong strong"><strong>zipl.conf</strong></span>(5) — a manual page for the <code class="literal">/etc/zipl.conf</code> configuration file.
					</li><li class="listitem">
						<span class="strong strong"><strong>zipl</strong></span>(8) — a manual page for the <code class="literal command">zipl</code> boot loader utility for IBM System z.
					</li><li class="listitem">
						<span class="strong strong"><strong>makedumpfile</strong></span>(8) — a manual page for the <code class="literal command">makedumpfile</code> core collector.
					</li><li class="listitem">
						<span class="strong strong"><strong>kexec</strong></span>(8) — a manual page for <span class="strong strong"><strong><span class="application application">kexec</span></strong></span>.
					</li><li class="listitem">
						<span class="strong strong"><strong>crash</strong></span>(8) — a manual page for the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> utility.
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/kexec-tools/kexec-kdump-howto.txt</code> — an overview of the <code class="literal">kdump</code> and <span class="strong strong"><strong><span class="application application">kexec</span></strong></span> installation and usage.
					</li><li class="listitem">
						For more information about the <code class="literal command">kexec</code> and <code class="literal">kdump</code> configuration see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/site/solutions/6038">Red Hat Knowledgebase article</a></span></em></span>.
					</li><li class="listitem">
						For more information about the supported <code class="literal">kdump</code> targets see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/site/solutions/223773">Red Hat Knowledgebase article</a></span></em></span>.
					</li></ul></div></section></section><section class="chapter" id="applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Applying patches with kernel live patching</h1></div></div></div><p>
			You can use the Red Hat Enterprise Linux kernel live patching solution to patch a running kernel without rebooting or restarting any processes.
		</p><p>
			With this solution, system administrators:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Can immediately apply critical security patches to the kernel.
				</li><li class="listitem">
					Do not have to wait for long-running tasks to complete, for users to log off, or for scheduled downtime.
				</li><li class="listitem">
					Control the system’s uptime more and do not sacrifice security or stability.
				</li></ul></div><p>
			Note that not every critical or important CVE will be resolved using the kernel live patching solution. Our goal is to reduce the required reboots for security-related patches, not to eliminate them entirely. For more details about the scope of live patching, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/2206511">Customer Portal Solutions article</a></span></em></span>.
		</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
				Some incompatibilities exist between kernel live patching and other kernel subcomponents. Read the <a class="xref" href="index.html#limitations-of-kpatch_applying-patches-with-kernel-live-patching" title="8.1. Limitations of kpatch">Section 8.1, “Limitations of kpatch”</a> carefully before using kernel live patching.
			</p></div></div><section class="section" id="limitations-of-kpatch_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.1. Limitations of kpatch</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">kpatch</code> feature is not a general-purpose kernel upgrade mechanism. It is used for applying simple security and bug fix updates when rebooting the system is not immediately possible.
					</li><li class="listitem">
						Do not use the <code class="literal">SystemTap</code> or <code class="literal">kprobe</code> tools during or after loading a patch. The patch could fail to take effect until after such probes have been removed.
					</li></ul></div></section><section class="section" id="support-for-third-party-live-patching_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.2. Support for third-party live patching</h2></div></div></div><p>
				The <code class="literal">kpatch</code> utility is the only kernel live patching utility supported by Red Hat with the RPM modules provided by Red Hat repositories. Red Hat will not support any live patches which were not provided by Red Hat itself.
			</p><p>
				If you require support for an issue that arises with a third-party live patch, Red Hat recommends that you open a case with the live patching vendor at the outset of any investigation in which a root cause determination is necessary. This allows the source code to be supplied if the vendor allows, and for their support organization to provide assistance in root cause determination prior to escalating the investigation to Red Hat Support.
			</p><p>
				For any system running with third-party live patches, Red Hat reserves the right to ask for reproduction with Red Hat shipped and supported software. In the event that this is not possible, we require a similar system and workload be deployed on your test environment without live patches applied, to confirm if the same behavior is observed.
			</p><p>
				For more information about third-party software support policies, see <a class="link" href="https://access.redhat.com/articles/1067">How does Red Hat Global Support Services handle third-party software, drivers, and/or uncertified hardware/hypervisors or guest operating systems?</a>
			</p></section><section class="section" id="access-to-kernel-live-patches_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.3. Access to kernel live patches</h2></div></div></div><p>
				Kernel live patching capability is implemented as a kernel module (<code class="literal">kmod</code>) that is delivered as an RPM package.
			</p><p>
				All customers have access to kernel live patches, which are delivered through the usual channels. However, customers who do not subscribe to an extended support offering will lose access to new patches for the current minor release once the next minor release becomes available. For example, customers with standard subscriptions will only be able to live patch RHEL 8.2 kernel until the RHEL 8.3 kernel is released.
			</p></section><section class="section" id="components-of-kernel-live-patching_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.4. Components of kernel live patching</h2></div></div></div><p>
				The components of kernel live patching are as follows:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Kernel patch module</span></dt><dd><p class="simpara">

						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The delivery mechanism for kernel live patches.
								</li><li class="listitem">
									A kernel module which is built specifically for the kernel being patched.
								</li><li class="listitem">
									The patch module contains the code of the desired fixes for the kernel.
								</li><li class="listitem">
									The patch modules register with the <code class="literal">livepatch</code> kernel subsystem and provide information about original functions to be replaced, with corresponding pointers to the replacement functions. Kernel patch modules are delivered as RPMs.
								</li><li class="listitem">
									The naming convention is <code class="literal">kpatch_&lt;kernel version&gt;_&lt;kpatch version&gt;_&lt;kpatch release&gt;</code>. The "kernel version" part of the name has <span class="emphasis"><em>dots</em></span> and <span class="emphasis"><em>dashes</em></span> replaced with <span class="emphasis"><em>underscores</em></span>.
								</li></ul></div></dd><dt><span class="term">The <code class="literal">kpatch</code> utility</span></dt><dd>
							A command-line utility for managing patch modules.
						</dd><dt><span class="term">The <code class="literal">kpatch</code> service</span></dt><dd>
							A <code class="literal">systemd</code> service required by <code class="literal">multiuser.target</code>. This target loads the kernel patch module at boot time.
						</dd></dl></div></section><section class="section" id="how-kernel-live-patching-works_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.5. How kernel live patching works</h2></div></div></div><p>
				The <code class="literal">kpatch</code> kernel patching solution uses the <code class="literal">livepatch</code> kernel subsystem to redirect old functions to new ones. When a live kernel patch is applied to a system, the following things happen:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						The kernel patch module is copied to the <code class="literal">/var/lib/kpatch/</code> directory and registered for re-application to the kernel by <code class="literal">systemd</code> on next boot.
					</li><li class="listitem">
						The kpatch module is loaded into the running kernel and the new functions are registered to the <code class="literal">ftrace</code> mechanism with a pointer to the location in memory of the new code.
					</li><li class="listitem">
						When the kernel accesses the patched function, it is redirected by the <code class="literal">ftrace</code> mechanism which bypasses the original functions and redirects the kernel to patched version of the function.
					</li></ol></div><div class="figure" id="applying-patches-with-kernel-live-patching-figu-how-kpatch-works"><p class="title"><strong>Figure 8.1. How kernel live patching works</strong></p><div class="figure-contents"><div class="mediaobject"><img src="rhel_kpatch_overview.png" alt="rhel kpatch overview"/></div></div></div></section><section class="section" id="enabling-kernel-live-patching_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.6. Enabling kernel live patching</h2></div></div></div><p>
				A kernel patch module is delivered in an RPM package, specific to the version of the kernel being patched. Each RPM package will be cumulatively updated over time.
			</p><p>
				The following sections describe how to ensure you receive all future cumulative live patching updates for a given kernel.
			</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Red Hat does not support any third party live patches applied to a Red Hat supported system.
				</p></div></div><section class="section" id="subscribing-to-the-live-patching-stream_enabling-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.6.1. Subscribing to the live patching stream</h3></div></div></div><p>
					This procedure describes installing a particular live patching package. By doing so, you subscribe to the live patching stream for a given kernel and ensure that you receive all future cumulative live patching updates for that kernel.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Because live patches are cumulative, you cannot select which individual patches are deployed for a given kernel.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Root permissions
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optionally, check your kernel version:
						</p><pre class="literallayout"># uname -r
4.18.0-94.el8.x86_64</pre></li><li class="listitem"><p class="simpara">
							Search for a live patching package that corresponds to the version of your kernel:
						</p><pre class="literallayout"># yum search $(uname -r)</pre></li><li class="listitem"><p class="simpara">
							Install the live patching package:
						</p><pre class="literallayout"># yum install "kpatch-patch = $(uname -r)"</pre><p class="simpara">
							The command above installs and applies the latest cumulative live patches for that specific kernel only.
						</p><p class="simpara">
							The live patching package contains a patch module, if the package’s version is 1-1 or higher. In that case the kernel will be automatically patched during the installation of the live patching package.
						</p><p class="simpara">
							The kernel patch module is also installed into the <code class="literal">/var/lib/kpatch/</code> directory to be loaded by the <code class="literal">systemd</code> system and service manager during the future reboots.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								If there are not yet any live patches available for the given kernel, an empty live patching package will be installed. An empty live patching package will have a <span class="emphasis"><em>kpatch_version-kpatch_release</em></span> of 0-0, for example <code class="literal">kpatch-patch-4_18_0-94-0-0.el8.x86_64.rpm</code>. The installation of the empty RPM subscribes the system to all future live patches for the given kernel.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Optionally, verify that the kernel is patched:
						</p><pre class="literallayout"># kpatch list
Loaded patch modules:
kpatch_4_18_0_94_1_1 [enabled]

Installed patch modules:
kpatch_4_18_0_94_1_1 (4.18.0-94.el8.x86_64)
…​</pre><p class="simpara">
							The output shows that the kernel patch module has been loaded into the kernel, which is now patched with the latest fixes from the <code class="literal">kpatch-patch-4_18_0-94-1-1.el8.x86_64.rpm</code> package.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">kpatch</code> command-line utility, see the <code class="literal">kpatch(1)</code> manual page.
						</li><li class="listitem">
							Refer to the relevant sections of the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#installing-software-packages_managing-software-packages">Configuring basic system settings</a></span></em></span> for further information about installing software packages in Red Hat Enterprise Linux 8.
						</li></ul></div></section></section><section class="section" id="updating-kernel-patch-modules_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.7. Updating kernel patch modules</h2></div></div></div><p>
				Since kernel patch modules are delivered and applied through RPM packages, updating a cumulative kernel patch module is like updating any other RPM package.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system is subscribed to the live patching stream, as described in <a class="xref" href="index.html#subscribing-to-the-live-patching-stream_enabling-kernel-live-patching" title="8.6.1. Subscribing to the live patching stream">Section 8.6.1, “Subscribing to the live patching stream”</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Update to a new cumulative version for the current kernel:
					</p><pre class="literallayout"># yum update "kpatch-patch = $(uname -r)"</pre><p class="simpara">
						The command above automatically installs and applies any updates that are available for the currently running kernel. Including any future released cumulative live patches.
					</p></li><li class="listitem"><p class="simpara">
						Alternatively, update all installed kernel patch modules:
					</p><pre class="literallayout"># yum update "kpatch-patch*"</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					When the system reboots into the same kernel, the kernel is automatically live patched again by the <code class="literal">kpatch.service</code> systemd service.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further information about updating software packages, see the relevant sections of <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#updating-software-packages_managing-software-packages">Configuring basic system settings</a></span></em></span> in Red Hat Enterprise Linux 8.
					</li></ul></div></section><section class="section" id="disabling-kernel-live-patching_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h2 class="title">8.8. Disabling kernel live patching</h2></div></div></div><p>
				In case system administrators encountered some unanticipated negative effects connected with the Red Hat Enterprise Linux kernel live patching solution they have a choice to disable the mechanism. The following sections describe the ways how to disable the live patching solution.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Currently, Red Hat does not support reverting live patches without rebooting your system. In case of any issues, contact our support team.
				</p></div></div><section class="section" id="removing-the-live-patching-package_disabling-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.8.1. Removing the live patching package</h3></div></div></div><p>
					The following procedure describes how to disable the Red Hat Enterprise Linux kernel live patching solution by removing the live patching package.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Root permissions
						</li><li class="listitem">
							The live patching package is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Select the live patching package:
						</p><pre class="literallayout"># yum list installed | grep kpatch-patch
kpatch-patch-4_18_0-94.x86_64        1-1.el8        @@commandline
…​</pre><p class="simpara">
							The example output above lists live patching packages that you installed.
						</p></li><li class="listitem"><p class="simpara">
							Remove the live patching package:
						</p><pre class="literallayout"># yum remove kpatch-patch-4_18_0-94.x86_64</pre><p class="simpara">
							When a live patching package is removed, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk. After the next reboot, the corresponding kernel will no longer be patched.
						</p></li><li class="listitem">
							Reboot your system.
						</li><li class="listitem"><p class="simpara">
							Verify that the live patching package was been removed:
						</p><pre class="literallayout"># yum list installed | grep kpatch-patch</pre><p class="simpara">
							The command displays no output if the package has been successfully removed.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, verify that the kernel live patching solution is disabled:
						</p><pre class="literallayout"># kpatch list
Loaded patch modules:</pre><p class="simpara">
							The example output shows that the kernel is not patched and the live patching solution is not active because there are no patch modules that are currently loaded.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">kpatch</code> command-line utility, see the <code class="literal">kpatch(1)</code> manual page.
						</li><li class="listitem">
							For further information about removing software packages in RHEL 8, see relevant sections of <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#uninstalling-software-packages_managing-software-packages">Configuring basic system settings</a></span></em></span>.
						</li></ul></div></section><section class="section" id="uninstalling-the-kernel-patch-module_disabling-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.8.2. Uninstalling the kernel patch module</h3></div></div></div><p>
					The following procedure describes how to prevent the Red Hat Enterprise Linux kernel live patching solution from applying a kernel patch module on subsequent boots.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Root permissions
						</li><li class="listitem">
							A live patching package is installed.
						</li><li class="listitem">
							A kernel patch module is installed and loaded.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Select a kernel patch module:
						</p><pre class="literallayout"># kpatch list
Loaded patch modules:
kpatch_4_18_0_94_1_1 [enabled]

Installed patch modules:
kpatch_4_18_0_94_1_1 (4.18.0-94.el8.x86_64)
…​</pre></li><li class="listitem"><p class="simpara">
							Uninstall the selected kernel patch module:
						</p><pre class="literallayout"># kpatch uninstall kpatch_4_18_0_94_1_1
uninstalling kpatch_4_18_0_94_1_1 (4.18.0-94.el8.x86_64)</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Note that the uninstalled kernel patch module is still loaded:
								</p><pre class="literallayout"># kpatch list
Loaded patch modules:
kpatch_4_18_0_94_1_1 [enabled]

Installed patch modules:
&lt;<span class="emphasis"><em>NO_RESULT</em></span>&gt;</pre><p class="simpara">
									When the selected module is uninstalled, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk.
								</p></li></ul></div></li><li class="listitem">
							Reboot your system.
						</li><li class="listitem"><p class="simpara">
							Optionally, verify that the kernel patch module has been uninstalled:
						</p><pre class="literallayout"># kpatch list
Loaded patch modules:
…​</pre><p class="simpara">
							The example output above shows no loaded or installed kernel patch modules, therefore the kernel is not patched and the kernel live patching solution is not active.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">kpatch</code> command-line utility, refer to the <code class="literal">kpatch(1)</code> manual page.
						</li></ul></div></section><section class="section" id="disabling-kpatch-service_disabling-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.8.3. Disabling kpatch.service</h3></div></div></div><p>
					The following procedure describes how to prevent the Red Hat Enterprise Linux kernel live patching solution from applying all kernel patch modules globally on subsequent boots.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Root permissions
						</li><li class="listitem">
							A live patching package is installed.
						</li><li class="listitem">
							A kernel patch module is installed and loaded.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify <code class="literal">kpatch.service</code> is enabled:
						</p><pre class="literallayout"># systemctl is-enabled kpatch.service
enabled</pre></li><li class="listitem"><p class="simpara">
							Disable <code class="literal">kpatch.service</code>:
						</p><pre class="literallayout"># systemctl disable kpatch.service
Removed /etc/systemd/system/multi-user.target.wants/kpatch.service.</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Note that the applied kernel patch module is still loaded:
								</p><pre class="literallayout"># kpatch list
Loaded patch modules:
kpatch_4_18_0_94_1_1 [enabled]

Installed patch modules:
kpatch_4_18_0_94_1_1 (4.18.0-94.el8.x86_64)</pre></li></ul></div></li><li class="listitem">
							Reboot your system.
						</li><li class="listitem"><p class="simpara">
							Optionally, verify the status of <code class="literal">kpatch.service</code>:
						</p><pre class="literallayout"># systemctl status kpatch.service
● kpatch.service - "Apply kpatch kernel patches"
   Loaded: loaded (/usr/lib/systemd/system/kpatch.service; disabled; vendor preset: disabled)
   Active: inactive (dead)</pre><p class="simpara">
							The example output testifies that <code class="literal">kpatch.service</code> has been disabled and is not running. Thereby, the kernel live patching solution is not active.
						</p></li><li class="listitem"><p class="simpara">
							Verify that the kernel patch module has been unloaded:
						</p><pre class="literallayout"># kpatch list
Loaded patch modules:
&lt;<span class="emphasis"><em>NO_RESULT</em></span>&gt;

Installed patch modules:
kpatch_4_18_0_94_1_1 (4.18.0-94.el8.x86_64)</pre><p class="simpara">
							The example output above shows that a kernel patch module is still installed but the kernel is not patched.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about the <code class="literal">kpatch</code> command-line utility, see the <code class="literal">kpatch(1)</code> manual page.
						</li><li class="listitem">
							For more information about the <code class="literal">systemd</code> system and service manager, unit configuration files, their locations, as well as a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#managing-services-with-systemd_configuring-basic-system-settings">Configuring basic system settings</a></span></em></span>.
						</li></ul></div></section></section></section><section class="chapter" id="setting-limits-for-applications_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Setting limits for applications</h1></div></div></div><p>
			As a system administrator, use the control groups kernel functionality to set limits, prioritize or isolate the hardware resources of processes so that applications on your system are stable and do not run out of memory.
		</p><section class="section" id="understanding-control-groups_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.1. Understanding control groups</h2></div></div></div><p>
				<span class="emphasis"><em>Control groups</em></span> is a Linux kernel feature that enables you to organize processes into hierarchically ordered groups - <code class="literal">cgroups</code>. The hierarchy (control groups tree) is defined by providing structure to <code class="literal">cgroups</code> virtual file system, mounted by default on the <code class="literal">/sys/fs/cgroup/</code> directory. It is done manually by creating and removing sub-directories in <code class="literal">/sys/fs/cgroup/</code>. Alternatively, by using the <code class="literal">systemd</code> system and service manager.
			</p><p>
				The resource controllers (a kernel component) then modify the behavior of processes in <code class="literal">cgroups</code> by limiting, prioritizing or allocating system resources, (such as CPU time, memory, network bandwidth, or various combinations) of those processes.
			</p><p>
				The added value of <code class="literal">cgroups</code> is process aggregation which enables division of hardware resources among applications and users. Thereby an increase in overall efficiency, stability and security of users' environment can be achieved.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Control groups version 1</span></dt><dd><p class="simpara">
							<span class="emphasis"><em>Control groups version 1</em></span> (<code class="literal">cgroups-v1</code>) provide a per-resource controller hierarchy. It means that each resource, such as CPU, memory, I/O, and so on, has its own control group hierarchy. It is possible to combine different control group hierarchies in a way that one controller can coordinate with another one in managing their respective resources. However, the two controllers may belong to different process hierarchies, which does not permit their proper coordination.
						</p><p class="simpara">
							The <code class="literal">cgroups-v1</code> controllers were developed across a large time span and as a result, the behavior and naming of their control files is not uniform.
						</p></dd><dt><span class="term">Control groups version 2</span></dt><dd><p class="simpara">
							The problems with controller coordination, which stemmed from hierarchy flexibility, led to the development of <span class="emphasis"><em>control groups version 2</em></span>.
						</p><p class="simpara">
							<span class="emphasis"><em>Control groups version 2</em></span> (<code class="literal">cgroups-v2</code>) provides a single control group hierarchy against which all resource controllers are mounted.
						</p><p class="simpara">
							The control file behavior and naming is consistent among different controllers.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								RHEL 8 provides <code class="literal">cgroups-v2</code> as a technology preview with a limited number of resource controllers. For more information about the relevant resource controllers, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/8.1_release_notes/index#technology-preview_kernel">cgroups-v2 release note</a></span></em></span>.
							</p></div></div></dd></dl></div><p>
				This sub-section was based on a Devconf.cz 2019 presentation.<a href="index.html#ftn.idm139829853139136" class="footnote"><sup class="footnote" id="idm139829853139136">[1]</sup></a>
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> section and <code class="literal">cgroups(7)</code> manual pages.
					</li><li class="listitem">
						For more information about <code class="literal">cgroups</code> hierarchies and <code class="literal">cgroups</code> versions, refer to <code class="literal">cgroups(7)</code> manual pages.
					</li><li class="listitem">
						For more information about <code class="literal">systemd</code> and <code class="literal">cgroups</code> cooperation, see <a class="link" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Role of systemd in control groups</a> section.
					</li></ul></div></section><section class="section" id="what-kernel-resource-controllers-are_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.2. What kernel resource controllers are</h2></div></div></div><p>
				The functionality of control groups is enabled by kernel resource controllers. RHEL 8 supports various controllers for <span class="emphasis"><em>control groups version 1</em></span> (<code class="literal">cgroups-v1</code>) and <span class="emphasis"><em>control groups version 2</em></span> (<code class="literal">cgroups-v2</code>).
			</p><p>
				A resource controller, also called a control group subsystem, is a kernel subsystem that represents a single resource, such as CPU time, memory, network bandwidth or disk I/O. The Linux kernel provides a range of resource controllers that are mounted automatically by the <code class="literal">systemd</code> system and service manager. Find a list of currently mounted resource controllers in the <code class="literal">/proc/cgroups</code> file.
			</p><p>
				The following controllers are available for <code class="literal">cgroups-v1</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">blkio</code> - can set limits on input/output access to and from block devices.
					</li><li class="listitem">
						<code class="literal">cpu</code> - can adjust the parameters of the Completely Fair Scheduler (CFS) scheduler for control group’s tasks. It is mounted together with the <code class="literal">cpuacct</code> controller on the same mount.
					</li><li class="listitem">
						<code class="literal">cpuacct</code> - creates automatic reports on CPU resources used by tasks in a control group. It is mounted together with the <code class="literal">cpu</code> controller on the same mount.
					</li><li class="listitem">
						<code class="literal">cpuset</code> - can be used to restrict control group tasks to run only on a specified subset of CPUs and to direct the tasks to use memory only on specified memory nodes.
					</li><li class="listitem">
						<code class="literal">devices</code> - can control access to devices for tasks in a control group.
					</li><li class="listitem">
						<code class="literal">freezer</code> - can be used to suspend or resume tasks in a control group.
					</li><li class="listitem">
						<code class="literal">memory</code> - can be used to set limits on memory use by tasks in a control group and generates automatic reports on memory resources used by those tasks.
					</li><li class="listitem">
						<code class="literal">net_cls</code> - tags network packets with a class identifier (<code class="literal">classid</code>) that enables the Linux traffic controller (the <code class="literal">tc</code> command) to identify packets that originate from a particular control group task. A subsystem of <code class="literal">net_cls</code>, the <code class="literal">net_filter</code> (iptables), can also use this tag to perform actions on such packets. The <code class="literal">net_filter</code> tags network sockets with a firewall identifier (<code class="literal">fwid</code>) that allows the Linux firewall (through <code class="literal">iptables</code> command) to identify packets originating from a particular control group task.
					</li><li class="listitem">
						<code class="literal">net_prio</code> - sets the priority of network traffic.
					</li><li class="listitem">
						<code class="literal">pids</code> - can set limits for a number of processes and their children in a control group.
					</li><li class="listitem">
						<code class="literal">perf_event</code> - can group tasks for monitoring by the <code class="literal">perf</code> performance monitoring and reporting utility.
					</li><li class="listitem">
						<code class="literal">rdma</code> - can set limits on Remote Direct Memory Access/InfiniBand specific resources in a control group.
					</li><li class="listitem">
						<code class="literal">hugetlb</code> - can be used to limit the usage of large size virtual memory pages by tasks in a control group.
					</li></ul></div><p>
				The following controllers are available for <code class="literal">cgroups-v2</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">io</code> - A follow-up to <code class="literal">blkio</code> of <code class="literal">cgroups-v1</code>.
					</li><li class="listitem">
						<code class="literal">memory</code> - A follow-up to <code class="literal">memory</code> of <code class="literal">cgroups-v1</code>.
					</li><li class="listitem">
						<code class="literal">pids</code> - Same as <code class="literal">pids</code> in <code class="literal">cgroups-v1</code>.
					</li><li class="listitem">
						<code class="literal">rdma</code> - Same as <code class="literal">rdma</code> in <code class="literal">cgroups-v1</code>.
					</li><li class="listitem">
						<code class="literal">cpu</code> - A follow-up to <code class="literal">cpu</code> and <code class="literal">cpuacct</code> of <code class="literal">cgroups-v1</code>.
					</li><li class="listitem">
						<code class="literal">cpuset</code> - Supports only the core functionality (<code class="literal">cpus{,.effective}</code>, <code class="literal">mems{,.effective}</code>) with a new partition feature.
					</li><li class="listitem">
						<code class="literal">perf_event</code> - Support is inherent, no explicit control file. You can specify a <code class="literal">v2 cgroup</code> as a parameter to the <code class="literal">perf</code> command that will profile all the tasks within that <code class="literal">cgroup</code>.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					A resource controller can be used either in a <code class="literal">cgroups-v1</code> hierarchy or a <code class="literal">cgroups-v2</code> hierarchy, not simultaneously in both.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about resource controllers in general, refer to the <code class="literal">cgroups(7)</code> manual page.
					</li><li class="listitem">
						For detailed descriptions of specific resource controllers, see the documentation in the <code class="literal">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/cgroups-v1/</code> directory.
					</li><li class="listitem">
						For more information about <code class="literal">cgroups-v2</code>, refer to the <code class="literal">cgroups(7)</code> manual page.
					</li></ul></div></section><section class="section" id="using-control-groups-through-a-virtual-file-system_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.3. Using control groups through a virtual file system</h2></div></div></div><p>
				You can use <span class="emphasis"><em>control groups</em></span> (<code class="literal">cgroups</code>) to set limits, prioritize, or control access to hardware resources for groups of processes. This allows you to granularly control resource usage of applications to utilize them more efficiently. The following sections provide an overview of tasks related to management of <code class="literal">cgroups</code> for both version 1 and version 2 using a virtual file system.
			</p><section class="section" id="setting-cpu-limits-to-applications-using-cgroups-v1_using-control-groups-through-a-virtual-file-system"><div class="titlepage"><div><div><h3 class="title">9.3.1. Setting CPU limits to applications using cgroups-v1</h3></div></div></div><p>
					Sometimes an application consumes a lot of CPU time, which may negatively impact the overall health of your environment. Use the <code class="literal">/sys/fs/</code> virtual file system to configure CPU limits to an application using <span class="emphasis"><em>control groups version 1</em></span> (<code class="literal">cgroups-v1</code>).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An application whose CPU consumption you want to restrict.
						</li><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">cgroups-v1</code> controllers were mounted:
						</p><pre class="literallayout white-space-pre"># mount -l | grep cgroup
tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,seclabel,mode=755)
cgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)
cgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpu,cpuacct)
cgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,perf_event)
cgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,pids)
...</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Identify the process ID (PID) of the application you want to restrict in CPU consumption:
						</p><pre class="literallayout white-space-pre"># top
top - 11:34:09 up 11 min,  1 user,  load average: 0.51, 0.27, 0.22
Tasks: 267 total,   3 running, 264 sleeping,   0 stopped,   0 zombie
%Cpu(s): 49.0 us,  3.3 sy,  0.0 ni, 47.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st
MiB Mem :   1826.8 total,    303.4 free,   1046.8 used,    476.5 buff/cache
MiB Swap:   1536.0 total,   1396.0 free,    140.0 used.    616.4 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 6955 root      20   0  228440   1752   1472 R  99.3   0.1   0:32.71 sha1sum
 5760 jdoe      20   0 3603868 205188  64196 S   3.7  11.0   0:17.19 gnome-shell
 6448 jdoe      20   0  743648  30640  19488 S   0.7   1.6   0:02.73 gnome-terminal-
    1 root      20   0  245300   6568   4116 S   0.3   0.4   0:01.87 systemd
  505 root      20   0       0      0      0 I   0.3   0.0   0:00.75 kworker/u4:4-events_unbound
...</pre><p class="simpara">
							The example output of the <code class="literal">top</code> program reveals that <code class="literal">PID 6955</code> (illustrative application <code class="literal">sha1sum</code>) consumes a lot of CPU resources.
						</p></li><li class="listitem"><p class="simpara">
							Create a sub-directory in the <code class="literal">cpu</code> resource controller directory:
						</p><pre class="literallayout"># mkdir /sys/fs/cgroup/cpu/Example/</pre><p class="simpara">
							The directory above represents a control group, where you can place specific processes and apply certain CPU limits to the processes. At the same time, some <code class="literal">cgroups-v1</code> interface files and <code class="literal">cpu</code> controller-specific files will be created in the directory.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, inspect the newly created control group:
						</p><pre class="literallayout"># ll /sys/fs/cgroup/cpu/Example/
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.clone_children
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.procs
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.stat
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_all
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_sys
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_user
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_sys
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_user
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_period_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_quota_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_period_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_runtime_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.shares
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpu.stat
-rw-r—​r--. 1 root root 0 Mar 11 11:42 notify_on_release
-rw-r—​r--. 1 root root 0 Mar 11 11:42 tasks</pre><p class="simpara">
							The example output shows files, such as <code class="literal">cpuacct.usage</code>, <code class="literal">cpu.cfs._period_us</code>, that represent specific configurations and/or limits, which can be set for processes in the <code class="literal">Example</code> control group. Notice that the respective file names are prefixed with the name of the control group controller to which they belong.
						</p><p class="simpara">
							By default, the newly created control group inherits access to the system’s entire CPU resources without a limit.
						</p></li><li class="listitem"><p class="simpara">
							Configure CPU limits for the control group:
						</p><pre class="literallayout"># echo "1000000" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us
# echo "200000" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us</pre><p class="simpara">
							The <code class="literal">cpu.cfs_period_us</code> file represents a period of time in microseconds (µs, represented here as "us") for how frequently a control group’s access to CPU resources should be reallocated. The upper limit is 1 second and the lower limit is 1000 microseconds.
						</p><p class="simpara">
							The <code class="literal">cpu.cfs_quota_us</code> file represents the total amount of time in microseconds for which all processes collectively in a control group can run during one period (as defined by <code class="literal">cpu.cfs_period_us</code>). As soon as processes in a control group, during a single period, use up all the time specified by the quota, they are throttled for the remainder of the period and not allowed to run until the next period. The lower limit is 1000 microseconds.
						</p><p class="simpara">
							The example commands above set the CPU time limits so that all processes collectively in the <code class="literal">Example</code> control group will be able to run only for 0.2 seconds (defined by <code class="literal">cpu.cfs_quota_us</code>) out of every 1 second (defined by <code class="literal">cpu.cfs_period_us</code>).
						</p></li><li class="listitem"><p class="simpara">
							Optionally, verify the limits:
						</p><pre class="literallayout"># cat /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us
1000000
200000</pre></li><li class="listitem"><p class="simpara">
							Add the application’s PID to the <code class="literal">Example</code> control group:
						</p><pre class="literallayout"># echo "6955" &gt; /sys/fs/cgroup/cpu/Example/cgroup.procs

or

# echo "6955" &gt; /sys/fs/cgroup/cpu/Example/tasks</pre><p class="simpara">
							The previous command ensures that a desired application becomes a member of the <code class="literal">Example</code> control group and hence does not exceed the CPU limits configured for the <code class="literal">Example</code> control group. The PID should represent an existing process in the system. The <code class="literal">PID 6955</code> here was assigned to process <code class="literal">sha1sum /dev/zero &amp;</code>, used to illustrate the use-case of the <code class="literal">cpu</code> controller.
						</p></li><li class="listitem"><p class="simpara">
							Verify that the application runs in the specified control group:
						</p><pre class="literallayout"># cat /proc/6955/cgroup
12:cpuset:/
11:hugetlb:/
10:net_cls,net_prio:/
9:memory:/user.slice/user-1000.slice/user@1000.service
8:devices:/user.slice
7:blkio:/
6:freezer:/
5:rdma:/
4:pids:/user.slice/user-1000.slice/user@1000.service
3:perf_event:/
2:cpu,cpuacct:/Example
1:name=systemd:/user.slice/user-1000.slice/user@1000.service/gnome-terminal-server.service</pre><p class="simpara">
							The example output above shows that the process of the desired application runs in the <code class="literal">Example</code> control group, which applies CPU limits to the application’s process.
						</p></li><li class="listitem"><p class="simpara">
							Identify the current CPU consumption of your throttled application:
						</p><pre class="literallayout white-space-pre"># top
top - 12:28:42 up  1:06,  1 user,  load average: 1.02, 1.02, 1.00
Tasks: 266 total,   6 running, 260 sleeping,   0 stopped,   0 zombie
%Cpu(s): 11.0 us,  1.2 sy,  0.0 ni, 87.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.2 st
MiB Mem :   1826.8 total,    287.1 free,   1054.4 used,    485.3 buff/cache
MiB Swap:   1536.0 total,   1396.7 free,    139.2 used.    608.3 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 6955 root      20   0  228440   1752   1472 R  20.6   0.1  47:11.43 sha1sum
 5760 jdoe      20   0 3604956 208832  65316 R   2.3  11.2   0:43.50 gnome-shell
 6448 jdoe      20   0  743836  31736  19488 S   0.7   1.7   0:08.25 gnome-terminal-
  505 root      20   0       0      0      0 I   0.3   0.0   0:03.39 kworker/u4:4-events_unbound
 4217 root      20   0   74192   1612   1320 S   0.3   0.1   0:01.19 spice-vdagentd
...</pre><p class="simpara">
							Notice that the CPU consumption of the <code class="literal">PID 6955</code> has decreased from 99% to 20%.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information about the control groups concept, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
						</li><li class="listitem">
							For more information about resource controllers, see the <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> section and the <code class="literal">cgroups(7)</code> manual page.
						</li><li class="listitem">
							For more information about the <code class="literal">/sys/fs/</code> virtual filesystem, see the <code class="literal">sysfs(5)</code> manual page.
						</li></ul></div></section><section class="section" id="setting-cpu-limits-to-applications-using-cgroups-v2_using-control-groups-through-a-virtual-file-system"><div class="titlepage"><div><div><h3 class="title">9.3.2. Setting CPU limits to applications using cgroups-v2</h3></div></div></div><p>
					Sometimes an application uses a lot of CPU time, which may negatively impact the overall health of your environment. Use <span class="emphasis"><em>control groups version 2</em></span> (<code class="literal">cgroups-v2</code>) to configure CPU limits to the application, and restrict that its consumption.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An application whose CPU consumption you want to restrict.
						</li><li class="listitem">
							<a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Prevent <code class="literal">cgroups-v1</code> from automatically mounting during the system boot:
						</p><pre class="literallayout white-space-pre"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="cgroup_no_v1=all"</pre><p class="simpara">
							The command adds a kernel command-line parameter to the current boot entry. The <code class="literal">cgroup_no_v1=all</code> parameter prevents <code class="literal">cgroups-v1</code> from being automatically mounted.
						</p><p class="simpara">
							Alternatively, use the <code class="literal">systemd.unified_cgroup_hierarchy=1</code> kernel command-line parameter to mount <code class="literal">cgroups-v2</code> during the system boot by default.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								RHEL 8 supports both <code class="literal">cgroups-v1</code> and <code class="literal">cgroups-v2</code>. However, <code class="literal">cgroups-v1</code> is enabled and mounted by default during the booting process.
							</p></div></div></li><li class="listitem">
							Reboot the system for the changes to take effect.
						</li><li class="listitem"><p class="simpara">
							Optionally, verify the <code class="literal">cgroups-v1</code> functionality has been disabled:
						</p><pre class="literallayout white-space-pre"># mount -l | grep cgroup
tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,seclabel,mode=755)
cgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)</pre><p class="simpara">
							If <code class="literal">cgroups-v1</code> have been successfully disabled, the output does not show any "type cgroup" references, except for those which belong to <code class="literal">systemd</code>.
						</p></li><li class="listitem"><p class="simpara">
							Mount <code class="literal">cgroups-v2</code> anywhere in the filesystem:
						</p><pre class="literallayout"># mount -t cgroup2 none &lt;<span class="emphasis"><em>MOUNT_POINT</em></span>&gt;</pre></li><li class="listitem"><p class="simpara">
							Optionally, verify the <code class="literal">cgroups-v2</code> functionality has been mounted:
						</p><pre class="literallayout"># mount -l | grep cgroup2
none on /cgroups-v2 type cgroup2 (rw,relatime,seclabel)</pre><p class="simpara">
							The example output shows that <code class="literal">cgroups-v2</code> has been mounted to the <code class="literal">/cgroups-v2/</code> directory.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, inspect the contents of the <code class="literal">/cgroups-v2/</code> directory:
						</p><pre class="literallayout"># ll /cgroups-v2/
-r—​r—​r--. 1 root root 0 Mar 13 11:57 cgroup.controllers
-rw-r—​r--. 1 root root 0 Mar 13 11:57 cgroup.max.depth
-rw-r—​r--. 1 root root 0 Mar 13 11:57 cgroup.max.descendants
-rw-r—​r--. 1 root root 0 Mar 13 11:57 cgroup.procs
-r—​r—​r--. 1 root root 0 Mar 13 11:57 cgroup.stat
-rw-r—​r--. 1 root root 0 Mar 13 11:58 cgroup.subtree_control
-rw-r—​r--. 1 root root 0 Mar 13 11:57 cgroup.threads
-rw-r—​r--. 1 root root 0 Mar 13 11:57 cpu.pressure
-r—​r—​r--. 1 root root 0 Mar 13 11:57 cpuset.cpus.effective
-r—​r—​r--. 1 root root 0 Mar 13 11:57 cpuset.mems.effective
-rw-r—​r--. 1 root root 0 Mar 13 11:57 io.pressure
-rw-r—​r--. 1 root root 0 Mar 13 11:57 memory.pressure</pre><p class="simpara">
							The <code class="literal">/cgroups-v2/</code> directory, also called the root control group, contains some interface files (starting with <code class="literal">cgroup</code>) and some controller-specific files such as <code class="literal">cpuset.cpus.effective</code>.
						</p></li><li class="listitem"><p class="simpara">
							Identify the process IDs (PIDs) of applications you want to restrict in CPU consumption:
						</p><pre class="literallayout white-space-pre"># top
top - 15:39:52 up  3:45,  1 user,  load average: 0.79, 0.20, 0.07
Tasks: 265 total,   3 running, 262 sleeping,   0 stopped,   0 zombie
%Cpu(s): 74.3 us,  6.1 sy,  0.0 ni, 19.4 id,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st
MiB Mem :   1826.8 total,    243.8 free,   1102.1 used,    480.9 buff/cache
MiB Swap:   1536.0 total,   1526.2 free,      9.8 used.    565.6 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 5473 root      20   0  228440   1740   1456 R  99.7   0.1   0:12.11 sha1sum
 5439 root      20   0  222616   3420   3052 R  60.5   0.2   0:27.08 cpu_load_generator
 2170 jdoe      20   0 3600716 209960  67548 S   0.3  11.2   1:18.50 gnome-shell
 3051 root      20   0  274424   3976   3092 R   0.3   0.2   1:01.25 top
    1 root      20   0  245448  10256   5448 S   0.0   0.5   0:02.52 systemd
...</pre><p class="simpara">
							The example output of the <code class="literal">top</code> program reveals that <code class="literal">PID 5473</code> and <code class="literal">5439</code> (illustrative application <code class="literal">sha1sum</code> and <code class="literal">cpu_load_generator</code>) consume a lot of resources, namely CPU. Both are example applications used to demonstrate managing the <code class="literal">cgroups-v2</code> functionality.
						</p></li><li class="listitem"><p class="simpara">
							Enable CPU-related controllers:
						</p><pre class="literallayout"># echo "+cpu" &gt; /cgroups-v2/cgroup.subtree_control
# echo "+cpuset" &gt; /cgroups-v2/cgroup.subtree_control</pre><p class="simpara">
							The previous commands enable the <code class="literal">cpu</code> and <code class="literal">cpuset</code> controllers for the immediate sub-control groups of the <code class="literal">/cgroups-v2/</code> root control group.
						</p></li><li class="listitem"><p class="simpara">
							Create a sub-directory in the previously created <code class="literal">/cgroups-v2/</code> directory:
						</p><pre class="literallayout"># mkdir /cgroups-v2/Example/</pre><p class="simpara">
							The <code class="literal">/cgroups-v2/Example/</code> directory represents a sub-control group, where you can place specific processes and apply various CPU limits to the processes. Also, the previous step enabled the <code class="literal">cpu</code> and <code class="literal">cpuset</code> controllers for this sub-control group.
						</p><p class="simpara">
							At the time of creation of <code class="literal">/cgroups-v2/Example/</code>, some <code class="literal">cgroups-v2</code> interface files and <code class="literal">cpu</code> and <code class="literal">cpuset</code> controller-specific files will be created in the directory.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, inspect the newly created control group:
						</p><pre class="literallayout"># ll /cgroups-v2/Example/
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cgroup.controllers
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cgroup.events
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.freeze
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.max.depth
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.max.descendants
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.procs
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cgroup.stat
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.subtree_control
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.threads
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cgroup.type
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpu.max
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpu.pressure
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpuset.cpus
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cpuset.cpus.effective
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpuset.cpus.partition
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpuset.mems
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cpuset.mems.effective
-r—​r—​r--. 1 root root 0 Mar 13 14:48 cpu.stat
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpu.weight
-rw-r—​r--. 1 root root 0 Mar 13 14:48 cpu.weight.nice
-rw-r—​r--. 1 root root 0 Mar 13 14:48 io.pressure
-rw-r—​r--. 1 root root 0 Mar 13 14:48 memory.pressure</pre><p class="simpara">
							The example output shows files such as <code class="literal">cpuset.cpus</code> and <code class="literal">cpu.max</code>. The files are specific to the <code class="literal">cpuset</code> and <code class="literal">cpu</code> controllers that you enabled for the root’s (<code class="literal">/cgroups-v2/</code>) direct child control groups using the <code class="literal">/cgroups-v2/cgroup.subtree_control</code> file. Also, there are general <code class="literal">cgroup</code> control interface files such as <code class="literal">cgroup.procs</code> or <code class="literal">cgroup.controllers</code>, which are common to all control groups, regardless of enabled controllers.
						</p><p class="simpara">
							By default, the newly created sub-control group inherited access to the system’s entire CPU resources without a limit.
						</p></li><li class="listitem"><p class="simpara">
							Ensure the processes that you want to limit compete for CPU time on the same CPU:
						</p><pre class="literallayout"># echo "1" &gt; /cgroups-v2/Example/cpuset.cpus</pre><p class="simpara">
							The previous command secures processes that you placed in the <code class="literal">Example</code> sub-control group, compete on the same CPU. This setting is important for the <code class="literal">cpu</code> controller to activate.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The <code class="literal">cpu</code> controller is only activated if the relevant sub-control group has at least 2 processes, which compete for time on a single CPU.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Configure CPU limits of the control group:
						</p><pre class="literallayout"># echo "200000 1000000" &gt; /cgroups-v2/Example/cpu.max</pre><p class="simpara">
							The first value is the allowed time quota in microseconds for which all processes collectively in a sub-control group can run during one period (specified by the second value). During a single period, when processes in a control group collectively exhaust all the time specified by this quota, they are throttled for the remainder of the period and not allowed to run until the next period.
						</p><p class="simpara">
							The example command sets the CPU time limits so that all processes collectively in the <code class="literal">Example</code> sub-control group are able to run on the CPU only for 0.2 seconds out of every 1 second.
						</p></li><li class="listitem"><p class="simpara">
							Optionally, verify the limits:
						</p><pre class="literallayout"># cat /cgroups-v2/Example/cpu.max
200000 1000000</pre></li><li class="listitem"><p class="simpara">
							Add the applications' PIDs to the <code class="literal">Example</code> sub-control group:
						</p><pre class="literallayout"># echo "5473" &gt; /cgroups-v2/Example/cgroup.procs
# echo "5439" &gt; /cgroups-v2/Example/cgroup.procs</pre><p class="simpara">
							The example commands ensure that desired applications become members of the <code class="literal">Example</code> sub-control group and hence do not exceed the CPU limits configured for the <code class="literal">Example</code> sub-control group.
						</p></li><li class="listitem"><p class="simpara">
							Verify that the applications run in the specified control group:
						</p><pre class="literallayout"># cat /proc/5473/cgroup /proc/5439/cgroup
1:name=systemd:/user.slice/user-1000.slice/user@1000.service/gnome-terminal-server.service
0::/Example
1:name=systemd:/user.slice/user-1000.slice/user@1000.service/gnome-terminal-server.service
0::/Example</pre><p class="simpara">
							The example output above shows that the processes of the desired applications run in the <code class="literal">Example</code> sub-control group.
						</p></li><li class="listitem"><p class="simpara">
							Inspect the current CPU consumption of your throttled applications:
						</p><pre class="literallayout white-space-pre"># top
top - 15:56:27 up  4:02,  1 user,  load average: 0.03, 0.41, 0.55
Tasks: 265 total,   4 running, 261 sleeping,   0 stopped,   0 zombie
%Cpu(s):  9.6 us,  0.8 sy,  0.0 ni, 89.4 id,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st
MiB Mem :   1826.8 total,    243.4 free,   1102.1 used,    481.3 buff/cache
MiB Swap:   1536.0 total,   1526.2 free,      9.8 used.    565.5 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 5439 root      20   0  222616   3420   3052 R  10.0   0.2   6:15.83 cpu_load_generator
 5473 root      20   0  228440   1740   1456 R  10.0   0.1   9:20.65 sha1sum
 2753 jdoe      20   0  743928  35328  20608 S   0.7   1.9   0:20.36 gnome-terminal-
 2170 jdoe      20   0 3599688 208820  67552 S   0.3  11.2   1:33.06 gnome-shell
 5934 root      20   0  274428   5064   4176 R   0.3   0.3   0:00.04 top
 ...</pre><p class="simpara">
							Notice that the CPU consumption for the <code class="literal">PID 5439</code> and <code class="literal">PID 5473</code> has decreased to 10%. The <code class="literal">Example</code> sub-control group limits its processes to 20% of the CPU time collectively. Since there are 2 processes in the control group, each can utilize 10% of the CPU time.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information about the control groups concept, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
						</li><li class="listitem">
							For more information about resource controllers, see the <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> section and the <code class="literal">cgroups(7)</code> manual page.
						</li><li class="listitem">
							For more information about the <code class="literal">/sys/fs/</code> virtual filesystem, see the <code class="literal">sysfs(5)</code> manual page.
						</li></ul></div></section></section><section class="section" id="role-of-systemd-in-control-groups-version-1_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.4. Role of systemd in control groups version 1</h2></div></div></div><p>
				Red Hat Enterprise Linux 8 moves the resource management settings from the process level to the application level by binding the system of <code class="literal">cgroup</code> hierarchies with the <code class="literal">systemd</code> unit tree. Therefore, you can manage the system resources with the <code class="literal">systemctl</code> command, or by modifying the <code class="literal">systemd</code> unit files.
			</p><p>
				By default, the <code class="literal">systemd</code> system and service manager makes use of the <code class="literal">slice</code>, the <code class="literal">scope</code> and the <code class="literal">service</code> units to organize and structure processes in the control groups. The <code class="literal">systemctl</code> command enables you to further modify this structure by creating custom <code class="literal">slices</code>. Also, <code class="literal">systemd</code> automatically mounts hierarchies for important kernel resource controllers in the <code class="literal">/sys/fs/cgroup/</code> directory.
			</p><p>
				Three <code class="literal">systemd</code> unit types are used for resource control:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Service</strong></span> - A process or a group of processes, which <code class="literal">systemd</code> started according to a unit configuration file. Services encapsulate the specified processes so that they can be started and stopped as one set. Services are named in the following way:
					</p><pre class="literallayout">&lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Scope</strong></span> - A group of externally created processes. Scopes encapsulate processes that are started and stopped by the arbitrary processes through the <code class="literal">fork()</code> function and then registered by <code class="literal">systemd</code> at runtime. For example, user sessions, containers, and virtual machines are treated as scopes. Scopes are named as follows:
					</p><pre class="literallayout">&lt;<span class="emphasis"><em>name</em></span>&gt;.scope</pre></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Slice</strong></span> - A group of hierarchically organized units. Slices organize a hierarchy in which scopes and services are placed. The actual processes are contained in scopes or in services. Every name of a slice unit corresponds to the path to a location in the hierarchy. The dash ("-") character acts as a separator of the path components to a slice from the <code class="literal">-.slice</code> root slice. In the following example:
					</p><pre class="literallayout">&lt;<span class="emphasis"><em>parent-name</em></span>&gt;.slice</pre><p class="simpara">
						<code class="literal">parent-name.slice</code> is a sub-slice of <code class="literal">parent.slice</code>, which is a sub-slice of the <code class="literal">-.slice</code> root slice. <code class="literal">parent-name.slice</code> can have its own sub-slice named <code class="literal">parent-name-name2.slice</code>, and so on.
					</p></li></ul></div><p>
				The <code class="literal">service</code>, the <code class="literal">scope</code>, and the <code class="literal">slice</code> units directly map to objects in the control group hierarchy. When these units are activated, they map directly to control group paths built from the unit names.
			</p><p>
				The following is an abbreviated example of a control group hierarchy:
			</p><pre class="literallayout">Control group /:
-.slice
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 967 gdm-session-worker [pam/gdm-launch-environment]
│ │ │ ├─1035 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart
│ │ │ ├─1054 /usr/libexec/Xorg vt1 -displayfd 3 -auth /run/user/42/gdm/Xauthority -background none -noreset -keeptty -verbose 3
│ │ │ ├─1212 /usr/libexec/gnome-session-binary --autostart /usr/share/gdm/greeter/autostart
│ │ │ ├─1369 /usr/bin/gnome-shell
│ │ │ ├─1732 ibus-daemon --xim --panel disable
│ │ │ ├─1752 /usr/libexec/ibus-dconf
│ │ │ ├─1762 /usr/libexec/ibus-x11 --kill-daemon
│ │ │ ├─1912 /usr/libexec/gsd-xsettings
│ │ │ ├─1917 /usr/libexec/gsd-a11y-settings
│ │ │ ├─1920 /usr/libexec/gsd-clipboard
…​
├─init.scope
│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
└─system.slice
  ├─rngd.service
  │ └─800 /sbin/rngd -f
  ├─systemd-udevd.service
  │ └─659 /usr/lib/systemd/systemd-udevd
  ├─chronyd.service
  │ └─823 /usr/sbin/chronyd
  ├─auditd.service
  │ ├─761 /sbin/auditd
  │ └─763 /usr/sbin/sedispatch
  ├─accounts-daemon.service
  │ └─876 /usr/libexec/accounts-daemon
  ├─example.service
  │ ├─ 929 /bin/bash /home/jdoe/example.sh
  │ └─4902 sleep 1
  …​</pre><p>
				The example above shows that services and scopes contain processes and are placed in slices that do not contain processes of their own.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal">systemd</code>, unit files, and a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-services-with-systemd_configuring-basic-system-settings">Configuring basic system settings</a></span></em></span>.
					</li><li class="listitem">
						For more information about resource controllers, see the <a class="link" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">What are kernel resource controllers</a> section and the <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
					</li><li class="listitem">
						For more information about <code class="literal">fork()</code>, see the <code class="literal">fork(2)</code> manual pages.
					</li></ul></div></section><section class="section" id="using-control-groups-version-1-with-systemd_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.5. Using control groups version 1 with systemd</h2></div></div></div><p>
				The following sections provide an overview of tasks related to creation, modification and removal of the control groups (<code class="literal">cgroups</code>). The utilities provided by the <code class="literal">systemd</code> system and service manager are the preferred way of the <code class="literal">cgroups</code> management and will be supported in the future.
			</p><section class="section" id="creating-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h3 class="title">9.5.1. Creating control groups version 1 with systemd</h3></div></div></div><p>
					You can use the <code class="literal">systemd</code> system and service manager to create transient and persistent control groups (<code class="literal">cgroups</code>) to set limits, prioritize, or control access to hardware resources for groups of processes.
				</p><section class="section" id="creating-transient-control-groups_creating-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.1.1. Creating transient control groups</h4></div></div></div><p>
						The transient <code class="literal">cgroups</code> set limits on resources consumed by a unit (service or scope) during its runtime.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a transient control group, use the <code class="literal">systemd-run</code> command in the following format:
							</p><pre class="literallayout"># systemd-run --unit=&lt;<span class="emphasis"><em>name</em></span>&gt; --slice=&lt;<span class="emphasis"><em>name</em></span>&gt;.slice &lt;<span class="emphasis"><em>command</em></span>&gt;</pre><p class="simpara">
								This command creates and starts a transient service or a scope unit and runs a custom command in such a unit.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The <code class="literal">--unit=&lt;name&gt;</code> option gives a name to the unit. If <code class="literal">--unit</code> is not specified, the name is generated automatically.
									</li><li class="listitem">
										The <code class="literal">--slice=&lt;<span class="emphasis"><em>name</em></span>&gt;.slice</code> option makes your service or scope unit a member of a specified slice. Replace <code class="literal">&lt;<span class="emphasis"><em>name</em></span>&gt;.slice</code> with the name of an existing slice (as shown in the output of <code class="literal">systemctl -t slice</code>), or create a new slice by passing a unique name. By default, services and scopes are created as members of the <code class="literal">system.slice</code>.
									</li><li class="listitem"><p class="simpara">
										Replace <code class="literal">&lt;<span class="emphasis"><em>command</em></span>&gt;</code> with the command you wish to execute in the service or the scope unit.
									</p><p class="simpara">
										The following message is displayed to confirm that you created and started the service or the scope successfully:
									</p><pre class="literallayout"># Running as unit &lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Optionally, keep the unit running after its processes finished to collect run-time information:
							</p><pre class="literallayout"># systemd-run --unit=&lt;<span class="emphasis"><em>name</em></span>&gt; --slice=&lt;<span class="emphasis"><em>name</em></span>&gt;.slice --remain-after-exit &lt;<span class="emphasis"><em>command</em></span>&gt;</pre><p class="simpara">
								The command creates and starts a transient service unit and runs a custom command in such a unit. The <code class="literal">--remain-after-exit</code> option ensures that the service keeps running after its processes have finished.
							</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li><li class="listitem">
								For more information about <code class="literal">systemd</code>, unit configuration files and their locations, and a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-services-with-systemd_configuring-basic-system-settings">Configuring basic system settings</a></span></em></span>.
							</li><li class="listitem">
								For a detailed description of <code class="literal">systemd-run</code> including further options and examples, see the <code class="literal">systemd-run(1)</code> manual pages.
							</li></ul></div></section><section class="section" id="creating-persistent-control-groups_creating-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.1.2. Creating persistent control groups</h4></div></div></div><p>
						To assign a persistent control group to a service, it is necessary to edit its unit configuration file. The configuration is preserved after the system reboot, so it can be used to manage services that are started automatically.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a persistent control group, execute:
							</p><pre class="literallayout"># systemctl enable &lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre><p class="simpara">
								The command above automatically creates a unit configuration file into the <code class="literal">/usr/lib/systemd/system/</code> directory and by default, it assigns <code class="literal">&lt;<span class="emphasis"><em>name</em></span>&gt;.service</code> to the <code class="literal">system.slice</code> unit.
							</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li><li class="listitem">
								For more information about <code class="literal">systemd</code>, unit configuration files and their locations, and a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-services-with-systemd_configuring-basic-system-settings">Configuring basic system settings</a></span></em></span>.
							</li><li class="listitem">
								For a detailed description of <code class="literal">systemd-run</code> including further options and examples, see the <code class="literal">systemd-run(1)</code> manual pages.
							</li></ul></div></section></section><section class="section" id="modifying-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h3 class="title">9.5.2. Modifying control groups version 1 with systemd</h3></div></div></div><p>
					Each persistent unit is supervised by the <code class="literal">systemd</code> system and service manager, and has a unit configuration file in the <code class="literal">/usr/lib/systemd/system/</code> directory. To change the resource control settings of the persistent units, modify its unit configuration file either manually in a text editor or from the command-line interface.
				</p><section class="section" id="configuring-memory-resource-control-settings-on-the-command-line_modifying-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.2.1. Configuring memory resource control settings on the command-line</h4></div></div></div><p>
						Executing commands in the command-line interface is one of the ways how to set limits, prioritize, or control access to hardware resources for groups of processes.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To limit the memory usage of a service, run the following:
							</p><pre class="literallayout"># systemctl set-property example.service MemoryLimit=1500K</pre><p class="simpara">
								The command instantly assigns the memory limit of 1,500 kilobytes to processes executed in a control group the <code class="literal">example.service</code> service belongs to. The <code class="literal">MemoryLimit</code> parameter, in this configuration variant, is defined in the <code class="literal">/etc/systemd/system.control/example.service.d/50-MemoryLimit.conf</code> file and controls the value of the <code class="literal">/sys/fs/cgroup/memory/system.slice/example.service/memory.limit_in_bytes</code> file.
							</p></li><li class="listitem"><p class="simpara">
								Optionally, to temporarily limit the memory usage of a service, run:
							</p><pre class="literallayout"># systemctl set-property --runtime example.service MemoryLimit=1500K</pre><p class="simpara">
								The command instantly assigns the memory limit to the <code class="literal">example.service</code> service. The <code class="literal">MemoryLimit</code> parameter is defined until the next reboot in the <code class="literal">/run/systemd/system.control/example.service.d/50-MemoryLimit.conf</code> file. With a reboot, the whole <code class="literal">/run/systemd/system.control/</code> directory and <code class="literal">MemoryLimit</code> are removed.
							</p></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">50-MemoryLimit.conf</code> file stores the memory limit as a multiple of 4096 bytes - one kernel page size specific for AMD64 and Intel 64. The actual number of bytes depends on a CPU architecture.
						</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> and <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li></ul></div></section><section class="section" id="configuring-memory-resource-control-settings-with-unit-files_modifying-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.2.2. Configuring memory resource control settings with unit files</h4></div></div></div><p>
						Manually modifying unit files is one of the ways how to set limits, prioritize, or control access to hardware resources for groups of processes.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								To limit the memory usage of a service, modify the <code class="literal">/usr/lib/systemd/system/example.service</code> file as follows:
							</p><pre class="literallayout">…​
[Service]
MemoryLimit=1500K
…​</pre><p class="simpara">
								The configuration above places a limit on maximum memory consumption of processes executed in a control group, which <code class="literal">example.service</code> is part of.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Use suffixes K, M, G, or T to identify Kilobyte, Megabyte, Gigabyte, or Terabyte as a unit of measurement.
								</p></div></div></li><li class="listitem"><p class="simpara">
								Reload all unit configuration files:
							</p><pre class="literallayout"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
								Restart the service:
							</p><pre class="literallayout"># systemctl restart example.service</pre></li><li class="listitem">
								Reboot the system.
							</li><li class="listitem"><p class="simpara">
								Optionally, check that the changes took effect:
							</p><pre class="literallayout"># cat /sys/fs/cgroup/memory/system.slice/example.service/memory.limit_in_bytes
1536000</pre><p class="simpara">
								The example output shows that the memory consumption was limited at around 1,500 Kilobytes.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									The <code class="literal">memory.limit_in_bytes</code> file stores the memory limit as a multiple of 4096 bytes - one kernel page size specific for AMD64 and Intel 64. The actual number of bytes depends on a CPU architecture.
								</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> and <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
							</li><li class="listitem">
								For more information about <code class="literal">systemd</code>, unit configuration files and their locations, as well as a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8-beta/html-single/configuring_basic_system_settings/index#managing-services-with-systemd">Configuring basic system settings</a></span></em></span>.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li></ul></div></section></section><section class="section" id="removing-control-groups-version-1-with-systemd_using-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h3 class="title">9.5.3. Removing control groups version 1 with systemd</h3></div></div></div><p>
					You can use the <code class="literal">systemd</code> system and service manager to remove transient and persistent control groups (<code class="literal">cgroups</code>) if you no longer need to limit, prioritize, or control access to hardware resources for groups of processes.
				</p><section class="section" id="removing-transient-control-groups_removing-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.3.1. Removing transient control groups</h4></div></div></div><p>
						Transient <code class="literal">cgroups</code> are automatically released once all the processes that a service or a scope unit contains, finish.
					</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To stop the service unit with all its processes, execute:
							</p><pre class="literallayout"># systemctl stop &lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li><li class="listitem"><p class="simpara">
								To terminate one or more of the unit processes, execute:
							</p><pre class="literallayout"># systemctl kill &lt;<span class="emphasis"><em>name</em></span>&gt;.service --kill-who=PID,…​ --signal=signal</pre><p class="simpara">
								The command above uses the <code class="literal">--kill-who</code> option to select process(es) from the control group you wish to terminate. To kill multiple processes at the same time, pass a comma-separated list of PIDs. The <code class="literal">--signal</code> option determines the type of POSIX signal to be sent to the specified processes. The default signal is <span class="emphasis"><em>SIGTERM</em></span>.
							</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> and <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li><li class="listitem">
								For more information about <code class="literal">systemd</code>, unit configuration files and their locations, as well as a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8-beta/html-single/configuring_basic_system_settings/index#managing-services-with-systemd">Configuring basic system settings</a></span></em></span>.
							</li></ul></div></section><section class="section" id="removing-persistent-control-groups_removing-control-groups-version-1-with-systemd"><div class="titlepage"><div><div><h4 class="title">9.5.3.2. Removing persistent control groups</h4></div></div></div><p>
						Persistent <code class="literal">cgroups</code> are released when a service or a scope unit is stopped or disabled and its configuration file is deleted.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Stop the service unit:
							</p><pre class="literallayout"># systemctl stop &lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li><li class="listitem"><p class="simpara">
								Disable the service unit:
							</p><pre class="literallayout"># systemctl disable &lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li><li class="listitem"><p class="simpara">
								Remove the relevant unit configuration file:
							</p><pre class="literallayout"># rm /usr/lib/systemd/system/&lt;<span class="emphasis"><em>name</em></span>&gt;.service</pre></li><li class="listitem"><p class="simpara">
								Reload all unit configuration files so that changes take effect:
							</p><pre class="literallayout"># systemctl daemon-reload</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								For more information about the concept of control groups, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
							</li><li class="listitem">
								For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> and <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
							</li><li class="listitem">
								For more information about the role of <code class="literal">systemd</code> in control groups, see <a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>.
							</li><li class="listitem">
								For more information about <code class="literal">systemd</code>, unit configuration files and their locations, as well as a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8-beta/html-single/configuring_basic_system_settings/index#managing-services-with-systemd">Configuring basic system settings</a></span></em></span>.
							</li><li class="listitem">
								For more information about killing processes with <code class="literal">systemd</code>, see the <code class="literal">systemd.kill(5)</code> manual page.
							</li></ul></div></section></section></section><section class="section" id="obtaining-information-about-control-groups-version-1_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.6. Obtaining information about control groups version 1</h2></div></div></div><p>
				The following sections describe how to display various information about control groups (<code class="literal">cgroups</code>):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Listing <code class="literal">systemd</code> units and viewing their status
					</li><li class="listitem">
						Viewing the <code class="literal">cgroups</code> hierarchy
					</li><li class="listitem">
						Monitoring resource consumption in real time
					</li></ul></div><section class="section" id="listing-systemd_units_obtaining-information-about-control-groups-version-1"><div class="titlepage"><div><div><h3 class="title">9.6.1. Listing systemd units</h3></div></div></div><p>
					The following procedure describes how to use the <code class="literal">systemd</code> system and service manager to list its units.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Role of systemd in control groups</a>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To list all active units on the system, execute the <code class="literal"># systemctl</code> command and the terminal will return an output similar to the following example:
						</p><pre class="literallayout">UNIT                                                LOAD   ACTIVE SUB       DESCRIPTION
…​
init.scope                                          loaded active running   System and Service Manager
session-2.scope                                     loaded active running   Session 2 of user jdoe
abrt-ccpp.service                                   loaded active exited    Install ABRT coredump hook
abrt-oops.service                                   loaded active running   ABRT kernel log watcher
abrt-vmcore.service                                 loaded active exited    Harvest vmcores for ABRT
abrt-xorg.service                                   loaded active running   ABRT Xorg log watcher
…​
-.slice                                             loaded active active    Root Slice
machine.slice                                       loaded active active    Virtual Machine and Container Slice system-getty.slice                                                                       loaded active active    system-getty.slice
system-lvm2\x2dpvscan.slice                         loaded active active    system-lvm2\x2dpvscan.slice
system-sshd\x2dkeygen.slice                         loaded active active    system-sshd\x2dkeygen.slice
system-systemd\x2dhibernate\x2dresume.slice         loaded active active    system-systemd\x2dhibernate\x2dresume&gt;
system-user\x2druntime\x2ddir.slice                 loaded active active    system-user\x2druntime\x2ddir.slice
system.slice                                        loaded active active    System Slice
user-1000.slice                                     loaded active active    User Slice of UID 1000
user-42.slice                                       loaded active active    User Slice of UID 42
user.slice                                          loaded active active    User and Session Slice
…​</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">UNIT</code> - a name of a unit that also reflects the unit position in a control group hierarchy. The units relevant for resource control are a <span class="emphasis"><em>slice</em></span>, a <span class="emphasis"><em>scope</em></span>, and a <span class="emphasis"><em>service</em></span>.
								</li><li class="listitem">
									<code class="literal">LOAD</code> - indicates whether the unit configuration file was properly loaded. If the unit file failed to load, the field contains the state <span class="emphasis"><em>error</em></span> instead of <span class="emphasis"><em>loaded</em></span>. Other unit load states are: <span class="emphasis"><em>stub</em></span>, <span class="emphasis"><em>merged</em></span>, and <span class="emphasis"><em>masked</em></span>.
								</li><li class="listitem">
									<code class="literal">ACTIVE</code> - the high-level unit activation state, which is a generalization of <code class="literal">SUB</code>.
								</li><li class="listitem">
									<code class="literal">SUB</code> - the low-level unit activation state. The range of possible values depends on the unit type.
								</li><li class="listitem">
									<code class="literal">DESCRIPTION</code> - the description of the unit content and functionality.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To list inactive units, execute:
						</p><pre class="literallayout"># systemctl --all</pre></li><li class="listitem"><p class="simpara">
							To limit the amount of information in the output, execute:
						</p><pre class="literallayout"># systemctl --type service,masked</pre><p class="simpara">
							The <code class="literal">--type</code> option requires a comma-separated list of unit types such as a <span class="emphasis"><em>service</em></span> and a <span class="emphasis"><em>slice</em></span>, or unit load states such as <span class="emphasis"><em>loaded</em></span> and <span class="emphasis"><em>masked</em></span>.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about <code class="literal">systemd</code>, unit files, and a complete list of <code class="literal">systemd</code> unit types, see the relevant sections in <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-services-with-systemd_configuring-basic-system-settings">Configuring basic system settings</a></span></em></span>.
						</li></ul></div></section><section class="section" id="viewing-a-control-group-version-1-hierarchy_obtaining-information-about-control-groups-version-1"><div class="titlepage"><div><div><h3 class="title">9.6.2. Viewing a control group version 1 hierarchy</h3></div></div></div><p>
					The following procedure describes how to display control groups (<code class="literal">cgroups</code>) hierarchy and processes running in specific <code class="literal">cgroups</code>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To display the whole <code class="literal">cgroups</code> hierarchy on your system, execute <code class="literal"># systemd-cgls</code>:
						</p><pre class="literallayout">Control group /:
-.slice
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]
│ │ │ ├─1040 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart
…​
├─init.scope
│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
└─system.slice
  …​
  ├─example.service
  │ ├─6882 /bin/bash /home/jdoe/example.sh
  │ └─6902 sleep 1
  ├─systemd-journald.service
    └─629 /usr/lib/systemd/systemd-journald
  …​</pre><p class="simpara">
							The example output returns the entire <code class="literal">cgroups</code> hierarchy, where the highest level is formed by <span class="emphasis"><em>slices</em></span>.
						</p></li><li class="listitem"><p class="simpara">
							To display the <code class="literal">cgroups</code> hierarchy filtered by a resource controller, execute <code class="literal"># systemd-cgls &lt;<span class="emphasis"><em>resource_controller</em></span>&gt;</code>:
						</p><pre class="literallayout"># systemd-cgls memory
Controller memory; Control group /:
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]
…​
└─system.slice
  |
  …​
  ├─chronyd.service
  │ └─844 /usr/sbin/chronyd
  ├─example.service
  │ ├─8914 /bin/bash /home/jdoe/example.sh
  │ └─8916 sleep 1
  …​</pre><p class="simpara">
							The example output of the above command lists the services that interact with the selected controller.
						</p></li><li class="listitem"><p class="simpara">
							To display detailed information about a certain unit and its part of the <code class="literal">cgroups</code> hierarchy, execute <code class="literal"># systemctl status &lt;<span class="emphasis"><em>system_unit</em></span>&gt;</code>:
						</p><pre class="literallayout white-space-pre"># systemctl status example.service
● example.service - My example service
   Loaded: loaded (/usr/lib/systemd/system/example.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue 2019-04-16 12:12:39 CEST; 3s ago
 Main PID: 17737 (bash)
    Tasks: 2 (limit: 11522)
   Memory: 496.0K (limit: 1.5M)
   CGroup: /system.slice/example.service
           ├─17737 /bin/bash /home/jdoe/example.sh
           └─17743 sleep 1
Apr 16 12:12:39 redhat systemd[1]: Started My example service.
Apr 16 12:12:39 redhat bash[17737]: The current time is Tue Apr 16 12:12:39 CEST 2019
Apr 16 12:12:40 redhat bash[17737]: The current time is Tue Apr 16 12:12:40 CEST 2019</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about resource controllers, see <a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a> section and <code class="literal">systemd.resource-control(5)</code>, <code class="literal">cgroups(7)</code> manual pages.
						</li></ul></div></section><section class="section" id="viewing-resource-controllers_obtaining-information-about-control-groups-version-1"><div class="titlepage"><div><div><h3 class="title">9.6.3. Viewing resource controllers</h3></div></div></div><p>
					The following procedure describes how to learn which processes use which resource controllers.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To view which resource controllers a process interacts with, execute the <code class="literal"># cat proc/&lt;<span class="emphasis"><em>PID</em></span>&gt;/cgroup</code> command:
						</p><pre class="literallayout"># cat /proc/11269/cgroup
12:freezer:/
11:cpuset:/
10:devices:/system.slice
9:memory:/system.slice/example.service
8:pids:/system.slice/example.service
7:hugetlb:/
6:rdma:/
5:perf_event:/
4:cpu,cpuacct:/
3:net_cls,net_prio:/
2:blkio:/
1:name=systemd:/system.slice/example.service</pre><p class="simpara">
							The example output relates to a process of interest. In this case, it is a process identified by <code class="literal">PID 11269</code>, which belongs to the <code class="literal">example.service</code> unit. You can determine whether the process was placed in a correct control group as defined by the <code class="literal">systemd</code> unit file specifications.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, the items and their ordering in the list of resource controllers is the same for all units started by <code class="literal">systemd</code>, since it automatically mounts all the default resource controllers.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about resource controllers in general refer to the <code class="literal">cgroups(7)</code> manual pages.
						</li><li class="listitem">
							For a detailed description of specific resource controllers, see the documentation in the <code class="literal">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/cgroups-v1/</code> directory.
						</li></ul></div></section><section class="section" id="monitoring-resource-consumption_obtaining-information-about-control-groups-version-1"><div class="titlepage"><div><div><h3 class="title">9.6.4. Monitoring resource consumption</h3></div></div></div><p>
					The following procedure describes how to view a list of currently running control groups (<code class="literal">cgroups</code>) and their resource consumption in real-time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#what-kernel-resource-controllers-are_setting-limits-for-applications" title="9.2. What kernel resource controllers are">Section 9.2, “What kernel resource controllers are”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#role-of-systemd-in-control-groups-version-1_setting-limits-for-applications" title="9.4. Role of systemd in control groups version 1">Section 9.4, “Role of systemd in control groups version 1”</a>
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To see a dynamic account of currently running <code class="literal">cgroups</code>, execute the <code class="literal"># systemd-cgtop</code> command:
						</p><pre class="literallayout white-space-pre">Control Group                            Tasks   %CPU   Memory  Input/s Output/s
/                                          607   29.8     1.5G        -        -
/system.slice                              125      -   428.7M        -        -
/system.slice/ModemManager.service           3      -     8.6M        -        -
/system.slice/NetworkManager.service         3      -    12.8M        -        -
/system.slice/accounts-daemon.service        3      -     1.8M        -        -
/system.slice/boot.mount                     -      -    48.0K        -        -
/system.slice/chronyd.service                1      -     2.0M        -        -
/system.slice/cockpit.socket                 -      -     1.3M        -        -
/system.slice/colord.service                 3      -     3.5M        -        -
/system.slice/crond.service                  1      -     1.8M        -        -
/system.slice/cups.service                   1      -     3.1M        -        -
/system.slice/dev-hugepages.mount            -      -   244.0K        -        -
/system.slice/dev-mapper-rhel\x2dswap.swap   -      -   912.0K        -        -
/system.slice/dev-mqueue.mount               -      -    48.0K        -        -
/system.slice/example.service                2      -     2.0M        -        -
/system.slice/firewalld.service              2      -    28.8M        -        -
...</pre><p class="simpara">
							The example output displays currently running <code class="literal">cgroups</code> ordered by their resource usage (CPU, memory, disk I/O load). The list refreshes every 1 second by default. Therefore, it offers a dynamic insight into the actual resource usage of each control group.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information about dynamic monitoring of resource usage, see the <code class="literal">systemd-cgtop(1)</code> manual pages.
						</li></ul></div></section></section><section class="section" id="what-namespaces-are_setting-limits-for-applications"><div class="titlepage"><div><div><h2 class="title">9.7. What namespaces are</h2></div></div></div><p>
				Namespaces are one of the most important methods for organizing and identifying software objects.
			</p><p>
				A namespace wraps a global system resource (for example a mount point, a network device, or a hostname) in an abstraction that makes it appear to processes within the namespace that they have their own isolated instance of the global resource. One of the most common technologies that utilize namespaces are containers.
			</p><p>
				Changes to a particular global resource are visible only to processes in that namespace and do not affect the rest of the system or other namespaces.
			</p><p>
				To inspect which namespaces a process is a member of, you can check the symbolic links in the <code class="literal">/proc/&lt;<span class="emphasis"><em>PID</em></span>&gt;/ns/</code> directory.
			</p><p>
				The following table shows supported namespaces and resources which they isolate:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm139829853271024" scope="col">Namespace</th><th align="left" valign="top" id="idm139829853269936" scope="col">Isolates</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>Mount</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								Mount points
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>UTS</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								Hostname and NIS domain name
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>IPC</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								System V IPC, POSIX message queues
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>PID</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								Process IDs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>Network</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								Network devices, stacks, ports, etc
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>User</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								User and group IDs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139829853271024"> <p>
								<span class="strong strong"><strong>Control groups</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139829853269936"> <p>
								Control group root directory
							</p>
							 </td></tr></tbody></table></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about namespaces, see the <code class="literal">namespaces(7)</code> and <code class="literal">cgroup_namespaces(7)</code> manual pages.
					</li><li class="listitem">
						For more information about <code class="literal">cgroups</code>, see <a class="xref" href="index.html#understanding-control-groups_setting-limits-for-applications" title="9.1. Understanding control groups">Section 9.1, “Understanding control groups”</a>.
					</li></ul></div></section><div class="footnotes"><br/><hr width="100" align="left"/><div id="ftn.idm139829853139136" class="footnote"><div class="para"><a href="index.html#idm139829853139136" class="simpara"><sup class="simpara">[1] </sup></a>
					Linux Control Group v2 - An Introduction, Devconf.cz 2019 presentation by Waiman Long
				</div></div></div></section><section class="chapter" id="analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Analyzing system performance with BPF Compiler Collection</h1></div></div></div><p>
			As a system administrator, use the BPF Compiler Collection (BCC) library to create tools for analyzing the performance of your Linux operating system and gathering information, which could be difficult to obtain through other interfaces.
		</p><section class="section" id="bcc_analyzing-system-performance-with-bpf-compiler_collection"><div class="titlepage"><div><div><h2 class="title">10.1. A brief introduction to BCC</h2></div></div></div><p>
				BPF Compiler Collection (BCC) is a library, which facilitates the creation of the extended Berkeley Packet Filter (eBPF) programs. The main utility of eBPF programs is analyzing OS performance and network performance without experiencing overhead or security issues.
			</p><p>
				BCC removes the need for users to know deep technical details of eBPF, and provides many out-of-the-box starting points, such as the <code class="literal">bcc-tools</code> package with pre-created eBPF programs.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The eBPF programs are triggered on events, such as disk I/O, TCP connections, and process creations. It is unlikely that the programs should cause the kernel to crash, loop or become unresponsive because they run in a safe virtual machine in the kernel.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about BCC, see the <code class="literal">/usr/share/doc/bcc/README.md</code> file.
					</li></ul></div></section><section class="section" id="installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection"><div class="titlepage"><div><div><h2 class="title">10.2. Installing the bcc-tools package</h2></div></div></div><p>
				This section describes how to install the <code class="literal">bcc-tools</code> package, which also installs the BPF Compiler Collection (BCC) library as a dependency.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An active <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#basics-registering-managing-subscriptions">Red Hat Enterprise Linux subscription</a></span></em></span>
					</li><li class="listitem">
						An <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#basics-installing-software">enabled repository</a></span></em></span> containing the <code class="literal">bcc-tools</code> package
					</li><li class="listitem">
						Introduction to <code class="literal application">yum</code> <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/configuring_basic_system_settings/index#installing-software-with-yum">package manager</a></span></em></span>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/updating-kernel-with-yum_managing-monitoring-and-updating-the-kernel#updating-the-kernel_updating-kernel-with-yum">Updated kernel</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install <code class="literal">bcc-tools</code>:
					</p><pre class="screen"><code class="literal">#</code> <code class="literal command">yum install bcc-tools</code></pre><p class="simpara">
						Once installed, the tools are placed in the <code class="literal">/usr/share/bcc/tools/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Optionally, inspect the tools:
					</p><pre class="screen"><code class="literal">#</code> <code class="literal command">ll /usr/share/bcc/tools/</code>
...
-rwxr-xr-x. 1 root root  4198 Dec 14 17:53 dcsnoop
-rwxr-xr-x. 1 root root  3931 Dec 14 17:53 dcstat
-rwxr-xr-x. 1 root root 20040 Dec 14 17:53 deadlock_detector
-rw-r--r--. 1 root root  7105 Dec 14 17:53 deadlock_detector.c
drwxr-xr-x. 3 root root  8192 Mar 11 10:28 doc
-rwxr-xr-x. 1 root root  7588 Dec 14 17:53 execsnoop
-rwxr-xr-x. 1 root root  6373 Dec 14 17:53 ext4dist
-rwxr-xr-x. 1 root root 10401 Dec 14 17:53 ext4slower
...</pre><p class="simpara">
						The <code class="literal">doc</code> directory in the listing above contains documentation for each tool.
					</p></li></ol></div></section><section class="section" id="using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection"><div class="titlepage"><div><div><h2 class="title">10.3. Using selected bcc-tools for performance analyses</h2></div></div></div><p>
				This section describes how to use certain pre-created programs from the BPF Compiler Collection (BCC) library to efficiently and securely analyze the system performance on the per-event basis. The set of pre-created programs in the BCC library can serve as examples for creation of additional programs.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#bcc_analyzing-system-performance-with-bpf-compiler_collection" title="10.1. A brief introduction to BCC">Introduction to BCC</a>
					</li><li class="listitem">
						<a class="link" href="index.html#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection" title="10.2. Installing the bcc-tools package">Installed BCC library</a>
					</li><li class="listitem">
						Root permissions
					</li></ul></div><h4 id="using_execsnoop_to_examine_the_system_processes">Using execsnoop to examine the system processes</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal">execsnoop</code> program in one terminal:
					</p><pre class="screen"># /usr/share/bcc/tools/execsnoop</pre></li><li class="listitem"><p class="simpara">
						In another terminal execute for example:
					</p><pre class="screen">$ ls /usr/share/bcc/tools/doc/</pre><p class="simpara">
						The above creates a short-lived process of the <code class="literal">ls</code> command.
					</p></li><li class="listitem"><p class="simpara">
						The terminal running <code class="literal">execsnoop</code> shows the output similar to the following:
					</p><pre class="screen">PCOMM	PID    PPID   RET ARGS
ls   	8382   8287     0 /usr/bin/ls --color=auto /usr/share/bcc/tools/doc/
sed 	8385   8383     0 /usr/bin/sed s/^ *[0-9]\+ *//
...</pre><p class="simpara">
						The <code class="literal">execsnoop</code> program prints a line of output for each new process, which consumes system resources. It even detects processes of programs that run very shortly, such as <code class="literal">ls</code>, and most monitoring tools would not register them.
					</p><p class="simpara">
						The result above shows a parent process name (<code class="literal">ls</code>), its process ID (<code class="literal">5076</code>), parent process ID (<code class="literal">2931</code>), the return value of the <code class="literal">exec()</code> system call (<code class="literal">0</code>), which loads program code into new processes. Finally, the output displays a location of the started program with arguments (<code class="literal">/usr/bin/ls --color=auto /usr/share/bcc/tools/doc/</code>).
					</p></li></ol></div><p>
				To see more details, examples, and options for <code class="literal">execsnoop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/execsnoop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">exec()</code>, see <code class="literal">exec(3)</code> manual pages.
			</p><h4 id="using_opensnoop_to_track_what_files_a_command_opens">Using opensnoop to track what files a command opens</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal">opensnoop</code> program in one terminal:
					</p><pre class="screen"><code class="literal"># /usr/share/bcc/tools/opensnoop -n uname</code></pre><p class="simpara">
						The above prints output for files, which are opened only by the process of the <code class="literal">uname</code> command.
					</p></li><li class="listitem"><p class="simpara">
						In another terminal execute:
					</p><pre class="screen"> <code class="literal">$ uname</code></pre><p class="simpara">
						The command above opens certain files, which are captured in the next step.
					</p></li><li class="listitem"><p class="simpara">
						The terminal running <code class="literal">opensnoop</code> shows the output similar to the following:
					</p><pre class="screen">PID    COMM 	FD ERR PATH
8596   uname 	3  0   /etc/ld.so.cache
8596   uname 	3  0   /lib64/libc.so.6
8596   uname 	3  0   /usr/lib/locale/locale-archive
...</pre><p class="simpara">
						The <code class="literal">opensnoop</code> program watches the <code class="literal">open()</code> system call across the whole system, and prints a line of output for each file that <code class="literal">uname</code> tried to open along the way.
					</p><p class="simpara">
						The result above shows a process ID (<code class="literal">PID</code>), a process name (<code class="literal">COMM</code>), and a file descriptor (<code class="literal">FD</code>) - a value that <code class="literal">open()</code> returns to refer to the open file. Finally, the output displays a column for errors (<code class="literal">ERR</code>) and a location of files that <code class="literal">open()</code> tries to open (<code class="literal">PATH</code>).
					</p><p class="simpara">
						If a command tries to read a non-existent file, then the <code class="literal">FD</code> column returns <code class="literal">-1</code> and the <code class="literal">ERR</code> column prints a value corresponding to the relevant error. As a result, <code class="literal">opensnoop</code> can help you identify an application that does not behave properly.
					</p></li></ol></div><p>
				To see more details, examples, and options for <code class="literal">opensnoop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/opensnoop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">open()</code>, see <code class="literal">open(2)</code> manual pages.
			</p><h4 id="using_biotop_to_examine_the_i_o_operations_on_the_disk">Using biotop to examine the I/O operations on the disk</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal">biotop</code> program in one terminal:
					</p><pre class="screen"><code class="literal"># /usr/share/bcc/tools/biotop 30</code></pre><p class="simpara">
						The command enables you to monitor the top processes, which perform I/O operations on the disk. The argument ensures that the command will produce a 30 second summary.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When no argument provided, the output screen by default refreshes every 1 second.
						</p></div></div></li><li class="listitem"><p class="simpara">
						In another terminal execute for example :
					</p><pre class="screen"><code class="literal">#</code> <code class="literal command">dd if=/dev/vda of=/dev/zero</code></pre><p class="simpara">
						The command above reads the content from the local hard disk device and writes the output to the <code class="literal">/dev/zero</code> file. This step generates certain I/O traffic to illustrate <code class="literal">biotop</code>.
					</p></li><li class="listitem"><p class="simpara">
						The terminal running <code class="literal">biotop</code> shows the output similar to the following:
					</p><pre class="screen">PID    COMM             D MAJ MIN DISK       I/O  Kbytes     AVGms
9568   dd               R 252 0   vda      16294 14440636.0  3.69
48     kswapd0          W 252 0   vda       1763 120696.0    1.65
7571   gnome-shell      R 252 0   vda        834 83612.0     0.33
1891   gnome-shell      R 252 0   vda       1379 19792.0     0.15
7515   Xorg             R 252 0   vda        280  9940.0     0.28
7579   llvmpipe-1       R 252 0   vda        228  6928.0     0.19
9515   gnome-control-c  R 252 0   vda         62  6444.0     0.43
8112   gnome-terminal-  R 252 0   vda         67  2572.0     1.54
7807   gnome-software   R 252 0   vda         31  2336.0     0.73
9578   awk              R 252 0   vda         17  2228.0     0.66
7578   llvmpipe-0       R 252 0   vda        156  2204.0     0.07
9581   pgrep            R 252 0   vda         58  1748.0     0.42
7531   InputThread      R 252 0   vda         30  1200.0     0.48
7504   gdbus            R 252 0   vda          3  1164.0     0.30
1983   llvmpipe-1       R 252 0   vda         39   724.0     0.08
1982   llvmpipe-0       R 252 0   vda         36   652.0     0.06
...</pre><p class="simpara">
						The results shows that the <code class="literal">dd</code> process, with the process ID 9568, performed 16,294 read operations from the <code class="literal">vda</code> disk. The read operations reached total of 14,440,636 Kbytes with an average I/O time 3.69 ms.
					</p></li></ol></div><p>
				To see more details, examples, and options for <code class="literal">biotop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/biotop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">dd</code>, see <code class="literal">dd(1)</code> manual pages.
			</p><h4 id="using_xfsslower_to_expose_unexpectedly_slow_file_system_operations">Using xfsslower to expose unexpectedly slow file system operations</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Execute the <code class="literal">xfsslower</code> program in one terminal:
					</p><pre class="screen"><code class="literal"># /usr/share/bcc/tools/xfsslower 1</code></pre><p class="simpara">
						The command above measures the time the XFS file system spends in performing read, write, open or sync (<code class="literal">fsync</code>) operations. The <code class="literal">1</code> argument ensures that the program shows only the operations that are slower than 1 ms.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When no arguments provided, <code class="literal">xfsslower</code> by default displays operations slower than 10 ms.
						</p></div></div></li><li class="listitem"><p class="simpara">
						In another terminal execute, for example, the following:
					</p><pre class="screen"><code class="literal">$ vim text</code></pre><p class="simpara">
						The command above creates a text file in the <code class="literal">vim</code> editor to initiate certain interaction with the XFS file system.
					</p></li><li class="listitem"><p class="simpara">
						The terminal running <code class="literal">xfsslower</code> shows something similar upon saving the file from the previous step:
					</p><pre class="screen">TIME     COMM           PID    T BYTES   OFF_KB   LAT(ms) FILENAME
13:07:14 b'bash'        4754   R 256     0           7.11 b'vim'
13:07:14 b'vim'         4754   R 832     0           4.03 b'libgpm.so.2.1.0'
13:07:14 b'vim'         4754   R 32      20          1.04 b'libgpm.so.2.1.0'
13:07:14 b'vim'         4754   R 1982    0           2.30 b'vimrc'
13:07:14 b'vim'         4754   R 1393    0           2.52 b'getscriptPlugin.vim'
13:07:45 b'vim'         4754   S 0       0           6.71 b'text'
13:07:45 b'pool'        2588   R 16      0           5.58 b'text'
...</pre><p class="simpara">
						Each line above represents an operation in the file system, which took more time than a certain threshold. <code class="literal">xfsslower</code> is good at exposing possible file system problems, which can take form of unexpectedly slow operations.
					</p><p class="simpara">
						The <code class="literal">T</code> column represents operation type (<span class="strong strong"><strong>R</strong></span>ead/<span class="strong strong"><strong>W</strong></span>rite/<span class="strong strong"><strong>S</strong></span>ync), <code class="literal">OFF_KB</code> is a file offset in KB. <code class="literal">FILENAME</code> is the file the process (<code class="literal">COMM</code>) is trying to read, write, or sync.
					</p></li></ol></div><p>
				To see more details, examples, and options for <code class="literal">xfsslower</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/xfsslower_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">fsync</code>, see <code class="literal">fsync(2)</code> manual pages.
			</p></section></section><section class="chapter" id="enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Enhancing security with the kernel integrity subsystem</h1></div></div></div><p>
			You can increase the protection of your system by utilizing components of the kernel integrity subsystem. The following sections introduce the relevant components and provide guidance on their configuration.
		</p><section class="section" id="the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.1. The kernel integrity subsystem</h2></div></div></div><p>
				The integrity subsystem is a part of the kernel which is responsible for maintaining the overall system’s data integrity. This subsystem helps to keep the state of a certain system the same from the time it was built thereby it prevents undesired modification on specific system files from users.
			</p><p>
				The kernel integrity subsystem consists of two major components:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Integrity Measurement Architecture (IMA)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Measures files' content whenever it is executed or opened. Users can change this behavior by applying custom policies.
								</li><li class="listitem">
									Places the measured values within the kernel’s memory space thereby it prevents any modification from the users of the system.
								</li><li class="listitem">
									Allows local and remote parties to verify the measured values.
								</li></ul></div></dd><dt><span class="term">Extended Verification Module (EVM)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Protects files' extended attributes (also known as <span class="emphasis"><em>xattr</em></span>) that are related to the system’s security, like IMA measurements and SELinux attributes, by cryptographically hashing their corresponding values.
								</li></ul></div></dd></dl></div><p>
				Both IMA and EVM also contain numerous feature extensions that bring additional functionality. For example:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">IMA-Appraisal</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Provides local validation of the current file’s content against the values previously stored in the measurement file within the kernel memory. This extension forbids any operation to be performed over a specific file in case the current and the previous measure do not match.
								</li></ul></div></dd><dt><span class="term">EVM Digital Signatures</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Allows digital signatures to be used through cryptographic keys stored into the kernel’s keyring.
								</li></ul></div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The feature extensions complement each other, but you can configure and use them independently of one another.
				</p></div></div><p>
				The kernel integrity subsystem can harness the Trusted Platform Module (TPM) to harden the system security even more. TPM is a specification by the Trusted Computing Group (TCG) for important cryptographic functions. TPMs are usually built as dedicated hardware that is attached to the platform’s motherboard and prevents software-based attacks by providing cryptographic functions from a protected and tamper-proof area of the hardware chip. Some of the TPM features are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Random-number generator
					</li><li class="listitem">
						Generator and secure storage for cryptographic keys
					</li><li class="listitem">
						Hashing generator
					</li><li class="listitem">
						Remote attestation
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For details about the kernel integrity subsystem, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://sourceforge.net/p/linux-ima/wiki/Home/">official upstream wiki page</a></span></em></span>.
					</li><li class="listitem">
						For further information about TPM, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://trustedcomputinggroup.org/resource/tpm-library-specification/">Trusted Computing Group resources</a></span></em></span>.
					</li></ul></div></section><section class="section" id="integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.2. Integrity measurement architecture</h2></div></div></div><p>
				Integrity Measurement Architecture (IMA) is a component of the kernel integrity subsystem. IMA aims to maintain the contents of local files. Specifically, IMA measures, stores, and appraises files' hashes before they are accessed, which prevents the reading and execution of unreliable data. Thereby, IMA enhances the security of the system.
			</p></section><section class="section" id="extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.3. Extended verification module</h2></div></div></div><p>
				Extended Verification Module (EVM) is a component of the kernel integrity subsystem, which monitors changes in files' extended attributes (xattr). Many security-oriented technologies, including Integrity Measurement Architecture (IMA), store sensitive file information, such as content hashes, in the extended attributes. EVM creates another hash from these extended attributes and from a special key, which is loaded at boot time. The resulting hash is validated every time the extended attribute is used. For example, when IMA appraises the file.
			</p><p>
				RHEL 8 accepts the special encrypted key under the <code class="literal">evm-key</code> keyring. The key was created by a <span class="emphasis"><em>master key</em></span> held in the kernel keyrings.
			</p></section><section class="section" id="trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.4. Trusted and encrypted keys</h2></div></div></div><p>
				The following section introduces trusted and encrypted keys as an important part of enhancing system security.
			</p><p>
				<span class="emphasis"><em>Trusted</em></span> and <span class="emphasis"><em>encrypted keys</em></span> are variable-length symmetric keys generated by the kernel that utilize the kernel keyring service. The fact that this type of keys never appear in the user space in an unencrypted form means that their integrity can be verified, which in turn means that they can be used, for example, by the extended verification module (EVM) to verify and confirm the integrity of a running system. User-level programs can only access the keys in the form of encrypted <span class="emphasis"><em>blobs</em></span>.
			</p><p>
				Trusted keys need a hardware component: the Trusted Platform Module (TPM) chip, which is used to both create and encrypt (seal) the keys. The TPM seals the keys using a 2048-bit RSA key called the <span class="emphasis"><em>storage root key</em></span> (SRK).
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To use a TPM 1.2 specification, enable and activate it through a setting in the machine firmware or by using the <code class="literal">tpm_setactive</code> command from the <code class="literal">tpm-tools</code> package of utilities. Also, the <code class="literal">TrouSers</code> software stack needs to be installed and the <code class="literal">tcsd</code> daemon needs to be running to communicate with the TPM (dedicated hardware). The <code class="literal">tcsd</code> daemon is part of the <code class="literal">TrouSers</code> suite, which is available through the <code class="literal">trousers</code> package. The more recent and backward incompatible TPM 2.0 uses a different software stack, where the <code class="literal">tpm2-tools</code> or <code class="literal">ibm-tss</code> utilities provide access to the dedicated hardware.
				</p></div></div><p>
				In addition to that, the user can seal the trusted keys with a specific set of the TPM’s <span class="emphasis"><em>platform configuration register</em></span> (PCR) values. PCR contains a set of integrity-management values that reflect the firmware, boot loader, and operating system. This means that PCR-sealed keys can only be decrypted by the TPM on the same system on which they were encrypted. However, once a PCR-sealed trusted key is loaded (added to a keyring), and thus its associated PCR values are verified, it can be updated with new (or future) PCR values, so that a new kernel, for example, can be booted. A single key can also be saved as multiple blobs, each with different PCR values.
			</p><p>
				Encrypted keys do not require a TPM, as they use the kernel Advanced Encryption Standard (AES), which makes them faster than trusted keys. Encrypted keys are created using kernel-generated random numbers and encrypted by a <span class="emphasis"><em>master key</em></span> when they are exported into user-space blobs. The master key is either a trusted key or a user key. If the master key is not trusted, the encrypted key is only as secure as the user key used to encrypt it.
			</p><section class="section" id="working-with-trusted-keys_trusted-and-encrypted-keys"><div class="titlepage"><div><div><h3 class="title">11.4.1. Working with trusted keys</h3></div></div></div><p>
					The following section describes how to create, export, load or update trusted keys with the <code class="literal">keyctl</code> utility to improve the system security.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For the 64-bit ARM architecture and IBM Z, the <code class="literal">trusted</code> kernel module needs to be loaded. For more information on how to load kernel modules, see <a class="xref" href="index.html#managing-kernel-modules_managing-monitoring-and-updating-the-kernel" title="Chapter 3. Managing kernel modules">Chapter 3, <em>Managing kernel modules</em></a>.
						</li><li class="listitem">
							Trusted Platform Module (TPM) needs to be enabled and active. For more information about TPM see, <a class="link" href="index.html#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem" title="11.1. The kernel integrity subsystem">] and xref:trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem[</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To create a trusted key using a TPM, execute:
						</p><pre class="literallayout"># keyctl add trusted &lt;<span class="emphasis"><em>name</em></span>&gt; "new &lt;<span class="emphasis"><em>key_length</em></span>&gt; [options]" &lt;<span class="emphasis"><em>key_ring</em></span>&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Based on the syntax, construct an example command as follows:
								</p><pre class="literallayout"># keyctl add trusted kmk "new 32" @u
642500861</pre><p class="simpara">
									The command creates a trusted key called <code class="literal">kmk</code> with the length of 32 bytes (256 bits) and places it in the user keyring (<code class="literal">@u</code>). The keys may have a length of 32 to 128 bytes (256 to 1024 bits).
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							To list the current structure of the kernel keyrings:
						</p><pre class="literallayout"># keyctl show
Session Keyring
       -3 --alswrv    500   500  keyring: <span class="emphasis"><em>ses 97833714 --alswrv 500 -1 \</em></span> keyring: <span class="emphasis"><em>uid.1000 642500861 --alswrv 500 500 \</em></span> trusted: kmk</pre></li><li class="listitem"><p class="simpara">
							To export the key to a user-space blob, execute:
						</p><pre class="literallayout"># keyctl pipe 642500861 &gt; kmk.blob</pre><p class="simpara">
							The command uses the <code class="literal">pipe</code> subcommand and the serial number of <code class="literal">kmk</code>.
						</p></li><li class="listitem"><p class="simpara">
							To load the trusted key from the user-space blob, use the <code class="literal">add</code> subcommand with the blob as an argument:
						</p><pre class="literallayout"># keyctl add trusted kmk "load `cat kmk.blob`" @u
268728824</pre></li><li class="listitem"><p class="simpara">
							Create secure encrypted keys based on the TPM-sealed trusted key:
						</p><pre class="literallayout"># keyctl add encrypted &lt;<span class="emphasis"><em>name</em></span>&gt; "new [format] &lt;<span class="emphasis"><em>key_type</em></span>&gt;:&lt;<span class="emphasis"><em>master_key_name</em></span>&gt; &lt;<span class="emphasis"><em>keylength</em></span>&gt;" &lt;<span class="emphasis"><em>key_ring</em></span>&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Based on the syntax, generate an encrypted key using the already created trusted key:
								</p><pre class="literallayout"># keyctl add encrypted encr-key "new trusted:kmk 32" @u
159771175</pre><p class="simpara">
									The command uses the TPM-sealed trusted key (<code class="literal">kmk</code>), produced in the previous step, as a <span class="emphasis"><em>master key</em></span> for generating encrypted keys.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For detailed information about using <code class="literal">keyctl</code>, see the <code class="literal">keyctl(1)</code> manual page.
						</li><li class="listitem">
							For more information about trusted and encrypted keys, see <a class="xref" href="index.html#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" title="11.4. Trusted and encrypted keys">Section 11.4, “Trusted and encrypted keys”</a>.
						</li><li class="listitem">
							For more information about the kernel keyring service, see the <a class="link" href="https://www.kernel.org/doc/html/v4.18/security/keys/core.html#">upstream kernel documentation</a>.
						</li><li class="listitem">
							For more information about the TPM, see <a class="xref" href="index.html#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem" title="11.1. The kernel integrity subsystem">Section 11.1, “The kernel integrity subsystem”</a>.
						</li></ul></div></section><section class="section" id="working-with-encrypted-keys_trusted-and-encrypted-keys"><div class="titlepage"><div><div><h3 class="title">11.4.2. Working with encrypted keys</h3></div></div></div><p>
					The following section describes managing encrypted keys to improve the system security on systems where a Trusted Platform Module (TPM) is not available.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For the 64-bit ARM architecture and IBM Z, the <code class="literal">encrypted-keys</code> kernel module needs to be loaded. For more information on how to load kernel modules, see <a class="xref" href="index.html#managing-kernel-modules_managing-monitoring-and-updating-the-kernel" title="Chapter 3. Managing kernel modules">Chapter 3, <em>Managing kernel modules</em></a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use a random sequence of numbers to generate a user key:
						</p><pre class="literallayout"># keyctl add user kmk-user “dd if=/dev/urandom bs=1 count=32 2&gt;/dev/null” @u
427069434</pre><p class="simpara">
							The command generates a user key called <code class="literal">kmk-user</code> which acts as a <span class="emphasis"><em>master key</em></span> and is used to seal the actual encrypted keys.
						</p></li><li class="listitem"><p class="simpara">
							Generate an encrypted key using the master key from the previous step:
						</p><pre class="literallayout"># keyctl add encrypted encr-key "new user:kmk-user 32" @u
1012412758</pre></li><li class="listitem"><p class="simpara">
							Optionally, list all keys in the specified user keyring:
						</p><pre class="literallayout"># keyctl list @u
2 keys in keyring:
427069434: --alswrv  1000  1000 user: kmk-user
1012412758: --alswrv  1000  1000 encrypted: encr-key</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Keep in mind that encrypted keys that are not sealed by a master trusted key are only as secure as the user master key (random-number key) used to encrypt them. Therefore, the master user key should be loaded as securely as possible and preferably early during the boot process.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For detailed information about using <code class="literal">keyctl</code>, see the <code class="literal">keyctl(1)</code> manual page.
						</li><li class="listitem">
							For more information about the kernel keyring service, see the <a class="link" href="https://www.kernel.org/doc/html/v4.18/security/keys/core.html#">upstream kernel documentation</a>.
						</li></ul></div></section></section><section class="section" id="enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.5. Enabling integrity measurement architecture and extended verification module</h2></div></div></div><p>
				Integrity measurement architecture (IMA) and extended verification module (EVM) belong to the kernel integrity subsystem and enhance the system security in various ways. The following section describes how to enable and configure IMA and EVM to improve the security of the operating system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">securityfs</code> filesystem is mounted on the <code class="literal">/sys/kernel/security/</code> directory and the <code class="literal">/sys/kernel/security/integrity/ima/</code> directory exists.
					</p><pre class="literallayout"># mount
…​
securityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)
…​</pre></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">systemd</code> service manager is already patched to support IMA and EVM on boot time:
					</p><pre class="literallayout"># dmesg | grep -i -e EVM -e IMA
[    0.000000] Command line: BOOT_IMAGE=(hd0,msdos1)/vmlinuz-4.18.0-167.el8.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet
[    0.000000] kvm-clock: cpu 0, msr 23601001, primary cpu clock
[    0.000000] Using crashkernel=auto, the size chosen is a best effort estimation.
[    0.000000] Kernel command line: BOOT_IMAGE=(hd0,msdos1)/vmlinuz-4.18.0-167.el8.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet
[    0.911527] ima: No TPM chip found, activating TPM-bypass!
[    0.911538] ima: Allocated hash algorithm: sha1
[    0.911580] evm: Initialising EVM extended attributes:
[    0.911581] evm: security.selinux
[    0.911581] evm: security.ima
[    0.911582] evm: security.capability
[    0.911582] evm: HMAC attrs: 0x1
[    1.715151] systemd[1]: systemd 239 running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=legacy)
[    3.824198] fbcon: qxldrmfb (fb0) is primary device
[    4.673457] PM: Image not found (code -22)
[    6.549966] systemd[1]: systemd 239 running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN2 -IDN +PCRE2 default-hierarchy=legacy)</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the following kernel command line parameters:
					</p><pre class="literallayout"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="ima_policy=appraise_tcb ima_appraise=fix evm=fix"</pre><p class="simpara">
						The command enables IMA and EVM in the <span class="emphasis"><em>fix</em></span> mode for the current boot entry and allows users to gather and update the IMA measurements.
					</p><p class="simpara">
						The <code class="literal">ima_policy=appraise_tcb</code> kernel command line parameter ensures that the kernel uses the default Trusted Computing Base (TCB) measurement policy and the appraisal step. The appraisal part forbids access to files, whose prior and current measures do not match.
					</p></li><li class="listitem">
						Reboot to make the changes come into effect.
					</li><li class="listitem"><p class="simpara">
						Optionally, verify that the parameters have been added to the kernel command line:
					</p><pre class="literallayout"># cat /proc/cmdline
BOOT_IMAGE=(hd0,msdos1)/vmlinuz-4.18.0-167.el8.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet ima_policy=appraise_tcb ima_appraise=fix evm=fix</pre></li><li class="listitem"><p class="simpara">
						Create a kernel master key to protect the EVM key:
					</p><pre class="literallayout"># keyctl add user kmk <code class="literal">dd if=/dev/urandom bs=1 count=32 2&gt; /dev/null</code> @u
748544121</pre><p class="simpara">
						The kernel master key (<code class="literal">kmk</code>) is kept entirely in the kernel space memory. The 32-byte long value of the kernel master key <code class="literal">kmk</code> is generated from random bytes from the <code class="literal">/dev/urandom</code> file and placed in the user (<code class="literal">@u</code>) keyring. The key serial number is on the second line of the previous output.
					</p></li><li class="listitem"><p class="simpara">
						Create an encrypted EVM key based on the <code class="literal">kmk</code> key:
					</p><pre class="literallayout"># keyctl add encrypted evm-key "new user:kmk 64" @u
641780271</pre><p class="simpara">
						The command uses <code class="literal">kmk</code> to generate and encrypt a 64-byte long user key (named <code class="literal">evm-key</code>) and places it in the user (<code class="literal">@u</code>) keyring. The key serial number is on the second line of the previous output.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							It is necessary to name the user key as <span class="strong strong"><strong>evm-key</strong></span> because that is the name the EVM subsystem is expecting and is working with.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Create a directory for exported keys:
					</p><pre class="literallayout"># mkdir -p /etc/keys/</pre></li><li class="listitem"><p class="simpara">
						Search for the <code class="literal">kmk</code> key and export its value into a file:
					</p><pre class="literallayout"># keyctl pipe <code class="literal">keyctl search @u user kmk</code> &gt; /etc/keys/kmk</pre><p class="simpara">
						The command places the unencrypted value of the kernel master key (<code class="literal">kmk</code>) into a file of previously defined location (<code class="literal">/etc/keys/</code>).
					</p></li><li class="listitem"><p class="simpara">
						Search for the <code class="literal">evm-key</code> user key and export its value into a file:
					</p><pre class="literallayout"># keyctl pipe <code class="literal">keyctl search @u encrypted evm-key</code> &gt; /etc/keys/evm-key</pre><p class="simpara">
						The command places the encrypted value of the user <code class="literal">evm-key</code> key into a file of arbitrary location. The <code class="literal">evm-key</code> has been encrypted by the kernel master key earlier.
					</p></li><li class="listitem"><p class="simpara">
						Optionally, view the newly created keys:
					</p><pre class="literallayout"># keyctl show
Session Keyring
974575405   --alswrv     0        0      keyring: <span class="emphasis"><em>ses 299489774 --alswrv 0 65534 \</em></span> keyring: <span class="emphasis"><em>uid.0 748544121 --alswrv 0 0 \</em></span> user: kmk
641780271   --alswrv     0        0           \_ encrypted: evm-key</pre><p class="simpara">
						You should be able to see a similar output.
					</p></li><li class="listitem"><p class="simpara">
						Activate EVM:
					</p><pre class="literallayout"># echo 1 &gt; /sys/kernel/security/evm</pre></li><li class="listitem"><p class="simpara">
						Optionally, verify that EVM has been initialized:
					</p><pre class="literallayout"># dmesg | tail -1
[…​] evm: key initialized</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about the kernel integrity subsystem, see <a class="xref" href="index.html#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem" title="11.1. The kernel integrity subsystem">Section 11.1, “The kernel integrity subsystem”</a>.
					</li><li class="listitem">
						For more information about Integrity Measurement Architecture, see <a class="xref" href="index.html#integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem" title="11.2. Integrity measurement architecture">Section 11.2, “Integrity measurement architecture”</a>.
					</li><li class="listitem">
						For more information about Extended Verification Module, see <a class="xref" href="index.html#extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem" title="11.3. Extended verification module">Section 11.3, “Extended verification module”</a>.
					</li><li class="listitem">
						For more information about creating encrypted keys, see <a class="xref" href="index.html#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" title="11.4. Trusted and encrypted keys">Section 11.4, “Trusted and encrypted keys”</a>.
					</li></ul></div></section><section class="section" id="collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.6. Collecting file hashes with integrity measurement architecture</h2></div></div></div><p>
				The first level of operation of integrity measurement architecture (IMA) is the <span class="emphasis"><em>measurement</em></span> phase, which allows to create file hashes and store them as extended attributes (xattrs) of those files. The following section describes how to create and inspect the files' hashes.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Enable integrity measurement architecture (IMA) and extended verification module (EVM) as described in <a class="xref" href="index.html#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem" title="11.5. Enabling integrity measurement architecture and extended verification module">Section 11.5, “Enabling integrity measurement architecture and extended verification module”</a>.
					</li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">ima-evm-utils</code>, <code class="literal">attr</code>, and <code class="literal">keyutils</code> packages are already installed:
					</p><pre class="literallayout"># yum install ima-evm-utils attr keyutils
Updating Subscription Management repositories.
This system is registered to Red Hat Subscription Management, but is not receiving updates. You can use subscription-manager to assign subscriptions.
Last metadata expiration check: 0:58:22 ago on Fri 14 Feb 2020 09:58:23 AM CET.
Package ima-evm-utils-1.1-5.el8.x86_64 is already installed.
Package attr-2.4.48-3.el8.x86_64 is already installed.
Package keyutils-1.5.10-7.el8.x86_64 is already installed.
Dependencies resolved.
Nothing to do.
Complete!</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a test file:
					</p><pre class="literallayout"># echo &lt;<span class="emphasis"><em>Test_text</em></span>&gt; &gt; test_file</pre><p class="simpara">
						IMA and EVM ensure that the example file <code class="literal">test_file</code> is assigned hash values, which are stored as its extended attributes.
					</p></li><li class="listitem"><p class="simpara">
						Inspect extended attributes of the file:
					</p><pre class="literallayout"># getfattr -m . -d test_file
# file: test_file
security.evm=0sAnDIy4VPA0HArpPO/EqiutnNyBql
security.ima=0sAQOEDeuUnWzwwKYk+n66h/vby3eD
security.selinux="unconfined_u:object_r:admin_home_t:s0"</pre><p class="simpara">
						The previous example output shows extended attributes related to SELinux and the IMA and EVM hash values. EVM actively adds a <code class="literal">security.evm</code> extended attribute and detects any offline tampering to xattrs of other files such as <code class="literal">security.ima</code> that are directly related to content integrity of files. The value of the <code class="literal">security.evm</code> field is in Hash-based Message Authentication Code (HMAC-SHA1), which was generated with the <code class="literal">evm-key</code> user key.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For further information about general security concepts in Red Hat Enterprise Linux 8, see the relevant sections of <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/security_hardening/index">Security hardening</a></span></em></span>.
					</li><li class="listitem">
						For information about Integrity Measurement Architecture, see <a class="xref" href="index.html#integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem" title="11.2. Integrity measurement architecture">Section 11.2, “Integrity measurement architecture”</a>.
					</li><li class="listitem">
						For information about Extended Verification Module, see <a class="xref" href="index.html#extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem" title="11.3. Extended verification module">Section 11.3, “Extended verification module”</a>.
					</li></ul></div></section><section class="section" id="related-information-enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h2 class="title">11.7. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For further information about general security concepts in Red Hat Enterprise Linux 8, see the relevant sections of <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/security_hardening/index">Security hardening</a></span></em></span>.
					</li><li class="listitem">
						For details about IMA and EVM see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://sourceforge.net/p/linux-ima/wiki/Home/">official upstream wiki page</a></span></em></span>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/using_selinux/index">Basic and advanced configuration of Security-Enhanced Linux (SELinux)</a> describes the basic principles of SELinux and documents in detail how to configure and use SELinux with various services, such as the Apache HTTP Server.
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm139829861115232"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
