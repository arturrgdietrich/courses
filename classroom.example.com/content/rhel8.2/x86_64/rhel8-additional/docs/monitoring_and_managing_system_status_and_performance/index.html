<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="content: http://purl.org/rss/1.0/modules/content/ dc: http://purl.org/dc/terms/ foaf: http://xmlns.com/foaf/0.1/ og: http://ogp.me/ns# rdfs: http://www.w3.org/2000/01/rdf-schema# sioc: http://rdfs.org/sioc/ns# sioct: http://rdfs.org/sioc/types# skos: http://www.w3.org/2004/02/skos/core# xsd: http://www.w3.org/2001/XMLSchema# article: http://ogp.me/ns/article# book: http://ogp.me/ns/book# profile: http://ogp.me/ns/profile# video: http://ogp.me/ns/video#" >

<head profile="http://www.w3.org/1999/xhtml/vocab">
	  <!--[if IE]><![endif]-->
<meta charset="utf-8" />
<meta name="revision" title="b87908b6-1e9c-4d34-8396-6ecec6663f7e" product="f321f43a-4a79-48fe-8aae-117b9d973ec0" revision="49843a6f7d3010e16c3658b5dd7e2cb78c07fb9a:en-us" page="7edabdb6-a94d-4edb-af8b-f9dc37c2a970" />
<meta name="generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/index" />
<link rel="shortlink" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/index" />
<meta property="og:site_name" content="Red Hat Customer Portal" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/index" />
<meta property="og:title" content="Monitoring and managing system status and performance Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta property="og:description" content="This documentation collection provides instructions on how to monitor and optimize the throughput, latency, and power consumption of Red Hat Enterprise Linux 8 in different scenarios." />
<meta property="og:image" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:url" content="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/index" />
<meta name="twitter:title" content="Monitoring and managing system status and performance Red Hat Enterprise Linux 8 | Red Hat Customer Portal" />
<meta name="twitter:description" content="This documentation collection provides instructions on how to monitor and optimize the throughput, latency, and power consumption of Red Hat Enterprise Linux 8 in different scenarios." />
<meta name="twitter:image:src" content="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" />
  <title>Monitoring and managing system status and performance Red Hat Enterprise Linux 8 | Red Hat Customer Portal</title>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<!--[if IEMobile]><meta http-equiv="cleartype" content="on"><![endif]-->

<!-- metaInclude -->
<meta name="avalon-host-info" content="kcs07.web.prod.ext.phx2.redhat.com" />
<meta name="avalon-version" content="6f12fc6" />
<meta name="cp-chrome-build-date" content="2020-06-23T22:47:47.449Z" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<link rel="manifest" href="https://access.redhat.com/webassets/avalon/j/manifest.json">
<!-- Open Search - Tap to search -->
<link rel="search" type="application/opensearchdescription+xml" title="Red Hat Customer Portal" href="https://access.redhat.com/webassets/avalon/j/opensearch.xml" />

 

<script type="text/javascript">
    window.portal = {
        analytics : {},
        host      : "https://access.redhat.com",
        idp_url   : "https://sso.redhat.com",
        lang      : "en",  
        version   : "6f12fc6",
        builddate : "2020-06-23T22:47:47.449Z",
        fetchdate : "2020-06-24T10:40:11-0400",
        nrid      : "14615289",
        nrlk      : "2a497fa56f"
    };
</script>
<script type="text/javascript">
    if (!/\/logout.*/.test(location.pathname) && portal.host === location.origin && document.cookie.indexOf('rh_sso_session') >= 0 && !(document.cookie.indexOf('rh_jwt') >= 0)) window.location = '/login?redirectTo=' + encodeURIComponent(window.location.href);
</script>
<!-- cssInclude -->

<link rel="shortcut icon" href="favicon.ico" />

<link media="all" rel="stylesheet" type="text/css" href="bootstrap.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="main.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="components.css%3Fv=6f12fc6.css" />
<link media="all" rel="stylesheet" type="text/css" href="pages.css%3Fv=6f12fc6.css" />

<link href="chosen.css%3Fv=6f12fc6.css" rel="stylesheet" type="text/css" />

<!--[if lte IE 9]>
<link media="all" rel="stylesheet" type="text/css" href="https://access.redhat.com/chrome_themes/nimbus/css/ie.css" />
<![endif]-->

<noscript>
    <style type="text/css" media="screen"> .primary-nav { display: block; } </style>
</noscript>

<!-- /cssInclude -->
<script type="text/javascript" src="require.js%3Fv=6f12fc6" data-main="/webassets/avalon/j/"></script>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<script src="https://access.redhat.com/chrome_themes/nimbus/js/ie8.js"></script>
<![endif]-->
  <link type="text/css" rel="stylesheet" href="css__c2Nkkx_5vYh8rvZbfBAGB4EMzMtH5ouFJDBlDsnhSR8__-ax0_8bam15ZDJT9j7LilCfJrDyEhGGAgc0KC8HYvJg__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__Jy3BSr8TrxptaufAzQDT1skBUlX2CnL_wm6BizzYuGw__-YZvqB8yuA4kK_iKklbk5HdZCoG2qAgz1l-8Qi2NFH4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="messages.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__m76iIFREtc70Nmw5xe1ZwHbNBlwOP2Zjc3DcacNWnFQ__STEh8aY3w8E_bKzhB4Xke2WOQ9XMDQquHIP5B8SeDIY__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="all" />
<link type="text/css" rel="stylesheet" href="css__4sM4s6XOQ2Nm0pdkrWRLvrgtwpTmHAFzR_LcdesKYj8__vJ0jjVEhoPh3KBeLZfkqg51T3AFxhQCuXg1reipa__k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.css" media="print" />
  <link rel="stylesheet" type="text/css" media="all" href="list.css" />
  <script src="js__ZyeOaiFuDejQQbhUV7yg7atYZnj4WLfH77o0scv4068__9KHtXrIGK7UhLs_peypOVV_qqUEhk0WY1m6BXUOA27E__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__5ysXPc5KIyMmizxqRY68ILfrEGrj0P29WBIifnPTJvQ__Cap0DACEVMsefumg1gS1APLLd8stDkdGfp6c1uswMo4__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>chrometwo_require(["analytics/attributes"], function(attributes) {
attributes.set('ResourceID',       'b87908b6-1e9c-4d34-8396-6ecec6663f7e');
attributes.set('ResourceTitle',    'Monitoring and managing system status and performance');
attributes.set('Language',         'en-us');
attributes.set('RevisionId',       '49843a6f7d3010e16c3658b5dd7e2cb78c07fb9a:en-us');
attributes.set('PublicationState', ['active','published']);
attributes.set('Product',          'Red Hat Enterprise Linux');
attributes.set('ProductVersion',   '8');
attributes.set('ProductId',        'Red Hat Enterprise Linux 8');
});</script>
<script>breadcrumbs = [ ["Products &amp; Services", "/products/"], ["Product Documentation", "/documentation/"], ["Red Hat Enterprise Linux", "/documentation/en-us/red_hat_enterprise_linux/"], ["8", "/documentation/en-us/red_hat_enterprise_linux/8/"], ["Monitoring and managing system status and performance", "/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/"] ];</script>
<script>window.siteMapState = "products";</script>
<script src="js__i6ieGBO-OPmIKm_f0srsb6gM7QELIWrBpKh6ub_yj8A__wjRg_duSK4rEZCRV2uwrCIPMl80Z_LJ9ew61H5hE-ZI__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script src="js__vGeEtorfXGI3aPAp71YA74N5p8wfpYVhnoIqwaJrOiQ__8abcou7ybLtGOLy-V9E-NQlDejOMZmdStjlYfyX9W-k__7oVp6UW_380R7g-dHXPK35SfMqy4yUfhIx8G4wh5Zdk.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"kcs","theme_token":"1wy2svdh_0UfX-VCJ4yOnK8kIlvGOOIXZ2bEHgvFy2k","js":{"misc\/jquery-extend-3.4.0.js":1,"misc\/jquery-html-prefilter-3.5.0-backport.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.jquery.min.js":1,"modules\/chosen\/chosen.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/prism.js":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/js\/underscore.js":1,"sites\/all\/themes\/kcs\/js\/kcs_base.js":1,"sites\/all\/themes\/kcs\/js\/showdown.js":1,"sites\/all\/themes\/kcs\/js\/case_links.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/date\/date_api\/date.css":1,"modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/contrib\/user_prune\/css\/user_prune.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/libraries\/chosen\/chosen\/chosen.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/contrib\/panels\/css\/panels.css":1,"sites\/all\/modules\/custom\/rate\/rate.css":1,"sites\/all\/modules\/custom\/rh_doc_fetcher\/plugins\/layouts\/docs_page\/docs_page.css":1,"https:\/\/access.redhat.com\/webassets\/avalon\/s\/messages.css":1,"sites\/all\/themes\/zen\/system.base.css":1,"sites\/all\/themes\/zen\/system.menus.css":1,"sites\/all\/themes\/zen\/system.messages.css":1,"sites\/all\/themes\/zen\/system.theme.css":1,"sites\/all\/themes\/zen\/comment.css":1,"sites\/all\/themes\/zen\/node.css":1,"sites\/all\/themes\/kcs\/css\/html-reset.css":1,"sites\/all\/themes\/kcs\/css\/wireframes.css":1,"sites\/all\/themes\/kcs\/css\/layout-fixed.css":1,"sites\/all\/themes\/kcs\/css\/page-backgrounds.css":1,"sites\/all\/themes\/kcs\/css\/tabs.css":1,"sites\/all\/themes\/kcs\/css\/pages.css":1,"sites\/all\/themes\/kcs\/css\/blocks.css":1,"sites\/all\/themes\/kcs\/css\/navigation.css":1,"sites\/all\/themes\/kcs\/css\/views-styles.css":1,"sites\/all\/themes\/kcs\/css\/nodes.css":1,"sites\/all\/themes\/kcs\/css\/comments.css":1,"sites\/all\/themes\/kcs\/css\/forms.css":1,"sites\/all\/themes\/kcs\/css\/fields.css":1,"sites\/all\/themes\/kcs\/css\/kcs.css":1,"sites\/all\/themes\/kcs\/css\/print.css":1}},"chosen":{"selector":"#edit-field-kcs-component-select-und, #edit-field-kcs-sbr-select-und, #edit-field-kcs-product-select-und, #edit-field-kcs-type-select-und, #edit-language, #edit-field-kcs-a-category-select-und, #edit-field-kcs-state-select-und, #edit-field-kcs-tags-select-und, #edit-field-kcs-state-select-value, #edit-field-vid-reference-product-und, #edit-state, #edit-product, #edit-category, #edit-field-kcs-product-select-tid, #edit-field-kcs-type-select-tid, #edit-field-kcs-a-category-select-tid, #edit-sort-bef-combine, #edit-kcs-state, #edit-field-category-tid, #edit-field-product-tid, #edit-field-tags-tid, #edit-field-category-und, #edit-field-product-und, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-category, #edit-field-tags-und, #views-exposed-form-questions-list-questions-filter-block #edit-field-product, #views-exposed-form-questions-list-questions-filter-block #edit-field-tags, #edit-field-mega-menu-tab-und, #edit-field-internal-tags-tid, #edit-tags, #edit-field-kcs-tags-select-tid, #edit-subscriptions-and-choose-field-select, #edit-subscriptions-and-type, #edit-vid-13, #edit-vid-4, #edit-vid-5, #edit-vid-53, #edit-vid-1, #edit-vid-3, #edit-group-blog, #edit-group-group, #edit-subscriptions-and-choose-field-select-two, #edit-subscriptions-and-type-two, #edit-vid-13-two, #edit-vid-4-two, #edit-vid-5-two, #edit-vid-53-two, #edit-vid-1-two, #edit-vid-3-two, #edit-group-blog-two, #edit-group-group-two, #edit-subscriptions-and-edit-choose-field-select, #edit-subscriptions-and-type-edit, #edit-subscriptions-and-edit-type-two, #edit-vid-13-edit-two, #edit-vid-4-edit-two, #edit-vid-5-edit-two, #edit-vid-53-edit-two, #edit-vid-1-edit-two, #edit-vid-3-edit-two, #edit-group-group-edit-two, #edit-subscriptions-and-edit-choose-field-select-two, #edit-vid-13-edit, #edit-vid-4-edit, #edit-vid-5-edit, #edit-vid-53-edit, #edit-vid-1-edit, #edit-vid-3-edit, #edit-group-group-edit, #edit-group-blog-edit, #edit-field-supported-languages-tid, #edit-field-geography-und, #edit-field-supported-products-und, #edit-field-supported-languages-und, #edit-field-vendor-und, #edit-field-errata-type-text-und, #edit-field-errata-severity-text-und, #edit-field-software-partner-level-und, #edit-field-scert-product-category-und, #edit-field-certifications-und-0-field-product-und, #edit-kcs-article-type, #edit-field-eco-industry-tag-select-tid, #edit-field-eco-software-catego-select-tid, #edit-field-ecosystem-tag-select-und, #edit-field-eco-industry-tag-select-und, #edit-field-eco-software-catego-select-und, #edit-field-vendor-tsanet-member-ref-und, #edit-field-og-vendor-ref-und-0-default, #edit-field-eco-products-enabled-col-und-0-field-eco-subscription-model-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-support-level-ref-und, #edit-field-eco-products-enabled-col-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-select-und, #edit-field-eco-certifications-select-und-0-field-eco-product-archite-select-und, #edit-field-eco-certifications-select-und-0-field-eco-certificati-lvl-select-und, #edit-field-eco-certifications-select-und-0-field-eco-hypervisor-str-und, #edit-field-eco-supported-language-ref-und, #edit-field-eco-region-ref-und, #edit-field-cs-product-category-str-und, #edit-field-eco-certifications-select-und-0-field-eco-format-ref-und, #edit-field-eco-group-access-ref-und, #edit-field-hw-category-tag-ref-und, #edit-field-profile-industry-und, #edit-field-profile-tech-interests-und, #edit-field-product-page-features-ref-und, #edit-field-eco-product-select-und, #edit-field-base-product-ref-und, #edit-field-eco-product-archite-select-und, #edit-field-eco-format-ref-und, #edit-field-certification-status-ref-und, #edit-field-certification-result-ref-und, #edit-field-og-certified-product-ref-und-0-default, #edit-field-eco-subscription-model-ref-und, #edit-field-eco-support-level-ref-und, #edit-field-eco-certificati-lvl-select-und, #edit-field-eco-hypervisor-str-und, #edit-field-ccp-thirdparty-cert-select-und, .use_, #edit-field-eco-cert-product-tag-und, #edit-field-documentation-location-ref-und, #edit-field-documentation-title-und, #edit-field-accelerator-products-und","minimum":"0"},"rh_doc_fetcher":{"page_type":"single"},"section":"","kcs":{"nodeType":null,"nodeId":null}});</script>
    <!--[if lt IE 9]>
  <script src="https://access.redhat.com/sites/all/themes/kcs/js/html5shiv.js"></script>
  <![endif]-->
  
      


    <!--kcs06-->
<script type="text/javascript">
  Drupal.portal = {"version":{"redhat_portal":"package drupal7-redhat_portal is not installed"}};
  Drupal.portal.currentUser = {};
  </script>

</head>

<body class="portal-page  kcs_external" >
  
  <div id="page-wrap" class="page-wrap">
    <div class="top-page-wrap">

        <!--googleoff: all-->
        <header class="masthead" id="masthead">

            <!-- Accessibility Nav & Header -->
<div class="accessibility-nav sr-only">
    <a href="https://access.redhat.com/">
        <h1>Red Hat <span>Customer </span><span>Portal</span></h1>
    </a>
    <p><a href="index.html#cp-main">Skip to main content</a></p>
    <nav aria-labelledby="accessibility-nav-heading">
        <h2 id="accessibility-nav-heading">Main Navigation</h2>
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="accessibility-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="accessibility-accountUser">
                    <div class="account-name"><strong id="accessibility-userFullName"></strong></div>
                    <div class="account-org"><span id="accessibility-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="accessibility-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="accessibility-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="accessibility-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="accessibility-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="accessibility-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="accessibility-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- Mobile Header -->
<nav class="mobile-nav-bar hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <button id="menu-btn" class="menu menu-white" type="button" aria-label="Toggle Navigation">
        <span class="lines"></span>
    </button>
    <a class="logo" href="https://access.redhat.com/">
        <span class="logo-crop">
          <!-- logo -->
          <span class="sr-only">Red Hat Customer Portal</span>
          <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
            <defs>
            <style>
              .rh-logo-type {
                fill:#fff;
              }
              .rh-logo-hat {
                fill:#e00;
              }
            </style>
            </defs>
            <g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
          </svg>
        </span>
            </a>
    <button class="btn btn-search btn-utility" data-target="#site-search">
        <span class="web-icon-search"></span>
        <span class="link-text">Search</span>
    </button>
</nav>

<!-- Mobile Menu Drawer -->
<div class="nav-drawer mobile-nav-drawer hidden-sm hidden-md hidden-lg" aria-hidden="true">
    <nav class="nav-container">
        <ul>
    <li>
        <a href="index.html#" class="has-subnav"><span>Products &amp; Services</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/products">View All Products</a></li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Infrastructure and Management</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a></li>
                    <li><a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|p|im|rhaijan2016&">Red Hat Insights</a></li>
                    <li><a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Cloud Computing</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a></li>
                    <li><a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Storage</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a></li>
                    <li><a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a></li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Runtimes</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true">
                      <a href="index.html#" class="back">Back</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="index.html#" class="has-subnav"><span>Integration and Automation</span></a>
                <ul class="mm-hide">
                    <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                    </li>
                    <li>
                      <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                    </li>
                    <li>
                        <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                    </li>
                </ul>
            </li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/support/">Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
            <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
            <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>

            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://access.redhat.com/documentation/">Documentation</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
            <li><a href="https://access.redhat.com/documentation/en-us/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>

            <li class="heading">Services</li>
            <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
            <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
            <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>

            
            <li class="heading"><a class="cta-link cta-link-darkbg" href="https://catalog.redhat.com/">Ecosystem Catalog</a></li>
            <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
            <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
          </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Tools</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/insights/info/?intcmp=mm|t|c1|rhaidec2015&">Red Hat Insights</a></li>
            <li class="heading">Tools</li>
            <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
            <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
            <li><a href="https://access.redhat.com/errata/">Errata</a></li>
            <li class="heading">Customer Portal Labs</li>
            <li><a href="https://access.redhat.com/labs/">Explore Labs</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
            <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Security</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/security/">Product Security Center</a></li>
            <li class="heading">Security Updates</li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
            <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
            <li class="heading">Resources</li>
            <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
            <li><a href="https://access.redhat.com/blogs/product-security">Security Blog</a></li>
            <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
            <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
            <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
            <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Community</span></a>
        <ul class="mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="heading">Customer Portal Community</li>
            <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
            <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
            <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
            <li><a href="https://access.redhat.com/community/">Community Activity</a></li>
            <li class="heading">Customer Events</li>
            <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
            <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
            <li class="heading">Stories</li>
            <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
            <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
            <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
        </ul>
    </li>
    <li><a href="https://access.redhat.com/management/">Subscriptions</a></li>
    <li><a href="https://access.redhat.com/downloads/">Downloads</a></li>
    <li><a href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
    <li><a href="https://access.redhat.com/support/cases/">Support Cases</a></li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Account</span></a>
        <ul class="utility mm-hide">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://access.redhat.com/login" id="mobile-accountLogin">Log In</a></li>
            <li class="mobile-accountLinksLoggedOut unauthenticated"><a href="https://www.redhat.com/wapps/ugc/register.html">Register</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated">
                <div class="account-info" id="mobile-accountUser">
                    <div class="account-name"><strong id="mobile-userFullName"></strong></div>
                    <div class="account-org"><span id="mobile-userOrg"></span></div>
                    <div class="account-number mobile-accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                </div>
            </li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
            <!-- <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user">My Profile</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/user" id="mobile-userNotificationsLink">Notifications</a></li>
            <li class="mobile-accountLinksLoggedIn authenticated"><a href="https://access.redhat.com/help/">Help</a></li>
            <li class="logout mobile-accountLinksLoggedIn authenticated"><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout">Log Out</a></li>
        </ul>
    </li>
    <li>
        <a href="index.html#" class="has-subnav"><span>Language</span></a>
        <ul class="utility mm-hide" id="mobile-localesMenu">
            <li aria-hidden="true"><a href="index.html#" class="back">Back</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=en" id="mobile-en">English</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ko" id="mobile-ko">한국어</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=ja" id="mobile-ja">日本語</a></li>
            <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" id="mobile-zh_CN">中文 (中国)</a></li>
		</ul>
    </li>
</ul>
    </nav>
</div>

<!-- White Utility Menu for large screens -->
<div class="utility-wrap" aria-hidden="true">
    <div class="utility-container">
        <div class="utility-bar hidden-xs">
            <div role="navigation" class="top-nav">
                <ul>
                    <li id="nav-subscription" data-portal-tour-1="1"><a class="top-nav-subscriptions" href="https://access.redhat.com/management/">Subscriptions</a></li>
                    <li id="nav-downloads" data-portal-tour-1="2"><a class="top-nav-downloads" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li id="nav-containers"><a class="top-nav-containers" href="https://catalog.redhat.com/software/containers/explore/">Containers</a></li>
                    <li id="nav-support" data-portal-tour-1="3"><a class="top-nav-support-cases" href="https://access.redhat.com/support/cases/">Support Cases</a></li>
                </ul>
            </div>

            <div role="navigation" class="utility-nav">
                <ul>
                    <li id="searchABTestHide">
                        <a class="btn-search" data-target="#site-search" title="Search" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-search" aria-label="search"></span>
                            <span class="link-text">Search</span>
                        </a>
                    </li>
                    <!-- AB Test -->
                    <li id="searchABTestShow">
                        <form id="topSearchFormABTest" name="topSearchFormABTest">
                            <label for="topSearchInputABTest" class="sr-only">Search</label>
                            <input id="topSearchInputABTest" name="keyword" placeholder="Search" value="" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control">
                            <button type="submit" class="btn btn-app btn-sm btn-link"><span class="web-icon-search" aria-label="search"></span></button>
                        </form>
                    </li>
                    <!-- End of AB Test -->
                    <li>
                        <a class="btn-profile" data-target="#account-info" data-portal-tour-1="4a" title="Account" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-user" aria-label="log in"></span>
                            <span class="link-text">Log In</span>
                            <span class="account-user" id="accountUserName"></span>
                        </a>
                    </li>
                    <li>
                        <a class="btn-language" data-target="#language" data-portal-tour-1="6" title="Language" data-toggle="tooltip" data-placement="bottom">
                            <span class="web-icon-globe" aria-label="language"></span>
                            <span class="link-text">Language</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Utility Tray -->
        <div class="utility-tray-container">
            <div class="utility-tray">
                <div id="site-search" class="utility-link site-search">
                    <div class="content">
                        <form class="ng-pristine ng-valid topSearchForm" id="topSearchForm" name="topSearchForm" action="https://access.redhat.com/search/browse/search/" method="get" enctype="application/x-www-form-urlencoded">
                            <div class="input-group push-bottom">

                                <input class="form-control searchField" id="topSearchInput" name="keyword" value="" placeholder="Enter your search term" type="text">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </span>
                            </div>
                            <div>Troubleshooting an issue? Try <a href="https://access.redhat.com/solution-engine">Solution Engine</a>&mdash;our new support tool.</div>
                        </form>
                    </div>
                </div>
                <div id="account-info" class="utility-link account-info">
                    <div class="content">

                        <!-- Account Unauthenticated -->
                        <div id="accountLinksLoggedOut" class="unauthenticated">
                            <h2 class="utility-header">Log in to Your Red Hat Account</h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border">
                                    <p><a href="https://access.redhat.com/login" id="accountLogin" class="btn btn-primary">Log In</a></p>
                                    <p>Your Red Hat account gives you access to your profile, preferences, and services, depending on your status.</p>
                                </div>
                                <div class="col-sm-6 col-border col-border-left">
                                    <p><a href="https://www.redhat.com/wapps/ugc/register.html" class="btn btn-primary">Register</a></p>
                                    <p>If you are a new customer, register now for access to product evaluations and purchasing capabilities. </p>

                                    <strong>Need access to an account?</strong><p>If your company has an existing Red Hat account, your organization administrator can grant you access.</p>

                                    <p><a href="https://access.redhat.com/support/contact/customerService/">If you have any questions, please contact customer service.</a></p>
                                </div>
                            </div>
                        </div>

                        <!-- Account Authenticated -->
                        <div id="accountLinksLoggedIn" class="authenticated">
                            <h2 class="utility-header"><span id="userFirstName"></span></h2>
                            <div class="row col-border-row">
                                <div class="col-sm-6 col-border col-border-right">
                                    <div class="account-info" id="accountUser">
                                        <div class="avatar"><!-- placeholder--></div>
                                        <div class="account-name"><strong id="userFullName"></strong></div>
                                        <div class="account-org"><span id="userOrg"></span></div>
                                        <div class="account-number accountNumber"><span class="property">Red Hat Account Number:</span> <span class="value"></span></div>
                                    </div>

                                    <div class="row account-settings">
                                        <div class="col-md-6" data-portal-tour-1="4">
                                            <h3>Red Hat Account</h3>
                                            <ul class="reset">
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/personalInfo.html">Account Details</a></li>
                                                <!-- <li><a href="https://www.redhat.com/wapps/ugc/protected/prefs.html">Newsletter and Contact Preferences</a></li> -->
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/usermgt/userList.html" class="user-management-link">User Management</a></li>
                                                <li><a href="https://www.redhat.com/wapps/ugc/protected/account.html">Account Maintenance</a></li>
                                                <li><a href="https://access.redhat.com/account-team">Account Team</a></li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6" data-portal-tour-1="5">
                                            <h3>Customer Portal</h3>
                                            <ul class="reset">
                                                <li><a href="https://access.redhat.com/user">My Profile</a></li>
                                                <li><a href="https://access.redhat.com/user" id="userNotificationsLink">Notifications</a></li>
                                                <li><a href="https://access.redhat.com/help/">Help</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-sm-6 col-border">
                                    <p>For your security, if you’re on a public computer and have finished using your Red Hat services, please be sure to log out.</p>
                                    <p><a href="https://sso.redhat.com/auth/realms/redhat-external/logout?redirectUrl=https%3A%2F%2Faccess.redhat.com%2Flogout" id="accountLogout" class="btn btn-primary">Log Out</a></p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="language" class="utility-link language">
                    <div class="content">
                        <h2 class="utility-header">Select Your Language</h2>
                        <div class="row" id="localesMenu">
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=en" data-lang="en" id="en">English</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ko" data-lang="ko" id="ko">한국어</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-2">
                                <ul class="reset">
                                    <li><a href="https://access.redhat.com/changeLanguage?language=ja"    data-lang="ja"    id="ja">日本語</a></li>
                                    <li><a href="https://access.redhat.com/changeLanguage?language=zh_CN" data-lang="zh_CN" id="zh_CN">中文 (中国)</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="scroll-anchor"></div>

<!-- Main Menu for large screens -->
<div class="header-nav visible-sm visible-md visible-lg" aria-hidden="true">
    <div id="header-nav">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">

                    <a href="https://access.redhat.com/" class="logo">
                      <span class="sr-only">Red Hat Customer Portal</span>
                      <span class="logo-crop">
                        <svg aria-hidden="true" class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 200">
                          <defs>
                          <style>
                            .rh-logo-type {
                              fill:#fff;
                            }
                            .rh-logo-hat {
                              fill:#e00;
                            }
                          </style>
                          </defs>
                          <title>Red Hat Customer Portal</title><g id="Two_lines" data-name="Two lines"><g id="Two_line_logo" data-name="Two line logo"><path class="rh-logo-type" d="M318.62,9.25h25.44c11.13,0,18.64,6.72,18.64,16.56,0,7.36-4.47,13-11.51,15.36l12.48,24.08h-9.29l-11.6-23H327v23h-8.4Zm8.4,7.36V35.33h16.33c6.55,0,10.87-3.76,10.87-9.36s-4.32-9.36-10.87-9.36Z"/><path class="rh-logo-type" d="M387.5,66a21,21,0,0,1-21.36-21.12c0-11.76,9-21,20.4-21,11.2,0,19.68,9.28,19.68,21.28v2.32H374.06a13.74,13.74,0,0,0,13.76,11.68,15.84,15.84,0,0,0,10.32-3.6l5.13,5A24.33,24.33,0,0,1,387.5,66ZM374.14,41.49H398.3c-1.19-6.24-6-10.88-11.92-10.88C380.22,30.61,375.34,35,374.14,41.49Z"/><path class="rh-logo-type" d="M445.18,61.41a19.23,19.23,0,0,1-12.48,4.48c-11.52,0-20.56-9.2-20.56-21a20.72,20.72,0,0,1,33-17V9.25l8-1.76V65.25h-7.92Zm-11.36-2.48a14.67,14.67,0,0,0,11.28-4.88V35.57a14.89,14.89,0,0,0-11.28-4.8,13.63,13.63,0,0,0-13.84,14A13.77,13.77,0,0,0,433.82,58.93Z"/><path class="rh-logo-type" d="M480.22,9.25h8.4v24h29.76v-24h8.4v56h-8.4V40.85H488.62v24.4h-8.4Z"/><path class="rh-logo-type" d="M534.38,53.57c0-7.68,6.24-12.4,16.48-12.4A28.75,28.75,0,0,1,562,43.41V39.09c0-5.76-3.44-8.64-9.92-8.64-3.76,0-7.6,1-12.64,3.44l-3-6c6.08-2.88,11.36-4.16,16.72-4.16,10.56,0,16.64,5.2,16.64,14.56v27H562V61.73A19.32,19.32,0,0,1,549.34,66C540.46,66,534.38,60.93,534.38,53.57Zm16.8,6.48A15.66,15.66,0,0,0,562,56.21v-7a21.15,21.15,0,0,0-10.48-2.48c-5.84,0-9.44,2.64-9.44,6.72C542.06,57.33,545.74,60.05,551.18,60.05Z"/><path class="rh-logo-type" d="M582.7,31.25h-8.64V24.53h8.64V14.13l7.92-1.92V24.53h12v6.72h-12V53.33c0,4.16,1.68,5.68,6,5.68a15.72,15.72,0,0,0,5.84-1v6.72a26.5,26.5,0,0,1-7.6,1.2c-7.92,0-12.16-3.76-12.16-10.8Z"/><path class="rh-logo-type" d="M361,132.21l7.59,7.52a30.76,30.76,0,0,1-23,10.32c-16.88,0-29.84-12.56-29.84-28.8s13-28.88,29.84-28.88c9,0,18.09,4.08,23.28,10.48l-7.83,7.76a19.52,19.52,0,0,0-15.45-7.6c-10.16,0-17.92,7.84-17.92,18.24A17.8,17.8,0,0,0,346,139.33,19.24,19.24,0,0,0,361,132.21Z"/><path class="rh-logo-type" d="M383.74,131.81c0,5.36,3.44,8.8,8.64,8.8a10.05,10.05,0,0,0,8.65-4.16V107.57h11v41.68H401v-3.36a17.79,17.79,0,0,1-11.77,4.16c-9.68,0-16.48-6.88-16.48-16.64V107.57h11Z"/><path class="rh-logo-type" d="M422.46,137c4.88,3.2,9.12,4.72,13.52,4.72,4.88,0,8.08-1.76,8.08-4.4,0-2.16-1.6-3.36-5.2-3.92l-8-1.2c-8.24-1.28-12.64-5.36-12.64-12.08,0-8.08,6.72-13.2,17.36-13.2a30.75,30.75,0,0,1,17.12,5.2l-5.28,7c-4.56-2.72-8.64-4-12.88-4-4,0-6.56,1.6-6.56,4.08,0,2.24,1.6,3.36,5.68,3.92l8,1.2c8.16,1.2,12.72,5.44,12.72,11.92,0,7.84-7.76,13.76-18.24,13.76-7.6,0-14.4-2-19.12-5.76Z"/><path class="rh-logo-type" d="M464.7,116.77h-8.56v-9.2h8.56V96.93l11-2.48v13.12H487.5v9.2H475.66v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M512.86,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S500.38,106.77,512.86,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S524.38,135.17,524.38,128.45Z"/><path class="rh-logo-type" d="M541.82,107.57h11v3.12a16.21,16.21,0,0,1,10.88-3.92A15,15,0,0,1,576.22,113,17.16,17.16,0,0,1,590,106.77c9.36,0,15.91,6.8,15.91,16.56v25.92h-11V124.93c0-5.28-3-8.72-7.83-8.72a9.37,9.37,0,0,0-8,4.16,18.89,18.89,0,0,1,.23,3v25.92h-11V124.93c0-5.28-3-8.72-7.84-8.72a9.3,9.3,0,0,0-7.76,3.76v29.28h-11Z"/><path class="rh-logo-type" d="M634.78,150.05c-12.64,0-22.4-9.44-22.4-21.6a21.28,21.28,0,0,1,21.44-21.6c11.84,0,20.64,9.6,20.64,22.4v2.88h-31a12,12,0,0,0,11.84,8.72,13.12,13.12,0,0,0,9.2-3.36l7.2,6.56A25,25,0,0,1,634.78,150.05Zm-11.44-25.76h20.4c-1.36-5-5.36-8.4-10.16-8.4C628.54,115.89,624.7,119.17,623.34,124.29Z"/><path class="rh-logo-type" d="M661.18,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M710.54,93.25h28.08c11,0,18.8,7.28,18.8,17.6,0,10-7.92,17.28-18.8,17.28H722.14v21.12h-11.6Zm11.6,10v15.28h15.2c5,0,8.32-3,8.32-7.6s-3.28-7.68-8.32-7.68Z"/><path class="rh-logo-type" d="M782.14,106.77c12.48,0,22.24,9.52,22.24,21.68s-9.76,21.6-22.24,21.6-22.24-9.44-22.24-21.6S769.66,106.77,782.14,106.77Zm11.52,21.68c0-6.88-5-12.16-11.52-12.16s-11.52,5.28-11.52,12.16c0,6.72,5,12.08,11.52,12.08S793.66,135.17,793.66,128.45Z"/><path class="rh-logo-type" d="M811.1,107.57h11v4.56a13.26,13.26,0,0,1,11.12-5.52,9.44,9.44,0,0,1,4.56,1v9.6a14,14,0,0,0-5.6-1.12,11,11,0,0,0-10.08,6.24v27h-11Z"/><path class="rh-logo-type" d="M850,116.77h-8.56v-9.2H850V96.93l11-2.48v13.12h11.84v9.2H860.94v18.48c0,3.92,1.52,5.36,5.76,5.36a16.86,16.86,0,0,0,5.84-1v9a34,34,0,0,1-8.48,1.28c-9.28,0-14.08-4.24-14.08-12.4Z"/><path class="rh-logo-type" d="M876.22,137.17c0-7.92,6.4-12.64,17.12-12.64a33.71,33.71,0,0,1,10.16,1.6v-3c0-4.8-3-7.28-8.8-7.28-3.52,0-7.44,1.12-12.72,3.44l-4-8.08a43.46,43.46,0,0,1,18.56-4.48c11.28,0,17.76,5.6,17.76,15.44v27H903.5v-2.88a19.81,19.81,0,0,1-12.08,3.6C882.46,150,876.22,144.77,876.22,137.17Zm18.08,5a15.78,15.78,0,0,0,9.2-2.64v-6.24a24.22,24.22,0,0,0-8.8-1.52c-5,0-8,2-8,5.2S889.66,142.13,894.3,142.13Z"/><path class="rh-logo-type" d="M933.58,149.25h-11v-56l11-2.4Z"/><g id="Hat_icon" data-name="Hat icon"><path id="Red_hat" data-name="Red hat" class="rh-logo-hat" d="M129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42L151.82,39c-1.72-7.12-3.23-10.35-15.74-16.6-9.7-5-30.82-13.15-37.07-13.15-5.83,0-7.55,7.54-14.45,7.54-6.68,0-11.64-5.6-17.89-5.6-6,0-9.92,4.1-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24Zm32.55-11.42c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33C23.77,60.77,2,63.79,2,83c0,31.48,74.59,70.28,133.65,70.28,45.27,0,56.7-20.48,56.7-36.65C192.35,103.88,181.35,89.44,161.52,80.82Z"/><path class="rh-logo-band" id="Black_band" data-name="Black band" d="M161.52,80.82c1.72,8.19,1.72,9.05,1.72,10.13,0,14-15.73,21.77-36.43,21.77-46.77,0-87.73-27.37-87.73-45.48a18.32,18.32,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,44,52.79C44,62,80.32,92.24,129,92.24c12.5,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/></g><path id="Dividing_line" data-name="Dividing line" class="rh-logo-type" d="M255.47,160.75a2.25,2.25,0,0,1-2.25-2.25V4.25a2.25,2.25,0,0,1,4.5,0V158.5A2.25,2.25,0,0,1,255.47,160.75Z"/></g></g>
                        </svg>
                      </span>
                                            </a>

                    <nav class="primary-nav hidden-sm">
                        <ul>
                            <li id="nav-products"><a class="products" data-link="mega" data-target="products-menu" href="https://access.redhat.com/products/" id="products-menu">Products &amp; Services</a></li>
                            <li id="nav-tools"><a class="tools" data-link="mega" data-target="tools-menu" href="https://access.redhat.com/labs/" id="tools-menu">Tools</a></li>
                            <li id="nav-security"><a class="security" data-link="mega" data-target="security-menu" href="https://access.redhat.com/security/" id="security-menu">Security</a></li>
                            <li id="nav-community"><a class="community" data-link="mega" data-target="community-menu" href="https://access.redhat.com/community/" id="community-menu">Community</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Mega Menu for large screens -->
<div class="mega-wrap visible-sm visible-md visible-lg" aria-hidden="true">
    <nav class="mega">
        <div class="container">
            <div class="mega-menu-wrap">

                <!-- Products Menu -->
                <div aria-labelledby="products-menu" class="products-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-md-6 col-sm-8">
                            <div class="root clearfix" data-portal-tour-1="7">
                                <ul class="subnav subnav-root">
                                    <li data-target="infrastructure-menu" class="active">
                                        <h3>Infrastructure and Management</h3>
                                    </li>
                                    <li data-target="cloud-menu">
                                        <h3>Cloud Computing</h3>
                                    </li>
                                    <li data-target="storage-menu">
                                        <h3>Storage</h3>
                                    </li>
                                    <li data-target="jboss-dev-menu">
                                        <h3>Runtimes</h3>
                                    </li>
                                    <li data-target="jboss-int-menu">
                                        <h3>Integration and Automation</h3>
                                    </li>
                                </ul>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="infrastructure-menu" style="display: block;">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-enterprise-linux/">Red Hat Enterprise Linux</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-virtualization/">Red Hat Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/identity-management/">Red Hat Identity Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-directory-server/">Red Hat Directory Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-certificate-system/">Red Hat Certificate System</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-satellite/">Red Hat Satellite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-subscription-management/">Red Hat Subscription Management</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-update-infrastructure/">Red Hat Update Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-insights/">Red Hat Insights</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/ansible-tower-red-hat/">Red Hat Ansible Tower</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ansible-engine/">Red Hat Ansible Engine</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="cloud-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloudforms/">Red Hat CloudForms</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openstack-platform/">Red Hat OpenStack Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-cloud-suite/">Red Hat Cloud Suite</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-openshift-container-platform/">Red Hat OpenShift Container Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-online-red-hat/">Red Hat OpenShift Online</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openshift-dedicated-red-hat/">Red Hat OpenShift Dedicated</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/">Red Hat Advanced Cluster Management for Kubernetes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-quay/">Red Hat Quay</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-workspaces/">Red Hat CodeReady Workspaces</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="storage-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-storage/">Red Hat Gluster Storage</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/">Red Hat Hyperconverged Infrastructure</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-ceph-storage/">Red Hat Ceph Storage</a>
                                        </li>
                                        <li>
                                          <a href="https://access.redhat.com/products/red-hat-openshift-container-storage">Red Hat Openshift Container Storage</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-dev-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-runtimes/">Red Hat Runtimes</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/">Red Hat JBoss Enterprise Application Platform</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-data-grid/">Red Hat Data Grid</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-web-server/">Red Hat JBoss Web Server</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-single-sign-on/">Red Hat Single Sign On</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/spring-boot/">Red Hat support for Spring Boot</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/nodejs/">Red Hat build of Node.js</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/thorntail/">Red Hat build of Thorntail</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/eclipse-vertx/">Red Hat build of Eclipse Vert.x</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/openjdk/">Red Hat build of OpenJDK</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/open-liberty/">Open Liberty</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/quarkus/">Red Hat build of Quarkus</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-codeready-studio/">Red Hat CodeReady Studio</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                        </li>
                                        <li>
                                            <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                        </li>
                                    </ul>
                                </div> -->
                                <div class="subnav subnav-child" data-eh="subnav-child" data-menu-local="jboss-int-menu">
                                    <ul class="border-bottom" id="portal-menu-border-bottom">
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-integration/">Red Hat Integration</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-fuse/">Red Hat Fuse</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-amq/">Red Hat AMQ</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-3scale/">Red Hat 3scale API Management</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-jboss-data-virtualization/">Red Hat JBoss Data Virtualization</a>
                                      </li>
                                    </ul>
                                    <ul>
                                      <li>
                                        <a href="https://access.redhat.com/products/red-hat-process-automation/">Red Hat Process Automation</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-process-automation-manager/">Red Hat Process Automation Manager</a>
                                      </li>
                                      <li>
                                          <a href="https://access.redhat.com/products/red-hat-decision-manager/">Red Hat Decision Manager</a>
                                      </li>
                                    </ul>
                                </div>
                            </div>
                            <a href="https://access.redhat.com/products" class="btn btn-primary">View All Products</a>
                        </div>

                        <div class="col-md-6 col-sm-4 pull-right" data-portal-tour-1="8">
                            <div class="row">
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/support" class="cta-link cta-link-darkbg">Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/production/">Production Support</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/developer/">Development Support</a></li>
                                        <li><a href="https://access.redhat.com/product-life-cycles/">Product Life Cycles</a></li>
                                    </ul>
                                    <h4 class="nav-title">Services</h4>
                                    <ul>
                                        <li><a href="https://www.redhat.com/en/services/consulting">Consulting</a></li>
                                        <li><a href="https://access.redhat.com/support/offerings/tam/">Technical Account Management</a></li>
                                        <li><a href="https://www.redhat.com/en/services/training-and-certification">Training &amp; Certifications</a></li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <ul>
                                        <li><a href="https://access.redhat.com/documentation" class="cta-link cta-link-darkbg">Documentation</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_enterprise_linux">Red Hat Enterprise Linux</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_jboss_enterprise_application_platform">Red Hat JBoss Enterprise Application Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/red_hat_openstack_platform">Red Hat OpenStack Platform</a></li>
                                        <li><a href="https://access.redhat.com/documentation/en/openshift_container_platform">Red Hat OpenShift Container Platform</a></li>
                                    </ul>
                                    <ul>
                                        
                                        <li><a href="https://catalog.redhat.com/" class="cta-link cta-link-darkbg">Ecosystem Catalog</a></li>
                                        <li><a href="https://access.redhat.com/public-cloud">Red Hat in the Public Cloud</a></li>
                                        <li><a href="https://access.redhat.com/ecosystem/partner-resources">Partner Resources</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tools Menu -->
                <div aria-labelledby="tools-menu" class="tools-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row" data-portal-tour-1="9">
                        <div class="col-sm-12">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h3 class="nav-title">Tools</h3>
                                    <ul>
                                        <li><a href="https://access.redhat.com/solution-engine">Solution Engine</a></li>
                                        <li><a href="https://access.redhat.com/downloads/content/package-browser">Packages</a></li>
                                        <li><a href="https://access.redhat.com/errata/">Errata</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <ul class="list-flat">
                                        <li><a href="https://access.redhat.com/labs/" class="cta-link cta-link-darkbg">Customer Portal Labs</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=config">Configuration</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=deploy">Deployment</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=security">Security</a></li>
                                        <li><a href="https://access.redhat.com/labs/#?type=troubleshoot">Troubleshooting</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <div class="card card-dark-grey">
                                        <h4 class="card-heading">Red Hat Insights</h4>
                                        <p class="text-white">Increase visibility into IT operations to detect and resolve technical issues before they impact your business.</p>
                                        <ul class="list-flat rh-l-grid rh-m-gutters rh-m-all-6-col-on-md">
                                          <li><a href="https://www.redhat.com/en/technologies/management/insights" class="cta-link cta-link-md cta-link-darkbg">Learn more</a></li>
                                          <li><a href="https://cloud.redhat.com/insights" class="cta-link cta-link-md cta-link-darkbg">Go to Insights</a></li>
                                        </ul>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Security Menu -->
                <div aria-labelledby="security-menu" class="security-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="10">

                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Red Hat Product Security Center</h2>
                                    <p class="text-white">Engage with our Red Hat Product Security team, access security updates, and ensure your environments are not exposed to any known security vulnerabilities.</p>
                                    <p><a href="https://access.redhat.com/security/" class="btn btn-primary">Product Security Center</a></p>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Security Updates</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-advisories">Security Advisories</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/cve">Red Hat CVE Database</a></li>
                                        <li><a href="https://access.redhat.com/security/security-updates/#/security-labs">Security Labs</a></li>
                                    </ul>
                                    <p class="text-white">Keep your systems secure with Red Hat&#039;s specialized responses for high-priority security vulnerabilities.</p>
                                    <ul>
                                        <li class="more-link"><a href="https://access.redhat.com/security/vulnerability">View Responses</a></li>
                                    </ul>
                                </div>

                                <div class="col-sm-4">
                                    <h2 class="nav-title">Resources</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/security/overview/">Overview</a></li>
                                        <li><a href="https://www.redhat.com/en/blog/channel/security">Security Blog</a></li>
                                        <li><a href="https://www.redhat.com/security/data/metrics/">Security Measurement</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/classification/">Severity Ratings</a></li>
                                        <li><a href="https://access.redhat.com/security/updates/backporting/">Backporting Policies</a></li>
                                        <li><a href="https://access.redhat.com/security/team/key/">Product Signing (GPG) Keys</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Community Menu -->
                <div aria-labelledby="community-menu" class="community-menu mega-menu" data-eh="mega-menu" role="navigation">
                    <div class="row">
                        <div class="col-sm-12 basic" data-portal-tour-1="11">
                            <div class="row">
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Portal Community</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/discussions?keyword=&name=&product=All&category=All&tags=All">Discussions</a></li>
                                        <li><a href="https://access.redhat.com/blogs/">Blogs</a></li>
                                        <li><a href="https://access.redhat.com/groups/">Private Groups</a></li>
                                        <p class="push-top"><a href="https://access.redhat.com/community/" class="btn btn-primary">Community Activity</a></p>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Customer Events</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/convergence/">Red Hat Convergence</a></li>
                                        <li><a href="http://www.redhat.com/summit/">Red Hat Summit</a></li>
                                    </ul>
                                </div>
                                <div class="col-sm-4">
                                    <h2 class="nav-title">Stories</h2>
                                    <ul>
                                        <li><a href="https://access.redhat.com/subscription-value/">Red Hat Subscription Value</a></li>
                                        <li><a href="https://access.redhat.com/you-asked-we-acted/">You Asked. We Acted.</a></li>
                                        <li><a href="http://www.redhat.com/en/open-source">Open Source Communities</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!--<a href="https://access.redhat.com/community/" class="btn btn-primary">Explore Community</a>-->
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

            <!--[if IE 8]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    You are using an unsupported web browser. Update to a supported browser for the best experience. <a href="/announcements/2120951">Read the announcement</a>.
                </div>
            </div>
            <![endif]-->
            <!--[if IE 9]>
            <div class="portal-messages">
                <div class="alert alert-warning alert-portal alert-w-icon">
                    <span class="icon-warning alert-icon" aria-hidden="true"></span>
                    As of March 1, 2016, the Red Hat Customer Portal will no longer support Internet Explorer 9. See our new <a href="/help/browsers">browser support policy</a> for more information.
                </div>
            </div>
            <![endif]-->
            <div id="site-section"></div>
        </header>
        <!--googleon: all-->

        <main id="cp-main" class="portal-content-area">
            <div id="cp-content" class="main-content">
  <script type="text/javascript">
    chrometwo_require(['jquery-ui']);
  </script>


      <article class="rh_docs">
  <div class="container">
        <!-- Display: Book Page Content -->
    
  

<div class="row">
  <div itemscope="" itemtype="https://schema.org/TechArticle" itemref="techArticle-md1 techArticle-md2 techArticle-md3"></div>
  <div itemscope="" itemtype="https://schema.org/SoftwareApplication" itemref="softwareApplication-md1 softwareApplication-md2 softwareApplication-md3 softwareApplication-md4"></div>
  


<a class="toc-toggle toc-show" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
  <span class="sr-only">Show Table of Contents</span>
  <span class="web-icon-mobile-menu" aria-hidden="true"></span>
</a>
<nav id="toc-main" class="toc-main collapse in">
  <div class="toc-menu affix-top">
    <a class="toc-toggle toc-hide" data-toggle="collapse" data-target="#toc-main" aria-expanded="false" aria-controls="toc-main">
      <span class="sr-only">Hide Table of Contents</span>
      <span class="icon-remove" aria-hidden="true"></span>
    </a>
    <div class="doc-options">
      <div class="doc-language btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          English <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/">日本語</a></li>
                      <li><a href="index.html">English</a></li>
                  </ul>
      </div>
      <div class="doc-format btn-group">
        <button type="button" class="btn btn-app dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
          Single-page HTML <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/">Multi-page HTML</a></li>
                                <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/pdf/monitoring_and_managing_system_status_and_performance/Red_Hat_Enterprise_Linux-8-Monitoring_and_managing_system_status_and_performance-en-US.pdf">PDF</a></li>
                      <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/epub/monitoring_and_managing_system_status_and_performance/Red_Hat_Enterprise_Linux-8-Monitoring_and_managing_system_status_and_performance-en-US.epub">ePub</a></li>
                  </ul>
      </div>
    </div>
    <ol class="menu"><li class=" leaf"><a href="index.html">Monitoring and managing system status and performance</a></li><li class=" leaf"><a href="index.html#proc_providing-feedback-on-red-hat-documentation_monitoring-and-managing-system-status-and-performance">Providing feedback on Red Hat documentation</a></li><li class=" leaf"><a href="index.html#overview-of-performance-monitoring-options_monitoring-and-managing-system-status-and-performance">1. Overview of performance monitoring options</a></li><li class=" leaf"><a href="index.html#getting-started-with-tuned_monitoring-and-managing-system-status-and-performance">2. Getting started with Tuned</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-of-tuned_getting-started-with-tuned">2.1. The purpose of Tuned</a></li><li class=" leaf"><a href="index.html#tuned-profiles_getting-started-with-tuned">2.2. Tuned profiles</a></li><li class=" leaf"><a href="index.html#tuned-profiles-distributed-with-rhel_getting-started-with-tuned">2.3. Tuned profiles distributed with RHEL</a></li><li class=" leaf"><a href="index.html#static-and-dynamic-tuning-in-tuned_getting-started-with-tuned">2.4. Static and dynamic tuning in Tuned</a></li><li class=" leaf"><a href="index.html#tuned-no-daemon-mode_getting-started-with-tuned">2.5. Tuned no-daemon mode</a></li><li class=" leaf"><a href="index.html#installing-and-enabling-tuned_getting-started-with-tuned">2.6. Installing and enabling Tuned</a></li><li class=" leaf"><a href="index.html#listing-available-tuned-profiles_getting-started-with-tuned">2.7. Listing available Tuned profiles</a></li><li class=" leaf"><a href="index.html#setting-a-tuned-profile_getting-started-with-tuned">2.8. Setting a Tuned profile</a></li><li class=" leaf"><a href="index.html#disabling-tuned_getting-started-with-tuned">2.9. Disabling Tuned</a></li><li class=" leaf"><a href="index.html#related-information-getting-started-with-tuned">2.10. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance">3. Customizing Tuned profiles</a><ol class="menu"><li class=" leaf"><a href="index.html#tuned-profiles_customizing-tuned-profiles">3.1. Tuned profiles</a></li><li class=" leaf"><a href="index.html#inheritance-between-tuned-profiles_customizing-tuned-profiles">3.2. Inheritance between Tuned profiles</a></li><li class=" leaf"><a href="index.html#static-and-dynamic-tuning-in-tuned_customizing-tuned-profiles">3.3. Static and dynamic tuning in Tuned</a></li><li class=" leaf"><a href="index.html#tuned-plug-ins_customizing-tuned-profiles">3.4. Tuned plug-ins</a></li><li class=" leaf"><a href="index.html#available-tuned-plug-ins_customizing-tuned-profiles">3.5. Available Tuned plug-ins</a></li><li class=" leaf"><a href="index.html#variables-and-built-in-functions-in-tuned-profiles_customizing-tuned-profiles">3.6. Variables and built-in functions in Tuned profiles</a></li><li class=" leaf"><a href="index.html#built-in-functions-available-in-tuned-profiles_customizing-tuned-profiles">3.7. Built-in functions available in Tuned profiles</a></li><li class=" leaf"><a href="index.html#creating-new-tuned-profiles_customizing-tuned-profiles">3.8. Creating new Tuned profiles</a></li><li class=" leaf"><a href="index.html#modifying-existing-tuned-profiles_customizing-tuned-profiles">3.9. Modifying existing Tuned profiles</a></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler-using-tuned_customizing-tuned-profiles">3.10. Setting the disk scheduler using Tuned</a></li><li class=" leaf"><a href="index.html#related-information-customizing-tuned-profiles">3.11. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-performance-with-performance-co-pilot_monitoring-and-managing-system-status-and-performance">4. Monitoring performance with Performance Co-Pilot</a><ol class="menu"><li class=" leaf"><a href="index.html#overview-of-pcp_monitoring-performance-with-performance-co-pilot">4.1. Overview of PCP</a></li><li class=" leaf"><a href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot">4.2. Installing and enabling PCP</a></li><li class=" leaf"><a href="index.html#deploying-a-minimal-pcp-setup_monitoring-performance-with-performance-co-pilot">4.3. Deploying a minimal PCP setup</a></li><li class=" leaf"><a href="index.html#logging-performance-data-with-pmlogger_monitoring-performance-with-performance-co-pilot">4.4. Logging performance data with pmlogger</a><ol class="menu"><li class=" leaf"><a href="index.html#modifying-the-pmlogger-configuration-file-with-pmlogconf_logging-performance-data-with-pmlogger">4.4.1. Modifying the pmlogger configuration file with pmlogconf</a></li><li class=" leaf"><a href="index.html#editing-the-pmlogger-configuration-file-manually_logging-performance-data-with-pmlogger">4.4.2. Editing the pmlogger configuration file manually</a></li><li class=" leaf"><a href="index.html#enabling-the-pmlogger-service_logging-performance-data-with-pmlogger">4.4.3. Enabling the pmlogger service</a></li><li class=" leaf"><a href="index.html#setting-up-a-client-system-for-metrics-collection_logging-performance-data-with-pmlogger">4.4.4. Setting up a client system for metrics collection</a></li><li class=" leaf"><a href="index.html#setting-up-the-central-server-to-collect-data_logging-performance-data-with-pmlogger">4.4.5. Setting up a central server to collect data</a></li><li class=" leaf"><a href="index.html#replaying-the-pcp-log-archives_logging-performance-data-with-pmlogger">4.4.6. Replaying the PCP log archives with pmdumptext</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-postfix-with-pmda-postfix_monitoring-performance-with-performance-co-pilot">4.5. Monitoring postfix with pmda-postfix</a></li><li class=" leaf"><a href="index.html#visually-tracing-pcp-log-archives-with-pcp-charts_monitoring-performance-with-performance-co-pilot">4.6. Visually tracing PCP log archives with the PCP Charts application</a></li><li class=" leaf"><a href="index.html#xfs-file-system-performance-analysis-with-pcp_monitoring-performance-with-performance-co-pilot">4.7. XFS file system performance analysis with PCP</a><ol class="menu"><li class=" leaf"><a href="index.html#installing-xfs-pmda-manually_xfs-file-system-performance-analysis-with-pcp">4.7.1. Installing XFS PMDA manually</a></li><li class=" leaf"><a href="index.html#examining-xfs-performance-metrics-with-pminfo_xfs-file-system-performance-analysis-with-pcp">4.7.2. Examining XFS performance metrics with pminfo</a></li><li class=" leaf"><a href="index.html#resetting-xfs-performance-metrics-with-pmstore_xfs-file-system-performance-analysis-with-pcp">4.7.3. Resetting XFS performance metrics with pmstore</a></li><li class=" leaf"><a href="index.html#examining-xfs-metrics-available-per-file-system_xfs-file-system-performance-analysis-with-pcp">4.7.4. Examining XFS metrics available per file system</a></li></ol></li><li class=" leaf"><a href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot">4.8. System services distributed with PCP</a></li><li class=" leaf"><a href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot">4.9. Tools distributed with PCP</a></li><li class=" leaf"><a href="index.html#pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot">4.10. PCP metric groups for XFS</a></li><li class=" leaf"><a href="index.html#per-device-pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot">4.11. Per-device PCP metric groups for XFS</a></li></ol></li><li class=" leaf"><a href="index.html#setting-up-graphical-representation-of-pcp-metrics_monitoring-and-managing-system-status-and-performance">5. Setting up graphical representation of PCP metrics</a><ol class="menu"><li class=" leaf"><a href="index.html#setting-up-pcp-on-a-system_setting-up-graphical-representation-of-pcp-metrics">5.1. Setting up PCP on a system</a></li><li class=" leaf"><a href="index.html#setting-up-a-grafana-server_setting-up-graphical-representation-of-pcp-metrics">5.2. Setting up a grafana-server</a></li><li class=" leaf"><a href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics">5.3. Accessing the Grafana web UI</a></li><li class=" leaf"><a href="index.html#adding-pcp-redis-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics">5.4. Adding PCP Redis as a data source</a></li><li class=" leaf"><a href="index.html#adding-pcp-bpftrace-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics">5.5. Adding PCP bpftrace as a data source</a></li><li class=" leaf"><a href="index.html#adding-pcp-vector-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics">5.6. Adding PCP Vector as a data source</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-the-system-performance-using-the-web-console_monitoring-and-managing-system-status-and-performance">6. Optimizing the system performance using the web console</a><ol class="menu"><li class=" leaf"><a href="index.html#performance-tuning-options-in-the-web-console_optimizing-the-system-performance-using-the-web-console">6.1. Performance tuning options in the web console</a></li><li class=" leaf"><a href="index.html#setting-a-performance-profile-in-the-web-console_optimizing-the-system-performance-using-the-web-console">6.2. Setting a performance profile in the web console</a></li></ol></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler_monitoring-and-managing-system-status-and-performance">7. Setting the disk scheduler</a><ol class="menu"><li class=" leaf"><a href="index.html#disk-scheduler-changes-in-rhel-8_setting-the-disk-scheduler">7.1. Disk scheduler changes in RHEL 8</a></li><li class=" leaf"><a href="index.html#available-disk-schedulers_setting-the-disk-scheduler">7.2. Available disk schedulers</a></li><li class=" leaf"><a href="index.html#recommended-disk-schedulers-for-different-use-cases_setting-the-disk-scheduler">7.3. Recommended disk schedulers for different use cases</a></li><li class=" leaf"><a href="index.html#the-default-disk-scheduler_setting-the-disk-scheduler">7.4. The default disk scheduler</a></li><li class=" leaf"><a href="index.html#determining-the-active-disk-scheduler_setting-the-disk-scheduler">7.5. Determining the active disk scheduler</a></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler">7.6. Setting the disk scheduler using Tuned</a></li><li class=" leaf"><a href="index.html#setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler">7.7. Setting the disk scheduler using udev rules</a></li><li class=" leaf"><a href="index.html#temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler">7.8. Temporarily setting a scheduler for a specific disk</a></li></ol></li><li class=" leaf"><a href="index.html#assembly_tuning-the-performance-of-a-samba-server_monitoring-and-managing-system-status-and-performance">8. Tuning the performance of a Samba server</a><ol class="menu"><li class=" leaf"><a href="index.html#proc_setting-the-smb-protocol-version_assembly_tuning-the-performance-of-a-samba-server">8.1. Setting the SMB protocol version</a></li><li class=" leaf"><a href="index.html#proc_tuning-shares-with-directories-that-contain-a-large-number-of-files_assembly_tuning-the-performance-of-a-samba-server">8.2. Tuning shares with directories that contain a large number of files</a></li><li class=" leaf"><a href="index.html#con_settings-that-can-have-a-negative-performance-impact_assembly_tuning-the-performance-of-a-samba-server">8.3. Settings that can have a negative performance impact</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-performance-in-rhel-8_monitoring-and-managing-system-status-and-performance">9. Optimizing virtual machine performance</a><ol class="menu"><li class=" leaf"><a href="index.html#what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel-8">9.1. What influences virtual machine performance</a></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8">9.2. Optimizing virtual machine performance using tuned</a></li><li class=" leaf"><a href="index.html#configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel-8">9.3. Configuring virtual machine memory</a><ol class="menu"><li class=" leaf"><a href="index.html#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram">9.3.1. Adding and removing virtual machine memory using the web console</a></li><li class=" leaf"><a href="index.html#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram">9.3.2. Adding and removing virtual machine memory using the command-line interface</a></li><li class=" leaf"><a href="index.html#additional_resources">9.3.3. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8">9.4. Optimizing virtual machine I/O performance</a><ol class="menu"><li class=" leaf"><a href="index.html#tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance">9.4.1. Tuning block I/O in virtual machines</a></li><li class=" leaf"><a href="index.html#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance">9.4.2. Disk I/O throttling in virtual machines</a></li><li class=" leaf"><a href="index.html#configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance">9.4.3. Enabling multi-queue virtio-scsi</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8">9.5. Optimizing virtual machine CPU performance</a><ol class="menu"><li class=" leaf"><a href="index.html#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance">9.5.1. Adding and removing virtual CPUs using the command-line interface</a></li><li class=" leaf"><a href="index.html#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance">9.5.2. Managing virtual CPUs using the web console</a></li><li class=" leaf"><a href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance">9.5.3. Configuring NUMA in a virtual machine</a></li><li class=" leaf"><a href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance">9.5.4. Sample vCPU performance tuning scenario</a></li></ol></li><li class=" leaf"><a href="index.html#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8">9.6. Optimizing virtual machine network performance</a></li><li class=" leaf"><a href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8">9.7. Virtual machine performance monitoring tools</a></li><li class=" leaf"><a href="index.html#related-information-optimizing-virtual-machine-performance-in-rhel-8">9.8. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#managing-power-consumption-with-powertop_monitoring-and-managing-system-status-and-performance">10. Managing power consumption with PowerTOP</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-of-powertop_managing-power-consumption-with-powertop">10.1. The purpose of PowerTOP</a></li><li class=" leaf"><a href="index.html#using-powertop_managing-power-consumption-with-powertop">10.2. Using PowerTOP</a><ol class="menu"><li class=" leaf"><a href="index.html#starting-powertop_using-powertop">10.2.1. Starting PowerTOP</a></li><li class=" leaf"><a href="index.html#calibrating-powertop_using-powertop">10.2.2. Calibrating PowerTOP</a></li><li class=" leaf"><a href="index.html#setting-the-measuring-interval_using-powertop">10.2.3. Setting the measuring interval</a></li><li class=" leaf"><a href="index.html#related-information-using-powertop">10.2.4. Related information</a></li></ol></li><li class=" leaf"><a href="index.html#powertop-statistics_managing-power-consumption-with-powertop">10.3. PowerTOP statistics</a><ol class="menu"><li class=" leaf"><a href="index.html#overview-tab_managing-power-consumption-with-powertop">10.3.1. The Overview tab</a></li><li class=" leaf"><a href="index.html#idle-stats-tab_managing-power-consumption-with-powertop">10.3.2. The Idle stats tab</a></li><li class=" leaf"><a href="index.html#device-stats-tab_managing-power-consumption-with-powertop">10.3.3. The Device stats tab</a></li><li class=" leaf"><a href="index.html#tunables-tab_managing-power-consumption-with-powertop">10.3.4. The Tunables tab</a></li></ol></li><li class=" leaf"><a href="index.html#generating-an-html-output_managing-power-consumption-with-powertop">10.4. Generating an HTML output</a></li><li class=" leaf"><a href="index.html#optimizing-power-consumption_managing-power-consumption-with-powertop">10.5. Optimizing power consumption</a><ol class="menu"><li class=" leaf"><a href="index.html#optimizing-power-consumption-using-the-powertop-service_optimizing-power-consumption">10.5.1. Optimizing power consumption using the powertop service</a></li><li class=" leaf"><a href="index.html#powertop2tuned-utility_optimizing-power-consumption">10.5.2. The powertop2tuned utility</a></li><li class=" leaf"><a href="index.html#optimizing-power-consumption-with-powertop2tuned_optimizing-power-consumption">10.5.3. Optimizing power consumption using the powertop2tuned utility</a></li><li class=" leaf"><a href="index.html#con_comparison-of-powertop-service-and-powertop2tuned_optimizing-power-consumption">10.5.4. Comparison of powertop.service and powertop2tuned</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#getting-started-with-perf_monitoring-and-managing-system-status-and-performance">11. Getting started with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#introduction-to-perf_getting-started-with-perf">11.1. Introduction to perf</a></li><li class=" leaf"><a href="index.html#installing-perf_getting-started-with-perf">11.2. Installing perf</a></li><li class=" leaf"><a href="index.html#common-perf-commands_getting-started-with-perf">11.3. Common Perf Commands</a></li><li class=" leaf"><a href="index.html#real-time-system-profiling-using-perf-top_getting-started-with-perf">11.4. Real time profiling of CPU usage with perf top</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-of-perf-top_real-time-system-profiling-using-perf-top">11.4.1. The purpose of perf top</a></li><li class=" leaf"><a href="index.html#profiling-cpu-usage-with-perf-top_real-time-system-profiling-using-perf-top">11.4.2. Profiling CPU usage with perf top</a></li><li class=" leaf"><a href="index.html#interpretation-of-perf-top-output_real-time-system-profiling-using-perf-top">11.4.3. Interpretation of perf top output</a></li><li class=" leaf"><a href="index.html#why-perf-displays-some-function-names-as-raw-function-addresses_real-time-system-profiling-using-perf-top">11.4.4. Why perf displays some function names as raw function addresses</a></li><li class=" leaf"><a href="index.html#enabling-debug-and-source-repositories_real-time-system-profiling-using-perf-top">11.4.5. Enabling debug and source repositories</a></li><li class=" leaf"><a href="index.html#getting-debuginfo-packages-for-an-application-or-library-using-gdb_real-time-system-profiling-using-perf-top">11.4.6. Getting debuginfo packages for an application or library using GDB</a></li></ol></li><li class=" leaf"><a href="index.html#counting-events-during-process-execution_getting-started-with-perf">11.5. Counting events during process execution</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-of-perf-stat_using-perf-stat-to-count-events-during-process-execution">11.5.1. The purpose of perf stat</a></li><li class=" leaf"><a href="index.html#counting-events-with-perf-stat_using-perf-stat-to-count-events-during-process-execution">11.5.2. Counting events with perf stat</a></li><li class=" leaf"><a href="index.html#interpretation-of-perf-stat-output_using-perf-stat-to-count-events-during-process-execution">11.5.3. Interpretation of perf stat output</a></li><li class=" leaf"><a href="index.html#attaching-perf-stat-to-a-running-process_using-perf-stat-to-count-events-during-process-execution">11.5.4. Attaching perf stat to a running process</a></li></ol></li><li class=" leaf"><a href="index.html#recording-and-analyzing-performance-profiles-with-perf_getting-started-with-perf">11.6. Recording and analyzing performance profiles with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#the-purpose-of-perf-record_recording-and-analyzing-performance-profiles-with-perf">11.6.1. The purpose of perf record</a></li><li class=" leaf"><a href="index.html#recording-a-performance-profile-without-root-access_recording-and-analyzing-performance-profiles-with-perf">11.6.2. Recording a performance profile without root access</a></li><li class=" leaf"><a href="index.html#recording-a-performance-profile-with-root-access_recording-and-analyzing-performance-profiles-with-perf">11.6.3. Recording a performance profile with root access</a></li><li class=" leaf"><a href="index.html#recording-a-performance-profile-in-per-cpu-mode_recording-and-analyzing-performance-profiles-with-perf">11.6.4. Recording a performance profile in per-CPU mode</a></li><li class=" leaf"><a href="index.html#capturing-call-graph-data-with-perf-record_recording-and-analyzing-performance-profiles-with-perf">11.6.5. Capturing call graph data with perf record</a></li><li class=" leaf"><a href="index.html#analyzing-perf-data-with-perf-report_recording-and-analyzing-performance-profiles-with-perf">11.6.6. Analyzing perf.data with perf report</a></li><li class=" leaf"><a href="index.html#interpretation-of-perf-report-output_recording-and-analyzing-performance-profiles-with-perf">11.6.7. Interpretation of perf report output</a></li><li class=" leaf"><a href="index.html#why-perf-displays-some-function-names-as-raw-function-addresses_recording-and-analyzing-performance-profiles-with-perf">11.6.8. Why perf displays some function names as raw function addresses</a></li><li class=" leaf"><a href="index.html#enabling-debug-and-source-repositories_recording-and-analyzing-performance-profiles-with-perf">11.6.9. Enabling debug and source repositories</a></li><li class=" leaf"><a href="index.html#getting-debuginfo-packages-for-an-application-or-library-using-gdb_recording-and-analyzing-performance-profiles-with-perf">11.6.10. Getting debuginfo packages for an application or library using GDB</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#monitoring-system-performance-with-perf_monitoring-and-managing-system-status-and-performance">12. Monitoring system performance with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#recording-a-performance-profile-in-per-cpu-mode_monitoring-system-performance-with-perf">12.1. Recording a performance profile in per-CPU mode</a></li><li class=" leaf"><a href="index.html#capturing-call-graph-data-with-perf-record_monitoring-system-performance-with-perf">12.2. Capturing call graph data with perf record</a></li><li class=" leaf"><a href="index.html#identifying-busy-cpus-with-perf_monitoring-system-performance-with-perf">12.3. Identifying busy CPUs with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#displaying-which-cpu-events-were-counted-on-with-perf-stat_identifying-busy-cpus-with-perf">12.3.1. Displaying which CPU events were counted on with perf stat</a></li><li class=" leaf"><a href="index.html#displaying-which-cpu-samples-were-taken-on-with-perf-report_identifying-busy-cpus-with-perf">12.3.2. Displaying which CPU samples were taken on with perf report</a></li><li class=" leaf"><a href="index.html#displaying-specific-cpus-during-profiling-with-perf-top_identifying-busy-cpus-with-perf">12.3.3. Displaying specific CPUs during profiling with perf top</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-specific-cpus-with-perf_monitoring-system-performance-with-perf">12.4. Monitoring specific CPUs with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#monitoring-specific-cpus-with-perf-record-and-perf-report_monitoring-specific-cpus-with-perf">12.4.1. Monitoring specific CPUs with perf record and perf report</a></li><li class=" leaf"><a href="index.html#displaying-specific-cpus-during-profiling-with-perf-top_monitoring-specific-cpus-with-perf">12.4.2. Displaying specific CPUs during profiling with perf top</a></li></ol></li><li class=" leaf"><a href="index.html#generating-a-perf-data-file-that-is-readable-on-a-different-device_monitoring-system-performance-with-perf">12.5. Generating a perf.data file that is readable on a different device</a></li><li class=" leaf"><a href="index.html#analyzing-a-perf-data-file-that-was-created-on-a-different-device_monitoring-system-performance-with-perf">12.6. Analyzing a perf.data file that was created on a different device</a></li></ol></li><li class=" leaf"><a href="index.html#monitoring-application-performance-with-perf_monitoring-and-managing-system-status-and-performance">13. Monitoring application performance with perf</a><ol class="menu"><li class=" leaf"><a href="index.html#attaching-perf-record-to-a-running-process_monitoring-application-performance-with-perf">13.1. Attaching perf record to a running process</a></li><li class=" leaf"><a href="index.html#capturing-call-graph-data-with-perf-record_monitoring-application-performance-with-perf">13.2. Capturing call graph data with perf record</a></li><li class=" leaf"><a href="index.html#analyzing-perf-data-with-perf-report_monitoring-application-performance-with-perf">13.3. Analyzing perf.data with perf report</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-an-operating-system-to-optimize-cpu-utilization_monitoring-and-managing-system-status-and-performance">14. Configuring an operating system to optimize CPU utilization</a><ol class="menu"><li class=" leaf"><a href="index.html#tools-for-monitoring-and-diagnosing-processor-issues_configuring-an-operating-system-to-optimize-cpu-utilization">14.1. Tools for monitoring and diagnosing processor issues</a></li><li class=" leaf"><a href="index.html#determining-system-topology_configuring-an-operating-system-to-optimize-cpu-utilization">14.2. Determining system topology</a><ol class="menu"><li class=" leaf"><a href="index.html#types-of-system-topology_determining-system-topology">14.2.1. Types of system topology</a></li><li class=" leaf"><a href="index.html#displaying-system-topologies_determining-system-topology">14.2.2. Displaying system topologies</a></li></ol></li><li class=" leaf"><a href="index.html#tuning-scheduling-policy_configuring-an-operating-system-to-optimize-cpu-utilization">14.3. Tuning scheduling policy</a><ol class="menu"><li class=" leaf"><a href="index.html#static-priority-scheduling-with-SCHED_FIFO_tuning-scheduling-policy">14.3.1. Static priority scheduling with SCHED_FIFO</a></li><li class=" leaf"><a href="index.html#round-robin-priority-scheduling-with-sched_rr_tuning-scheduling-policy">14.3.2. Round robin priority scheduling with SCHED_RR</a></li><li class=" leaf"><a href="index.html#normal-scheduling-with-sched_other_tuning-scheduling-policy">14.3.3. Normal scheduling with SCHED_OTHER</a></li><li class=" leaf"><a href="index.html#setting-scheduler-policies_tuning-scheduling-policy">14.3.4. Setting scheduler policies</a></li><li class=" leaf"><a href="index.html#policy-options-for-the-chrt-command_tuning-scheduling-policy">14.3.5. Policy options for the chrt command</a></li><li class=" leaf"><a href="index.html#changing-the-priority-of-service-during-the-boot-process_tuning-scheduling-policy">14.3.6. Changing the priority of services during the boot process</a></li><li class=" leaf"><a href="index.html#priority-map_tuning-scheduling-policy">14.3.7. Priority map</a></li><li class=" leaf"><a href="index.html#cpu-partitioning-profile_tuning-scheduling-policy">14.3.8. cpu-partitioning profile</a></li><li class=" leaf"><a href="index.html#additional_resources_2">14.3.9. Additional resources</a></li></ol></li><li class=" leaf"><a href="index.html#configuring-kernel-tick-time_configuring-an-operating-system-to-optimize-cpu-utilization">14.4. Configuring kernel tick time</a></li><li class=" leaf"><a href="index.html#setting-interrupt-affinity-systems_configuring-an-operating-system-to-optimize-cpu-utilization">14.5. Setting interrupt affinity systems</a><ol class="menu"><li class=" leaf"><a href="index.html#balancing-interrupts-manually_setting-interrupt-affinity-systems">14.5.1. Balancing interrupts manually</a></li><li class=" leaf"><a href="index.html#setting-the-smp_affinity-mask_setting-interrupt-affinity-systems">14.5.2. Setting the smp_affinity mask</a></li><li class=" leaf"><a href="index.html#additional_resources_3">14.5.3. Additional resources</a></li></ol></li></ol></li><li class=" leaf"><a href="index.html#idm140290653236752">Legal Notice</a></li></ol>  </div>
</nav>


  <div class="doc-wrapper">
    <div class="panel-pane pane-training-banner"  >
  
      
  
  <div class="card card-light card-md push-bottom">
  <h2 class="card-heading card-heading-red card-heading-sm card-heading-flush">Red Hat Training</h2>
  <p>A Red Hat training course is available for <a href="https://www.redhat.com/en/services/training/courses-by-curriculum?intcmp=701f2000001D4OtAAK&amp;#Red-Hat-Enterprise-Linux" class="cta-link">RHEL 8</a></p>
</div>

  
  </div>
<div class="panel-pane pane-page-title"  >
  
      
  
  <h1 class="title" itemprop="name">Monitoring and managing system status and performance</h1>
  
  </div>
<div class="panel-pane pane-page-body"  >
  
      
  
  <div class="body"><div xml:lang="en-US" class="book" id="idm140290650032800"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">8</span></div><div><h2 class="subtitle">Optimizing system throughput, latency, and power consumption</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="index.html#idm140290653236752">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This documentation collection provides instructions on how to monitor and optimize the throughput, latency, and power consumption of Red Hat Enterprise Linux 8 in different scenarios.
			</div></div></div></div><hr/></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Providing feedback on Red Hat documentation</h1></div></div></div><p>
			We appreciate your input on our documentation. Please let us know how we could make it better. To do so:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					For simple comments on specific passages:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure you are viewing the documentation in the <span class="emphasis"><em>Multi-page HTML</em></span> format. In addition, ensure you see the <span class="strong strong"><strong>Feedback</strong></span> button in the upper right corner of the document.
						</li><li class="listitem">
							Use your mouse cursor to highlight the part of text that you want to comment on.
						</li><li class="listitem">
							Click the <span class="strong strong"><strong>Add Feedback</strong></span> pop-up that appears below the highlighted text.
						</li><li class="listitem">
							Follow the displayed instructions.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					For submitting more complex feedback, create a Bugzilla ticket:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Go to the <a class="link" href="https://bugzilla.redhat.com/enter_bug.cgi?product=Red%20Hat%20Enterprise%20Linux%208">Bugzilla</a> website.
						</li><li class="listitem">
							As the Component, use <span class="strong strong"><strong>Documentation</strong></span>.
						</li><li class="listitem">
							Fill in the <span class="strong strong"><strong>Description</strong></span> field with your suggestion for improvement. Include a link to the relevant part(s) of documentation.
						</li><li class="listitem">
							Click <span class="strong strong"><strong>Submit Bug</strong></span>.
						</li></ol></div></li></ul></div></section><section class="chapter" id="overview-of-performance-monitoring-options_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Overview of performance monitoring options</h1></div></div></div><p>
			The following are some of the performance monitoring and configuration tools available in Red Hat Enterprise Linux 8:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Performance Co-Pilot (<code class="literal">pcp</code>) is used for monitoring, visualizing, storing, and analyzing system-level performance measurements. It allows the monitoring and management of real-time data, and logging and retrieval of historical data.
				</li><li class="listitem"><p class="simpara">
					Red Hat Enterprise Linux 8 provides several tools that can be used from the command line to monitor a system outside run level 5. The following are the built-in command line tools:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<code class="literal">top</code> is provided by the <code class="literal">procps-ng</code> package. It gives a dynamic view of the processes in a running system. It displays a variety of information, including a system summary and a list of tasks currently being managed by the Linux kernel.
						</li><li class="listitem">
							<code class="literal">ps</code> is provided by the <code class="literal">procps-ng</code> package. It captures a snapshot of a select group of active processes. By default, the examined group is limited to processes that are owned by the current user and associated with the terminal where the <code class="literal">ps</code> command is executed.
						</li><li class="listitem">
							Virtual memory statistics (<code class="literal">vmstat</code>) is provided by the <code class="literal">procps-ng</code> package. It provides instant reports of your system’s processes, memory, paging, block input/output, interrupts, and CPU activity.
						</li><li class="listitem">
							System activity reporter (<code class="literal">sar</code>) is provided by the <code class="literal">sysstat</code> package. It collects and reports information about system activity that has occurred so far on the current day.
						</li></ul></div></li><li class="listitem">
					<code class="literal">perf</code> uses hardware performance counters and kernel trace-points to track the impact of other commands and applications on a system.
				</li><li class="listitem">
					<code class="literal">bcc-tools</code> is used for BPF Compiler Collection (BCC). It provides over 100 <code class="literal">eBPF</code> scripts that monitor kernel activities. For more information on each of this tool, see the man page describing how to use it and what functions it performs.
				</li><li class="listitem">
					<code class="literal">turbostat</code> is provided by the <code class="literal">kernel-tools</code> package. It reports on processor topology, frequency, idle power-state statistics, temperature, and power usage on the Intel 64 processors.
				</li><li class="listitem">
					<code class="literal">iostat</code> is provided by the <code class="literal">sysstat</code> package. It monitors and reports on system input/output device loading to help administrators make decisions about how to balance input/output load between physical disks.
				</li><li class="listitem">
					<code class="literal">irqbalance</code> distributes hardware interrupts across processors to improve system performance.
				</li><li class="listitem">
					<code class="literal">ss</code> prints statistical information about sockets, allowing administrators to assess device performance over time. Red Hat recommends using <code class="literal">ss</code> over <code class="literal">netstat</code> in Red Hat Enterprise Linux 8.
				</li><li class="listitem">
					<code class="literal">numastat</code> is provided by the <code class="literal">numactl</code> package. By default, <code class="literal">numastat</code> displays per-node NUMA hit an miss system statistics from the kernel memory allocator. Optimal performance is indicated by high <code class="literal">numa_hit</code> values and low <code class="literal">numa_miss</code> values.
				</li><li class="listitem">
					<code class="literal">numad</code> is an automatic NUMA affinity management daemon. It monitors NUMA topology and resource usage within a system that dynamically improves NUMA resource allocation, management, and therefore system performance.
				</li><li class="listitem">
					<code class="literal">SystemTap</code> monitors and analyzes operating system activities, especially the kernel activities.
				</li><li class="listitem">
					<code class="literal">OProfile</code> monitors the system wide performance. It uses the processor’s dedicated performance monitoring hardware to retrieve information about the kernel and system executable to determine the frequency of certain events. These events can be when the memory is referenced, the number of second-level cache requests, and the number of hardware requests received.
				</li><li class="listitem">
					<code class="literal">valgrind</code> analyzes applications by running it on a synthetic CPU and instrumenting existing application code as it is executed. It then prints commentary that clearly identifies each process involved in application execution to a user-specified file, file descriptor, or network socket. It is also useful for finding memory leaks.
				</li><li class="listitem">
					<code class="literal">pqos</code> is provided by the the <code class="literal">intel-cmt-cat</code> package. It monitors and controls CPU cache and memory bandwidth on recent Intel processors.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					For more information, see the man pages of <code class="literal">pcp</code>, <code class="literal">top</code>, <code class="literal">ps</code>, <code class="literal">vmstat</code>, <code class="literal">sar</code>, <code class="literal">perf</code>, <code class="literal">iostat</code>, <code class="literal">irqbalance</code>, <code class="literal">ss</code>, <code class="literal">numastat</code>, <code class="literal">numad</code>, <code class="literal">valgrind</code>, and <code class="literal">pqos</code>.
				</li><li class="listitem">
					For more information on <code class="literal">oprofile</code> and <code class="literal">pcp</code>, see the documentation in the <code class="literal">/usr/share/doc/</code> directory.
				</li><li class="listitem">
					For more information on the <code class="literal">await</code> value and what can cause its values to be high, see the Red Hat Knowledgebase article: <a class="link" href="https://access.redhat.com/articles/524353">What exactly is the meaning of value "await" reported by iostat?</a>.
				</li></ul></div></section><section class="chapter" id="getting-started-with-tuned_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Getting started with Tuned</h1></div></div></div><p>
			As a system administrator, you can use the <span class="strong strong"><strong>Tuned</strong></span> application to optimize the performance profile of your system for a variety of use cases.
		</p><section class="section" id="the-purpose-of-tuned_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.1. The purpose of Tuned</h2></div></div></div><p>
				<span class="strong strong"><strong>Tuned</strong></span> is a service that monitors your system and optimizes the performance under certain workloads. The core of <span class="strong strong"><strong>Tuned</strong></span> are <span class="emphasis"><em>profiles</em></span>, which tune your system for different use cases.
			</p><p>
				<span class="strong strong"><strong>Tuned</strong></span> is distributed with a number of predefined profiles for use cases such as:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						High throughput
					</li><li class="listitem">
						Low latency
					</li><li class="listitem">
						Saving power
					</li></ul></div><p>
				It is possible to modify the rules defined for each profile and customize how to tune a particular device. When you switch to another profile or deactivate <span class="strong strong"><strong>Tuned</strong></span>, all changes made to the system settings by the previous profile revert back to their original state.
			</p><p>
				You can also configure <span class="strong strong"><strong>Tuned</strong></span> to react to changes in device usage and adjusts settings to improve performance of active devices and reduce power consumption of inactive devices.
			</p></section><section class="section" id="tuned-profiles_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.2. Tuned profiles</h2></div></div></div><p>
				A detailed analysis of a system can be very time-consuming. <span class="strong strong"><strong>Tuned</strong></span> provides a number of predefined profiles for typical use cases. You can also create, modify, and delete profiles.
			</p><p>
				The profiles provided with <span class="strong strong"><strong>Tuned</strong></span> are divided into the following categories:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Power-saving profiles
					</li><li class="listitem">
						Performance-boosting profiles
					</li></ul></div><p>
				The performance-boosting profiles include profiles that focus on the following aspects:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Low latency for storage and network
					</li><li class="listitem">
						High throughput for storage and network
					</li><li class="listitem">
						Virtual machine performance
					</li><li class="listitem">
						Virtualization host performance
					</li></ul></div><h4 id="the_default_profile">The default profile</h4><p>
				During the installation, the best profile for your system is selected automatically. Currently, the default profile is selected according to the following customizable rules:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 29%; " class="col_2"><!--Empty--></col><col style="width: 43%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290650409424" scope="col">Environment</th><th align="left" valign="top" id="idm140290650408336" scope="col">Default profile</th><th align="left" valign="top" id="idm140290650407248" scope="col">Goal</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290650409424"> <p>
								Compute nodes
							</p>
							 </td><td align="left" valign="top" headers="idm140290650408336"> <p>
								<code class="literal">throughput-performance</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290650407248"> <p>
								The best throughput performance
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290650409424"> <p>
								Virtual machines
							</p>
							 </td><td align="left" valign="top" headers="idm140290650408336"> <p>
								<code class="literal">virtual-guest</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290650407248"> <p>
								The best performance. If you are not interested in the best performance, you can change it to the <code class="literal">balanced</code> or <code class="literal">powersave</code> profile.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290650409424"> <p>
								Other cases
							</p>
							 </td><td align="left" valign="top" headers="idm140290650408336"> <p>
								<code class="literal">balanced</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290650407248"> <p>
								Balanced performance and power consumption
							</p>
							 </td></tr></tbody></table></div><h4 id="merged_profiles">Merged profiles</h4><p>
				As an experimental feature, it is possible to select more profiles at once. <span class="strong strong"><strong>Tuned</strong></span> will try to merge them during the load.
			</p><p>
				If there are conflicts, the settings from the last specified profile takes precedence.
			</p><div class="example" id="idm140290648344960"><p class="title"><strong>Example 2.1. Low power consumption in a virtual guest</strong></p><div class="example-contents"><p>
					The following example optimizes the system to run in a virtual machine for the best performance and concurrently tunes it for low power consumption, while the low power consumption is the priority:
				</p><pre class="screen"># tuned-adm profile virtual-guest powersave</pre></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Merging is done automatically without checking whether the resulting combination of parameters makes sense. Consequently, the feature might tune some parameters the opposite way, which might be counterproductive: for example, setting the disk for high throughput by using the <code class="literal">throughput-performance</code> profile and concurrently setting the disk spindown to the low value by the <code class="literal">spindown-disk</code> profile.
				</p></div></div><h4 id="the_location_of_profiles">The location of profiles</h4><p>
				<span class="strong strong"><strong>Tuned</strong></span> stores profiles in the following directories:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal filename">/usr/lib/tuned/</code></span></dt><dd>
							Distribution-specific profiles are stored in the directory. Each profile has its own directory. The profile consists of the main configuration file called <code class="literal">tuned.conf</code>, and optionally other files, for example helper scripts.
						</dd><dt><span class="term"><code class="literal filename">/etc/tuned/</code></span></dt><dd>
							If you need to customize a profile, copy the profile directory into the directory, which is used for custom profiles. If there are two profiles of the same name, the custom profile located in <code class="literal filename">/etc/tuned/</code> is used.
						</dd></dl></div><h4 id="the_syntax_of_profile_configuration">The syntax of profile configuration</h4><p>
				The <code class="literal">tuned.conf</code> file can contain one <code class="literal">[main]</code> section and other sections for configuring plug-in instances. However, all sections are optional.
			</p><p>
				Lines starting with the hash sign (<code class="literal">#</code>) are comments.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page.
					</li></ul></div></section><section class="section" id="tuned-profiles-distributed-with-rhel_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.3. Tuned profiles distributed with RHEL</h2></div></div></div><p>
				The following is a list of profiles that are installed with <span class="strong strong"><strong>Tuned</strong></span> on Red Hat Enterprise Linux.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					There might be more product-specific or third-party <span class="strong strong"><strong>Tuned</strong></span> profiles available. Such profiles are usually provided by separate RPM packages.
				</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">balanced</code></span></dt><dd>
							The default power-saving profile. It is intended to be a compromise between performance and power consumption. It uses auto-scaling and auto-tuning whenever possible. The only drawback is the increased latency. In the current <span class="strong strong"><strong>Tuned</strong></span> release, it enables the CPU, disk, audio, and video plugins, and activates the <code class="literal">conservative</code> CPU governor. The <code class="literal">radeon_powersave</code> option uses the <code class="literal">dpm-balanced</code> value if it is supported, otherwise it is set to <code class="literal">auto</code>.
						</dd><dt><span class="term"><code class="literal">powersave</code></span></dt><dd><p class="simpara">
							A profile for maximum power saving performance. It can throttle the performance in order to minimize the actual power consumption. In the current <span class="strong strong"><strong>Tuned</strong></span> release it enables USB autosuspend, WiFi power saving, and Aggressive Link Power Management (ALPM) power savings for SATA host adapters. It also schedules multi-core power savings for systems with a low wakeup rate and activates the <code class="literal">ondemand</code> governor. It enables AC97 audio power saving or, depending on your system, HDA-Intel power savings with a 10 seconds timeout. If your system contains a supported Radeon graphics card with enabled KMS, the profile configures it to automatic power saving. On ASUS Eee PCs, a dynamic Super Hybrid Engine is enabled.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In certain cases, the <code class="literal">balanced</code> profile is more efficient compared to the <code class="literal">powersave</code> profile.
							</p><p>
								Consider there is a defined amount of work that needs to be done, for example a video file that needs to be transcoded. Your machine might consume less energy if the transcoding is done on the full power, because the task is finished quickly, the machine starts to idle, and it can automatically step-down to very efficient power save modes. On the other hand, if you transcode the file with a throttled machine, the machine consumes less power during the transcoding, but the process takes longer and the overall consumed energy can be higher.
							</p><p>
								That is why the <code class="literal">balanced</code> profile can be generally a better option.
							</p></div></div></dd><dt><span class="term"><code class="literal">throughput-performance</code></span></dt><dd>
							A server profile optimized for high throughput. It disables power savings mechanisms and enables <code class="literal">sysctl</code> settings that improve the throughput performance of the disk and network IO. CPU governor is set to <code class="literal">performance</code>.
						</dd><dt><span class="term"><code class="literal">latency-performance</code></span></dt><dd>
							A server profile optimized for low latency. It disables power savings mechanisms and enables <code class="literal">sysctl</code> settings that improve latency. CPU governor is set to <code class="literal">performance</code> and the CPU is locked to the low C states (by PM QoS).
						</dd><dt><span class="term"><code class="literal">network-latency</code></span></dt><dd>
							A profile for low latency network tuning. It is based on the <code class="literal">latency-performance</code> profile. It additionally disables transparent huge pages and NUMA balancing, and tunes several other network-related <code class="literal">sysctl</code> parameters.
						</dd><dt><span class="term"><code class="literal">network-throughput</code></span></dt><dd>
							A profile for throughput network tuning. It is based on the <code class="literal">throughput-performance</code> profile. It additionally increases kernel network buffers.
						</dd><dt><span class="term"><code class="literal">virtual-guest</code></span></dt><dd>
							A profile designed for virtual guests based on the <code class="literal">throughput-performance</code> profile that, among other tasks, decreases virtual memory swappiness and increases disk readahead values. It does not disable disk barriers.
						</dd><dt><span class="term"><code class="literal">virtual-host</code></span></dt><dd>
							A profile designed for virtual hosts based on the <code class="literal">throughput-performance</code> profile that, among other tasks, decreases virtual memory swappiness, increases disk readahead values, and enables a more aggressive value of dirty pages writeback.
						</dd><dt><span class="term"><code class="literal">oracle</code></span></dt><dd>
							A profile optimized for Oracle databases loads based on <code class="literal">throughput-performance</code> profile. It additionally disables transparent huge pages and modifies other performance-related kernel parameters. This profile is provided by the <code class="literal package">tuned-profiles-oracle</code> package.
						</dd><dt><span class="term"><code class="literal">desktop</code></span></dt><dd>
							A profile optimized for desktops, based on the <code class="literal">balanced</code> profile. It additionally enables scheduler autogroups for better response of interactive applications.
						</dd><dt><span class="term"><code class="literal">cpu-partitioning</code></span></dt><dd><p class="simpara">
							The <code class="literal">cpu-partitioning</code> profile partitions the system CPUs into isolated and housekeeping CPUs. To reduce jitter and interruptions on an isolated CPU, the profile clears the isolated CPU from user-space processes, movable kernel threads, interrupt handlers, and kernel timers.
						</p><p class="simpara">
							A housekeeping CPU can run all services, shell processes, and kernel threads.
						</p><p class="simpara">
							You can configure the <code class="literal">cpu-partitioning</code> profile in <code class="literal">/etc/tuned/cpu-partitioning-variables.conf</code> file. The configuration options are:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">isolated_cores=<span class="emphasis"><em>cpu-list</em></span></code></span></dt><dd>
										Lists CPUs to isolate. The list of isolated CPUs is comma-separated or the user can specify the range. You can specify a range using a dash, such as <code class="literal">3-5</code>. This option is mandatory. Any CPU missing from this list is automatically considered a housekeeping CPU.
									</dd><dt><span class="term"><code class="literal">no_balance_cores=<span class="emphasis"><em>cpu-list</em></span></code></span></dt><dd>
										Lists CPUs which are not considered by the kernel during system wide process load-balancing. This option is optional. This is usually the same list as <code class="literal">isolated_cores</code>.
									</dd></dl></div><p class="simpara">
							For more information on <code class="literal">cpu-partitioning</code>, see the <code class="literal">tuned-profiles-cpu-partitioning(7)</code> man page.
						</p></dd></dl></div><h4 id="real_time_profiles">Real-time profiles</h4><p>
				Real-time profiles are intended for systems running the real-time kernel. Without a special kernel build, they do not configure the system to be real-time. On RHEL, the profiles are available from additional repositories.
			</p><p>
				The following real-time profiles are available:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">realtime</code></span></dt><dd><p class="simpara">
							Use on bare-metal real-time systems.
						</p><p class="simpara">
							Provided by the <code class="literal package">tuned-profiles-realtime</code> package, which is available from the RT or NFV repositories.
						</p></dd><dt><span class="term"><code class="literal">realtime-virtual-host</code></span></dt><dd><p class="simpara">
							Use in a virtualization host configured for real-time.
						</p><p class="simpara">
							Provided by the <code class="literal package">tuned-profiles-nfv-host</code> package, which is available from the NFV repository.
						</p></dd><dt><span class="term"><code class="literal">realtime-virtual-guest</code></span></dt><dd><p class="simpara">
							Use in a virtualization guest configured for real-time.
						</p><p class="simpara">
							Provided by the <code class="literal package">tuned-profiles-nfv-guest</code> package, which is available from the NFV repository.
						</p></dd></dl></div></section><section class="section" id="static-and-dynamic-tuning-in-tuned_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.4. Static and dynamic tuning in Tuned</h2></div></div></div><p>
				This section explains the difference between the two categories of system tuning that <span class="strong strong"><strong>Tuned</strong></span> applies: <span class="emphasis"><em>static</em></span> and <span class="emphasis"><em>dynamic</em></span>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Static tuning</span></dt><dd>
							Mainly consists of the application of predefined <code class="literal">sysctl</code> and <code class="literal">sysfs</code> settings and one-shot activation of several configuration tools such as <code class="literal">ethtool</code>.
						</dd><dt><span class="term">Dynamic tuning</span></dt><dd><p class="simpara">
							Watches how various system components are used throughout the uptime of your system. <span class="strong strong"><strong>Tuned</strong></span> adjusts system settings dynamically based on that monitoring information.
						</p><p class="simpara">
							For example, the hard drive is used heavily during startup and login, but is barely used later when the user might mainly work with applications such as web browsers or email clients. Similarly, the CPU and network devices are used differently at different times. <span class="strong strong"><strong>Tuned</strong></span> monitors the activity of these components and reacts to the changes in their use.
						</p><p class="simpara">
							By default, dynamic tuning is disabled. To enable it, edit the <code class="literal filename">/etc/tuned/tuned-main.conf</code> file and change the <code class="literal option">dynamic_tuning</code> option to <code class="literal">1</code>. <span class="strong strong"><strong>Tuned</strong></span> then periodically analyzes system statistics and uses them to update your system tuning settings. To configure the time interval in seconds between these updates, use the <code class="literal option">update_interval</code> option.
						</p><p class="simpara">
							Currently implemented dynamic tuning algorithms try to balance the performance and powersave, and are therefore disabled in the performance profiles. Dynamic tuning for individual plug-ins can be enabled or disabled in the <span class="strong strong"><strong>Tuned</strong></span> profiles.
						</p></dd></dl></div><div class="example" id="idm140290648012304"><p class="title"><strong>Example 2.2. Static and dynamic tuning on a workstation</strong></p><div class="example-contents"><p>
					On a typical office workstation, the Ethernet network interface is inactive most of the time. Only a few emails go in and out or some web pages might be loaded.
				</p><p>
					For those kinds of loads, the network interface does not have to run at full speed all the time, as it does by default. <span class="strong strong"><strong>Tuned</strong></span> has a monitoring and tuning plug-in for network devices that can detect this low activity and then automatically lower the speed of that interface, typically resulting in a lower power usage.
				</p><p>
					If the activity on the interface increases for a longer period of time, for example because a DVD image is being downloaded or an email with a large attachment is opened, <span class="strong strong"><strong>Tuned</strong></span> detects this and sets the interface speed to maximum to offer the best performance while the activity level is high.
				</p><p>
					This principle is used for other plug-ins for CPU and disks as well.
				</p></div></div></section><section class="section" id="tuned-no-daemon-mode_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.5. Tuned no-daemon mode</h2></div></div></div><p>
				You can run <span class="strong strong"><strong>Tuned</strong></span> in <code class="literal">no-daemon</code> mode, which does not require any resident memory. In this mode, <span class="strong strong"><strong>Tuned</strong></span> applies the settings and exits.
			</p><p>
				By default, <code class="literal">no-daemon</code> mode is disabled because a lot of <span class="strong strong"><strong>Tuned</strong></span> functionality is missing in this mode, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						D-Bus support
					</li><li class="listitem">
						Hot-plug support
					</li><li class="listitem">
						Rollback support for settings
					</li></ul></div><p>
				To enable <code class="literal">no-daemon</code> mode, include the following line in the <code class="literal filename">/etc/tuned/tuned-main.conf</code> file:
			</p><pre class="screen">daemon = 0</pre></section><section class="section" id="installing-and-enabling-tuned_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.6. Installing and enabling Tuned</h2></div></div></div><p>
				This procedure installs and enables the <span class="strong strong"><strong>Tuned</strong></span> application, installs <span class="strong strong"><strong>Tuned</strong></span> profiles, and presets a default <span class="strong strong"><strong>Tuned</strong></span> profile for your system.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">tuned</code> package:
					</p><pre class="screen"># yum install tuned</pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">tuned</code> service:
					</p><pre class="screen"># systemctl enable --now tuned</pre></li><li class="listitem"><p class="simpara">
						Optionally, install <span class="strong strong"><strong>Tuned</strong></span> profiles for real-time systems:
					</p><pre class="screen"># yum install tuned-profiles-realtime tuned-profiles-nfv</pre></li><li class="listitem"><p class="simpara">
						Verify that a <span class="strong strong"><strong>Tuned</strong></span> profile is active and applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">balanced</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verfication succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div></section><section class="section" id="listing-available-tuned-profiles_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.7. Listing available Tuned profiles</h2></div></div></div><p>
				This procedure lists all <span class="strong strong"><strong>Tuned</strong></span> profiles that are currently available on your system.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list all available <span class="strong strong"><strong>Tuned</strong></span> profiles on your system, use:
					</p><pre class="screen white-space-pre white-space-pre">$ <span class="strong strong"><strong>tuned-adm list</strong></span>

Available profiles:
- balanced               - General non-specialized tuned profile
- desktop                - Optimize for the desktop use-case
- latency-performance    - Optimize for deterministic performance at the cost of increased power consumption
- network-latency        - Optimize for deterministic performance at the cost of increased power consumption, focused on low latency network performance
- network-throughput     - Optimize for streaming network throughput, generally only necessary on older CPUs or 40G+ networks
- powersave              - Optimize for low power consumption
- throughput-performance - Broadly applicable tuning that provides excellent performance across a variety of common server workloads
- virtual-guest          - Optimize for running inside a virtual guest
- virtual-host           - Optimize for running KVM guests
Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">balanced</span></em></span></pre></li><li class="listitem"><p class="simpara">
						To display only the currently active profile, use:
					</p><pre class="screen">$ <span class="strong strong"><strong>tuned-adm active</strong></span>

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">balanced</span></em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned-adm(8)</code> man page.
					</li></ul></div></section><section class="section" id="setting-a-tuned-profile_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.8. Setting a Tuned profile</h2></div></div></div><p>
				This procedure activates a selected <span class="strong strong"><strong>Tuned</strong></span> profile on your system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned</code> service is running. See <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a> for details.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optionally, you can let <span class="strong strong"><strong>Tuned</strong></span> recommend the most suitable profile for your system:
					</p><pre class="screen"># tuned-adm recommend

<span class="emphasis"><em><span class="replaceable replaceable">balanced</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Activate a profile:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">selected-profile</span></em></span></pre><p class="simpara">
						Alternatively, you can activate a combination of multiple profiles:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">profile1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">profile2</span></em></span></pre><div class="example" id="idm140290647862544"><p class="title"><strong>Example 2.3. A virtual machine optimized for low power consumption</strong></p><div class="example-contents"><p>
							The following example optimizes the system to run in a virtual machine with the best performance and concurrently tunes it for low power consumption, while the low power consumption is the priority:
						</p><pre class="screen"># tuned-adm profile virtual-guest powersave</pre></div></div></li><li class="listitem"><p class="simpara">
						Verify that the <span class="strong strong"><strong>Tuned</strong></span> profile is active and applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">selected-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verfication succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned-adm(8)</code> man page
					</li></ul></div></section><section class="section" id="disabling-tuned_getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.9. Disabling Tuned</h2></div></div></div><p>
				This procedure disables <span class="strong strong"><strong>Tuned</strong></span> and resets all affected system settings to their original state before <span class="strong strong"><strong>Tuned</strong></span> modified them.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To disable all tunings temporarily:
					</p><pre class="screen"># tuned-adm off</pre><p class="simpara">
						The tunings are applied again after the <code class="literal">tuned</code> service restarts.
					</p></li><li class="listitem"><p class="simpara">
						Alternatively, to stop and disable the <code class="literal">tuned</code> service permanently:
					</p><pre class="screen"># systemctl disable --now tuned</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned-adm(8)</code> man page.
					</li></ul></div></section><section class="section" id="related-information-getting-started-with-tuned"><div class="titlepage"><div><div><h2 class="title">2.10. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned(8)</code> man page
					</li><li class="listitem">
						The <code class="literal">tuned-adm(8)</code> man page
					</li><li class="listitem">
						The <span class="strong strong"><strong>Tuned</strong></span> project website: <a class="link" href="https://tuned-project.org/">https://tuned-project.org/</a>
					</li></ul></div></section></section><section class="chapter" id="customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Customizing Tuned profiles</h1></div></div></div><p>
			You can create or modify <span class="strong strong"><strong>Tuned</strong></span> profiles to optimize system performance for your intended use case.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Install and enable <span class="strong strong"><strong>Tuned</strong></span> as described in <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a>.
				</li></ul></div><section class="section" id="tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.1. Tuned profiles</h2></div></div></div><p>
				A detailed analysis of a system can be very time-consuming. <span class="strong strong"><strong>Tuned</strong></span> provides a number of predefined profiles for typical use cases. You can also create, modify, and delete profiles.
			</p><p>
				The profiles provided with <span class="strong strong"><strong>Tuned</strong></span> are divided into the following categories:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Power-saving profiles
					</li><li class="listitem">
						Performance-boosting profiles
					</li></ul></div><p>
				The performance-boosting profiles include profiles that focus on the following aspects:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Low latency for storage and network
					</li><li class="listitem">
						High throughput for storage and network
					</li><li class="listitem">
						Virtual machine performance
					</li><li class="listitem">
						Virtualization host performance
					</li></ul></div><h4 id="the_default_profile_2">The default profile</h4><p>
				During the installation, the best profile for your system is selected automatically. Currently, the default profile is selected according to the following customizable rules:
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--></col><col style="width: 29%; " class="col_2"><!--Empty--></col><col style="width: 43%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290644851296" scope="col">Environment</th><th align="left" valign="top" id="idm140290644850208" scope="col">Default profile</th><th align="left" valign="top" id="idm140290644849120" scope="col">Goal</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290644851296"> <p>
								Compute nodes
							</p>
							 </td><td align="left" valign="top" headers="idm140290644850208"> <p>
								<code class="literal">throughput-performance</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290644849120"> <p>
								The best throughput performance
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290644851296"> <p>
								Virtual machines
							</p>
							 </td><td align="left" valign="top" headers="idm140290644850208"> <p>
								<code class="literal">virtual-guest</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290644849120"> <p>
								The best performance. If you are not interested in the best performance, you can change it to the <code class="literal">balanced</code> or <code class="literal">powersave</code> profile.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290644851296"> <p>
								Other cases
							</p>
							 </td><td align="left" valign="top" headers="idm140290644850208"> <p>
								<code class="literal">balanced</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140290644849120"> <p>
								Balanced performance and power consumption
							</p>
							 </td></tr></tbody></table></div><h4 id="merged_profiles_2">Merged profiles</h4><p>
				As an experimental feature, it is possible to select more profiles at once. <span class="strong strong"><strong>Tuned</strong></span> will try to merge them during the load.
			</p><p>
				If there are conflicts, the settings from the last specified profile takes precedence.
			</p><div class="example" id="idm140290648431536"><p class="title"><strong>Example 3.1. Low power consumption in a virtual guest</strong></p><div class="example-contents"><p>
					The following example optimizes the system to run in a virtual machine for the best performance and concurrently tunes it for low power consumption, while the low power consumption is the priority:
				</p><pre class="screen"># tuned-adm profile virtual-guest powersave</pre></div></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
					Merging is done automatically without checking whether the resulting combination of parameters makes sense. Consequently, the feature might tune some parameters the opposite way, which might be counterproductive: for example, setting the disk for high throughput by using the <code class="literal">throughput-performance</code> profile and concurrently setting the disk spindown to the low value by the <code class="literal">spindown-disk</code> profile.
				</p></div></div><h4 id="the_location_of_profiles_2">The location of profiles</h4><p>
				<span class="strong strong"><strong>Tuned</strong></span> stores profiles in the following directories:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal filename">/usr/lib/tuned/</code></span></dt><dd>
							Distribution-specific profiles are stored in the directory. Each profile has its own directory. The profile consists of the main configuration file called <code class="literal">tuned.conf</code>, and optionally other files, for example helper scripts.
						</dd><dt><span class="term"><code class="literal filename">/etc/tuned/</code></span></dt><dd>
							If you need to customize a profile, copy the profile directory into the directory, which is used for custom profiles. If there are two profiles of the same name, the custom profile located in <code class="literal filename">/etc/tuned/</code> is used.
						</dd></dl></div><h4 id="the_syntax_of_profile_configuration_2">The syntax of profile configuration</h4><p>
				The <code class="literal">tuned.conf</code> file can contain one <code class="literal">[main]</code> section and other sections for configuring plug-in instances. However, all sections are optional.
			</p><p>
				Lines starting with the hash sign (<code class="literal">#</code>) are comments.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page.
					</li></ul></div></section><section class="section" id="inheritance-between-tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.2. Inheritance between Tuned profiles</h2></div></div></div><p>
				<span class="strong strong"><strong>Tuned</strong></span> profiles can be based on other profiles and modify only certain aspects of their parent profile.
			</p><p>
				The <code class="literal">[main]</code> section of <span class="strong strong"><strong>Tuned</strong></span> profiles recognizes the <code class="literal option">include</code> option:
			</p><pre class="screen">[main]
include=<span class="emphasis"><em><span class="replaceable replaceable">parent</span></em></span></pre><p>
				All settings from the <span class="emphasis"><em><span class="replaceable replaceable">parent</span></em></span> profile are loaded in this <span class="emphasis"><em>child</em></span> profile. In the following sections, the <span class="emphasis"><em>child</em></span> profile can override certain settings inherited from the <span class="emphasis"><em><span class="replaceable replaceable">parent</span></em></span> profile or add new settings not present in the <span class="emphasis"><em><span class="replaceable replaceable">parent</span></em></span> profile.
			</p><p>
				You can create your own <span class="emphasis"><em>child</em></span> profile in the <code class="literal filename">/etc/tuned/</code> directory based on a pre-installed profile in <code class="literal filename">/usr/lib/tuned/</code> with only some parameters adjusted.
			</p><p>
				If the <span class="emphasis"><em><span class="replaceable replaceable">parent</span></em></span> profile is updated, such as after a <span class="strong strong"><strong>Tuned</strong></span> upgrade, the changes are reflected in the <span class="emphasis"><em>child</em></span> profile.
			</p><div class="example" id="idm140290650463744"><p class="title"><strong>Example 3.2. A power-saving profile based on balanced</strong></p><div class="example-contents"><p>
					The following is an example of a custom profile that extends the <code class="literal">balanced</code> profile and sets Aggressive Link Power Management (ALPM) for all devices to the maximum powersaving.
				</p><pre class="screen">[main]
include=balanced

[scsi_host]
alpm=min_power</pre></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li></ul></div></section><section class="section" id="static-and-dynamic-tuning-in-tuned_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.3. Static and dynamic tuning in Tuned</h2></div></div></div><p>
				This section explains the difference between the two categories of system tuning that <span class="strong strong"><strong>Tuned</strong></span> applies: <span class="emphasis"><em>static</em></span> and <span class="emphasis"><em>dynamic</em></span>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Static tuning</span></dt><dd>
							Mainly consists of the application of predefined <code class="literal">sysctl</code> and <code class="literal">sysfs</code> settings and one-shot activation of several configuration tools such as <code class="literal">ethtool</code>.
						</dd><dt><span class="term">Dynamic tuning</span></dt><dd><p class="simpara">
							Watches how various system components are used throughout the uptime of your system. <span class="strong strong"><strong>Tuned</strong></span> adjusts system settings dynamically based on that monitoring information.
						</p><p class="simpara">
							For example, the hard drive is used heavily during startup and login, but is barely used later when the user might mainly work with applications such as web browsers or email clients. Similarly, the CPU and network devices are used differently at different times. <span class="strong strong"><strong>Tuned</strong></span> monitors the activity of these components and reacts to the changes in their use.
						</p><p class="simpara">
							By default, dynamic tuning is disabled. To enable it, edit the <code class="literal filename">/etc/tuned/tuned-main.conf</code> file and change the <code class="literal option">dynamic_tuning</code> option to <code class="literal">1</code>. <span class="strong strong"><strong>Tuned</strong></span> then periodically analyzes system statistics and uses them to update your system tuning settings. To configure the time interval in seconds between these updates, use the <code class="literal option">update_interval</code> option.
						</p><p class="simpara">
							Currently implemented dynamic tuning algorithms try to balance the performance and powersave, and are therefore disabled in the performance profiles. Dynamic tuning for individual plug-ins can be enabled or disabled in the <span class="strong strong"><strong>Tuned</strong></span> profiles.
						</p></dd></dl></div><div class="example" id="idm140290647882080"><p class="title"><strong>Example 3.3. Static and dynamic tuning on a workstation</strong></p><div class="example-contents"><p>
					On a typical office workstation, the Ethernet network interface is inactive most of the time. Only a few emails go in and out or some web pages might be loaded.
				</p><p>
					For those kinds of loads, the network interface does not have to run at full speed all the time, as it does by default. <span class="strong strong"><strong>Tuned</strong></span> has a monitoring and tuning plug-in for network devices that can detect this low activity and then automatically lower the speed of that interface, typically resulting in a lower power usage.
				</p><p>
					If the activity on the interface increases for a longer period of time, for example because a DVD image is being downloaded or an email with a large attachment is opened, <span class="strong strong"><strong>Tuned</strong></span> detects this and sets the interface speed to maximum to offer the best performance while the activity level is high.
				</p><p>
					This principle is used for other plug-ins for CPU and disks as well.
				</p></div></div></section><section class="section" id="tuned-plug-ins_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.4. Tuned plug-ins</h2></div></div></div><p>
				Plug-ins are modules in <span class="strong strong"><strong>Tuned</strong></span> profiles that <span class="strong strong"><strong>Tuned</strong></span> uses to monitor or optimize different devices on the system.
			</p><p>
				<span class="strong strong"><strong>Tuned</strong></span> uses two types of plug-ins:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						monitoring plug-ins
					</li><li class="listitem">
						tuning plug-ins
					</li></ul></div><h4 id="monitoring_plug_ins">Monitoring plug-ins</h4><p>
				Monitoring plug-ins are used to get information from a running system. The output of the monitoring plug-ins can be used by tuning plug-ins for dynamic tuning.
			</p><p>
				Monitoring plug-ins are automatically instantiated whenever their metrics are needed by any of the enabled tuning plug-ins. If two tuning plug-ins require the same data, only one instance of the monitoring plug-in is created and the data is shared.
			</p><h4 id="tuning_plug_ins">Tuning plug-ins</h4><p>
				Each tuning plug-in tunes an individual subsystem and takes several parameters that are populated from the tuned profiles. Each subsystem can have multiple devices, such as multiple CPUs or network cards, that are handled by individual instances of the tuning plug-ins. Specific settings for individual devices are also supported.
			</p><h4 id="syntax_for_plug_ins_in_tuned_profiles">Syntax for plug-ins in Tuned profiles</h4><p>
				Sections describing plug-in instances are formatted in the following way:
			</p><pre class="screen">[<span class="emphasis"><em>NAME</em></span>]
type=<span class="emphasis"><em>TYPE</em></span>
devices=<span class="emphasis"><em>DEVICES</em></span></pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">NAME</span></dt><dd>
							is the name of the plug-in instance as it is used in the logs. It can be an arbitrary string.
						</dd><dt><span class="term">TYPE</span></dt><dd>
							is the type of the tuning plug-in.
						</dd><dt><span class="term">DEVICES</span></dt><dd><p class="simpara">
							is the list of devices that this plug-in instance handles.
						</p><p class="simpara">
							The <code class="literal">devices</code> line can contain a list, a wildcard (<code class="literal">*</code>), and negation (<code class="literal">!</code>). If there is no <code class="literal">devices</code> line, all devices present or later attached on the system of the <span class="emphasis"><em><span class="replaceable replaceable">TYPE</span></em></span> are handled by the plug-in instance. This is same as using the <code class="literal option">devices=*</code> option.
						</p><div class="example" id="idm140290646848048"><p class="title"><strong>Example 3.4. Matching block devices with a plug-in</strong></p><div class="example-contents"><p>
								The following example matches all block devices starting with <code class="literal">sd</code>, such as <code class="literal">sda</code> or <code class="literal">sdb</code>, and does not disable barriers on them:
							</p><pre class="screen">[data_disk]
type=disk
devices=sd*
disable_barriers=false</pre><p>
								The following example matches all block devices except <code class="literal">sda1</code> and <code class="literal">sda2</code>:
							</p><pre class="screen">[data_disk]
type=disk
devices=!sda1, !sda2
disable_barriers=false</pre></div></div></dd></dl></div><p>
				If no instance of a plug-in is specified, the plug-in is not enabled.
			</p><p>
				If the plug-in supports more options, they can be also specified in the plug-in section. If the option is not specified and it was not previously specified in the included plug-in, the default value is used.
			</p><h4 id="short_plug_in_syntax">Short plug-in syntax</h4><p>
				If you do not need custom names for the plug-in instance and there is only one definition of the instance in your configuration file, <span class="strong strong"><strong>Tuned</strong></span> supports the following short syntax:
			</p><pre class="screen">[<span class="emphasis"><em>TYPE</em></span>]
devices=<span class="emphasis"><em>DEVICES</em></span></pre><p>
				In this case, it is possible to omit the <code class="literal">type</code> line. The instance is then referred to with a name, same as the type. The previous example could be then rewritten into:
			</p><div class="example" id="idm140290651026496"><p class="title"><strong>Example 3.5. Matching block devices using the short syntax</strong></p><div class="example-contents"><pre class="screen">[disk]
devices=sdb*
disable_barriers=false</pre></div></div><h4 id="conflicting_plug_in_definitions_in_a_profile">Conflicting plug-in definitions in a profile</h4><p>
				If the same section is specified more than once using the <code class="literal">include</code> option, the settings are merged. If they cannot be merged due to a conflict, the last conflicting definition overrides the previous settings. If you do not know what was previously defined, you can use the <code class="literal option">replace</code> Boolean option and set it to <code class="literal">true</code>. This causes all the previous definitions with the same name to be overwritten and the merge does not happen.
			</p><p>
				You can also disable the plug-in by specifying the <code class="literal option">enabled=false</code> option. This has the same effect as if the instance was never defined. Disabling the plug-in is useful if you are redefining the previous definition from the <code class="literal option">include</code> option and do not want the plug-in to be active in your custom profile.
			</p><h4 id="functionality_not_implemented_in_any_plug_in">Functionality not implemented in any plug-in</h4><p>
				<span class="strong strong"><strong>Tuned</strong></span> includes the ability to run any shell command as part of enabling or disabling a tuning profile. This enables you to extend <span class="strong strong"><strong>Tuned</strong></span> profiles with functionality that has not been integrated into Tuned yet.
			</p><p>
				You can specify arbitrary shell commands using the <code class="literal">script</code> plug-in.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li></ul></div></section><section class="section" id="available-tuned-plug-ins_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.5. Available Tuned plug-ins</h2></div></div></div><p>
				This section lists all monitoring and tuning plug-ins currently available in <span class="strong strong"><strong>Tuned</strong></span>.
			</p><h4 id="monitoring_plug_ins_2">Monitoring plug-ins</h4><p>
				Currently, the following monitoring plug-ins are implemented:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">disk</code></span></dt><dd>
							Gets disk load (number of IO operations) per device and measurement interval.
						</dd><dt><span class="term"><code class="literal">net</code></span></dt><dd>
							Gets network load (number of transferred packets) per network card and measurement interval.
						</dd><dt><span class="term"><code class="literal">load</code></span></dt><dd>
							Gets CPU load per CPU and measurement interval.
						</dd></dl></div><h4 id="tuning_plug_ins_2">Tuning plug-ins</h4><p>
				Currently, the following tuning plug-ins are implemented. Only some of these plug-ins implement dynamic tuning. Options supported by plug-ins are also listed:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">cpu</code></span></dt><dd><p class="simpara">
							Sets the CPU governor to the value specified by the <code class="literal option">governor</code> option and dynamically changes the Power Management Quality of Service (PM QoS) CPU Direct Memory Access (DMA) latency according to the CPU load.
						</p><p class="simpara">
							If the CPU load is lower than the value specified by the <code class="literal option">load_threshold</code> option, the latency is set to the value specified by the <code class="literal option">latency_high</code> option, otherwise it is set to the value specified by <code class="literal option">latency_low</code>.
						</p><p class="simpara">
							You can also force the latency to a specific value and prevent it from dynamically changing further. To do so, set the <code class="literal option">force_latency</code> option to the required latency value.
						</p></dd><dt><span class="term"><code class="literal">eeepc_she</code></span></dt><dd><p class="simpara">
							Dynamically sets the front-side bus (FSB) speed according to the CPU load.
						</p><p class="simpara">
							This feature can be found on some netbooks and is also known as the ASUS Super Hybrid Engine (SHE).
						</p><p class="simpara">
							If the CPU load is lower or equal to the value specified by the <code class="literal option">load_threshold_powersave</code> option, the plug-in sets the FSB speed to the value specified by the <code class="literal option">she_powersave</code> option. If the CPU load is higher or equal to the value specified by the <code class="literal option">load_threshold_normal</code> option, it sets the FSB speed to the value specified by the <code class="literal option">she_normal</code> option.
						</p><p class="simpara">
							Static tuning is not supported and the plug-in is transparently disabled if <span class="strong strong"><strong>Tuned</strong></span> does not detect the hardware support for this feature.
						</p></dd><dt><span class="term"><code class="literal">net</code></span></dt><dd>
							Configures the Wake-on-LAN functionality to the values specified by the <code class="literal option">wake_on_lan</code> option. It uses the same syntax as the <code class="literal">ethtool</code> utility. It also dynamically changes the interface speed according to the interface utilization.
						</dd><dt><span class="term"><code class="literal">sysctl</code></span></dt><dd><p class="simpara">
							Sets various <code class="literal">sysctl</code> settings specified by the plug-in options.
						</p><p class="simpara">
							The syntax is <code class="literal"><span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span>=<span class="emphasis"><em><span class="replaceable replaceable">value</span></em></span></code>, where <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> is the same as the name provided by the <code class="literal">sysctl</code> utility.
						</p><p class="simpara">
							Use the <code class="literal">sysctl</code> plug-in if you need to change system settings that are not covered by other plug-ins available in <span class="strong strong"><strong>Tuned</strong></span>. If the settings are covered by some specific plug-ins, prefer these plug-ins.
						</p></dd><dt><span class="term"><code class="literal">usb</code></span></dt><dd><p class="simpara">
							Sets autosuspend timeout of USB devices to the value specified by the <code class="literal option">autosuspend</code> parameter.
						</p><p class="simpara">
							The value <code class="literal">0</code> means that autosuspend is disabled.
						</p></dd><dt><span class="term"><code class="literal">vm</code></span></dt><dd>
							Enables or disables transparent huge pages depending on the Boolean value of the <code class="literal option">transparent_hugepages</code> option.
						</dd><dt><span class="term"><code class="literal">audio</code></span></dt><dd><p class="simpara">
							Sets the autosuspend timeout for audio codecs to the value specified by the <code class="literal option">timeout</code> option.
						</p><p class="simpara">
							Currently, the <code class="literal">snd_hda_intel</code> and <code class="literal">snd_ac97_codec</code> codecs are supported. The value <code class="literal">0</code> means that the autosuspend is disabled. You can also enforce the controller reset by setting the Boolean option <code class="literal option">reset_controller</code> to <code class="literal">true</code>.
						</p></dd><dt><span class="term"><code class="literal">disk</code></span></dt><dd><p class="simpara">
							Sets the disk elevator to the value specified by the <code class="literal option">elevator</code> option.
						</p><p class="simpara">
							It also sets:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									APM to the value specified by the <code class="literal option">apm</code> option
								</li><li class="listitem">
									Scheduler quantum to the value specified by the <code class="literal option">scheduler_quantum</code> option
								</li><li class="listitem">
									Disk spindown timeout to the value specified by the <code class="literal option">spindown</code> option
								</li><li class="listitem">
									Disk readahead to the value specified by the <code class="literal option">readahead</code> parameter
								</li><li class="listitem">
									The current disk readahead to a value multiplied by the constant specified by the <code class="literal option">readahead_multiply</code> option
								</li></ul></div><p class="simpara">
							In addition, this plug-in dynamically changes the advanced power management and spindown timeout setting for the drive according to the current drive utilization. The dynamic tuning can be controlled by the Boolean option <code class="literal option">dynamic</code> and is enabled by default.
						</p></dd><dt><span class="term"><code class="literal">scsi_host</code></span></dt><dd><p class="simpara">
							Tunes options for SCSI hosts.
						</p><p class="simpara">
							It sets Aggressive Link Power Management (ALPM) to the value specified by the <code class="literal option">alpm</code> option.
						</p></dd><dt><span class="term"><code class="literal">mounts</code></span></dt><dd>
							Enables or disables barriers for mounts according to the Boolean value of the <code class="literal option">disable_barriers</code> option.
						</dd><dt><span class="term"><code class="literal">script</code></span></dt><dd><p class="simpara">
							Executes an external script or binary when the profile is loaded or unloaded. You can choose an arbitrary executable.
						</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								The <code class="literal">script</code> plug-in is provided mainly for compatibility with earlier releases. Prefer other <span class="strong strong"><strong>Tuned</strong></span> plug-ins if they cover the required functionality.
							</p></div></div><p class="simpara">
							<span class="strong strong"><strong>Tuned</strong></span> calls the executable with one of the following arguments:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">start</code> when loading the profile
								</li><li class="listitem">
									<code class="literal">stop</code> when unloading the profile
								</li></ul></div><p class="simpara">
							You need to correctly implement the <code class="literal">stop</code> action in your executable and revert all settings that you changed during the <code class="literal">start</code> action. Otherwise, the roll-back step after changing your <span class="strong strong"><strong>Tuned</strong></span> profile will not work.
						</p><p class="simpara">
							Bash scripts can import the <code class="literal filename">/usr/lib/tuned/functions</code> Bash library and use the functions defined there. Use these functions only for functionality that is not natively provided by <span class="strong strong"><strong>Tuned</strong></span>. If a function name starts with an underscore, such as <code class="literal">_wifi_set_power_level</code>, consider the function private and do not use it in your scripts, because it might change in the future.
						</p><p class="simpara">
							Specify the path to the executable using the <code class="literal">script</code> parameter in the plug-in configuration.
						</p><div class="example" id="idm140290647149008"><p class="title"><strong>Example 3.6. Running a Bash script from a profile</strong></p><div class="example-contents"><p>
								To run a Bash script named <code class="literal">script.sh</code> that is located in the profile directory, use:
							</p><pre class="screen">[script]
script=${i:PROFILE_DIR}/script.sh</pre></div></div></dd><dt><span class="term"><code class="literal">sysfs</code></span></dt><dd><p class="simpara">
							Sets various <code class="literal">sysfs</code> settings specified by the plug-in options.
						</p><p class="simpara">
							The syntax is <code class="literal"><span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span>=<span class="emphasis"><em><span class="replaceable replaceable">value</span></em></span></code>, where <span class="emphasis"><em><span class="replaceable replaceable">name</span></em></span> is the <code class="literal">sysfs</code> path to use.
						</p><p class="simpara">
							Use this plugin in case you need to change some settings that are not covered by other plug-ins. Prefer specific plug-ins if they cover the required settings.
						</p></dd><dt><span class="term"><code class="literal">video</code></span></dt><dd><p class="simpara">
							Sets various powersave levels on video cards. Currently, only the Radeon cards are supported.
						</p><p class="simpara">
							The powersave level can be specified by using the <code class="literal option">radeon_powersave</code> option. Supported values are:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">default</code>
								</li><li class="listitem">
									<code class="literal">auto</code>
								</li><li class="listitem">
									<code class="literal">low</code>
								</li><li class="listitem">
									<code class="literal">mid</code>
								</li><li class="listitem">
									<code class="literal">high</code>
								</li><li class="listitem">
									<code class="literal">dynpm</code>
								</li><li class="listitem">
									<code class="literal">dpm-battery</code>
								</li><li class="listitem">
									<code class="literal">dpm-balanced</code>
								</li><li class="listitem">
									<code class="literal">dpm-perfomance</code>
								</li></ul></div><p class="simpara">
							For details, see <a class="link" href="http://www.x.org/wiki/RadeonFeature#KMS_Power_Management_Options">www.x.org</a>. Note that this plug-in is experimental and the option might change in future releases.
						</p></dd><dt><span class="term"><code class="literal">bootloader</code></span></dt><dd><p class="simpara">
							Adds options to the kernel command line. This plug-in supports only the GRUB 2 boot loader.
						</p><p class="simpara">
							Customized non-standard location of the GRUB 2 configuration file can be specified by the <code class="literal option">grub2_cfg_file</code> option.
						</p><p class="simpara">
							The kernel options are added to the current GRUB configuration and its templates. The system needs to be rebooted for the kernel options to take effect.
						</p><p class="simpara">
							Switching to another profile or manually stopping the <code class="literal">tuned</code> service removes the additional options. If you shut down or reboot the system, the kernel options persist in the <code class="literal filename">grub.cfg</code> file.
						</p><p class="simpara">
							The kernel options can be specified by the following syntax:
						</p><pre class="screen">cmdline=<span class="emphasis"><em><span class="replaceable replaceable">arg1</span></em></span> <span class="emphasis"><em><span class="replaceable replaceable">arg2</span></em></span> ... <span class="emphasis"><em><span class="replaceable replaceable">argN</span></em></span></pre><div class="example" id="idm140290647406496"><p class="title"><strong>Example 3.7. Modifying the kernel command line</strong></p><div class="example-contents"><p>
								For example, to add the <code class="literal option">quiet</code> kernel option to a <span class="strong strong"><strong>Tuned</strong></span> profile, include the following lines in the <code class="literal filename">tuned.conf</code> file:
							</p><pre class="screen">[bootloader]
cmdline=quiet</pre><p>
								The following is an example of a custom profile that adds the <code class="literal option">isolcpus=2</code> option to the kernel command line:
							</p><pre class="screen">[bootloader]
cmdline=isolcpus=2</pre></div></div></dd></dl></div></section><section class="section" id="variables-and-built-in-functions-in-tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.6. Variables and built-in functions in Tuned profiles</h2></div></div></div><p>
				Variables and built-in functions expand at run time when a <span class="strong strong"><strong>Tuned</strong></span> profile is activated.
			</p><p>
				Using <span class="strong strong"><strong>Tuned</strong></span> variables reduces the amount of necessary typing in <span class="strong strong"><strong>Tuned</strong></span> profiles. You can also:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use various built-in functions together with <span class="strong strong"><strong>Tuned</strong></span> variables
					</li><li class="listitem">
						Create custom functions in Python and add them to <span class="strong strong"><strong>Tuned</strong></span> in the form of plug-ins
					</li></ul></div><h4 id="variables">Variables</h4><p>
				There are no predefined variables in <span class="strong strong"><strong>Tuned</strong></span> profiles. You can define your own variables by creating the <code class="literal">[variables]</code> section in a profile and using the following syntax:
			</p><pre class="screen">[variables]

<span class="emphasis"><em><span class="replaceable replaceable">variable_name</span></em></span>=<span class="emphasis"><em><span class="replaceable replaceable">value</span></em></span></pre><p>
				To expand the value of a variable in a profile, use the following syntax:
			</p><pre class="screen">${<span class="emphasis"><em><span class="replaceable replaceable">variable_name</span></em></span>}</pre><div class="example" id="idm140290653292560"><p class="title"><strong>Example 3.8. Isolating CPU cores using variables</strong></p><div class="example-contents"><p>
					In the following example, the <code class="literal">${isolated_cores}</code> variable expands to <code class="literal">1,2</code>; hence the kernel boots with the <code class="literal option">isolcpus=1,2</code> option:
				</p><pre class="screen">[variables]
isolated_cores=1,2

[bootloader]
cmdline=isolcpus=${isolated_cores}</pre><p>
					The variables can be specified in a separate file. For example, you can add the following lines to <code class="literal filename">tuned.conf</code>:
				</p><pre class="screen">[variables]
include=/etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-variables.conf</span></em></span>

[bootloader]
cmdline=isolcpus=${isolated_cores}</pre><p>
					If you add the <code class="literal option">isolated_cores=1,2</code> option to the <code class="literal filename">/etc/tuned/my-variables.conf</code> file, the kernel boots with the <code class="literal option">isolcpus=1,2</code> option.
				</p></div></div><h4 id="functions">Functions</h4><p>
				To call a function, use the following syntax:
			</p><pre class="screen">${f:<span class="emphasis"><em><span class="replaceable replaceable">function_name</span></em></span>:<span class="emphasis"><em><span class="replaceable replaceable">argument_1</span></em></span>:<span class="emphasis"><em><span class="replaceable replaceable">argument_2</span></em></span>}</pre><p>
				To expand the directory path where the profile and the <code class="literal">tuned.conf</code> file are located, use the <code class="literal">PROFILE_DIR</code> function, which requires special syntax:
			</p><pre class="screen">${i:PROFILE_DIR}</pre><div class="example" id="idm140290644507392"><p class="title"><strong>Example 3.9. Isolating CPU cores using variables and built-in functions</strong></p><div class="example-contents"><p>
					In the following example, the <code class="literal">${non_isolated_cores}</code> variable expands to <code class="literal">0,3-5</code>, and the <code class="literal">cpulist_invert</code> built-in function is called with the <code class="literal">0,3-5</code> argument:
				</p><pre class="screen">[variables]
non_isolated_cores=0,3-5

[bootloader]
cmdline=isolcpus=${f:cpulist_invert:${non_isolated_cores}}</pre><p>
					The <code class="literal">cpulist_invert</code> function inverts the list of CPUs. For a 6-CPU machine, the inversion is <code class="literal">1,2</code>, and the kernel boots with the <code class="literal option">isolcpus=1,2</code> command-line option.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li></ul></div></section><section class="section" id="built-in-functions-available-in-tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.7. Built-in functions available in Tuned profiles</h2></div></div></div><p>
				The following built-in functions are available in all <span class="strong strong"><strong>Tuned</strong></span> profiles:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">PROFILE_DIR</code></span></dt><dd>
							Returns the directory path where the profile and the <code class="literal">tuned.conf</code> file are located.
						</dd><dt><span class="term"><code class="literal">exec</code></span></dt><dd>
							Executes a process and returns its output.
						</dd><dt><span class="term"><code class="literal">assertion</code></span></dt><dd>
							Compares two arguments. If they <span class="emphasis"><em>do not match</em></span>, the function logs text from the first argument and aborts profile loading.
						</dd><dt><span class="term"><code class="literal">assertion_non_equal</code></span></dt><dd>
							Compares two arguments. If they <span class="emphasis"><em>match</em></span>, the function logs text from the first argument and aborts profile loading.
						</dd><dt><span class="term"><code class="literal">kb2s</code></span></dt><dd>
							Converts kilobytes to disk sectors.
						</dd><dt><span class="term"><code class="literal">s2kb</code></span></dt><dd>
							Converts disk sectors to kilobytes.
						</dd><dt><span class="term"><code class="literal">strip</code></span></dt><dd>
							Creates a string from all passed arguments and deletes both leading and trailing white space.
						</dd><dt><span class="term"><code class="literal">virt_check</code></span></dt><dd><p class="simpara">
							Checks whether <span class="strong strong"><strong>Tuned</strong></span> is running inside a virtual machine (VM) or on bare metal:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Inside a VM, the function returns the first argument.
								</li><li class="listitem">
									On bare metal, the function returns the second argument, even in case of an error.
								</li></ul></div></dd><dt><span class="term"><code class="literal">cpulist_invert</code></span></dt><dd>
							Inverts a list of CPUs to make its complement. For example, on a system with 4 CPUs, numbered from 0 to 3, the inversion of the list <code class="literal">0,2,3</code> is <code class="literal">1</code>.
						</dd><dt><span class="term"><code class="literal">cpulist2hex</code></span></dt><dd>
							Converts a CPU list to a hexadecimal CPU mask.
						</dd><dt><span class="term"><code class="literal">cpulist2hex_invert</code></span></dt><dd>
							Converts a CPU list to a hexadecimal CPU mask and inverts it.
						</dd><dt><span class="term"><code class="literal">hex2cpulist</code></span></dt><dd>
							Converts a hexadecimal CPU mask to a CPU list.
						</dd><dt><span class="term"><code class="literal">cpulist_online</code></span></dt><dd>
							Checks whether the CPUs from the list are online. Returns the list containing only online CPUs.
						</dd><dt><span class="term"><code class="literal">cpulist_present</code></span></dt><dd>
							Checks whether the CPUs from the list are present. Returns the list containing only present CPUs.
						</dd><dt><span class="term"><code class="literal">cpulist_unpack</code></span></dt><dd>
							Unpacks a CPU list in the form of <code class="literal">1-3,4</code> to <code class="literal">1,2,3,4</code>.
						</dd><dt><span class="term"><code class="literal">cpulist_pack</code></span></dt><dd>
							Packs a CPU list in the form of <code class="literal">1,2,3,5</code> to <code class="literal">1-3,5</code>.
						</dd></dl></div></section><section class="section" id="creating-new-tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.8. Creating new Tuned profiles</h2></div></div></div><p>
				This procedure creates a new <span class="strong strong"><strong>Tuned</strong></span> profile with custom performance rules.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned</code> service is installed and running. See <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a> for details.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <code class="literal filename">/etc/tuned/</code> directory, create a new directory named the same as the profile that you want to create:
					</p><pre class="screen"># mkdir /etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						In the new directory, create a file named <code class="literal filename">tuned.conf</code>. Add a <code class="literal">[main]</code> section and plug-in definitions in it, according to your requirements.
					</p><p class="simpara">
						For example, see the configuration of the <code class="literal">balanced</code> profile:
					</p><pre class="screen">[main]
summary=General non-specialized tuned profile

[cpu]
governor=conservative
energy_perf_bias=normal

[audio]
timeout=10

[video]
radeon_powersave=dpm-balanced, auto

[scsi_host]
alpm=medium_power</pre></li><li class="listitem"><p class="simpara">
						To activate the profile, use:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the <span class="strong strong"><strong>Tuned</strong></span> profile is active and the system settings are applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verfication succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li></ul></div></section><section class="section" id="modifying-existing-tuned-profiles_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.9. Modifying existing Tuned profiles</h2></div></div></div><p>
				This procedure creates a modified child profile based on an existing <span class="strong strong"><strong>Tuned</strong></span> profile.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned</code> service is installed and running. See <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a> for details.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <code class="literal filename">/etc/tuned/</code> directory, create a new directory named the same as the profile that you want to create:
					</p><pre class="screen"># mkdir /etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">modified-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						In the new directory, create a file named <code class="literal filename">tuned.conf</code>, and set the <code class="literal">[main]</code> section as follows:
					</p><pre class="screen">[main]
include=<span class="emphasis"><em><span class="replaceable replaceable">parent-profile</span></em></span></pre><p class="simpara">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">parent-profile</span></em></span> with the name of the profile you are modifying.
					</p></li><li class="listitem"><p class="simpara">
						Include your profile modifications.
					</p><div class="example" id="idm140290646860128"><p class="title"><strong>Example 3.10. Lowering swappiness in the throughput-performance profile</strong></p><div class="example-contents"><p>
							To use the settings from the <code class="literal">throughput-performance</code> profile and change the value of <code class="literal">vm.swappiness</code> to 5, instead of the default 10, use:
						</p><pre class="screen">[main]
include=throughput-performance

[sysctl]
vm.swappiness=5</pre></div></div></li><li class="listitem"><p class="simpara">
						To activate the profile, use:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">modified-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the <span class="strong strong"><strong>Tuned</strong></span> profile is active and the system settings are applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verfication succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li></ul></div></section><section class="section" id="setting-the-disk-scheduler-using-tuned_customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.10. Setting the disk scheduler using Tuned</h2></div></div></div><p>
				This procedure creates and enables a <span class="strong strong"><strong>Tuned</strong></span> profile that sets a given disk scheduler for selected block devices. The setting persists across system reboots.
			</p><p>
				In the following commands and configuration, replace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the name of the block device, for example <code class="literal">sdf</code>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> with the disk scheduler that you want to set for the device, for example <code class="literal">bfq</code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">tuned</code> service is installed and enabled.
					</p><p class="simpara">
						For details, see <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Select an existing <span class="strong strong"><strong>Tuned</strong></span> profile on which your profile will be based. For a list of available profiles, see <a class="xref" href="index.html#tuned-profiles-distributed-with-rhel_getting-started-with-tuned" title="2.3. Tuned profiles distributed with RHEL">Section 2.3, “Tuned profiles distributed with RHEL”</a>.
					</p><p class="simpara">
						To see which profile is currently active, use:
					</p><pre class="screen">$ tuned-adm active</pre></li><li class="listitem"><p class="simpara">
						Create a new directory to hold your <span class="strong strong"><strong>Tuned</strong></span> profile:
					</p><pre class="screen"># mkdir /etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Find the World Wide Name (WWN) identifier of the selected block device:
					</p><pre class="screen">$ udevadm info --query=property --name=/dev/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> | grep WWN=

ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal filename">/etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span>/tuned.conf</code> configuration file. In the file, set the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Optional: Include an existing profile:
							</p><pre class="screen">[main]
include=<span class="emphasis"><em><span class="replaceable replaceable">existing-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
								Set the selected disk scheduler for the device that matches the WWN identifier:
							</p><pre class="screen">[disk]
devices_udev_regex=ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>
elevator=<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span></pre><p class="simpara">
								To match multiple devices in the <code class="literal option">devices_udev_regex</code> option, enclose the identifiers in parentheses and separate them with vertical bars:
							</p><pre class="screen">devices_udev_regex=(ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>)|(ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x1234567800000000</span></em></span>)</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Enable your profile:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the Tuned profile is active and applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verification succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on creating a <span class="strong strong"><strong>Tuned</strong></span> profile, see <a class="xref" href="index.html#customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance" title="Chapter 3. Customizing Tuned profiles">Chapter 3, <em>Customizing Tuned profiles</em></a>.
					</li></ul></div></section><section class="section" id="related-information-customizing-tuned-profiles"><div class="titlepage"><div><div><h2 class="title">3.11. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned.conf(5)</code> man page
					</li><li class="listitem">
						The <span class="strong strong"><strong>Tuned</strong></span> project website: <a class="link" href="https://tuned-project.org/">https://tuned-project.org/</a>
					</li></ul></div></section></section><section class="chapter" id="monitoring-performance-with-performance-co-pilot_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Monitoring performance with Performance Co-Pilot</h1></div></div></div><p>
			As a system administrator, you can monitor the system’s performance using the Performance Co-Pilot (PCP) application in Red Hat Enterprise Linux 8.
		</p><section class="section" id="overview-of-pcp_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.1. Overview of PCP</h2></div></div></div><p>
				PCP is a suite of tools, services, and libraries for monitoring, visualizing, storing, and analyzing system-level performance measurements.
			</p><p>
				Features of PCP:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Light-weight distributed architecture, which is useful during the centralized analysis of complex systems.
					</li><li class="listitem">
						It allows the monitoring and management of real-time data.
					</li><li class="listitem">
						It allows logging and retrieval of historical data.
					</li></ul></div><p>
				You can add performance metrics using Python, Perl, C++, and C interfaces. Analysis tools can use the Python, C++, C client APIs directly, and rich web applications can explore all available performance data using a JSON interface.
			</p><p>
				You can analyze data patterns by comparing live results with archived data.
			</p><p>
				PCP has the following components:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Performance Metric Collector Daemon (<code class="literal">pmcd</code>) collects performance data from the installed Performance Metric Domain Agents (<code class="literal">pmda</code>). <span class="strong strong"><strong>PMDAs</strong></span> can be individually loaded or unloaded on the system and are controlled by the <span class="strong strong"><strong>PMCD</strong></span> on the same host.
					</li><li class="listitem">
						Various client tools, such as <code class="literal">pminfo</code> or <code class="literal">pmstat</code>, can retrieve, display, archive, and process this data on the same host or over the network.
					</li><li class="listitem">
						The <code class="literal">pcp</code> package provides the command-line tools and underlying functionality.
					</li><li class="listitem">
						The <code class="literal">pcp-gui</code> package provides the graphical application. Install the <code class="literal">pcp-gui</code> package by executing the <code class="literal">yum install pcp-gui</code> command. For more information, see <a class="xref" href="index.html#visually-tracing-pcp-log-archives-with-pcp-charts_monitoring-performance-with-performance-co-pilot" title="4.6. Visually tracing PCP log archives with the PCP Charts application">Section 4.6, “Visually tracing PCP log archives with the <span class="strong strong"><strong>PCP Charts</strong></span> application”</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">/usr/share/doc/pcp-doc/</code> directory.
					</li><li class="listitem">
						<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>.
					</li><li class="listitem">
						The <a class="link" href="https://access.redhat.com/articles/1145953">Index of Performance Co-Pilot (PCP) articles, solutions, tutorials and white papers</a> on Red Hat Customer Portal.
					</li><li class="listitem">
						The <a class="link" href="https://access.redhat.com/articles/2372811">Side-by-side comparison of PCP tools with legacy tools</a> Red Hat Knowledgebase article.
					</li><li class="listitem">
						The upstream <a class="link" href="http://pcp.io/documentation.html">PCP documentation</a>.
					</li></ul></div></section><section class="section" id="installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.2. Installing and enabling PCP</h2></div></div></div><p>
				To begin using PCP, install all the required packages and enable the PCP monitoring services.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the PCP package:
					</p><pre class="screen"># yum install pcp</pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">pmcd</code> service on the host machine:
					</p><pre class="screen"># systemctl enable pmcd

# systemctl start pmcd</pre></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">pmcd</code> process is running on the host and the XFS PMDA is listed as enabled in the configuration:
					</p><pre class="screen"># pcp

Performance Co-Pilot configuration on workstation:

platform: Linux workstation 4.18.0-80.el8.x86_64 #1 SMP Wed Mar 13 12:02:46 UTC 2019 x86_64
hardware: 12 cpus, 2 disks, 1 node, 36023MB RAM
timezone: CEST-2
services: pmcd
pmcd: Version 4.3.0-1, 8 agents
pmda: root pmcd proc xfs linux mmv kvm jbd2</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>.
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmcd.1.html">pmcd</a> man page.
					</li></ul></div></section><section class="section" id="deploying-a-minimal-pcp-setup_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.3. Deploying a minimal PCP setup</h2></div></div></div><p>
				The minimal PCP setup collects performance statistics on Red Hat Enterprise Linux. The setup involves adding the minimum number of packages on a production system needed to gather data for further analysis. You can analyze the resulting <code class="literal">tar.gz</code> file and the archive of the <code class="literal">pmlogger</code> output using various PCP tools and compare them with other sources of performance information.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Update the <code class="literal">pmlogger</code> configuration:
					</p><pre class="screen"># pmlogconf -r /var/lib/pcp/config/pmlogger/config.default</pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services:
					</p><pre class="screen"># systemctl start pmcd.service

# systemctl start pmlogger.service</pre></li><li class="listitem">
						Execute the required operations to record the performance data.
					</li><li class="listitem"><p class="simpara">
						Stop the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services:
					</p><pre class="screen"># systemctl stop pmcd.service

# systemctl stop pmlogger.service</pre></li><li class="listitem"><p class="simpara">
						Save the output and save it to a <code class="literal">tar.gz</code> file named based on the host name and the current date and time:
					</p><pre class="screen"># cd /var/log/pcp/pmlogger/

# tar -czf $(hostname).$(date +%F-%Hh%M).pcp.tar.gz $(hostname)</pre><p class="simpara">
						Extract this file and analyze the data using PCP tools.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmlogconf.1.html">pmlogconf</a> man page.
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmcd.1.html">pmcd</a> man page.
					</li></ul></div></section><section class="section" id="logging-performance-data-with-pmlogger_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.4. Logging performance data with pmlogger</h2></div></div></div><p>
				With the PCP tool you can log the performance metric values and replay them later. This allows you to perform a retrospective performance analysis.
			</p><p>
				Using the <code class="literal">pmlogger</code> tool, you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Create the archived logs of selected metrics on the system
					</li><li class="listitem">
						Specify which metrics are recorded on the system and how often
					</li></ul></div><section class="section" id="modifying-the-pmlogger-configuration-file-with-pmlogconf_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.1. Modifying the pmlogger configuration file with pmlogconf</h3></div></div></div><p>
					When the <code class="literal">pmlogger</code> service is running, PCP logs a default set of metrics on the host. Use the <code class="literal">pmlogconf</code> utility to check the default configuration. If the <code class="literal">pmlogger</code> configuration file does not exist, <code class="literal">pmlogconf</code> creates it with a default metric values.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create or modify the <code class="literal">pmlogger</code> configuration file:
						</p><pre class="screen"># pmlogconf -r /var/lib/pcp/config/pmlogger/config.default</pre></li><li class="listitem">
							Follow <code class="literal">pmlogconf</code> prompts to enable or disable groups of related performance metrics and to control the logging interval for each enabled group.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogconf.1.html">pmlogconf</a> man page.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li></ul></div></section><section class="section" id="editing-the-pmlogger-configuration-file-manually_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.2. Editing the pmlogger configuration file manually</h3></div></div></div><p>
					To create a tailored logging configuration with specific metrics and given intervals, edit the <code class="literal">pmlogger</code> configuration file manually.
				</p><p>
					In manual configuration, you can:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Record metrics which are not listed in the automatic configuration.
						</li><li class="listitem">
							Choose custom logging frequencies.
						</li><li class="listitem">
							Add <span class="strong strong"><strong>PMDA</strong></span> with the application metrics.
						</li></ul></div><p>
					The default <code class="literal">pmlogger</code> configuration file is <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code>. The configuration file specifies which metrics are logged by the primary logging instance.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Open and edit the <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code> file to add specific metrics:
						</p><pre class="screen"># It is safe to make additions from here on ...
#

log mandatory on every 5 seconds {
    xfs.write
    xfs.write_bytes
    xfs.read
    xfs.read_bytes
}

log mandatory on every 10 seconds {
    xfs.allocs
    xfs.block_map
    xfs.transactions
    xfs.log

}

[access]
disallow * : all;
allow localhost : enquire;</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li></ul></div></section><section class="section" id="enabling-the-pmlogger-service_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.3. Enabling the pmlogger service</h3></div></div></div><p>
					The <code class="literal">pmlogger</code> service must be started and enabled to log the metric values on the local machine.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start and enable the <code class="literal">pmlogger</code> service:
						</p><pre class="screen"># systemctl start pmlogger

# systemctl enable pmlogger</pre></li><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">pmlogger</code> is enabled:
						</p><pre class="screen"># pcp

Performance Co-Pilot configuration on workstation:

platform: Linux workstation 4.18.0-80.el8.x86_64 #1 SMP Wed Mar 13 12:02:46 UTC 2019 x86_64
hardware: 12 cpus, 2 disks, 1 node, 36023MB RAM
timezone: CEST-2
services: pmcd
pmcd: Version 4.3.0-1, 8 agents, 1 client
pmda: root pmcd proc xfs linux mmv kvm jbd2
pmlogger: primary logger: /var/log/pcp/pmlogger/workstation/20190827.15.54</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
						</li><li class="listitem">
							The <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code> file.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li></ul></div></section><section class="section" id="setting-up-a-client-system-for-metrics-collection_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.4. Setting up a client system for metrics collection</h3></div></div></div><p>
					This procedure describes how to set up a client system so that a central server can collect metrics from clients running PCP.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">pcp-system-tools</code> package:
						</p><pre class="screen"># yum install pcp-system-tools</pre></li><li class="listitem"><p class="simpara">
							Configure an IP address for <code class="literal">pmcd</code>:
						</p><pre class="screen"># echo "-i <span class="emphasis"><em>192.168.4.62</em></span>" &gt;&gt;/etc/pcp/pmcd/pmcd.options</pre><p class="simpara">
							Replace <span class="emphasis"><em>192.168.4.62</em></span> with the IP address, the client should listen on.
						</p><p class="simpara">
							By default, <code class="literal">pmcd</code> is listening on the localhost.
						</p></li><li class="listitem"><p class="simpara">
							Configure the firewall to add the public <code class="literal">zone</code> permanently:
						</p><pre class="screen"># firewall-cmd --permanent --zone=public --add-port=44321/tcp
success

# firewall-cmd --reload
success</pre></li><li class="listitem"><p class="simpara">
							Set an SELinux boolean:
						</p><pre class="screen"># setsebool -P pcp_bind_all_unreserved_ports on</pre></li><li class="listitem"><p class="simpara">
							Enable the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services:
						</p><pre class="screen"># systemctl enable pmcd pmlogger
# systemctl restart pmcd pmlogger</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify if the <code class="literal">pmcd</code> is correctly listening on the configured IP address:
						</p><pre class="literallayout white-space-pre"># ss -tlp | grep 44321
LISTEN   0   5     127.0.0.1:44321   0.0.0.0:*   users:(("pmcd",pid=151595,fd=6))
LISTEN   0   5  <span class="emphasis"><em>192.168.4.62:44321</em></span>   0.0.0.0:*   users:(("pmcd",pid=151595,fd=0))
LISTEN   0   5         [::1]:44321      [::]:*   users:(("pmcd",pid=151595,fd=7))</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>.
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>.
						</li><li class="listitem">
							The <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code> file.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li><li class="listitem">
							The <code class="literal">firewall-cmd</code> man page.
						</li><li class="listitem">
							The <code class="literal">setsebool</code> man page.
						</li><li class="listitem">
							The <code class="literal">ss</code> man page.
						</li></ul></div></section><section class="section" id="setting-up-the-central-server-to-collect-data_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.5. Setting up a central server to collect data</h3></div></div></div><p>
					This procedure describes how to create a central server to collect metrics from clients running PCP.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li><li class="listitem">
							Client is configured for metrics collection. For more information, see <a class="xref" href="index.html#setting-up-a-client-system-for-metrics-collection_logging-performance-data-with-pmlogger" title="4.4.4. Setting up a client system for metrics collection">Section 4.4.4, “Setting up a client system for metrics collection”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the <code class="literal">pcp-system-tools</code> package:
						</p><pre class="screen"># yum install pcp-system-tools</pre></li><li class="listitem"><p class="simpara">
							Add clients for monitoring:
						</p><pre class="literallayout white-space-pre"># echo "<span class="emphasis"><em>192.168.4.13</em></span> n n PCP_LOG_DIR/pmlogger/rhel7u4a -r -T24h10m \
-c config.remote"  &gt;&gt; /etc/pcp/pmlogger/control.d/remote

# echo "<span class="emphasis"><em>192.168.4.14</em></span> n n PCP_LOG_DIR/pmlogger/rhel6u10a -r -T24h10m \
 -c config.remote" &gt;&gt; /etc/pcp/pmlogger/control.d/remote

# echo "<span class="emphasis"><em>192.168.4.62</em></span> n n PCP_LOG_DIR/pmlogger/rhel8u1a -r -T24h10m \
-c config.remote" &gt;&gt; /etc/pcp/pmlogger/control.d/remote</pre><p class="simpara">
							Replace <span class="emphasis"><em>192.168.4.13</em></span>, <span class="emphasis"><em>192.168.4.14</em></span>, and <span class="emphasis"><em>192.168.4.62</em></span> with the client IP addresses.
						</p></li><li class="listitem"><p class="simpara">
							Enable the <code class="literal">pmcd</code> and <code class="literal">pmlogger</code> services:
						</p><pre class="screen"># systemctl enable pmcd pmlogger
# systemctl restart pmcd pmlogger</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure that you can access the latest archive file from each directory:
						</p><pre class="screen"># for i in /var/log/pcp/pmlogger/rhel*/*.0; do pmdumplog -L $i; done
Log Label (Log Format Version 2)
Performance metrics from host rhel6u10a.local
  commencing Mon Nov 25 21:55:04.851 2019
  ending     Mon Nov 25 22:06:04.874 2019
Archive timezone: JST-9
PID for pmlogger: 24002
Log Label (Log Format Version 2)
Performance metrics from host rhel7u4a
  commencing Tue Nov 26 06:49:24.954 2019
  ending     Tue Nov 26 07:06:24.979 2019
Archive timezone: CET-1
PID for pmlogger: 10941
[..]</pre><p class="simpara">
							The archive files from the <code class="literal">/var/log/pcp/pmlogger/</code> directory can be used for further analysis and graphing.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>.
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>.
						</li><li class="listitem">
							The <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code> file.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li></ul></div></section><section class="section" id="replaying-the-pcp-log-archives_logging-performance-data-with-pmlogger"><div class="titlepage"><div><div><h3 class="title">4.4.6. Replaying the PCP log archives with pmdumptext</h3></div></div></div><p>
					After recording the metric data, you can replay the PCP log archives. To export the logs to text files and import them into spreadsheets, use PCP utilities such as <code class="literal">pmdumptext</code>, <code class="literal">pmrep</code>, or <code class="literal">pmlogsummary</code>.
				</p><p>
					Using the <code class="literal">pmdumptext</code> tool, you can:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							View the log files
						</li><li class="listitem">
							Parse the selected PCP log archive and export the values into an ASCII table
						</li><li class="listitem">
							Extract the entire archive log or only select metric values from the log by specifying individual metrics on the command line
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li><li class="listitem">
							The <code class="literal">pmlogger</code> service is enabled. For more information, see <a class="xref" href="index.html#enabling-the-pmlogger-service_logging-performance-data-with-pmlogger" title="4.4.3. Enabling the pmlogger service">Section 4.4.3, “Enabling the pmlogger service”</a>.
						</li><li class="listitem"><p class="simpara">
							Install the <code class="literal">pcp-gui</code> package:
						</p><pre class="screen"># yum install pcp-gui</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the data on the metric:
						</p><pre class="screen">$ pmdumptext -t <span class="emphasis"><em>5seconds</em></span> -H -a 20170605 xfs.perdev.log.writes

Time local::xfs.perdev.log.writes["/dev/mapper/fedora-home"] local::xfs.perdev.log.writes["/dev/mapper/fedora-root"]
? 0.000 0.000
none count / second count / second
Mon Jun 5 12:28:45 ? ?
Mon Jun 5 12:28:50 0.000 0.000
Mon Jun 5 12:28:55 0.200 0.200
Mon Jun 5 12:29:00 6.800 1.000</pre><p class="simpara">
							The mentioned example displays the data on the <code class="literal">xfs.perdev.log</code> metric collected in an archive at a <span class="emphasis"><em>5 second</em></span> interval and display all the headers.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmdumptext.1.html">pmdumptext</a> man page.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmrep.1.html">pmrep</a> man page.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogsummary.1.html">pmlogsummary</a> man page.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
						</li></ul></div></section></section><section class="section" id="monitoring-postfix-with-pmda-postfix_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.5. Monitoring postfix with pmda-postfix</h2></div></div></div><p>
				This procedure describes how to monitor performance metrics of the <code class="literal">postfix</code> mail server with <code class="literal">pmda-postfix</code>. It helps to check how many emails are received per second.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
					</li><li class="listitem">
						The <code class="literal">pmlogger</code> service is enabled. For more information, see <a class="xref" href="index.html#enabling-the-pmlogger-service_logging-performance-data-with-pmlogger" title="4.4.3. Enabling the pmlogger service">Section 4.4.3, “Enabling the pmlogger service”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the following packages:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">pcp-system-tools</code>:
							</p><pre class="screen"># yum install pcp-system-tools</pre></li><li class="listitem"><p class="simpara">
								Install the <code class="literal">pmda-postfix</code> package to monitor <code class="literal">postfix</code>:
							</p><pre class="screen"># yum install pcp-pmda-postfix postfix</pre></li><li class="listitem"><p class="simpara">
								Install the logging daemon:
							</p><pre class="screen"># yum install rsyslog</pre></li><li class="listitem"><p class="simpara">
								Install the mail client for testing:
							</p><pre class="screen"># yum install mutt</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">postfix</code> and <code class="literal">rsyslog</code> services:
					</p><pre class="screen"># systemctl enable postfix rsyslog
# systemctl restart postfix rsyslog</pre></li><li class="listitem"><p class="simpara">
						Enable the SELinux boolean, so that <code class="literal">pmda-postfix</code> can access the required log files:
					</p><pre class="screen"># setsebool -P pcp_read_generic_logs=on</pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">PMDA</code>:
					</p><pre class="screen"># cd /var/lib/pcp/pmdas/postfix/

# ./Install

Updating the Performance Metrics Name Space (PMNS) ...
Terminate PMDA if already installed ...
Updating the PMCD control file, and notifying PMCD ...
Waiting for pmcd to terminate ...
Starting pmcd ...
Check postfix metrics have appeared ... 7 metrics and 58 values</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the <code class="literal">pmda-postfix</code> operation:
					</p><pre class="screen">echo testmail | mutt root</pre></li><li class="listitem"><p class="simpara">
						Verify the available metrics:
					</p><pre class="screen"># pminfo postfix

postfix.received
postfix.sent
postfix.queues.incoming
postfix.queues.maildrop
postfix.queues.hold
postfix.queues.deferred
postfix.queues.active</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
					</li><li class="listitem">
						<a class="xref" href="index.html#system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.8. System services distributed with PCP">Section 4.8, “System services distributed with PCP”</a>
					</li><li class="listitem">
						The <code class="literal">/var/lib/pcp/config/pmlogger/config.default</code> file.
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmlogger.1.html">pmlogger</a> man page.
					</li><li class="listitem">
						The <code class="literal">rsyslog</code> man page.
					</li><li class="listitem">
						The <code class="literal">postfix</code> man page.
					</li><li class="listitem">
						The <code class="literal">setsebool</code> man page.
					</li></ul></div></section><section class="section" id="visually-tracing-pcp-log-archives-with-pcp-charts_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.6. Visually tracing PCP log archives with the <span class="strong strong"><strong>PCP Charts</strong></span> application</h2></div></div></div><p>
				After recording metric data, you can replay the PCP log archives as graphs.
			</p><p>
				Using the <span class="strong strong"><strong>PCP Charts</strong></span> application, you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Replay the data in the <span class="strong strong"><strong>PCP Charts</strong></span> application application and use graphs to visualize the retrospective data alongside live data of the system.
					</li><li class="listitem">
						Plot performance metric values into graphs.
					</li><li class="listitem">
						Display multiple charts simultaneously.
					</li></ul></div><p>
				The metrics are sourced from one or more live hosts with alternative options to use metric data from PCP log archives as a source of historical data.
			</p><p>
				Following are the several ways to customize the <span class="strong strong"><strong>PCP Charts</strong></span> application interface to display the data from the performance metrics:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						line plot
					</li><li class="listitem">
						bar graphs
					</li><li class="listitem">
						utilization graphs
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
					</li><li class="listitem">
						Logged performance data with the <code class="literal">pmlogger</code>. For more information, see <a class="xref" href="index.html#logging-performance-data-with-pmlogger_monitoring-performance-with-performance-co-pilot" title="4.4. Logging performance data with pmlogger">Section 4.4, “Logging performance data with pmlogger”</a>.
					</li><li class="listitem"><p class="simpara">
						Install the <code class="literal">pcp-gui</code> package:
					</p><pre class="screen"># yum install pcp-gui</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Launch the <span class="strong strong"><strong>PCP Charts</strong></span> application from the command line:
					</p><pre class="screen"># pmchart</pre><p class="simpara">
						<span class="inlinemediaobject"><img src="pmchart_started.png" alt="pmchart started"/></span>

					</p><p class="simpara">
						The <code class="literal">pmtime</code> server settings are located at the bottom. The <span class="strong strong"><strong>start</strong></span> and <span class="strong strong"><strong>pause</strong></span> button allows you to control:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The interval in which PCP polls the metric data
							</li><li class="listitem">
								The date and time for the metrics of historical data
							</li></ul></div></li><li class="listitem">
						Go to <span class="strong strong"><strong>File → New Chart</strong></span> to select metric from both the local machine and remote machines by specifying their host name or address. Advanced configuration options include the ability to manually set the axis values for the chart, and to manually choose the color of the plots.
					</li><li class="listitem"><p class="simpara">
						Record the views created in the <span class="strong strong"><strong>PCP Charts</strong></span> application:
					</p><p class="simpara">
						Following are the options to take images or record the views created in the <span class="strong strong"><strong>PCP Charts</strong></span> application:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Click <span class="strong strong"><strong>File → Export</strong></span> to save an image of the current view.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Record → Start</strong></span> to start a recording. Click <span class="strong strong"><strong>Record → Stop</strong></span> to stop the recording. After stopping the recording, the recorded metrics are archived to be viewed later.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: In the <span class="strong strong"><strong>PCP Charts</strong></span> application, the main configuration file, known as the <span class="strong strong"><strong>view</strong></span>, allows the metadata associated with one or more charts to be saved. This metadata describes all chart aspects, including the metrics used and the chart columns. Save the custom <span class="strong strong"><strong>view</strong></span> configuration by clicking <span class="strong strong"><strong>File → Save View</strong></span>, and load the <span class="strong strong"><strong>view</strong></span> configuration later. The following example of the <span class="strong strong"><strong>PCP Charts</strong></span> application view configuration file describes a stacking chart graph showing the total number of bytes read and written to the given XFS file system <code class="literal">loop1</code>:
					</p><pre class="screen">#kmchart
version 1

chart title "Filesystem Throughput /loop1" style stacking antialiasing off
    plot legend "Read rate"   metric xfs.read_bytes   instance  "loop1"
    plot legend "Write rate"  metric xfs.write_bytes  instance  "loop1"</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmchart.1.html">pmchart</a> man page.
					</li><li class="listitem">
						The <a class="link" href="https://pcp.io/man/man1/pmtime.1.html">pmtime</a> man page.
					</li></ul></div></section><section class="section" id="xfs-file-system-performance-analysis-with-pcp_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.7. XFS file system performance analysis with PCP</h2></div></div></div><p>
				The XFS PMDA ships as part of the <code class="literal">pcp</code> package and is enabled by default during the installation. It is used to gather performance metric data of XFS file systems in PCP.
			</p><section class="section" id="installing-xfs-pmda-manually_xfs-file-system-performance-analysis-with-pcp"><div class="titlepage"><div><div><h3 class="title">4.7.1. Installing XFS PMDA manually</h3></div></div></div><p>
					If the XFS PMDA is not listed in PCP configuration readout, install the PMDA agent manually.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Navigate to the xfs directory:
						</p><pre class="screen"># cd /var/lib/pcp/pmdas/xfs/</pre></li><li class="listitem"><p class="simpara">
							Install the XFS PMDA manually:
						</p><pre class="screen">xfs]# ./Install

You will need to choose an appropriate configuration for install of
the “xfs” Performance Metrics Domain Agent (PMDA).

  collector     collect performance statistics on this system
  monitor       allow this system to monitor local and/or remote systems
  both          collector and monitor configuration for this system

Please enter c(ollector) or m(onitor) or (both) [b]
Updating the Performance Metrics Name Space (PMNS) ...
Terminate PMDA if already installed ...
Updating the PMCD control file, and notifying PMCD ...
Waiting for pmcd to terminate ...
Starting pmcd ...
Check xfs metrics have appeared ... 149 metrics and 149 values</pre></li><li class="listitem"><p class="simpara">
							Select the intended PMDA role by entering <code class="literal">c</code> for collector, <code class="literal">m</code> for monitor, or <code class="literal">b</code> for both. The PMDA installation script prompts you to specify one of the following PMDA roles:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The <code class="literal">collector</code> role allows the collection of performance metrics on the current system
								</li><li class="listitem"><p class="simpara">
									The <code class="literal">monitor</code> role allows the system to monitor local systems, remote systems, or both
								</p><p class="simpara">
									The default option is both <code class="literal">collector</code> and <code class="literal">monitor</code>, which allows the XFS PMDA to operate correctly in most scenarios.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmcd.1.html">pmcd</a> man page.
						</li></ul></div></section><section class="section" id="examining-xfs-performance-metrics-with-pminfo_xfs-file-system-performance-analysis-with-pcp"><div class="titlepage"><div><div><h3 class="title">4.7.2. Examining XFS performance metrics with pminfo</h3></div></div></div><p>
					The <code class="literal">pminfo</code> tool displays information about the available performance metrics. This procedure displays a list of all available metrics provided by the XFS PMDA.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the list of all available metrics provided by the XFS PMDA:
						</p><pre class="screen"># pminfo xfs</pre></li><li class="listitem"><p class="simpara">
							Display information for the individual metrics. The following examples examine specific XFS <code class="literal">read</code> and <code class="literal">write</code> metrics using the <code class="literal">pminfo</code> tool:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Display a short description of the <code class="literal">xfs.write_bytes</code> metric:
								</p><pre class="screen"># pminfo --oneline xfs.write_bytes

xfs.write_bytes [number of bytes written in XFS file system write operations]</pre></li><li class="listitem"><p class="simpara">
									Display a long description of the <code class="literal">xfs.read_bytes</code> metric:
								</p><pre class="screen"># pminfo --helptext xfs.read_bytes

xfs.read_bytes
Help:
This is the number of bytes read via read(2) system calls to files in
XFS file systems. It can be used in conjunction with the read_calls
count to calculate the average size of the read operations to file in
XFS file systems.</pre></li><li class="listitem"><p class="simpara">
									Obtain the current performance value of the <code class="literal">xfs.read_bytes</code> metric:
								</p><pre class="screen"># pminfo --fetch xfs.read_bytes

xfs.read_bytes
    value 4891346238</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot" title="4.10. PCP metric groups for XFS">Section 4.10, “PCP metric groups for XFS”</a>.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pminfo.1.html">pminfo</a> man page.
						</li></ul></div></section><section class="section" id="resetting-xfs-performance-metrics-with-pmstore_xfs-file-system-performance-analysis-with-pcp"><div class="titlepage"><div><div><h3 class="title">4.7.3. Resetting XFS performance metrics with pmstore</h3></div></div></div><p>
					With PCP, you can modify the values of certain metrics, especially if the metric acts as a control variable, such as the <code class="literal">xfs.control.reset</code> metric. To modify a metric value, use the <code class="literal">pmstore</code> tool.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the value of a metric:
						</p><pre class="screen">$ pminfo -f xfs.write

xfs.write
    value 325262</pre></li><li class="listitem"><p class="simpara">
							Reset all the XFS metrics:
						</p><pre class="screen"># pmstore xfs.control.reset 1

xfs.control.reset old value=0 new value=1</pre></li><li class="listitem"><p class="simpara">
							View the information after resetting the metric:
						</p><pre class="screen">$ pminfo --fetch xfs.write

xfs.write
    value 0</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot" title="4.9. Tools distributed with PCP">Section 4.9, “Tools distributed with PCP”</a>
						</li><li class="listitem">
							<a class="xref" href="index.html#pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot" title="4.10. PCP metric groups for XFS">Section 4.10, “PCP metric groups for XFS”</a>.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pmstore.1.html">pmstore</a> man page.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pminfo.1.html">pminfo</a> man page.
						</li></ul></div></section><section class="section" id="examining-xfs-metrics-available-per-file-system_xfs-file-system-performance-analysis-with-pcp"><div class="titlepage"><div><div><h3 class="title">4.7.4. Examining XFS metrics available per file system</h3></div></div></div><p>
					PCP enables XFS PMDA to allow the reporting of certain XFS metrics per each of the mounted XFS file systems. This makes it easier to pinpoint specific mounted file system issues and evaluate performance. The <code class="literal">pminfo</code> command provides per-device XFS metrics for each mounted XFS file system.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							PCP is installed. For more information, see <a class="xref" href="index.html#installing-and-enabling-pcp_monitoring-performance-with-performance-co-pilot" title="4.2. Installing and enabling PCP">Section 4.2, “Installing and enabling PCP”</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Obtain per-device XFS metrics with <code class="literal">pminfo</code>:
						</p><pre class="screen"># pminfo --fetch --oneline xfs.perdev.read xfs.perdev.write

xfs.perdev.read [number of XFS file system read operations]
inst [0 or "loop1"] value 0
inst [0 or "loop2"] value 0

xfs.perdev.write [number of XFS file system write operations]
inst [0 or "loop1"] value 86
inst [0 or "loop2"] value 0</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="xref" href="index.html#per-device-pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot" title="4.11. Per-device PCP metric groups for XFS">Section 4.11, “Per-device PCP metric groups for XFS”</a>.
						</li><li class="listitem">
							The <a class="link" href="https://pcp.io/man/man1/pminfo.1.html">pminfo</a> man page.
						</li></ul></div></section></section><section class="section" id="system-services-distributed-with-pcp_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.8. System services distributed with PCP</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Name
							</p>
							 </td><td align="left" valign="top"> <p>
								Description
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmcd</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								The Performance Metric Collector Daemon (PMCD).
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmie</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								The Performance Metrics Inference Engine.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmlogger</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								The performance metrics logger.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmmgr</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Manages a collection of PCP daemons for a set of discovered local and remote hosts running the Performance Metric Collector Daemon (PMCD) according to zero or more configuration directories.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmproxy</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								The Performance Metric Collector Daemon (PMCD) proxy server.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmwebd</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Binds a subset of the Performance Co-Pilot client API to RESTful web applications using the HTTP protocol.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="tools-distributed-with-pcp_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.9. Tools distributed with PCP</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Name
							</p>
							 </td><td align="left" valign="top"> <p>
								Description
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pcp</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays the current status of a Performance Co-Pilot installation.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pcp-atop</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Shows the system-level occupation of the most critical hardware resources from the performance point of view: CPU, memory, disk, and network.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pcp-dstat</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays metrics of one system at a time. To display metrics of multiple systems, use <code class="literal">--host</code> option.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmchart</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Plots performance metrics values available through the facilities of the Performance Co-Pilot.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmclient</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays high-level system performance metrics by using the Performance Metrics Application Programming Interface (PMAPI).
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmcollectl</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Collects and displays system-level data, either from a live system or from a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmconfig</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays the values of configuration parameters.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmdbg</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays available Performance Co-Pilot debug control flags and their values.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmdiff</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Compares the average values for every metric in either one or two archives, in a given time window, for changes that are likely to be of interest when searching for performance regressions.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmdumplog</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays control, metadata, index, and state information from a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmdumptext</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Outputs the values of performance metrics collected live or from a Performance Co-Pilot archive.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmerr</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays available Performance Co-Pilot error codes and their corresponding error messages.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmfind</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Finds PCP services on the network.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmie</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								An inference engine that periodically evaluates a set of arithmetic, logical, and rule expressions. The metrics are collected either from a live system, or from a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmieconf</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays or sets configurable pmie variables.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pminfo</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays information about performance metrics. The metrics are collected either from a live system, or from a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmiostat</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Reports I/O statistics for SCSI devices (by default) or device-mapper devices (with the -x dm option).
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmlc</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Interactively configures active pmlogger instances.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmlogcheck</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Identifies invalid data in a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmlogconf</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Creates and modifies a pmlogger configuration file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmloglabel</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Verifies, modifies, or repairs the label of a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmlogsummary</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Calculates statistical information about performance metrics stored in a Performance Co-Pilot archive file.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmprobe</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Determines the availability of performance metrics.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmrep</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Reports on selected, easily customizable, performance metrics values.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmsocks</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Allows access to a Performance Co-Pilot hosts through a firewall.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmstat</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Periodically displays a brief summary of system performance.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmstore</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Modifies the values of performance metrics.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmtrace</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Provides a command line interface to the trace Performance Metrics Domain Agent (PMDA).
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">pmval</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Displays the current value of a performance metric.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.10. PCP metric groups for XFS</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Metric Group
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics provided
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								General XFS metrics including the read and write operation counts, read and write byte counts. Along with counters for the number of times inodes are flushed, clustered and number of failure to cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.allocs.*</code>
							</p>
							 <p>
								<code class="literal">xfs.alloc_btree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Range of metrics regarding the allocation of objects in the file system, these include number of extent and block creations/frees. Allocation tree lookup and compares along with extend record creation and deletion from the btree.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.block_map.*</code>
							</p>
							 <p>
								<code class="literal">xfs.bmap_tree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics include the number of block map read/write and block deletions, extent list operations for insertion, deletions and lookups. Also operations counters for compares, lookups, insertions and deletion operations from the blockmap.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.dir_ops.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for directory operations on XFS file systems for creation, entry deletions, count of “getdent” operations.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.transactions.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of meta-data transactions, these include the count for the number of synchronous and asynchronous transactions along with the number of empty transactions.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.inode_ops.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of times that the operating system looked for an XFS inode in the inode cache with different outcomes. These count cache hits, cache misses, and so on.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.log.*</code>
							</p>
							 <p>
								<code class="literal">xfs.log_tail.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of log buffer writes over XFS file sytems includes the number of blocks written to disk. Metrics also for the number of log flushes and pinning.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.xstrat.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counts for the number of bytes of file data flushed out by the XFS flush deamon along with counters for number of buffers flushed to contiguous and non-contiguous space on disk.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.attr.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counts for the number of attribute get, set, remove and list operations over all XFS file systems.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.quota.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics for quota operation over XFS file systems, these include counters for number of quota reclaims, quota cache misses, cache hits and quota data reclaims.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.buffer.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Range of metrics regarding XFS buffer objects. Counters include the number of requested buffer calls, successful buffer locks, waited buffer locks, miss_locks, miss_retries and buffer hits when looking up pages.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.btree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics regarding the operations of the XFS btree.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.control.reset</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Configuration metrics which are used to reset the metric counters for the XFS stats. Control metrics are toggled by means of the pmstore tool.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="per-device-pcp-metric-groups-for-xfs_monitoring-performance-with-performance-co-pilot"><div class="titlepage"><div><div><h2 class="title">4.11. Per-device PCP metric groups for XFS</h2></div></div></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Metric Group
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics provided
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								General XFS metrics including the read and write operation counts, read and write byte counts. Along with counters for the number of times inodes are flushed, clustered and number of failure to cluster.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.allocs.*</code>
							</p>
							 <p>
								<code class="literal">xfs.perdev.alloc_btree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Range of metrics regarding the allocation of objects in the file system, these include number of extent and block creations/frees. Allocation tree lookup and compares along with extend record creation and deletion from the btree.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.block_map.*</code>
							</p>
							 <p>
								<code class="literal">xfs.perdev.bmap_tree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics include the number of block map read/write and block deletions, extent list operations for insertion, deletions and lookups. Also operations counters for compares, lookups, insertions and deletion operations from the blockmap.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.dir_ops.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for directory operations of XFS file systems for creation, entry deletions, count of “getdent” operations.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.transactions.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of meta-data transactions, these include the count for the number of synchronous and asynchronous transactions along with the number of empty transactions.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.inode_ops.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of times that the operating system looked for an XFS inode in the inode cache with different outcomes. These count cache hits, cache misses, and so on.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.log.*</code>
							</p>
							 <p>
								<code class="literal">xfs.perdev.log_tail.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counters for the number of log buffer writes over XFS filesytems includes the number of blocks written to disk. Metrics also for the number of log flushes and pinning.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.xstrat.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counts for the number of bytes of file data flushed out by the XFS flush deamon along with counters for number of buffers flushed to contiguous and non-contiguous space on disk.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.attr.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Counts for the number of attribute get, set, remove and list operations over all XFS file systems.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.quota.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics for quota operation over XFS file systems, these include counters for number of quota reclaims, quota cache misses, cache hits and quota data reclaims.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.buffer.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Range of metrics regarding XFS buffer objects. Counters include the number of requested buffer calls, successful buffer locks, waited buffer locks, miss_locks, miss_retries and buffer hits when looking up pages.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<code class="literal">xfs.perdev.btree.*</code>
							</p>
							 </td><td align="left" valign="top"> <p>
								Metrics regarding the operations of the XFS btree.
							</p>
							 </td></tr></tbody></table></div></section></section><section class="chapter" id="setting-up-graphical-representation-of-pcp-metrics_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Setting up graphical representation of PCP metrics</h1></div></div></div><p>
			Using a combination of <code class="literal">redis</code>, <code class="literal">pcp</code>, <code class="literal">bpftrace</code>, <code class="literal">vector</code> and <code class="literal">grafana</code> provides graphs, based on the live data or data collected by Performance Co-Pilot (PCP). It allows to access graphs of PCP metrics using a web browser.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The PCP is a generic framework which collects, monitors, analyzes, and stores performance related metrics. For more information about the PCP and its components, see <a class="link" href="index.html#monitoring-performance-with-performance-co-pilot_monitoring-and-managing-system-status-and-performance">Monitoring performance with Performance Co-Pilot</a>.
				</li><li class="listitem">
					Redis is an <code class="literal">in-memory-database</code>. It is used to store data from the archived files which is easily accessible for the graph generation by the Grafana application.
				</li><li class="listitem">
					Bpftrace allows access to the live data from sources which are not available as normal data from the <code class="literal">pmlogger</code> or archives.
				</li><li class="listitem">
					Vector provides access to the live data but does not provide access to data from past.
				</li><li class="listitem">
					Grafana generates graphs that are accessible from a browser. The <code class="literal">grafana-server</code> is a component that listens, by default, on all interfaces, and provides web services accessed through the web browser. The <code class="literal">grafana-pcp</code> plugin interacts with the <code class="literal">pmproxy</code> protocol in the backend.
				</li></ul></div><section class="section" id="setting-up-pcp-on-a-system_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.1. Setting up PCP on a system</h2></div></div></div><p>
				This procedure describes how to set up PCP on a system with the <code class="literal">pcp-zeroconf</code> package. Once the <code class="literal">pcp-zeroconf</code> package is installed, the system records the default set of metrics into archived files.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">pcp-zeroconf</code> package:
					</p><pre class="screen"># yum install pcp-zeroconf</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">pmlogger</code> service is active, and starts archiving the metrics:
					</p><pre class="literallayout white-space-pre"># pcp | grep pmlogger
 pmlogger: primary logger: /var/log/pcp/pmlogger/<span class="emphasis"><em>localhost.localdomain/20200401.00.12</em></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pmlogger</code> man page.
					</li><li class="listitem">
						For more information about the PCP and its components, see <a class="link" href="index.html#monitoring-performance-with-performance-co-pilot_monitoring-and-managing-system-status-and-performance">Monitoring performance with Performance Co-Pilot</a>.
					</li></ul></div></section><section class="section" id="setting-up-a-grafana-server_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.2. Setting up a grafana-server</h2></div></div></div><p>
				This procedure describes how to set up a <code class="literal">grafana-server</code>. It is a back-end server for the Grafana dashbaord. The <code class="literal">grafana-server</code> component listens on the interface, and provides web services which are accessed via browser.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pcp-zerconf</code> package is installed. For more information, see <a class="xref" href="index.html#setting-up-pcp-on-a-system_setting-up-graphical-representation-of-pcp-metrics" title="5.1. Setting up PCP on a system">Section 5.1, “Setting up PCP on a system”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the following packages:
					</p><pre class="screen"># yum install redis grafana grafana-pcp</pre></li><li class="listitem"><p class="simpara">
						Restart and enable the following components:
					</p><pre class="screen"># systemctl restart redis pmproxy grafana-server
# systemctl enable redis pmproxy grafana-server</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">grafana-server</code> is listening and responding to requests:
					</p><pre class="screen"># ss -ntlp | grep 3000
LISTEN  0  128  *:3000  *:*  users:(("grafana-server",pid=19522,fd=7))</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pmproxy</code> man page.
					</li><li class="listitem">
						The <code class="literal">grafana-server</code> man page.
					</li></ul></div></section><section class="section" id="accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.3. Accessing the Grafana web UI</h2></div></div></div><p>
				This procedure describes how to access the Grafana web interface and generate graphs using different types of data sources.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pcp-zerconf</code> package is installed. For more information, see <a class="xref" href="index.html#setting-up-pcp-on-a-system_setting-up-graphical-representation-of-pcp-metrics" title="5.1. Setting up PCP on a system">Section 5.1, “Setting up PCP on a system”</a>.
					</li><li class="listitem">
						The <code class="literal">grafana-server</code> is configured. For more information, see <a class="xref" href="index.html#setting-up-a-grafana-server_setting-up-graphical-representation-of-pcp-metrics" title="5.2. Setting up a grafana-server">Section 5.2, “Setting up a grafana-server”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the client system, open a browser and access the <code class="literal">grafana-server</code> on port <code class="literal">3000</code>, using <span class="emphasis"><em><a class="link" href="http://192.0.2.0:3000">http://192.0.2.0:3000</a></em></span> link.
					</p><p class="simpara">
						Replace <span class="emphasis"><em>192.0.2.0</em></span> with your machine IP.
					</p></li><li class="listitem"><p class="simpara">
						For the first login, enter <span class="strong strong"><strong>admin</strong></span> in both the <span class="strong strong"><strong>username</strong></span> and <span class="strong strong"><strong>password</strong></span> field.
					</p><div class="figure" id="idm140290636548352"><p class="title"><strong>Figure 5.1. Grafana login page</strong></p><div class="figure-contents"><div class="mediaobject"><img src="grafana-login.png" alt="grafana login"/></div></div></div></li><li class="listitem">
						To create a secured account, Grafana prompts to set a new <span class="strong strong"><strong>password</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-gear-icon.png" alt="grafana gear icon"/></span>
						    <span class="strong strong"><strong>configuration</strong></span> icon &gt; click <span class="strong strong"><strong>Plugins</strong></span> &gt; in the <span class="strong strong"><strong>Filter by name or type</strong></span>, type performance co-pilot &gt; click <span class="strong strong"><strong>Performance Co-Pilot</strong></span> plugin and &gt; click <span class="strong strong"><strong>Enable</strong></span> to enable the <code class="literal">grafana-pcp</code> plugin.
					</p><div class="figure" id="idm140290636566336"><p class="title"><strong>Figure 5.2. Home Dashboard</strong></p><div class="figure-contents"><div class="mediaobject"><img src="grafana-dashboard.png" alt="grafana dashboard"/></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The top corner of the screen has a similar    
							<span class="inlinemediaobject"><img src="grafana-top-corner-settings-icon.png" alt="grafana top corner settings icon"/></span>
							    icon, but it controls the general Dashboard settings.
						</p></div></div></li><li class="listitem">
						Click the    
						<span class="inlinemediaobject"><img src="grafana-home-page-whirl-icon.png" alt="Grafana logo"/></span>
						    icon to view the <span class="strong strong"><strong>Home Dashboard</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Home Dashboard</strong></span>, click <span class="strong strong"><strong>Add data source</strong></span> to add PCP Redis, PCP bpftrace, and PCP Vector data sources.
					</p><p class="simpara">
						For more information on how to add PCP Redis, PCP bpftrace, and PCP Vector data sources, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="xref" href="index.html#adding-pcp-redis-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics" title="5.4. Adding PCP Redis as a data source">Section 5.4, “Adding PCP Redis as a data source”</a>
							</li><li class="listitem">
								<a class="xref" href="index.html#adding-pcp-bpftrace-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics" title="5.5. Adding PCP bpftrace as a data source">Section 5.5, “Adding PCP bpftrace as a data source”</a>
							</li><li class="listitem">
								<a class="xref" href="index.html#adding-pcp-vector-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics" title="5.6. Adding PCP Vector as a data source">Section 5.6, “Adding PCP Vector as a data source”</a>.
							</li></ul></div></li><li class="listitem">
						Optional: In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-logout-option-icon.png" alt="grafana logout option icon"/></span>
						    icon to change the <span class="strong strong"><strong>Preferences</strong></span> or to <span class="strong strong"><strong>Sign out</strong></span>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <span class="strong strong"><strong>Performance Co-Pilot</strong></span> plugin is enabled:
					</p><pre class="screen"># grafana-cli plugins ls | grep performancecopilot-pcp-app
performancecopilot-pcp-app @ 1.0.5</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">grafana-cli</code> man page.
					</li><li class="listitem">
						The <code class="literal">grafana-server</code> man page.
					</li></ul></div></section><section class="section" id="adding-pcp-redis-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.4. Adding PCP Redis as a data source</h2></div></div></div><p>
				The PCP Redis data source visualizes everything which the archive contains and queries time series capability provided by the <code class="literal">pmseries</code> language. It analyzes data across multiple hosts. This procedure describes how to add PCP Redis as a data source and how to view the dashboard with an overview of useful metrics.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">grafana-server</code> is accessible. For more information, see <a class="xref" href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics" title="5.3. Accessing the Grafana web UI">Section 5.3, “Accessing the Grafana web UI”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click the    
						<span class="inlinemediaobject"><img src="grafana-home-page-whirl-icon.png" alt="Grafana logo"/></span>
						    icon &gt; click <span class="strong strong"><strong>Add data source</strong></span> &gt; in the <span class="strong strong"><strong>Filter by name or type</strong></span>, type redis &gt; and click <span class="strong strong"><strong>PCP Redis</strong></span> &gt; in the <span class="strong strong"><strong>URL</strong></span> field, accept the given suggestion <a class="link" href="http://localhost:44322">http://localhost:44322</a> and &gt; click <span class="strong strong"><strong>Save &amp; Test</strong></span>.
					</p><div class="figure" id="idm140290637312928"><p class="title"><strong>Figure 5.3. Adding PCP Redis in the data source</strong></p><div class="figure-contents"><div class="mediaobject"><img src="pcp-redis-data-sources.png" alt="pcp redis data sources"/></div></div></div></li><li class="listitem"><p class="simpara">
						In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-4-queries-icon.png" alt="grafana 4 queries icon"/></span>
						    filter icon &gt; click <span class="strong strong"><strong>Manage</strong></span> &gt; in the <span class="strong strong"><strong>Filter Dashboard by name</strong></span>, type pcp redis &gt; select <span class="strong strong"><strong>PCP Redis Host Overview</strong></span> to see a dashboard with an overview of any useful metrics.
					</p><div class="figure" id="idm140290637302704"><p class="title"><strong>Figure 5.4. PCP Redis Host Overview</strong></p><div class="figure-contents"><div class="mediaobject"><img src="PCP-redis-host-overview.png" alt="PCP redis host overview"/></div></div></div></li><li class="listitem"><p class="simpara">
						In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-plus-sign-on-dashboard-icon.png" alt="plus sign"/></span>
						    icon &gt; click <span class="strong strong"><strong>Dashboard</strong></span> option &gt; click <span class="strong strong"><strong>Add Query</strong></span> &gt; from the <span class="strong strong"><strong>Query</strong></span> list, select the <span class="strong strong"><strong>PCP Redis</strong></span> and &gt; in the text field of <span class="strong strong"><strong>A</strong></span>, enter metric, for example, <code class="literal">kernel.all.load</code> to visualize the kernel load graph.
					</p><div class="figure" id="idm140290641374720"><p class="title"><strong>Figure 5.5. PCP Redis query</strong></p><div class="figure-contents"><div class="mediaobject"><img src="PCP-redis-query.png" alt="PCP redis query"/></div></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pmseries</code> man page.
					</li></ul></div></section><section class="section" id="adding-pcp-bpftrace-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.5. Adding PCP bpftrace as a data source</h2></div></div></div><p>
				The <code class="literal">bpftrace</code> agent enables system introspection using the <code class="literal">bpftrace</code> scripts, which uses the enhanced Berkeley Packet Filter (<code class="literal">eBPF</code>) to gather metrics from kernel and user-space tracepoints. This procedure describes how to add PCP <code class="literal">bpftrace</code> as a data source and how to view the dashboard with an overview of any useful metrics.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">grafana-server</code> is accessible. For more information, see <a class="xref" href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics" title="5.3. Accessing the Grafana web UI">Section 5.3, “Accessing the Grafana web UI”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">pcp-pmda-bpftrace</code> package:
					</p><pre class="screen"># yum install pcp-pmda-bpftrace</pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">bpftrace.conf</code> file and disable the authentication option:
					</p><pre class="screen"># vi /var/lib/pcp/pmdas/bpftrace/bpftrace.conf

[authentication]
# NB. Disabling authentication is NOT RECOMMENDED, as everyone would be
# able to run bpftrace scripts AS ROOT!
enabled = false</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Do not disable the authentication option in production.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">bpftrace</code> PMDA:
					</p><pre class="screen"># cd /var/lib/pcp/pmdas/bpftrace/
# ./Install
Updating the Performance Metrics Name Space (PMNS) ...
Terminate PMDA if already installed ...
Updating the PMCD control file, and notifying PMCD ...
Check bpftrace metrics have appeared ... 7 metrics and 6 values</pre></li><li class="listitem">
						Log into the Grafana web UI. For more information, see <a class="xref" href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics" title="5.3. Accessing the Grafana web UI">Section 5.3, “Accessing the Grafana web UI”</a>.
					</li><li class="listitem"><p class="simpara">
						Click the    
						<span class="inlinemediaobject"><img src="grafana-home-page-whirl-icon.png" alt="Grafana logo"/></span>
						    icon &gt; click <span class="strong strong"><strong>Add data source</strong></span> &gt; in the <span class="strong strong"><strong>Filter by name or type</strong></span>, type bpftrace &gt; and click <span class="strong strong"><strong>PCP bpftrace</strong></span> &gt; in the <span class="strong strong"><strong>URL</strong></span> field, accept the given suggestion <a class="link" href="http://localhost:44322">http://localhost:44322</a> and &gt; click <span class="strong strong"><strong>Save &amp; Test</strong></span>.
					</p><div class="figure" id="idm140290636784064"><p class="title"><strong>Figure 5.6. Adding PCP bpftrace in the data source</strong></p><div class="figure-contents"><div class="mediaobject"><img src="pcp-bpftrace-data-source.png" alt="pcp bpftrace data source"/></div></div></div></li><li class="listitem"><p class="simpara">
						In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-4-queries-icon.png" alt="grafana 4 queries icon"/></span>
						    filter icon &gt; click <span class="strong strong"><strong>Manage</strong></span> &gt; in the <span class="strong strong"><strong>Filter Dashboard by name</strong></span>, type pcp bpftrace &gt; select <span class="strong strong"><strong>PCP bpftrace System Analysis</strong></span> to see a dashboard with an overview of useful metrics.
					</p><div class="figure" id="idm140290637734800"><p class="title"><strong>Figure 5.7. PCP bpftrace System Analysis</strong></p><div class="figure-contents"><div class="mediaobject"><img src="pcp-bpftrace-bpftrace-system-analysis.png" alt="pcp bpftrace bpftrace system analysis"/></div></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pmdabpftrace</code> man page.
					</li><li class="listitem">
						The <code class="literal">bpftrace</code> man page.
					</li></ul></div></section><section class="section" id="adding-pcp-vector-as-a-data-source_setting-up-graphical-representation-of-pcp-metrics"><div class="titlepage"><div><div><h2 class="title">5.6. Adding PCP Vector as a data source</h2></div></div></div><p>
				The PCP Vector data source displays live metrics and uses the <code class="literal">pcp</code> metrics. It analyzes data for individual hosts. This procedure describes how to add a PCP Vector as a data source and how to view the dashboard with an overview of any useful metrics.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">grafana-server</code> is accessible. For more information, see <a class="xref" href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics" title="5.3. Accessing the Grafana web UI">Section 5.3, “Accessing the Grafana web UI”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">pcp-pmda-bcc</code> package:
					</p><pre class="literallayout white-space-pre"># yum install pcp-pmda-bcc</pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">bcc</code> PMDA:
					</p><pre class="screen"># cd /var/lib/pcp/pmdas/bcc
# ./Install
[Wed Apr  1 00:27:48] pmdabcc(22341) Info: Initializing, currently in 'notready' state.
[Wed Apr  1 00:27:48] pmdabcc(22341) Info: Enabled modules:
[Wed Apr  1 00:27:48] pmdabcc(22341) Info: ['biolatency', 'sysfork',
[...]
Updating the Performance Metrics Name Space (PMNS) ...
Terminate PMDA if already installed ...
Updating the PMCD control file, and notifying PMCD ...
Check bcc metrics have appeared ... 1 warnings, 1 metrics and 0 values</pre></li><li class="listitem">
						Log into the Grafana web UI. For more information, see <a class="xref" href="index.html#accessing-the-grafana-web-UI_setting-up-graphical-representation-of-pcp-metrics" title="5.3. Accessing the Grafana web UI">Section 5.3, “Accessing the Grafana web UI”</a>.
					</li><li class="listitem"><p class="simpara">
						Click the    
						<span class="inlinemediaobject"><img src="grafana-home-page-whirl-icon.png" alt="Grafana logo"/></span>
						    icon &gt; click <span class="strong strong"><strong>Add data source</strong></span> &gt; in the <span class="strong strong"><strong>Filter by name or type</strong></span>, type vector &gt; and click <span class="strong strong"><strong>PCP Vector</strong></span> &gt; in the <span class="strong strong"><strong>URL</strong></span> field, accept the given suggestion <a class="link" href="http://localhost:44322">http://localhost:44322</a> and &gt; click <span class="strong strong"><strong>Save &amp; Test</strong></span>.
					</p><div class="figure" id="idm140290640638096"><p class="title"><strong>Figure 5.8. Adding PCP Vector in the data source</strong></p><div class="figure-contents"><div class="mediaobject"><img src="pcp-vector.png" alt="pcp vector"/></div></div></div></li><li class="listitem"><p class="simpara">
						In the pane, hover on the    
						<span class="inlinemediaobject"><img src="grafana-4-queries-icon.png" alt="grafana 4 queries icon"/></span>
						    icon &gt; click <span class="strong strong"><strong>Manage</strong></span> &gt; in the <span class="strong strong"><strong>Filter Dashboard by name</strong></span>, type pcp vector &gt; select <span class="strong strong"><strong>PCP Vector Host Overview</strong></span> to see a dashboard with an overview of useful metrics.
					</p><div class="figure" id="idm140290640627888"><p class="title"><strong>Figure 5.9. PCP Vector Host Overview</strong></p><div class="figure-contents"><div class="mediaobject"><img src="pcp-vector-overview.png" alt="pcp vector overview"/></div></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">pmdabcc</code> man page.
					</li></ul></div></section></section><section class="chapter" id="optimizing-the-system-performance-using-the-web-console_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Optimizing the system performance using the web console<span id="using-the-web-console-for-selecting-performance-profiles_configuring-system-settings-in-the-web-console"><!--Empty--></span><span id="using-the-web-console-for-selecting-performance-profiles_monitoring-and-managing-system-status-and-performance"><!--Empty--></span></h1></div></div></div><p>
			In the web console, you can set a performance profile to optimize the performance of the system for a selected task.
		</p><section class="section" id="performance-tuning-options-in-the-web-console_optimizing-the-system-performance-using-the-web-console"><div class="titlepage"><div><div><h2 class="title">6.1. Performance tuning options in the web console</h2></div></div></div><p>
				Red Hat Enterprise Linux 8 provides several performance profiles that optimize the system for the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Systems using the desktop
					</li><li class="listitem">
						Throughput performance
					</li><li class="listitem">
						Latency performance
					</li><li class="listitem">
						Network performance
					</li><li class="listitem">
						Low power consumption
					</li><li class="listitem">
						Virtual machines
					</li></ul></div><p>
				The <code class="literal">tuned</code> service optimizes system options to match the selected profile.
			</p><p>
				In the web console, you can set which performance profile your system uses.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For details about the <code class="literal">tuned</code> service, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/monitoring_and_managing_system_status_and_performance">Monitoring and managing system status and performance</a>.
					</li></ul></div></section><section class="section" id="setting-a-performance-profile-in-the-web-console_optimizing-the-system-performance-using-the-web-console"><div class="titlepage"><div><div><h2 class="title">6.2. Setting a performance profile in the web console</h2></div></div></div><p>
				This procedure uses the web console to optimize the system performance for a selected task.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The web console is installed and accessible.
					</p><p class="simpara">
						For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/getting-started-with-the-rhel-8-web-console_system-management-using-the-rhel-8-web-console#installing-the-web-console_getting-started-with-the-rhel-8-web-console">Installing the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log into the RHEL 8 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_systems_using_the_rhel_8_web_console/getting-started-with-the-rhel-8-web-console_system-management-using-the-rhel-8-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-8-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>Overview</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Performance Profile</strong></span> field, click the current performance profile.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="cockpit-performance-profile-pf4.png" alt="cockpit performance profile pf4"/></span>

					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Change Performance Profile</strong></span> dialog box, change the profile if necessary.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Change Profile</strong></span>.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="cockpit-performance-profile-change-pf4.png" alt="cockpit performance profile change pf4"/></span>

					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <span class="strong strong"><strong>Overview</strong></span> tab now shows the selected performance profile.
					</li></ul></div></section></section><section class="chapter" id="setting-the-disk-scheduler_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Setting the disk scheduler</h1></div></div></div><p>
			The disk scheduler is responsible for ordering the I/O requests submitted to a storage device.
		</p><p>
			You can configure the scheduler in several different ways:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Set the scheduler using <span class="strong strong"><strong>Tuned</strong></span>, as described in <a class="xref" href="index.html#setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler" title="7.6. Setting the disk scheduler using Tuned">Section 7.6, “Setting the disk scheduler using Tuned”</a>
				</li><li class="listitem">
					Set the scheduler using <code class="literal">udev</code>, as described in <a class="xref" href="index.html#setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler" title="7.7. Setting the disk scheduler using udev rules">Section 7.7, “Setting the disk scheduler using udev rules”</a>
				</li><li class="listitem">
					Temporarily change the scheduler on a running system, as described in <a class="xref" href="index.html#temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler" title="7.8. Temporarily setting a scheduler for a specific disk">Section 7.8, “Temporarily setting a scheduler for a specific disk”</a>
				</li></ul></div><section class="section" id="disk-scheduler-changes-in-rhel-8_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.1. Disk scheduler changes in RHEL 8</h2></div></div></div><p>
				In RHEL 8, block devices support only multi-queue scheduling. This enables the block layer performance to scale well with fast solid-state drives (SSDs) and multi-core systems.
			</p><p>
				The traditional, single-queue schedulers, which were available in RHEL 7 and earlier versions, have been removed.
			</p></section><section class="section" id="available-disk-schedulers_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.2. Available disk schedulers</h2></div></div></div><p>
				The following multi-queue disk schedulers are supported in RHEL 8:
			</p><div class="variablelist"><p class="title"><strong>Disk schedulers</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal">none</code></span></dt><dd>
							Implements a first-in first-out (FIFO) scheduling algorithm. It merges requests at the generic block layer through a simple last-hit cache.
						</dd><dt><span class="term"><code class="literal">mq-deadline</code></span></dt><dd><p class="simpara">
							Attempts to provide a guaranteed latency for requests from the point at which requests reach the scheduler.
						</p><p class="simpara">
							The <code class="literal">mq-deadline</code> scheduler sorts queued I/O requests into a read or write batch and then schedules them for execution in increasing logical block addressing (LBA) order. By default, read batches take precedence over write batches, because applications are more likely to block on read I/O operations. After <code class="literal">mq-deadline</code> processes a batch, it checks how long write operations have been starved of processor time and schedules the next read or write batch as appropriate.
						</p><p class="simpara">
							This scheduler is suitable for most use cases, but particularly those in which read operations occur more often than write operations.
						</p></dd><dt><span class="term"><code class="literal">bfq</code></span></dt><dd><p class="simpara">
							Targets desktop systems and interactive tasks.
						</p><p class="simpara">
							The <code class="literal">bfq</code> scheduler ensures that a single application is never using all of the bandwidth. In effect, the storage device is always as responsive as if it was idle. The system does not become unresponsive when copying large files. In its default configuration, <code class="literal">bfq</code> focuses on delivering the lowest latency rather than achieving the maximum throughput.
						</p><p class="simpara">
							<code class="literal">bfq</code> is based on <code class="literal">cfq</code> code. It does not grant the disk to each process for a fixed time slice but assigns a <span class="emphasis"><em>budget</em></span> measured in number of sectors to the process.
						</p></dd><dt><span class="term"><code class="literal">kyber</code></span></dt><dd>
							Is intended for fast devices. The scheduler tunes itself to achieve a latency goal. You can configure the target latencies for read and synchronous write requests.
						</dd></dl></div></section><section class="section" id="recommended-disk-schedulers-for-different-use-cases_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.3. Recommended disk schedulers for different use cases</h2></div></div></div><p>
				Depending on the task that your system performs, Red Hat recommends the following disk schedulers:
			</p><div class="table" id="idm140290636470944"><p class="title"><strong>Table 7.1. Recommendations</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290636466112" scope="col">Use case</th><th align="left" valign="top" id="idm140290636465024" scope="col">Disk scheduler recommendation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290636466112"> <p>
								Traditional HDD with a SCSI interface
							</p>
							 </td><td align="left" valign="top" headers="idm140290636465024"> <p>
								Use <code class="literal">mq-deadline</code> or <code class="literal">bfq</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290636466112"> <p>
								High-performance SSD or a CPU-bound system with fast storage
							</p>
							 </td><td align="left" valign="top" headers="idm140290636465024"> <p>
								Use <code class="literal">none</code>, especially when running enterprise applications. Alternatively, use <code class="literal">kyber</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290636466112"> <p>
								Desktop or interactive tasks
							</p>
							 </td><td align="left" valign="top" headers="idm140290636465024"> <p>
								Use <code class="literal">bfq</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140290636466112"> <p>
								Virtual guest
							</p>
							 </td><td align="left" valign="top" headers="idm140290636465024"> <p>
								Use <code class="literal">mq-deadline</code>. With a multi-queue host bus adapter (HBA), use <code class="literal">none</code>.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="the-default-disk-scheduler_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.4. The default disk scheduler</h2></div></div></div><p>
				Block devices use the default disk scheduler unless you specify another scheduler.
			</p><p>
				The kernel selects a default disk scheduler based on the type of device. The automatically selected scheduler is typically the optimal setting. If you require a different scheduler, Red Hat recommends to use <code class="literal">udev</code> rules or the <span class="strong strong"><strong>Tuned</strong></span> application to configure it. Match the selected devices and switch the scheduler only for those devices.
			</p></section><section class="section" id="determining-the-active-disk-scheduler_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.5. Determining the active disk scheduler</h2></div></div></div><p>
				This procedure determines which disk scheduler is currently active on a given block device.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Read the content of the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</code> file:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler

[mq-deadline] kyber bfq none</pre><p class="simpara">
						In the file name, replace <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the block device name, for example <code class="literal">sdc</code>.
					</p><p class="simpara">
						The active scheduler is listed in square brackets (<code class="literal">[ ]</code>).
					</p></li></ul></div></section><section class="section" id="setting-the-disk-scheduler-using-tuned_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.6. Setting the disk scheduler using Tuned</h2></div></div></div><p>
				This procedure creates and enables a <span class="strong strong"><strong>Tuned</strong></span> profile that sets a given disk scheduler for selected block devices. The setting persists across system reboots.
			</p><p>
				In the following commands and configuration, replace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the name of the block device, for example <code class="literal">sdf</code>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> with the disk scheduler that you want to set for the device, for example <code class="literal">bfq</code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">tuned</code> service is installed and enabled.
					</p><p class="simpara">
						For details, see <a class="xref" href="index.html#installing-and-enabling-tuned_getting-started-with-tuned" title="2.6. Installing and enabling Tuned">Section 2.6, “Installing and enabling Tuned”</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Select an existing <span class="strong strong"><strong>Tuned</strong></span> profile on which your profile will be based. For a list of available profiles, see <a class="xref" href="index.html#tuned-profiles-distributed-with-rhel_getting-started-with-tuned" title="2.3. Tuned profiles distributed with RHEL">Section 2.3, “Tuned profiles distributed with RHEL”</a>.
					</p><p class="simpara">
						To see which profile is currently active, use:
					</p><pre class="screen">$ tuned-adm active</pre></li><li class="listitem"><p class="simpara">
						Create a new directory to hold your <span class="strong strong"><strong>Tuned</strong></span> profile:
					</p><pre class="screen"># mkdir /etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Find the World Wide Name (WWN) identifier of the selected block device:
					</p><pre class="screen">$ udevadm info --query=property --name=/dev/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> | grep WWN=

ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal filename">/etc/tuned/<span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span>/tuned.conf</code> configuration file. In the file, set the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Optional: Include an existing profile:
							</p><pre class="screen">[main]
include=<span class="emphasis"><em><span class="replaceable replaceable">existing-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
								Set the selected disk scheduler for the device that matches the WWN identifier:
							</p><pre class="screen">[disk]
devices_udev_regex=ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>
elevator=<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span></pre><p class="simpara">
								To match multiple devices in the <code class="literal option">devices_udev_regex</code> option, enclose the identifiers in parentheses and separate them with vertical bars:
							</p><pre class="screen">devices_udev_regex=(ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x5002538d00000000</span></em></span>)|(ID_WWN=<span class="emphasis"><em><span class="replaceable replaceable">0x1234567800000000</span></em></span>)</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Enable your profile:
					</p><pre class="screen"># tuned-adm profile <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the Tuned profile is active and applied:
					</p><pre class="screen">$ tuned-adm active

Current active profile: <span class="emphasis"><em><span class="replaceable replaceable">my-profile</span></em></span></pre><pre class="screen">$ tuned-adm verify

Verification succeeded, current system settings match the preset profile.
See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on creating a <span class="strong strong"><strong>Tuned</strong></span> profile, see <a class="xref" href="index.html#customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance" title="Chapter 3. Customizing Tuned profiles">Chapter 3, <em>Customizing Tuned profiles</em></a>.
					</li></ul></div></section><section class="section" id="setting-the-disk-scheduler-using-udev-rules_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.7. Setting the disk scheduler using udev rules</h2></div></div></div><p>
				This procedure sets a given disk scheduler for specific block devices using <code class="literal">udev</code> rules. The setting persists across system reboots.
			</p><p>
				In the following commands and configuration, replace:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the name of the block device, for example <code class="literal">sdf</code>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> with the disk scheduler that you want to set for the device, for example <code class="literal">bfq</code>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Find the World Wide Identifier (WWID) of the block device:
					</p><pre class="screen">$ udevadm info --attribute-walk --name=/dev/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> | grep wwid

    ATTRS{wwid}=="<span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span>"</pre><p class="simpara">
						An example value of <span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span> is:
					</p><pre class="screen">t10.ATA     SAMSUNG MZNLN256HMHQ-000L7              S2WDNX0J336519</pre></li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">udev</code> rule. Create the <code class="literal filename">/etc/udev/rules.d/99-scheduler.rules</code> file with the following content:
					</p><pre class="screen">ACTION=="add|change", SUBSYSTEM=="block", ATTRS{wwid}=="<span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span>", ATTR{queue/scheduler}="<span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span>"</pre><p class="simpara">
						Replace <span class="emphasis"><em><span class="replaceable replaceable">device WWID</span></em></span> with the WWID value that you found in the previous steps.
					</p></li><li class="listitem"><p class="simpara">
						Reload <code class="literal">udev</code> rules:
					</p><pre class="screen"># udevadm control --reload-rules</pre></li><li class="listitem"><p class="simpara">
						Apply the scheduler configuration:
					</p><pre class="screen"># udevadm trigger --type=devices --action=change</pre></li><li class="listitem"><p class="simpara">
						Verify the active scheduler:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre></li></ol></div></section><section class="section" id="temporarily-setting-a-scheduler-for-a-specific-disk_setting-the-disk-scheduler"><div class="titlepage"><div><div><h2 class="title">7.8. Temporarily setting a scheduler for a specific disk</h2></div></div></div><p>
				This procedure sets a given disk scheduler for specific block devices. The setting does not persist across system reboots.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Write the name of the selected scheduler to the <code class="literal filename">/sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</code> file:
					</p><pre class="screen"># echo <span class="emphasis"><em><span class="replaceable replaceable">selected-scheduler</span></em></span> &gt; /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre><p class="simpara">
						In the file name, replace <span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span> with the block device name, for example <code class="literal">sdc</code>.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the scheduler is active on the device:
					</p><pre class="screen"># cat /sys/block/<span class="emphasis"><em><span class="replaceable replaceable">device</span></em></span>/queue/scheduler</pre></li></ul></div></section></section><section class="chapter" id="assembly_tuning-the-performance-of-a-samba-server_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Tuning the performance of a Samba server</h1></div></div></div><p>
			This chapter describes what settings can improve the performance of Samba in certain situations, and which settings can have a negative performance impact.
		</p><p>
			Parts of this section were adopted from the <a class="link" href="https://wiki.samba.org/index.php/Performance_Tuning">Performance Tuning</a> documentation published in the Samba Wiki. License: <a class="link" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. Authors and contributors: See the <a class="link" href="https://wiki.samba.org/index.php?title=Performance_Tuning&amp;action=history">history</a> tab on the Wiki page.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Samba is set up as a file or print server
				</p><p class="simpara">
					See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_different_types_of_servers/assembly_using-samba-as-a-server_deploying-different-types-of-servers">Using Samba as a server</a>.
				</p></li></ul></div><section class="section" id="proc_setting-the-smb-protocol-version_assembly_tuning-the-performance-of-a-samba-server"><div class="titlepage"><div><div><h2 class="title">8.1. Setting the SMB protocol version</h2></div></div></div><p>
				Each new SMB version adds features and improves the performance of the protocol. The recent Windows and Windows Server operating systems always supports the latest protocol version. If Samba also uses the latest protocol version, Windows clients connecting to Samba benefit from the performance improvements. In Samba, the default value of the server max protocol is set to the latest supported stable SMB protocol version.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To always have the latest stable SMB protocol version enabled, do not set the <code class="literal">server max protocol</code> parameter. If you set the parameter manually, you will need to modify the setting with each new version of the SMB protocol, to have the latest protocol version enabled.
				</p></div></div><p>
				The following procedure explains how to use the default value in the <code class="literal">server max protocol</code> parameter.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Remove the <code class="literal">server max protocol</code> parameter from the <code class="literal">[global]</code> section in the <code class="literal filename">/etc/samba/smb.conf</code> file.
					</li><li class="listitem"><p class="simpara">
						Reload the Samba configuration
					</p><pre class="literallayout"># smbcontrol all reload-config</pre></li></ol></div></section><section class="section" id="proc_tuning-shares-with-directories-that-contain-a-large-number-of-files_assembly_tuning-the-performance-of-a-samba-server"><div class="titlepage"><div><div><h2 class="title">8.2. Tuning shares with directories that contain a large number of files</h2></div></div></div><p>
				Linux supports case-sensitive file names. For this reason, Samba needs to scan directories for uppercase and lowercase file names when searching or accessing a file. You can configure a share to create new files only in lowercase or uppercase, which improves the performance.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Samba is configured as a file server
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Rename all files on the share to lowercase.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Using the settings in this procedure, files with names other than in lowercase will no longer be displayed.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Set the following parameters in the share’s section:
					</p><pre class="literallayout">case sensitive = true
default case = lower
preserve case = no
short preserve case = no</pre><p class="simpara">
						For details about the parameters, see their descriptions in the <code class="literal">smb.conf(5)</code> man page.
					</p></li><li class="listitem"><p class="simpara">
						Verify the <code class="literal filename">/etc/samba/smb.conf</code> file:
					</p><pre class="literallayout"># testparm</pre></li><li class="listitem"><p class="simpara">
						Reload the Samba configuration:
					</p><pre class="literallayout"># smbcontrol all reload-config</pre></li></ol></div><p>
				After you applied these settings, the names of all newly created files on this share use lowercase. Because of these settings, Samba no longer needs to scan the directory for uppercase and lowercase, which improves the performance.
			</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/deploying_different_types_of_servers/assembly_using-samba-as-a-server_deploying-different-types-of-servers#proc_verifying-the-smb-conf-file-by-using-the-testparm-utility_assembly_using-samba-as-a-server">Verifying the smb.conf file by using the testparm utility</a>
					</li></ul></div></section><section class="section" id="con_settings-that-can-have-a-negative-performance-impact_assembly_tuning-the-performance-of-a-samba-server"><div class="titlepage"><div><div><h2 class="title">8.3. Settings that can have a negative performance impact</h2></div></div></div><p>
				By default, the kernel in Red Hat Enterprise Linux is tuned for high network performance. For example, the kernel uses an auto-tuning mechanism for buffer sizes. Setting the <code class="literal">socket options</code> parameter in the <code class="literal filename">/etc/samba/smb.conf</code> file overrides these kernel settings. As a result, setting this parameter decreases the Samba network performance in most cases.
			</p><p>
				To use the optimized settings from the Kernel, remove the <code class="literal">socket options</code> parameter from the <code class="literal">[global]</code> section in the <code class="literal filename">/etc/samba/smb.conf</code>.
			</p></section></section><section class="chapter" id="optimizing-virtual-machine-performance-in-rhel-8_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Optimizing virtual machine performance</h1></div></div></div><p>
			Virtual machines (VMs) always experience some degree of performance deterioration in comparison to the host. The following sections explain the reasons for this deterioration and provide instructions on how to minimize the performance impact of virtualization in RHEL 8, so that your hardware infrastructure resources can be used as efficiently as possible.
		</p><section class="section" id="what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.1. What influences virtual machine performance</h2></div></div></div><p>
				VMs are run as user-space processes on the host. The hypervisor therefore needs to convert the host’s system resources so that the VMs can use them. As a consequence, a portion of the resources is consumed by the conversion, and the VM therefore cannot achieve the same performance efficiency as the host.
			</p><h4 id="the_impact_of_virtualization_on_system_performance">The impact of virtualization on system performance</h4><p>
				More specific reasons for VM performance loss include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtual CPUs (vCPUs) are implemented as threads on the host, handled by the Linux scheduler.
					</li><li class="listitem">
						VMs do not automatically inherit optimization features, such as NUMA or huge pages, from the host kernel.
					</li><li class="listitem">
						Disk and network I/O settings of the host might have a significant performance impact on the VM.
					</li><li class="listitem">
						Network traffic typically travels to a VM through a software-based bridge.
					</li><li class="listitem">
						Depending on the host devices and their models, there might be significant overhead due to emulation of particular hardware.
					</li></ul></div><p>
				The severity of the virtualization impact on the VM performance is influenced by a variety factors, which include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The number of concurrently running VMs.
					</li><li class="listitem">
						The amount of virtual devices used by each VM.
					</li><li class="listitem">
						The device types used by the VMs.
					</li></ul></div><h4 id="reducing_vm_performance_loss">Reducing VM performance loss</h4><p>
				RHEL 8 provides a number of features you can use to reduce the negative performance effects of virtualization. Notably:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8" title="9.2. Optimizing virtual machine performance using tuned">The <code class="literal">tuned</code> service</a> can automatically optimize the resource distribution and performance of your VMs.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.4. Optimizing virtual machine I/O performance">Block I/O tuning</a> can improve the performances of the VM’s block devices, such as disks.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.5. Optimizing virtual machine CPU performance">NUMA tuning</a> can increase vCPU performance.
					</li><li class="listitem">
						<a class="link" href="index.html#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.6. Optimizing virtual machine network performance">Virtual networking</a> can be optimized in various ways.
					</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Tuning VM performance can have adverse effects on other virtualization functions. For example, it can make migrating the modified VM more difficult.
				</p></div></div></section><section class="section" id="optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.2. Optimizing virtual machine performance using tuned</h2></div></div></div><p>
				The <code class="literal">tuned</code> utility is a tuning profile delivery mechanism that adapts RHEL for certain workload characteristics, such as requirements for CPU-intensive tasks or storage-network throughput responsiveness. It provides a number of tuning profiles that are pre-configured to enhance performance and reduce power consumption in a number of specific use cases. You can edit these profiles or create new profiles to create performance solutions tailored to your environment, including virtualized environments.
			</p><p>
				Red Hat recommends using the following profiles when using virtualization in RHEL 8:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For RHEL 8 virtual machines, use the <span class="strong strong"><strong>virtual-guest</strong></span> profile. It is based on the generally applicable <code class="literal"><span class="emphasis"><em>throughput-performance</em></span></code> profile, but also decreases the swappiness of virtual memory.
					</li><li class="listitem">
						For RHEL 8 virtualization hosts, use the <span class="strong strong"><strong>virtual-host</strong></span> profile. This enables more aggressive writeback of dirty memory pages, which benefits the host performance.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tuned</code> service must be <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned">installed and enabled</a>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To enable a specific <code class="literal">tuned</code> profile:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the available <code class="literal">tuned</code> profiles.
					</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm list</strong></span>

Available profiles:
- balanced             - General non-specialized tuned profile
- desktop              - Optimize for the desktop use-case
[...]
- virtual-guest        - Optimize for running inside a virtual guest
- virtual-host         - Optimize for running KVM guests
Current active profile: <span class="emphasis"><em>balanced</em></span></pre></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Optional:</strong></span> Create a new <code class="literal">tuned</code> profile or edit an existing <code class="literal">tuned</code> profile.
					</p><p class="simpara">
						For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance">Customizing tuned profiles</a>.
					</p></li><li class="listitem"><p class="simpara">
						Activate a <code class="literal">tuned</code> profile.
					</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile <span class="emphasis"><em>selected-profile</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To optimize a virtualization host, use the <span class="emphasis"><em>virtual-host</em></span> profile.
							</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile virtual-host</strong></span></pre></li><li class="listitem"><p class="simpara">
								On a RHEL guest operating system, use the <span class="emphasis"><em>virtual-guest</em></span> profile.
							</p><pre class="literallayout"># <span class="strong strong"><strong>tuned-adm profile virtual-guest</strong></span></pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information about <code class="literal">tuned</code> and <code class="literal">tuned</code> profiles, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/">Monitoring and managing system status and performance</a>.
					</li></ul></div></section><section class="section" id="configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.3. Configuring virtual machine memory</h2></div></div></div><p>
				To improve the performance of a virtual machine (VM), you can assign additional host RAM to the VM. Similarly, you can decrease the amount of memory allocated to a VM so the host memory can be allocated to other VMs or tasks.
			</p><p>
				To perform these actions, you can use <a class="link" href="index.html#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" title="9.3.1. Adding and removing virtual machine memory using the web console">the web console</a> or <a class="link" href="index.html#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" title="9.3.2. Adding and removing virtual machine memory using the command-line interface">the command-line interface</a>.
			</p><section class="section" id="adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram"><div class="titlepage"><div><div><h3 class="title">9.3.1. Adding and removing virtual machine memory using the web console</h3></div></div></div><p>
					To improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the web console to adjust amount of memory allocated to the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The guest OS must be running the memory balloon drivers. To verify this is the case:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Ensure the VM’s configuration includes the <code class="literal">memballoon</code> device:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest</em></span> | grep memballoon</strong></span>
&lt;memballoon model='virtio'&gt;
    &lt;/memballoon&gt;</pre><p class="simpara">
									If this commands displays any output and the model is not set to <code class="literal">none</code>, the <code class="literal">memballoon</code> device is present.
								</p></li><li class="listitem"><p class="simpara">
									Ensure the ballon drivers are running in the guest OS.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											In Windows guests, the drivers are installed as a part of the virtio-win driver package. For instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel8_configuring-and-managing-virtualization#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8">Installing paravirtualized KVM drivers for Windows virtual machines</a>.
										</li><li class="listitem">
											In Linux guests, the drivers are generally included by default and activate when the <code class="literal">memballoon</code> device is present.
										</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     2097152 KiB
Used memory:    2097152 KiB</pre></li><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VMs for which you want to view and adjust the allocated memory.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VMs.
						</p></li><li class="listitem"><p class="simpara">
							Click the value of the <code class="literal">Memory</code> line in the Overview pane.
						</p><p class="simpara">
							The <code class="literal">Memory Adjustment</code> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="virt-memory-cockpit.png" alt="virt memory cockpit"/></div></div></li><li class="listitem"><p class="simpara">
							Configure the virtual CPUs for the selected VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Maximum allocation</strong></span> - Sets the maximum amount of host memory that the VM can use for its processes. Increasing this value improves the performance potential of the VM, and reducing the value lowers the performance footprint the VM has on your host.
								</p><p class="simpara">
									Adjusting maximum memory allocation is only possible on a shut-off VM.
								</p></li><li class="listitem">
									<span class="strong strong"><strong>Current allocation</strong></span> - Sets a memory limit until the next VM reboot, up to the maximum allocation. You can use this to temporarily regulate the memory load that the VM has on the host, without changing the maximum VM allocation.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>.
						</p><p class="simpara">
							The memory allocation of the VM is adjusted.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions for adjusting VM memory setting using the command-line interface, see <a class="xref" href="index.html#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" title="9.3.2. Adding and removing virtual machine memory using the command-line interface">Section 9.3.2, “Adding and removing virtual machine memory using the command-line interface”</a>.
						</li><li class="listitem">
							To optimize how the VM uses the allocated memory, you can modify your vCPU setting. For more information, see <a class="xref" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.5. Optimizing virtual machine CPU performance">Section 9.5, “Optimizing virtual machine CPU performance”</a>.
						</li></ul></div></section><section class="section" id="adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram"><div class="titlepage"><div><div><h3 class="title">9.3.2. Adding and removing virtual machine memory using the command-line interface</h3></div></div></div><p>
					To improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the CLI to adjust amount of memory allocated to the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The guest OS must be running the memory balloon drivers. To verify this is the case:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Ensure the VM’s configuration includes the <code class="literal">memballoon</code> device:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest</em></span> | grep memballoon</strong></span>
&lt;memballoon model='virtio'&gt;
    &lt;/memballoon&gt;</pre><p class="simpara">
									If this commands displays any output and the model is not set to <code class="literal">none</code>, the <code class="literal">memballoon</code> device is present.
								</p></li><li class="listitem"><p class="simpara">
									Ensure the ballon drivers are running in the guest OS.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											In Windows guests, the drivers are installed as a part of the virtio-win driver package. For instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel8_configuring-and-managing-virtualization#installing-kvm-paravirtualized-drivers-for-rhel-8-virtual-machines_optimizing-windows-virtual-machines-on-rhel-8">Installing paravirtualized KVM drivers for Windows virtual machines</a>.
										</li><li class="listitem">
											In Linux guests, the drivers are generally included by default and activate when the <code class="literal">memballoon</code> device is present.
										</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     2097152 KiB
Used memory:    2097152 KiB</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Adjust the maximum memory allocated to a VM. Increasing this value improves the performance potential of the VM, and reducing the value lowers the performance footprint the VM has on your host. Note that this change can only be performed on a shut-off VM, so adjusting a running VM requires a reboot to take effect.
						</p><p class="simpara">
							For example, to change the maximum memory that the <span class="emphasis"><em>testguest</em></span> VM can use to 4096 MiB:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>testguest</em></span> --edit --memory 4096</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> You can also adjust the memory currently used by the VM, up to the maximum allocation. This regulates the memory load that the VM has on the host until the next reboot, without changing the maximum VM allocation.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh setmem <span class="emphasis"><em>testguest</em></span> --current 2048</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Confirm that the memory used by the VM has been updated:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     4194304 KiB
Used memory:    2097152 KiB</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> If you adjusted the current VM memory, you can obtain the memory balloon statistics of the VM to evaluate how effectively it regulates its memory use.
						</p><pre class="literallayout"> # <span class="strong strong"><strong>virsh domstats --balloon <span class="emphasis"><em>testguest</em></span></strong></span>
Domain: 'testguest'
  balloon.current=365624
  balloon.maximum=4194304
  balloon.swap_in=0
  balloon.swap_out=0
  balloon.major_fault=306
  balloon.minor_fault=156117
  balloon.unused=3834448
  balloon.available=4035008
  balloon.usable=3746340
  balloon.last-update=1587971682
  balloon.disk_caches=75444
  balloon.hugetlb_pgalloc=0
  balloon.hugetlb_pgfail=0
  balloon.rss=1005456</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For instructions for adjusting VM memory setting using the web console, see <a class="xref" href="index.html#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" title="9.3.1. Adding and removing virtual machine memory using the web console">Section 9.3.1, “Adding and removing virtual machine memory using the web console”</a>.
						</li><li class="listitem">
							To optimize how the VM uses the allocated memory, you can modify your vCPU setting. For more information, see <a class="xref" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.5. Optimizing virtual machine CPU performance">Section 9.5, “Optimizing virtual machine CPU performance”</a>.
						</li></ul></div></section><section class="section" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">9.3.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To increase the maximum memory of a running VM, you can attach a memory device to the VM. This is also referred to as <span class="strong strong"><strong>memory hot plug</strong></span>. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/managing-virtual-devices_configuring-and-managing-virtualization#attaching-devices-to-virtual-machines_managing-virtual-devices">Attaching devices to virtual machines</a>.
						</p><p class="simpara">
							Note that removing a memory device from a VM, also known as <span class="strong strong"><strong>memory hot unplug</strong></span>, is not supported in RHEL 8, and Red Hat highly discourages its use.
						</p></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.4. Optimizing virtual machine I/O performance</h2></div></div></div><p>
				The input and output (I/O) capabilities of a virtual machine (VM) can significantly limit the VM’s overall efficiency. To address this, you can optimize a VM’s I/O by configuring block I/O parameters.
			</p><section class="section" id="tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">9.4.1. Tuning block I/O in virtual machines</h3></div></div></div><p>
					When multiple block devices are being used by one or more VMs, it might be important to adjust the I/O priority of specific virtual devices by modifying their <span class="emphasis"><em>I/O weights</em></span>.
				</p><p>
					Increasing the I/O weight of a device increases its priority for I/O bandwidth, and therefore provides it with more host resources. Similarly, reducing a device’s weight makes it consume less host resources.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Each device’s <code class="literal">weight</code> value must be within the <code class="literal">100</code> to <code class="literal">1000</code> range. Alternatively, the value can be <code class="literal">0</code>, which removes that device from per-device listings.
					</p></div></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To display and set a VM’s block I/O parameters:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the current <code class="literal">&lt;blkio&gt;</code> parameters for a VM:
						</p><p class="simpara">
							<code class="literal"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>VM-name</em></span></strong></span></code>
						</p><pre class="programlisting language-xml">&lt;domain&gt;
  [...]
  &lt;blkiotune&gt;
    &lt;weight&gt;800&lt;/weight&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sda&lt;/path&gt;
      &lt;weight&gt;1000&lt;/weight&gt;
    &lt;/device&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sdb&lt;/path&gt;
      &lt;weight&gt;500&lt;/weight&gt;
    &lt;/device&gt;
  &lt;/blkiotune&gt;
  [...]
&lt;/domain&gt;</pre></li><li class="listitem"><p class="simpara">
							Edit the I/O weight of a specified device:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh blkiotune <span class="emphasis"><em>VM-name</em></span> --device-weights <span class="emphasis"><em>device</em></span>, <span class="emphasis"><em>I/O-weight</em></span></strong></span></pre><p class="simpara">
							For example, the following changes the weight of the <span class="emphasis"><em>/dev/sda</em></span> device in the <span class="emphasis"><em>liftrul</em></span> VM to 500.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh blkiotune liftbrul --device-weights /dev/sda, 500</strong></span></pre></li></ol></div></section><section class="section" id="disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">9.4.2. Disk I/O throttling in virtual machines</h3></div></div></div><p>
					When several VMs are running simultaneously, they can interfere with system performance by using excessive disk I/O. Disk I/O throttling in KVM virtualization provides the ability to set a limit on disk I/O requests sent from the VMs to the host machine. This can prevent a VM from over-utilizing shared resources and impacting the performance of other VMs.
				</p><p>
					To enable disk I/O throttling, set a limit on disk I/O requests sent from each block device attached to VMs to the host machine.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh domblklist</code> command to list the names of all the disk devices on a specified VM.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh domblklist rollin-coal</strong></span>
Target     Source
------------------------------------------------
vda        /var/lib/libvirt/images/rollin-coal.qcow2
sda        -
sdb        /home/horridly-demanding-processes.iso</pre></li><li class="listitem"><p class="simpara">
							Set I/O limits for a block device attached to a VM using the <code class="literal">virsh blkdeviotune</code> command:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh blkdeviotune <span class="emphasis"><em>VM-name</em></span> <span class="emphasis"><em>device</em></span> --parameter <span class="emphasis"><em>limit</em></span></strong></span></pre><p class="simpara">
							For example, to throttle the <code class="literal">sdb</code> device on the <code class="literal">rollin-coal</code> VM to 1000 I/O operations per second and 50 MB per second throughput:
						</p><pre class="literallayout"><code class="literal"># <span class="strong strong"><strong>virsh blkdeviotune rollin-coal sdb --total-iops-sec 1000 --total-bytes-sec 52428800</strong></span></code></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Disk I/O throttling can be useful in various situations, for example when VMs belonging to different customers are running on the same host, or when quality of service guarantees are given for different VMs. Disk I/O throttling can also be used to simulate slower disks.
						</li><li class="listitem">
							I/O throttling can be applied independently to each block device attached to a VM and supports limits on throughput and I/O operations.
						</li></ul></div></section><section class="section" id="configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h3 class="title">9.4.3. Enabling multi-queue virtio-scsi</h3></div></div></div><p>
					When using <code class="literal">virtio-scsi</code> storage devices in your virtual machines (VMs), the <span class="emphasis"><em>multi-queue virtio-scsi</em></span> feature provides improved storage performance and scalability. It enables each virtual CPU (vCPU) to have a separate queue and interrupt to use without affecting other vCPUs.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To enable multi-queue virtio-scsi support for a specific VM, add the following to the VM’s XML configuration, where <span class="emphasis"><em>N</em></span> is the total number of vCPU queues:
						</p><pre class="programlisting language-xml">&lt;controller type='scsi' index='0' model='virtio-scsi'&gt;
   &lt;driver queues='N' /&gt;
&lt;/controller&gt;</pre></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.5. Optimizing virtual machine CPU performance</h2></div></div></div><p>
				Much like physical CPUs in host machines, vCPUs are critical to virtual machine (VM) performance. As a result, optimizing vCPUs can have a significant impact on the resource efficiency of your VMs. To optimize your vCPU:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Adjust how many host CPUs are assigned to the VM. You can do this using <a class="link" href="index.html#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" title="9.5.1. Adding and removing virtual CPUs using the command-line interface">the CLI</a> or <a class="link" href="index.html#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="9.5.2. Managing virtual CPUs using the web console">the web console</a>.
					</li><li class="listitem"><p class="simpara">
						Ensure that the vCPU model is aligned with the CPU model of the host. For example, to set the <span class="emphasis"><em>testguest1</em></span> VM to use the CPU model of the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest1 --edit --cpu host-model</strong></span></pre></li><li class="listitem"><p class="simpara">
						If your host machine uses Non-Uniform Memory Access (NUMA), you can also <span class="strong strong"><strong>configure NUMA</strong></span> for its VMs. This maps the host’s CPU and memory processes onto the CPU and memory processes of the VM as closely as possible. In effect, NUMA tuning provides the vCPU with a more streamlined access to the system memory allocated to the VM, which can improve the vCPU processing effectiveness.
					</p><p class="simpara">
						For details, see <a class="xref" href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="9.5.3. Configuring NUMA in a virtual machine">Section 9.5.3, “Configuring NUMA in a virtual machine”</a> and <a class="xref" href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="9.5.4. Sample vCPU performance tuning scenario">Section 9.5.4, “Sample vCPU performance tuning scenario”</a>.
					</p></li></ol></div><section class="section" id="adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">9.5.1. Adding and removing virtual CPUs using the command-line interface</h3></div></div></div><p>
					To increase or optimize the CPU performance of a virtual machine (VM), you can add or remove virtual CPUs (vCPUs) assigned to the VM.
				</p><p>
					When performed on a running VM, this is also referred to as vCPU hot plugging and hot unplugging. However, note that vCPU hot unplug is not supported in RHEL 8, and Red Hat highly discourages its use.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> View the current state of the vCPUs in the targeted VM. For example, to display the number of vCPUs on the <span class="emphasis"><em>testguest</em></span> VM:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpucount <span class="emphasis"><em>testguest</em></span></strong></span>
maximum      config         4
maximum      live           2
current      config         2
current      live           1</pre><p class="simpara">
							This output indicates that <span class="emphasis"><em>testguest</em></span> is currently using 1 vCPU, and 1 more vCPu can be hot plugged to it to increase the VM’s performance. However, after reboot, the number of vCPUs <span class="emphasis"><em>testguest</em></span> uses will change to 2, and it will be possible to hot plug 2 more vCPUs.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Adjust the maximum number of vCPUs that can be attached to a VM, which takes effect on the VM’s next boot.
						</p><p class="simpara">
							For example, to increase the maximum vCPU count for the <span class="emphasis"><em>testguest</em></span> VM to 8:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh setvcpus testguest 8 --maximum --config</strong></span></pre><p class="simpara">
							Note that the maximum may be limited by the CPU topology, host hardware, the hypervisor, and other factors.
						</p></li><li class="listitem"><p class="simpara">
							Adjust the current number of vCPUs attached to a VM, up to the maximum configured in the previous step. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To increase the number of vCPUs attached to the running <span class="emphasis"><em>testguest</em></span> VM to 4:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh setvcpus testguest 4 --live</strong></span></pre><p class="simpara">
									This increases the VM’s performance and host load footprint of <span class="emphasis"><em>testguest</em></span> until the VM’s next boot.
								</p></li><li class="listitem"><p class="simpara">
									To permanently decrease the number of vCPUs attached to the <span class="emphasis"><em>testguest</em></span> VM to 1:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virsh setvcpus testguest 1 --config</strong></span></pre><p class="simpara">
									This decreases the VM’s performance and host load footprint of <span class="emphasis"><em>testguest</em></span> after the VM’s next boot. However, if needed, additional vCPUs can be hot plugged to the VM to temporarily increase its performance.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Confirm that the current state of vCPU for the VM reflects your changes.
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpucount <span class="emphasis"><em>testguest</em></span></strong></span>
maximum      config         8
maximum      live           4
current      config         1
current      live           4</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on adding and removing vCPUs using the web console, see <a class="xref" href="index.html#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="9.5.2. Managing virtual CPUs using the web console">Section 9.5.2, “Managing virtual CPUs using the web console”</a>.
						</li></ul></div></section><section class="section" id="managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">9.5.2. Managing virtual CPUs using the web console</h3></div></div></div><p>
					Using the RHEL 8 web console, you can review and configure virtual CPUs used by virtual machines (VMs) to which the web console is connected.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the web console to manage VMs, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/using-the-rhel-8-web-console-for-managing-vms_configuring-and-managing-virtualization#setting-up-the-rhel-8-web-console-to-manage-vms_using-the-rhel-8-web-console-for-managing-vms">install the web console VM plug-in</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click a row with the name of the VMs for which you want to view and configure virtual CPU parameters.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected VMs, including the number of virtual CPUs, and controls for shutting down and deleting the VM.
						</p></li><li class="listitem"><p class="simpara">
							Click the number of vCPUs in the Overview pane.
						</p><p class="simpara">
							The vCPU details dialog appears.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="cockpit_configure_vCPUs.png" alt="cockpit configure vCPUs"/></span>

						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The warning in the vCPU details dialog only appears after the virtual CPU settings are changed.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Configure the virtual CPUs for the selected VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>vCPU Count</strong></span> - The number of vCPUs currently in use.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										The vCPU count cannot be greater than the vCPU Maximum.
									</p></div></div></li><li class="listitem">
									<span class="strong strong"><strong>vCPU Maximum</strong></span> - The maximum number of virtual CPUs that can be configured for the VM. If this value is higher than the <span class="strong strong"><strong>vCPU Count</strong></span>, additional vCPUs can be attached to the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Sockets</strong></span> - The number of sockets to expose to the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Cores per socket</strong></span> - The number of cores for each socket to expose to the VM.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Threads per core</strong></span> - The number of threads for each core to expose to the VM.
								</p><p class="simpara">
									Note that the <span class="strong strong"><strong>Sockets</strong></span>, <span class="strong strong"><strong>Cores per socket</strong></span>, and <span class="strong strong"><strong>Threads per core</strong></span> options adjust the CPU topology of the VM. This may be beneficial for vCPU performance and may impact the functionality of certain software in the guest OS. If a different setting is not required by your deployment, Red Hat recommends keeping the default values.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Apply</span>.
						</p><p class="simpara">
							The virtual CPUs for the VM are configured.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Changes to virtual CPU settings only take effect after the VM is restarted.
							</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For information on managing your vCPUs using the command-line interface, see <a class="xref" href="index.html#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" title="9.5.1. Adding and removing virtual CPUs using the command-line interface">Section 9.5.1, “Adding and removing virtual CPUs using the command-line interface”</a>.
						</li></ul></div></section><section class="section" id="configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">9.5.3. Configuring NUMA in a virtual machine</h3></div></div></div><p>
					The following methods can be used to configure Non-Uniform Memory Access (NUMA) settings of a virtual machine (VM) on a RHEL 8 host.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The host must be a NUMA-compatible machine. To detect whether this is the case, use the <code class="literal">virsh nodeinfo</code> command and see the <code class="literal">NUMA cell(s)</code> line:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              48
CPU frequency:       1200 MHz
CPU socket(s):       1
Core(s) per socket:  12
Thread(s) per core:  2
NUMA cell(s):        <span class="strong strong"><strong>2</strong></span>
Memory size:         67012964 KiB</pre><p class="simpara">
							If the value of the line is 2 or greater, the host is NUMA-compatible.
						</p></li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						For ease of use, you can set up a VM’s NUMA configuration using automated utilities and services. However, manual NUMA setup is more likely to yield a significant performance improvement.
					</p></div><p>
					<span class="strong strong"><strong>Automatic methods</strong></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Set the VM’s NUMA policy to <code class="literal">Preferred</code>. For example, to do so for the <span class="emphasis"><em>testguest5</em></span> VM:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml testguest5 --edit --vcpus placement=auto</strong></span>
# <span class="strong strong"><strong>virt-xml testguest5 --edit --numatune mode=preferred</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable automatic NUMA balancing on the host:
						</p><pre class="literallayout"># <span class="strong strong"><strong>echo 1 &gt; /proc/sys/kernel/numa_balancing</strong></span></pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">numad</code> command to automatically align the VM CPU with memory resources.
						</p><pre class="literallayout"># <span class="strong strong"><strong>numad</strong></span></pre></li></ul></div><p>
					<span class="strong strong"><strong>Manual methods</strong></span>
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Pin specific vCPU threads to a specific host CPU or range of CPUs. This is also possible on non-NUMA hosts and VMs, and is recommended as a safe method of vCPU performance improvement.
						</p><p class="simpara">
							For example, the following commands pin vCPU threads 0 to 5 of the <span class="emphasis"><em>testguest6</em></span> VM to host CPUs 1, 3, 5, 7, 9, and 11, respectively:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpupin testguest6 0 1</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 1 3</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 2 5</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 3 7</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 4 9</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 5 11</strong></span></pre><p class="simpara">
							Afterwards, you can verify whether this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh vcpupin testguest6</strong></span>
VCPU   CPU Affinity
----------------------
0      1
1      3
2      5
3      7
4      9
5      11</pre></li><li class="listitem"><p class="simpara">
							After pinning vCPU threads, you can also pin QEMU process threads associated with a specified VM to a specific host CPU or range of CPUs. For example, the following commands pin the QEMU process thread of <span class="emphasis"><em>testguest6</em></span> to CPUs 13 and 15, and verify this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh emulatorpin testguest6 13,15</strong></span>
# <span class="strong strong"><strong>virsh emulatorpin testguest6</strong></span>
emulator: CPU Affinity
----------------------------------
       *: 13,15</pre></li><li class="listitem"><p class="simpara">
							Finally, you can also specify which host NUMA nodes will be assigned specifically to a certain VM. This can improve the host memory usage by the VM’s vCPU. For example, the following commands set <span class="emphasis"><em>testguest6</em></span> to use host NUMA nodes 3 to 5, and verify this was successful:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh numatune testguest6 --nodeset 3-5</strong></span>
# <span class="strong strong"><strong>virsh numatune testguest6</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Note that for best performance results, it is recommended to use all of the manual tuning methods listed above. For an example of such a configuration, see <a class="xref" href="index.html#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="9.5.4. Sample vCPU performance tuning scenario">Section 9.5.4, “Sample vCPU performance tuning scenario”</a>.
						</li><li class="listitem">
							To see the current NUMA configuration of your system, you can use the <code class="literal">numastat</code> utility. For details on using <code class="literal">numastat</code>, see <a class="xref" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="9.7. Virtual machine performance monitoring tools">Section 9.7, “Virtual machine performance monitoring tools”</a>.
						</li><li class="listitem">
							NUMA tuning is currently not possible to perform on IBM Z hosts. For further information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/getting-started-with-virtualization-in-rhel-8-on-ibm-z_configuring-and-managing-virtualization#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_getting-started-with-virtualization-in-rhel-8-on-ibm-z">How virtualization on IBM Z differs from AMD64 and Intel 64</a>.
						</li></ul></div></section><section class="section" id="sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h3 class="title">9.5.4. Sample vCPU performance tuning scenario</h3></div></div></div><p>
					To obtain the best vCPU performance possible, Red Hat recommends using manual <code class="literal">vcpupin</code>, <code class="literal">emulatorpin</code>, and <code class="literal">numatune</code> settings together, for example like in the following scenario.
				</p><div class="itemizedlist"><p class="title"><strong>Starting scenario</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Your host has the following hardware specifics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									2 NUMA nodes
								</li><li class="listitem">
									3 CPU cores on each node
								</li><li class="listitem">
									2 threads on each core
								</li></ul></div><p class="simpara">
							The output of <code class="literal">virsh nodeinfo</code> of such a machine would look similar to:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              12
CPU frequency:       3661 MHz
CPU socket(s):       2
Core(s) per socket:  3
Thread(s) per core:  2
NUMA cell(s):        2
Memory size:         31248692 KiB</pre></li><li class="listitem"><p class="simpara">
							You intend to modify an existing VM to have 8 vCPUs, which means that it will not fit in a single NUMA node.
						</p><p class="simpara">
							Therefore, you should distribute 4 vCPUs on each NUMA node and make the vCPU topology resemble the host topology as closely as possible. This means that vCPUs that run as sibling threads of a given physical CPU should be pinned to host threads on the same core. For details, see the <span class="emphasis"><em>Solution</em></span> below:
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Solution</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the information on the host topology:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh capabilities</strong></span></pre><p class="simpara">
							The output should include a section that looks similar to the following:
						</p><pre class="programlisting language-xml">&lt;topology&gt;
  &lt;cells num="2"&gt;
    &lt;cell id="0"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="10" /&gt;
        &lt;sibling id="1" value="21" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="0" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="1" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="2" socket_id="0" core_id="2" siblings="2,5" /&gt;
        &lt;cpu id="3" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="4" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="5" socket_id="0" core_id="2" siblings="2,5" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
    &lt;cell id="1"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="21" /&gt;
        &lt;sibling id="1" value="10" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="6" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="7" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="8" socket_id="1" core_id="5" siblings="8,11" /&gt;
        &lt;cpu id="9" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="10" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="11" socket_id="1" core_id="5" siblings="8,11" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
  &lt;/cells&gt;
&lt;/topology&gt;</pre></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> Test the performance of the VM using <a class="link" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="9.7. Virtual machine performance monitoring tools">the applicable tools and utilities</a>.
						</li><li class="listitem"><p class="simpara">
							Set up and mount 1 GiB huge pages on the host:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the following line to the host’s kernel command line:
								</p><pre class="literallayout">default_hugepagesz=1G hugepagesz=1G</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/system/hugetlb-gigantic-pages.service</code> file with the following content:
								</p><pre class="literallayout">[Unit]
Description=HugeTLB Gigantic Pages Reservation
DefaultDependencies=no
Before=dev-hugepages.mount
ConditionPathExists=/sys/devices/system/node
ConditionKernelCommandLine=hugepagesz=1G

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/etc/systemd/hugetlb-reserve-pages.sh

[Install]
WantedBy=sysinit.target</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/hugetlb-reserve-pages.sh</code> file with the following content:
								</p><pre class="literallayout">#!/bin/sh

nodes_path=/sys/devices/system/node/
if [ ! -d $nodes_path ]; then
	echo "ERROR: $nodes_path does not exist"
	exit 1
fi

reserve_pages()
{
	echo $1 &gt; $nodes_path/$2/hugepages/hugepages-1048576kB/nr_hugepages
}

reserve_pages 4 node1
reserve_pages 4 node2</pre><p class="simpara">
									This reserves four 1GiB huge pages from <span class="emphasis"><em>node1</em></span> and four 1GiB huge pages from <span class="emphasis"><em>node2</em></span>.
								</p></li><li class="listitem"><p class="simpara">
									Make the script created in the previous step executable:
								</p><pre class="literallayout"># <span class="strong strong"><strong>chmod +x /etc/systemd/hugetlb-reserve-pages.sh</strong></span></pre></li><li class="listitem"><p class="simpara">
									Enable huge page reservation on boot:
								</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable hugetlb-gigantic-pages</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh edit</code> command to edit the XML configuration of the VM you wish to optimize, in this example <span class="emphasis"><em>super-VM</em></span>:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh edit super-vm</strong></span></pre></li><li class="listitem"><p class="simpara">
							Adjust the XML configuration of the VM in the following way:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the VM to use 8 static vCPUs. Use the <code class="literal">&lt;vcpu/&gt;</code> element to do this.
								</li><li class="listitem"><p class="simpara">
									Pin each of the vCPU threads to the corresponding host CPU threads that it mirrors in the topology. To do so, use the <code class="literal">&lt;vcpupin/&gt;</code> elements in the <code class="literal">&lt;cputune&gt;</code> section.
								</p><p class="simpara">
									Note that, as shown by the <code class="literal">virsh capabilities</code> utility above, host CPU threads are not ordered sequentially in their respective cores. In addition, the vCPU threads should be pinned to the highest available set of host cores on the same NUMA node. For a table illustration, see the <span class="strong strong"><strong>Additional Resources</strong></span> section below.
								</p><p class="simpara">
									The XML configuration for steps a. and b. can look similar to:
								</p><pre class="programlisting language-xml">&lt;cputune&gt;
  &lt;vcpupin vcpu='0' cpuset='1'/&gt;
  &lt;vcpupin vcpu='1' cpuset='4'/&gt;
  &lt;vcpupin vcpu='2' cpuset='2'/&gt;
  &lt;vcpupin vcpu='3' cpuset='5'/&gt;
  &lt;vcpupin vcpu='4' cpuset='7'/&gt;
  &lt;vcpupin vcpu='5' cpuset='10'/&gt;
  &lt;vcpupin vcpu='6' cpuset='8'/&gt;
  &lt;vcpupin vcpu='7' cpuset='11'/&gt;
  &lt;emulatorpin cpuset='6,9'/&gt;
&lt;/cputune&gt;</pre></li><li class="listitem"><p class="simpara">
									Set the VM to use 1 GiB huge pages:
								</p><pre class="programlisting language-xml">&lt;memoryBacking&gt;
  &lt;hugepages&gt;
    &lt;page size='1' unit='GiB'/&gt;
  &lt;/hugepages&gt;
&lt;/memoryBacking&gt;</pre></li><li class="listitem"><p class="simpara">
									Configure the VM’s NUMA nodes to use memory from the corresponding NUMA nodes on the host. To do so, use the <code class="literal">&lt;memnode/&gt;</code> elements in the <code class="literal">&lt;numatune/&gt;</code> section:
								</p><pre class="programlisting language-xml">&lt;numatune&gt;
  &lt;memory mode="preferred" nodeset="1"/&gt;
  &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
  &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
&lt;/numatune&gt;</pre></li><li class="listitem"><p class="simpara">
									Ensure the CPU mode is set to <code class="literal">host-passthrough</code>, and that the CPU uses cache in <code class="literal">passthrough</code> mode:
								</p><pre class="programlisting language-xml">&lt;cpu mode="host-passthrough"&gt;
  &lt;topology sockets="2" cores="2" threads="2"/&gt;
  &lt;cache mode="passthrough"/&gt;</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							The resulting XML configuration of the VM should include a section similar to the following:
						</p><pre class="programlisting language-xml">[...]
  &lt;memoryBacking&gt;
    &lt;hugepages&gt;
      &lt;page size='1' unit='GiB'/&gt;
    &lt;/hugepages&gt;
  &lt;/memoryBacking&gt;
  &lt;vcpu placement='static'&gt;8&lt;/vcpu&gt;
  &lt;cputune&gt;
    &lt;vcpupin vcpu='0' cpuset='1'/&gt;
    &lt;vcpupin vcpu='1' cpuset='4'/&gt;
    &lt;vcpupin vcpu='2' cpuset='2'/&gt;
    &lt;vcpupin vcpu='3' cpuset='5'/&gt;
    &lt;vcpupin vcpu='4' cpuset='7'/&gt;
    &lt;vcpupin vcpu='5' cpuset='10'/&gt;
    &lt;vcpupin vcpu='6' cpuset='8'/&gt;
    &lt;vcpupin vcpu='7' cpuset='11'/&gt;
    &lt;emulatorpin cpuset='6,9'/&gt;
  &lt;/cputune&gt;
  &lt;numatune&gt;
    &lt;memory mode="preferred" nodeset="1"/&gt;
    &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
    &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
  &lt;/numatune&gt;
  &lt;cpu mode="host-passthrough"&gt;
    &lt;topology sockets="2" cores="2" threads="2"/&gt;
    &lt;cache mode="passthrough"/&gt;
    &lt;numa&gt;
      &lt;cell id="0" cpus="0-3" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="10"/&gt;
          &lt;sibling id="1" value="21"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
      &lt;cell id="1" cpus="4-7" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="21"/&gt;
          &lt;sibling id="1" value="10"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
&lt;/domain&gt;</pre></li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> Test the performance of the VM using <a class="link" href="index.html#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8" title="9.7. Virtual machine performance monitoring tools">the applicable tools and utilities</a> to evaluate the impact of the VM’s optimization.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following tables illustrate the connections between the vCPUs and the host CPUs they should be pinned to:
						</p><div class="table" id="idm140290639733376"><p class="title"><strong>Table 9.1. Host topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 7%; " class="col_1"><!--Empty--></col><col style="width: 7%; " class="col_2"><!--Empty--></col><col style="width: 7%; " class="col_3"><!--Empty--></col><col style="width: 7%; " class="col_4"><!--Empty--></col><col style="width: 7%; " class="col_5"><!--Empty--></col><col style="width: 7%; " class="col_6"><!--Empty--></col><col style="width: 7%; " class="col_7"><!--Empty--></col><col style="width: 7%; " class="col_8"><!--Empty--></col><col style="width: 7%; " class="col_9"><!--Empty--></col><col style="width: 7%; " class="col_10"><!--Empty--></col><col style="width: 7%; " class="col_11"><!--Empty--></col><col style="width: 7%; " class="col_12"><!--Empty--></col><col style="width: 7%; " class="col_13"><!--Empty--></col><col style="width: 7%; " class="col_14"><!--Empty--></col><col style="width: 7%; " class="col_15"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><div class="table" id="idm140290637798320"><p class="title"><strong>Table 9.2. VM topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 9%; " class="col_1"><!--Empty--></col><col style="width: 9%; " class="col_2"><!--Empty--></col><col style="width: 9%; " class="col_3"><!--Empty--></col><col style="width: 9%; " class="col_4"><!--Empty--></col><col style="width: 9%; " class="col_5"><!--Empty--></col><col style="width: 9%; " class="col_6"><!--Empty--></col><col style="width: 9%; " class="col_7"><!--Empty--></col><col style="width: 9%; " class="col_8"><!--Empty--></col><col style="width: 9%; " class="col_9"><!--Empty--></col><col style="width: 9%; " class="col_10"><!--Empty--></col><col style="width: 9%; " class="col_11"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><div class="table" id="idm140290637373744"><p class="title"><strong>Table 9.3. Combined host and VM topology</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 7%; " class="col_1"><!--Empty--></col><col style="width: 7%; " class="col_2"><!--Empty--></col><col style="width: 7%; " class="col_3"><!--Empty--></col><col style="width: 7%; " class="col_4"><!--Empty--></col><col style="width: 7%; " class="col_5"><!--Empty--></col><col style="width: 7%; " class="col_6"><!--Empty--></col><col style="width: 7%; " class="col_7"><!--Empty--></col><col style="width: 7%; " class="col_8"><!--Empty--></col><col style="width: 7%; " class="col_9"><!--Empty--></col><col style="width: 7%; " class="col_10"><!--Empty--></col><col style="width: 7%; " class="col_11"><!--Empty--></col><col style="width: 7%; " class="col_12"><!--Empty--></col><col style="width: 7%; " class="col_13"><!--Empty--></col><col style="width: 7%; " class="col_14"><!--Empty--></col><col style="width: 7%; " class="col_15"><!--Empty--></col></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Host CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div><p class="simpara">
							In this scenario, there are 2 NUMA nodes and 8 vCPUs. Therefore, 4 vCPU threads should be pinned to each node.
						</p><p class="simpara">
							In addition, Red Hat recommends leaving at least a single CPU thread available on each node for host system operations.
						</p><p class="simpara">
							Because in this example, each NUMA node houses 3 cores, each with 2 host CPU threads, the set for node 0 translates as follows:
						</p><pre class="programlisting language-xml">&lt;vcpupin vcpu='0' cpuset='1'/&gt;
&lt;vcpupin vcpu='1' cpuset='4'/&gt;
&lt;vcpupin vcpu='2' cpuset='2'/&gt;
&lt;vcpupin vcpu='3' cpuset='5'/&gt;</pre></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.6. Optimizing virtual machine network performance</h2></div></div></div><p>
				Due to the virtual nature of a VM’s network interface card (NIC), the VM loses a portion of its allocated host network bandwidth, which can reduce the overall workload efficiency of the VM. The following tips can minimize the negative impact of virtualization on the virtual NIC (vNIC) throughput.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Use any of the following methods and observe if it has a beneficial effect on your VM network performance:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Enable the vhost_net module</span></dt><dd><p class="simpara">
							On the host, ensure the <code class="literal">vhost_net</code> kernel feature is enabled:
						</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep vhost</strong></span>
vhost_net              32768  1
vhost                  53248  1 vhost_net
tap                    24576  1 vhost_net
tun                    57344  6 vhost_net</pre><p class="simpara">
							If the output of this command is blank, enable the <code class="literal">vhost_net</code> kernel module:
						</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe vhost_net</strong></span></pre></dd><dt><span class="term">Set up multi-queue virtio-net</span></dt><dd><p class="simpara">
							To set up the <span class="emphasis"><em>multi-queue virtio-net</em></span> feature for a VM, use the <code class="literal">virsh edit</code> command to edit to the XML configuration of the VM. In the XML, add the following to the <code class="literal">&lt;devices&gt;</code> section, and replace <code class="literal">N</code> with the number of vCPUs in the VM, up to 16:
						</p><pre class="literallayout">&lt;interface type='network'&gt;
      &lt;source network='default'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;driver name='vhost' queues='N'/&gt;
&lt;/interface&gt;</pre><p class="simpara">
							If the VM is running, restart it for the changes to take effect.
						</p></dd><dt><span class="term">Set up vhost zero-copy transmit</span></dt><dd><p class="simpara">
							If using a network with large packet size, enable the <span class="emphasis"><em>vhost zero-copy transmit</em></span> feature.
						</p><p class="simpara">
							Note that this feature only improves the performance when transmitting large packets between a guest network and an external network. It does not affect performance for guest-to-guest and guest-to-host workloads. In addition, it is likely to have a negative impact on the performance of small packet workloads.
						</p><p class="simpara">
							Also, enabling zero-copy transmit can cause head-of-line blocking of packets, which may create a potential security risk.
						</p><p class="simpara">
							To enable vhost zero-copy transmit:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									On the host, disable the vhost-net kernel module:
								</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -r vhost_net</strong></span></pre></li><li class="listitem"><p class="simpara">
									Re-enable the vhost-net module with the zero-copy parameter turned on:
								</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe vhost-net experimental_zcopytx=1</strong></span></pre></li><li class="listitem"><p class="simpara">
									Check whether zero-copy transmit was enabled successfully:
								</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/module/vhost_net/parameters/experimental_zcopytx</strong></span>
1</pre></li></ol></div></dd><dt><span class="term">Batching network packets</span></dt><dd><p class="simpara">
							In Linux VM configurations with a long transmission path, batching packets before submitting them to the kernel may improve cache utilization. To set up packet batching, use the following command on the host, and replace <span class="emphasis"><em>tap0</em></span> with the name of the network interface that the VMs use:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -C <span class="emphasis"><em>tap0</em></span> rx-frames 128</strong></span></pre></dd><dt><span class="term">SR-IOV</span></dt><dd>
							If your host NIC supports SR-IOV, use SR-IOV device assignment for your vNICs. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/managing-virtual-devices_configuring-and-managing-virtualization#managing-sr-iov-devices_managing-virtual-devices">Managing SR-IOV devices</a>.
						</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For additional information on virtual network connection types and tips for usage, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/understanding-virtual-networking-overview_configuring-virtual-machine-network-connections">Understanding virtual networking</a>.
					</li></ul></div></section><section class="section" id="virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.7. Virtual machine performance monitoring tools</h2></div></div></div><p>
				To identify what consumes the most VM resources and which aspect of VM performance needs optimization, performance diagnostic tools, both general and VM-specific, can be used.
			</p><div class="formalpara"><p class="title"><strong>Default OS performance monitoring tools</strong></p><p>
					For standard performance evaluation, you can use the utilities provided by default by your host and guest operating systems:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On your RHEL 8 host, as root, use the <code class="literal">top</code> utility or the <span class="strong strong"><strong>system monitor</strong></span> application, and look for <code class="literal">qemu</code> and <code class="literal">virt</code> in the output. This shows how much host system resources your VMs are consuming.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the monitoring tool displays that any of the <code class="literal">qemu</code> or <code class="literal">virt</code> processes consume a large portion of the host CPU or memory capacity, use the <code class="literal">perf</code> utility to investigate. For details, see below.
							</li><li class="listitem">
								In addition, if a <code class="literal">vhost_net</code> thread process, named for example <span class="emphasis"><em>vhost_net-1234</em></span>, is displayed as consuming an excessive amount of host CPU capacity, consider using <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/monitoring_and_managing_system_status_and_performance/optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel-8">virtual network optimization features</a>, such as <code class="literal">multi-queue virtio-net</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the guest operating system, use performance utilities and applications available on the system to evaluate which processes consume the most system resources.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								On Linux systems, you can use the <code class="literal">top</code> utility.
							</li><li class="listitem">
								On Windows systems, you can use the <span class="strong strong"><strong>Task Manager</strong></span> application.
							</li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>perf kvm</strong></p><p>
					You can use the <code class="literal">perf</code> utility to collect and analyze virtualization-specific statistics about the performance of your RHEL 8 host. To do so:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, install the <span class="emphasis"><em>perf</em></span> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum install perf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">perf kvm stat</code> command to display perf statistics for your virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For real-time monitoring of your hypervisor, use the <code class="literal">perf kvm stat live</code> command.
							</li><li class="listitem">
								To log the perf data of your hypervisor over a period of time, activate the logging using the <code class="literal">perf kvm stat record</code> command. After the command is canceled or interrupted, the data is saved in the <code class="literal">perf.data.guest</code> file, which can be analyzed using the <code class="literal">perf kvm stat report</code> command.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Analyze the <code class="literal">perf</code> output for types of <code class="literal">VM-EXIT</code> events and their distribution. For example, the <code class="literal">PAUSE_INSTRUCTION</code> events should be infrequent, but in the following output, the high occurrence of this event suggests that the host CPUs are not handling the running vCPUs well. In such a scenario, consider shutting down some of your active VMs, removing vCPUs from these VMs, or <a class="link" href="index.html#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.5. Optimizing virtual machine CPU performance">tuning the performance of the vCPUs</a>.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>perf kvm stat report</strong></span>

Analyze events for all VMs, all VCPUs:


             VM-EXIT    Samples  Samples%     Time%    Min Time    Max Time         Avg time

  EXTERNAL_INTERRUPT     365634    31.59%    18.04%      0.42us  58780.59us    204.08us ( +-   0.99% )
           MSR_WRITE     293428    25.35%     0.13%      0.59us  17873.02us      1.80us ( +-   4.63% )
    PREEMPTION_TIMER     276162    23.86%     0.23%      0.51us  21396.03us      3.38us ( +-   5.19% )
   PAUSE_INSTRUCTION     189375    16.36%    11.75%      0.72us  29655.25us    256.77us ( +-   0.70% )
                 HLT      20440     1.77%    69.83%      0.62us  79319.41us  14134.56us ( +-   0.79% )
              VMCALL      12426     1.07%     0.03%      1.02us   5416.25us      8.77us ( +-   7.36% )
       EXCEPTION_NMI         27     0.00%     0.00%      0.69us      1.34us      0.98us ( +-   3.50% )
       EPT_MISCONFIG          5     0.00%     0.00%      5.15us     10.85us      7.88us ( +-  11.67% )

Total Samples:1157497, Total events handled time:413728274.66us.</pre><p class="simpara">
						Other event types that can signal problems in the output of <code class="literal">perf kvm stat</code> include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">INSN_EMULATION</code> - suggests suboptimal <a class="link" href="index.html#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel-8" title="9.4. Optimizing virtual machine I/O performance">VM I/O configuration</a>.
							</li></ul></div></li></ol></div><p>
				For more information on using <code class="literal">perf</code> to monitor virtualization performance, see the <code class="literal">perf-kvm</code> man page.
			</p><div class="formalpara"><p class="title"><strong>numastat</strong></p><p>
					To see the current NUMA configuration of your system, you can use the <code class="literal">numastat</code> utility, which is provided by installing the <span class="strong strong"><strong>numactl</strong></span> package.
				</p></div><p>
				The following shows a host with 4 running VMs, each obtaining memory from multiple NUMA nodes. This is not optimal for vCPU performance, and <a class="link" href="index.html#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="9.5.3. Configuring NUMA in a virtual machine">warrants adjusting</a>:
			</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51722 (qemu-kvm)     68     16    357   6936      2      3    147    598  8128
51747 (qemu-kvm)    245     11      5     18   5172   2532      1     92  8076
53736 (qemu-kvm)     62    432   1661    506   4851    136     22    445  8116
53773 (qemu-kvm)   1393      3      1      2     12      0      0   6702  8114
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total              1769    463   2024   7462  10037   2672    169   7837 32434</pre><p>
				In contrast, the following shows memory being provided to each VM by a single node, which is significantly more efficient.
			</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51747 (qemu-kvm)      0      0      7      0   8072      0      1      0  8080
53736 (qemu-kvm)      0      0      7      0      0      0   8113      0  8120
53773 (qemu-kvm)      0      0      7      0      0      0      1   8110  8118
59065 (qemu-kvm)      0      0   8050      0      0      0      0      0  8051
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total                 0      0   8072      0   8072      0   8114   8110 32368</pre></section><section class="section" id="related-information-optimizing-virtual-machine-performance-in-rhel-8"><div class="titlepage"><div><div><h2 class="title">9.8. Related information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When using Windows as the guest operating system of your VM, Red Hat recommends applying additional optimization measures. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel8_configuring-and-managing-virtualization#optimizing-windows-virtual-machines-on-rhel-8_installing-and-managing-windows-virtual-machines-on-rhel8">Optimizing Windows virtual machines</a>.
					</li></ul></div></section></section><section class="chapter" id="managing-power-consumption-with-powertop_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Managing power consumption with PowerTOP</h1></div></div></div><p>
			As a system administrator, you can use the <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> tool to analyze and manage power consumption.
		</p><section class="section" id="the-purpose-of-powertop_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h2 class="title">10.1. The purpose of PowerTOP</h2></div></div></div><p>
				<span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> is a program that diagnoses issues related to power consumption and provides suggestions on how to extend battery lifetime.
			</p><p>
				The <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> tool can provide an estimate of the total power usage of the system and also individual power usage for each process, device, kernel worker, timer, and interrupt handler. The tool can also identify specific components of kernel and user-space applications that frequently wake up the CPU.
			</p><p>
				Red Hat Enterprise Linux 8 uses version 2.x of <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>.
			</p></section><section class="section" id="using-powertop_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h2 class="title">10.2. Using PowerTOP</h2></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To be able to use <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>, make sure that the <code class="literal package">powertop</code> package has been installed on your system:
					</p><pre class="screen"># yum install powertop</pre></li></ul></div><section class="section" id="starting-powertop_using-powertop"><div class="titlepage"><div><div><h3 class="title">10.2.1. Starting PowerTOP</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To run <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>, use the following command:
						</p><pre class="literallayout"># powertop</pre></li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Laptops should run on battery power when running the <code class="literal package">powertop</code> command.
					</p></div></div></section><section class="section" id="calibrating-powertop_using-powertop"><div class="titlepage"><div><div><h3 class="title">10.2.2. Calibrating PowerTOP</h3></div></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On a laptop, you can calibrate the power estimation engine by running the following command:
						</p><pre class="literallayout"># powertop --calibrate</pre></li><li class="listitem"><p class="simpara">
							Let the calibration finish without interacting with the machine during the process.
						</p><p class="simpara">
							Calibration takes time because the process performs various tests, cycles through brightness levels and switches devices on and off.
						</p></li><li class="listitem"><p class="simpara">
							When the calibration process is completed, <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> starts as normal. Let it run for approximately an hour to collect data.
						</p><p class="simpara">
							When enough data is collected, power estimation figures will be displayed in the first column of the output table.
						</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Note that <code class="literal command">powertop --calibrate</code> can only be used on laptops.
					</p></div></div></section><section class="section" id="setting-the-measuring-interval_using-powertop"><div class="titlepage"><div><div><h3 class="title">10.2.3. Setting the measuring interval</h3></div></div></div><p>
					By default, <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> takes measurements in 20 seconds intervals.
				</p><p>
					If you want to change this measuring frequency, use the following procedure:
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Run the <code class="literal command">powertop</code> command with the <code class="literal option">--time</code> option:
						</p><pre class="literallayout"># powertop --time=<span class="emphasis"><em><span class="replaceable replaceable">time in seconds</span></em></span></pre></li></ul></div></section><section class="section" id="related-information-using-powertop"><div class="titlepage"><div><div><h3 class="title">10.2.4. Related information</h3></div></div></div><p>
					For more details on how to use <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>, see the <code class="literal">powertop</code> man page.
				</p></section></section><section class="section" id="powertop-statistics_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h2 class="title">10.3. PowerTOP statistics</h2></div></div></div><p>
				While it runs, <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> gathers statistics from the system.
			</p><p>
				<span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>'s output provides multiple tabs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Overview</code>
					</li><li class="listitem">
						<code class="literal">Idle stats</code>
					</li><li class="listitem">
						<code class="literal">Frequency stats</code>
					</li><li class="listitem">
						<code class="literal">Device stats</code>
					</li><li class="listitem">
						<code class="literal">Tunables</code>
					</li></ul></div><p>
				You can use the <code class="literal">Tab</code> and <code class="literal">Shift+Tab</code> keys to cycle through these tabs.
			</p><section class="section" id="overview-tab_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h3 class="title">10.3.1. The Overview tab</h3></div></div></div><p>
					In the <code class="literal">Overview</code> tab, you can view a list of the components that either send wakeups to the CPU most frequently or consume the most power. The items within the <code class="literal">Overview</code> tab, including processes, interrupts, devices, and other resources, are sorted according to their utilization.
				</p><p>
					The adjacent columns within the <code class="literal">Overview</code> tab provide the following pieces of information:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Usage</span></dt><dd>
								Power estimation of how the resource is being used.
							</dd><dt><span class="term">Events/s</span></dt><dd>
								Wakeups per second. The number of wakeups per second indicates how efficiently the services or the devices and drivers of the kernel are performing. Less wakeups means that less power is consumed. Components are ordered by how much further their power usage can be optimized.
							</dd><dt><span class="term">Category</span></dt><dd>
								Classification of the component; such as process, device, or timer.
							</dd><dt><span class="term">Description</span></dt><dd>
								Description of the component.
							</dd></dl></div><p>
					If properly calibrated, a power consumption estimation for every listed item in the first column is shown as well.
				</p><p>
					Apart from this, the <code class="literal">Overview</code> tab includes the line with summary statistics such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Total power consumption
						</li><li class="listitem">
							Remaining battery life (only if applicable)
						</li><li class="listitem">
							Summary of total wakeups per second, GPU operations per second, and virtual file system operations per second
						</li></ul></div></section><section class="section" id="idle-stats-tab_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h3 class="title">10.3.2. The Idle stats tab</h3></div></div></div><p>
					The <code class="literal">Idle stats</code> tab shows usage of C-states for all processors and cores, while the <code class="literal">Frequency stats</code> tab shows usage of P-states including the Turbo mode, if applicable, for all processors and cores. The duration of C- or P-states is an indication of how well the CPU usage has been optimized. The longer the CPU stays in the higher C- or P-states (for example C4 is higher than C3), the better the CPU usage optimization is. Ideally, residency is 90% or more in the highest C- or P-state when the system is idle.
				</p></section><section class="section" id="device-stats-tab_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h3 class="title">10.3.3. The Device stats tab</h3></div></div></div><p>
					The <code class="literal">Device stats</code> tab provides similar information to the <code class="literal">Overview</code> tab but only for devices.
				</p></section><section class="section" id="tunables-tab_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h3 class="title">10.3.4. The Tunables tab</h3></div></div></div><p>
					The <code class="literal">Tunables</code> tab contains <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>'s suggestions for optimizing the system for lower power consumption.
				</p><p>
					Use the <code class="literal">up</code> and <code class="literal">down</code> keys to move through suggestions, and the <code class="literal">enter</code> key to toggle the suggestion on or off.
				</p><div class="figure" id="idm140290637829072"><p class="title"><strong>Figure 10.1. PowerTOP output</strong></p><div class="figure-contents"><div class="mediaobject"><img src="powertop_output_n.png" alt="powertop output n"/></div></div></div><div class="formalpara"><p class="title"><strong>Additional resources</strong></p><p>
						For more details on <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>, see <a class="link" href="https://01.org/powertop/">PowerTOP’s home page</a>.
					</p></div></section></section><section class="section" id="generating-an-html-output_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h2 class="title">10.4. Generating an HTML output</h2></div></div></div><p>
				Apart from the <code class="literal command">powertop’s</code> output in terminal, you can also generate an HTML report.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Run the <code class="literal command">powertop</code> command with the <code class="literal option">--html</code> option:
					</p><pre class="literallayout"># powertop --html=htmlfile.html</pre><p class="simpara">
						Replace the <code class="literal">htmlfile.html</code> parameter with the required name for the output file.
					</p></li></ul></div></section><section class="section" id="optimizing-power-consumption_managing-power-consumption-with-powertop"><div class="titlepage"><div><div><h2 class="title">10.5. Optimizing power consumption</h2></div></div></div><p>
				To optimize power consumption, you can use either the <code class="literal">powertop</code> service or the <code class="literal">powertop2tuned</code> utility.
			</p><section class="section" id="optimizing-power-consumption-using-the-powertop-service_optimizing-power-consumption"><div class="titlepage"><div><div><h3 class="title">10.5.1. Optimizing power consumption using the powertop service</h3></div></div></div><p>
					You can use the <code class="literal">powertop</code> service to automatically enable all <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>'s suggestions from the <code class="literal">Tunables</code> tab on the boot:
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Enable the <code class="literal">powertop</code> service:
						</p><pre class="literallayout"># systemctl enable powertop</pre></li></ul></div></section><section class="section" id="powertop2tuned-utility_optimizing-power-consumption"><div class="titlepage"><div><div><h3 class="title">10.5.2. The powertop2tuned utility</h3></div></div></div><p>
					The <code class="literal">powertop2tuned</code> utility allows you to create custom <span class="strong strong"><strong><span class="application application">Tuned</span></strong></span> profiles from <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> suggestions.
				</p><p>
					By default, <code class="literal">powertop2tuned</code> creates profiles in the <code class="literal filename">/etc/tuned/</code> directory, and bases the custom profile on the currently selected <span class="strong strong"><strong><span class="application application">Tuned</span></strong></span> profile. For safety reasons, all <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> tunings are initially disabled in the new profile.
				</p><p>
					To enable the tunings, you can:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Uncomment them in the <code class="literal filename">/etc/tuned/profile_name/tuned.conf file</code>.
						</li><li class="listitem"><p class="simpara">
							Use the <code class="literal option">--enable</code> or <code class="literal option">-e</code> option to generate a new profile that enables most of the tunings suggested by <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span>.
						</p><p class="simpara">
							Certain potentially problematic tunings, such as the USB autosuspend, are disabled by default and need to be uncommented manually.
						</p></li></ul></div></section><section class="section" id="optimizing-power-consumption-with-powertop2tuned_optimizing-power-consumption"><div class="titlepage"><div><div><h3 class="title">10.5.3. Optimizing power consumption using the powertop2tuned utility</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The <code class="literal">powertop2tuned</code> utility is installed on the system:
						</p><pre class="literallayout"># yum install tuned-utils</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a custom profile:
						</p><pre class="literallayout"># powertop2tuned new_profile_name</pre></li><li class="listitem"><p class="simpara">
							Activate the new profile:
						</p><pre class="literallayout"># tuned-adm profile new_profile_name</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							For a complete list of options that <code class="literal">powertop2tuned</code> supports, use:
						</p><pre class="literallayout">$ powertop2tuned --help</pre></li></ul></div></section><section class="section" id="con_comparison-of-powertop-service-and-powertop2tuned_optimizing-power-consumption"><div class="titlepage"><div><div><h3 class="title">10.5.4. Comparison of powertop.service and powertop2tuned</h3></div></div></div><p>
					Optimizing power consumption with <code class="literal">powertop2tuned</code> is preferred over <code class="literal">powertop.service</code> for the following reasons:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">powertop2tuned</code> utility represents integration of <span class="strong strong"><strong><span class="application application">PowerTOP</span></strong></span> into <span class="strong strong"><strong><span class="application application">Tuned</span></strong></span>, which enables to benefit of advantages of both tools.
						</li><li class="listitem">
							The <code class="literal">powertop2tuned</code> utility allows for fine-grained control of enabled tuning.
						</li><li class="listitem">
							With <code class="literal">powertop2tuned</code>, potentially dangerous tuning are not automatically enabled.
						</li><li class="listitem">
							With <code class="literal">powertop2tuned</code>, rollback is possible without reboot.
						</li></ul></div></section></section></section><section class="chapter" id="getting-started-with-perf_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Getting started with perf</h1></div></div></div><p>
			As a system administrator, you can use the <code class="literal">perf</code> tool to collect and analyze performance data of your system.
		</p><section class="section" id="introduction-to-perf_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.1. Introduction to perf</h2></div></div></div><p>
				The <code class="literal">perf</code> user-space tool interfaces with the kernel-based subsystem <span class="emphasis"><em>Performance Counters for Linux</em></span> (PCL). <code class="literal">perf</code> is a powerful tool that uses the Performance Monitoring Unit (PMU) to measure, record, and monitor a variety of hardware and software events. <code class="literal">perf</code> also supports tracepoints, kprobes, and uprobes.
			</p></section><section class="section" id="installing-perf_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.2. Installing perf</h2></div></div></div><p>
				This procedure installs the <code class="literal">perf</code> user-space tool.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal">perf</code> tool:
					</p><pre class="screen"># yum install perf</pre></li></ul></div></section><section class="section" id="common-perf-commands_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.3. Common Perf Commands</h2></div></div></div><p>
				This section provides an overview of commonly used <code class="literal">perf</code> commands.
			</p><div class="variablelist"><p class="title"><strong>Commonly used perf commands</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal command">perf stat</code> </span></dt><dd>
							This command provides overall statistics for common performance events, including instructions executed and clock cycles consumed. Options allow for selection of events other than the default measurement events.
						</dd><dt><span class="term"><code class="literal command">perf record</code> </span></dt><dd>
							This command records performance data into a file, <code class="literal">perf.data</code>, which can be later analyzed using the <code class="literal">perf report</code> command.
						</dd><dt><span class="term"><code class="literal command">perf report</code> </span></dt><dd>
							This command reads and displays the performance data from the <code class="literal">perf.data</code> file created by <code class="literal">perf record</code>.
						</dd><dt><span class="term"><code class="literal command">perf list</code> </span></dt><dd>
							This command lists the events available on a particular machine. These events will vary based on performance monitoring hardware and software configuration of the system.
						</dd><dt><span class="term"><code class="literal command">perf top</code> </span></dt><dd>
							This command performs a similar function to the <code class="literal">top</code> utility. It generates and displays a performance counter profile in realtime.
						</dd><dt><span class="term"><code class="literal command">perf trace</code> </span></dt><dd>
							This command performs a similar function to the <code class="literal">strace</code> tool. It monitors the system calls used by a specified thread or process and all signals received by that application.
						</dd><dt><span class="term"><code class="literal command">perf help</code> </span></dt><dd>
							This command displays a complete list of <code class="literal">perf</code> commands.
						</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To list additional subcommand options of the subcommands and their descriptions, add the <code class="literal">-h</code> option to the target command.
					</li></ul></div></section><section class="section" id="real-time-system-profiling-using-perf-top_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.4. Real time profiling of CPU usage with perf top</h2></div></div></div><p>
				You can use the <code class="literal command">perf top</code> command to measure CPU usage of different functions in real time.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><section class="section" id="the-purpose-of-perf-top_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.1. The purpose of perf top</h3></div></div></div><p>
					The <code class="literal command">perf top</code> command is used for real time system profiling and functions similarly to the <code class="literal">top</code> utility. However, where the <code class="literal">top</code> utility generally shows you how much CPU time a given process or thread is using, <code class="literal command">perf top</code> shows you how much CPU time each specific function uses. In its default state, <code class="literal command">perf top</code> tells you about functions being used across all CPUs in both the user-space and the kernel-space. To use <code class="literal command">perf top</code> you need root access.
				</p></section><section class="section" id="profiling-cpu-usage-with-perf-top_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.2. Profiling CPU usage with perf top</h3></div></div></div><p>
					This procedure activates <code class="literal">perf top</code> and profiles CPU usage in real time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li><li class="listitem">
							You have root access
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Start the <code class="literal">perf top</code> monitoring interface:
						</p><pre class="screen"># perf top</pre><div class="example" id="idm140290641100128"><p class="title"><strong>Example 11.1. Perf top output</strong></p><div class="example-contents"><pre class="screen">--------------------------------------------------------------------
PerfTop:   20806 irqs/sec  kernel:57.3%  exact: 100.0% lost: 0/0 drop: 0/0 [4000Hz cycles],  (all, 8 CPUs)
---------------------------------------------------------------------
Overhead  Shared Object       Symbol
   2.20%  [kernel]            [k] do_syscall_64
   2.17%  [kernel]            [k] module_get_kallsym
   1.49%  [kernel]            [k] copy_user_enhanced_fast_string
   1.37%  libpthread-2.29.so  [.] __pthread_mutex_lock
   1.31%  [unknown]           [.] 0000000000000000
   1.07%  [kernel]            [k] psi_task_change
   1.04%  [kernel]            [k] switch_mm_irqs_off
   0.94%  [kernel]            [k] __fget
   0.74%  [kernel]            [k] entry_SYSCALL_64
   0.69%  [kernel]            [k] syscall_return_via_sysret
   0.69%  libxul.so           [.] 0x000000000113f9b0
   0.67%  [kernel]            [k] kallsyms_expand_symbol.constprop.0
   0.65%  firefox             [.] moz_xmalloc
   0.65%  libpthread-2.29.so  [.] __pthread_mutex_unlock_usercnt
   0.60%  firefox             [.] free
   0.60%  libxul.so           [.] 0x000000000241d1cd
   0.60%  [kernel]            [k] do_sys_poll
   0.58%  [kernel]            [k] menu_select
   0.56%  [kernel]            [k] _raw_spin_lock_irqsave
   0.55%  perf                [.] 0x00000000002ae0f3</pre></div></div><p class="simpara">
							In the previous example, the kernel function <code class="literal">do_syscall_64</code> is using the most CPU time.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-top(1)</code> man page.
						</li></ul></div></section><section class="section" id="interpretation-of-perf-top-output_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.3. Interpretation of perf top output</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">The "Overhead" column </span></dt><dd>
								Displays the percent of CPU a given function is using.
							</dd><dt><span class="term">The "Shared Object" column </span></dt><dd>
								Displays name of the program or library which is using the function.
							</dd><dt><span class="term">The "Symbol" column </span></dt><dd>
								Displays the function name or symbol. Functions executed in the kernel-space are identified by <code class="literal">[k]</code> and functions executed in the user-space are identified by <code class="literal">[.]</code>.
							</dd></dl></div></section><section class="section" id="why-perf-displays-some-function-names-as-raw-function-addresses_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.4. Why perf displays some function names as raw function addresses</h3></div></div></div><p>
					For kernel functions, <code class="literal">perf</code> uses the information from the <code class="literal">/proc/kallsyms</code> file to map the samples to their respective function names or symbols. For functions executed in the user space, however, you might see raw function addresses because the binary is stripped.
				</p><p>
					The <code class="literal literal">debuginfo</code> package of the executable must be installed or, if the executable is a locally developed application, the application must be compiled with debugging information turned on (the <code class="literal option">-g</code> option in GCC) to display the function names or symbols in such a situation.
				</p><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/enabling-debugging-with-debugging-information_debugging-applications">Enabling debugging with debugging information.</a>
						</li></ul></div></section><section class="section" id="enabling-debug-and-source-repositories_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.5. Enabling debug and source repositories</h3></div></div></div><p>
					A standard installation of Red Hat Enterprise Linux does not enable the debug and source repositories. These repositories contain information needed to debug the system components and measure their performance.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Enable the source and debug information package channels:
						</p><pre class="screen"># subscription-manager repos --enable rhel-8-for-$(uname -i)-baseos-debug-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-baseos-source-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-appstream-debug-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-appstream-source-rpms</pre><p class="simpara">
							The <code class="literal">$(uname -i)</code> part is automatically replaced with a matching value for architecture of your system:
						</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290640409552" scope="col">Architecture name</th><th align="left" valign="top" id="idm140290640408464" scope="col">Value</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290640409552"> <p>
											64-bit Intel and AMD
										</p>
										 </td><td align="left" valign="top" headers="idm140290640408464"> <p>
											x86_64
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290640409552"> <p>
											64-bit ARM
										</p>
										 </td><td align="left" valign="top" headers="idm140290640408464"> <p>
											aarch64
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290640409552"> <p>
											IBM POWER
										</p>
										 </td><td align="left" valign="top" headers="idm140290640408464"> <p>
											ppc64le
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290640409552"> <p>
											IBM Z
										</p>
										 </td><td align="left" valign="top" headers="idm140290640408464"> <p>
											s390x
										</p>
										 </td></tr></tbody></table></div></li></ul></div></section><section class="section" id="getting-debuginfo-packages-for-an-application-or-library-using-gdb_real-time-system-profiling-using-perf-top"><div class="titlepage"><div><div><h3 class="title">11.4.6. Getting debuginfo packages for an application or library using GDB</h3></div></div></div><p>
					Debugging information is required to debug code. For code that is installed from a package, the GNU Debugger (GDB) automatically recognizes missing debug information, resolves the package name and provides concrete advice on how to get the package.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The application or library you want to debug must be installed on the system.
						</li><li class="listitem">
							GDB and the <code class="literal command">debuginfo-install</code> tool must be installed on the system. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/setting-up-a-development-workstation_developing-applications#setting-up-to-debug-applications_setting-up-a-development-workstation">Setting up to debug applications</a>.
						</li><li class="listitem">
							Channels providing <code class="literal">debuginfo</code> and <code class="literal">debugsource</code> packages must be configured and enabled on the system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start GDB attached to the application or library you want to debug. GDB automatically recognizes missing debugging information and suggests a command to run.
						</p><pre class="screen">$ gdb -q /bin/ls
Reading symbols from /bin/ls...Reading symbols from .gnu_debugdata for /usr/bin/ls...(no debugging symbols found)...done.
(no debugging symbols found)...done.
Missing separate debuginfos, use: dnf <span class="emphasis"><em>debuginfo-install coreutils-8.30-6.el8.x86_64</em></span>
(gdb)</pre></li><li class="listitem"><p class="simpara">
							Exit GDB: type <span class="keycap"><strong>q</strong></span> and confirm with <span class="keycap"><strong>Enter</strong></span>.
						</p><pre class="screen">(gdb) q</pre></li><li class="listitem"><p class="simpara">
							Run the command suggested by GDB to install the required <code class="literal">debuginfo</code> packages:
						</p><pre class="screen"># dnf debuginfo-install coreutils-8.30-6.el8.x86_64</pre><p class="simpara">
							The <code class="literal">dnf</code> package management tool provides a summary of the changes, asks for confirmation and once you confirm, downloads and installs all the necessary files.
						</p></li><li class="listitem">
							In case GDB is not able to suggest the <code class="literal">debuginfo</code> package, follow the procedure described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/enabling-debugging-with-debugging-information_debugging-applications#getting-debuginfo-packages-for-an-application-or-library-manually_enabling-debugging-with-debugging-information">Getting debuginfo packages for an application or library manually</a>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Developer_Toolset/6/html/User_Guide/sect-Red_Hat_Developer_Toolset-Install.html#sect-Red_Hat_Developer_Toolset-Install-Debugging">Red Hat Developer Toolset User Guide, section Installing Debugging Information</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/solutions/9907">How can I download or install debuginfo packages for RHEL systems?</a> — Red Hat Knowledgebase solution
						</li></ul></div></section></section><section class="section" id="counting-events-during-process-execution_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.5. Counting events during process execution</h2></div></div></div><p>
				You can use the <code class="literal command">perf stat</code> command to count hardware and software events during process execution.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><section class="section" id="the-purpose-of-perf-stat_using-perf-stat-to-count-events-during-process-execution"><div class="titlepage"><div><div><h3 class="title">11.5.1. The purpose of perf stat</h3></div></div></div><p>
					The <code class="literal command">perf stat</code> command executes a specified command, keeps a running count of hardware and software event occurrences during the commands execution, and generates statistics of these counts. If you do not specify any events, then <code class="literal command">perf stat</code> counts a set of common hardware and software events.
				</p></section><section class="section" id="counting-events-with-perf-stat_using-perf-stat-to-count-events-during-process-execution"><div class="titlepage"><div><div><h3 class="title">11.5.2. Counting events with perf stat</h3></div></div></div><p>
					You can use <code class="literal">perf stat</code> to count hardware and software event occurrences during command execution and generate statistics of these counts. By default, <code class="literal">perf stat</code> operates in per-thread mode.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Count the events.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Running the <code class="literal command">perf stat</code> command without root access will only count events occurring in the user space:
								</p><pre class="screen">$ perf stat ls</pre><div class="example" id="idm140290641170608"><p class="title"><strong>Example 11.2. Output of perf stat ran without root access</strong></p><div class="example-contents"><pre class="screen">Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos

 Performance counter stats for 'ls':

              1.28 msec task-clock:u               #    0.165 CPUs utilized
                 0      context-switches:u         #    0.000 M/sec
                 0      cpu-migrations:u           #    0.000 K/sec
               104      page-faults:u              #    0.081 M/sec
         1,054,302      cycles:u                   #    0.823 GHz
         1,136,989      instructions:u             #    1.08  insn per cycle
           228,531      branches:u                 #  178.447 M/sec
            11,331      branch-misses:u            #    4.96% of all branches

       0.007754312 seconds time elapsed

       0.000000000 seconds user
       0.007717000 seconds sys</pre></div></div><p class="simpara">
									As you can see in the previous example, when <code class="literal">perf stat</code> runs without root access the event names are followed by <code class="literal">:u</code>, indicating that these events were counted only in the user-space.
								</p></li><li class="listitem"><p class="simpara">
									To count both user-space and kernel-space events, you must have root access when running <code class="literal command">perf stat</code>:
								</p><pre class="screen"># perf stat ls</pre><div class="example" id="idm140290641163792"><p class="title"><strong>Example 11.3. Output of perf stat ran with root access</strong></p><div class="example-contents"><pre class="screen">Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos

 Performance counter stats for 'ls':

              3.09 msec task-clock                #    0.119 CPUs utilized
                18      context-switches          #    0.006 M/sec
                 3      cpu-migrations            #    0.969 K/sec
               108      page-faults               #    0.035 M/sec
         6,576,004      cycles                    #    2.125 GHz
         5,694,223      instructions              #    0.87  insn per cycle
         1,092,372      branches                  #  352.960 M/sec
            31,515      branch-misses             #    2.89% of all branches

       0.026020043 seconds time elapsed

       0.000000000 seconds user
       0.014061000 seconds sys</pre></div></div><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
											By default, <code class="literal">perf stat</code> operates in per-thread mode. To change to CPU-wide event counting, pass the <code class="literal">-a</code> option to <code class="literal">perf stat</code>. To count CPU-wide events, you need root access:
										</p><pre class="screen"># perf stat -a ls</pre></li></ul></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-stat(1)</code> man page.
						</li></ul></div></section><section class="section" id="interpretation-of-perf-stat-output_using-perf-stat-to-count-events-during-process-execution"><div class="titlepage"><div><div><h3 class="title">11.5.3. Interpretation of perf stat output</h3></div></div></div><p>
					<code class="literal">perf stat</code> executes a specified command and counts event occurrences during the commands execution and displays statistics of these counts in three columns:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The number of occurrences counted for a given event
						</li><li class="listitem">
							The name of the event that was counted
						</li><li class="listitem"><p class="simpara">
							When related metrics are available, a ratio or percentage is displayed after the hash sign (<code class="literal">#</code>) in the right-most column.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For example, when running in default mode, <code class="literal">perf stat</code> counts both cycles and instructions and, therefore, calculates and displays instructions per cycle in the right-most column. You can see similar behavior with regard to branch-misses as a percent of all branches since both events are counted by default.
								</li></ul></div></li></ol></div></section><section class="section" id="attaching-perf-stat-to-a-running-process_using-perf-stat-to-count-events-during-process-execution"><div class="titlepage"><div><div><h3 class="title">11.5.4. Attaching perf stat to a running process</h3></div></div></div><p>
					You can attach <code class="literal">perf stat</code> to a running process. This will instruct <code class="literal">perf stat</code> to count event occurrences only in the specified processes during the execution of a command.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Attach <code class="literal">perf stat</code> to a running process:
						</p><pre class="screen">$ perf stat -p <span class="emphasis"><em>ID1,ID2</em></span> sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
							The previous example counts events in the processes with the IDs of <code class="literal"><span class="emphasis"><em>ID1</em></span></code> and <code class="literal"><span class="emphasis"><em>ID2</em></span></code> for a time period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds as dictated by using the <code class="literal">sleep</code> command.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-stat(1)</code> man page.
						</li></ul></div></section></section><section class="section" id="recording-and-analyzing-performance-profiles-with-perf_getting-started-with-perf"><div class="titlepage"><div><div><h2 class="title">11.6. Recording and analyzing performance profiles with perf</h2></div></div></div><p>
				The <code class="literal">perf</code> tool allows you to record performance data and analyze it at a later time.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><section class="section" id="the-purpose-of-perf-record_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.1. The purpose of perf record</h3></div></div></div><p>
					The <code class="literal command">perf record</code> command samples performance data and stores it in a file, <code class="literal file">perf.data</code>, which can be read and visualized with other <code class="literal">perf</code> commands. <code class="literal file">perf.data</code> is generated in the current directory and can be accessed at a later time, possibly on a different machine.
				</p><p>
					If you do not specify a command for <code class="literal command">perf record</code> to record during, it will record until you manually stop the process by pressing <code class="literal">Ctrl+C</code>. You can attach <code class="literal command">perf record</code> to specific processes by passing the <code class="literal option">-p</code> option followed by one or more process IDs. You can run <code class="literal command">perf record</code> without root access, however, doing so will only sample performance data in the user space. In the default mode, <code class="literal command">perf record</code> uses CPU cycles as the sampling event and operates in per-thread mode with inherit mode enabled.
				</p></section><section class="section" id="recording-a-performance-profile-without-root-access_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.2. Recording a performance profile without root access</h3></div></div></div><p>
					You can use <code class="literal">perf record</code> without root access to sample and record performance data in the user-space only.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Sample and record the performance data:
						</p><pre class="screen">$ perf record <span class="emphasis"><em>command</em></span></pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additonal resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-record(1)</code> man page.
						</li></ul></div></section><section class="section" id="recording-a-performance-profile-with-root-access_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.3. Recording a performance profile with root access</h3></div></div></div><p>
					You can use <code class="literal">perf record</code> with root access to sample and record performance data in both the user-space and the kernel-space simultaneously.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the <code class="literal">perf</code> user space tool installed as described in <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li><li class="listitem">
							You have root access.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Sample and record the performance data:
						</p><pre class="screen"># perf record <span class="emphasis"><em>command</em></span></pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additonal resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-record(1)</code> man page.
						</li></ul></div></section><section class="section" id="recording-a-performance-profile-in-per-cpu-mode_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.4. Recording a performance profile in per-CPU mode</h3></div></div></div><p>
					You can use <code class="literal">perf record</code> in per-CPU mode to sample and record performance data in both and user-space and the kernel-space simultaneously across all threads on a monitored CPU. By default, per-CPU mode monitors all online CPUs.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Sample and record the performance data:
						</p><pre class="screen"># perf record -a <span class="emphasis"><em>command</em></span></pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
						</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-record(1)</code> man page.
						</li></ul></div></section><section class="section" id="capturing-call-graph-data-with-perf-record_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.5. Capturing call graph data with perf record</h3></div></div></div><p>
					You can configure the <code class="literal">perf record</code> tool so that it records which function is calling other functions in the performance profile. This helps to identify a bottleneck if several processes are calling the same function.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Sample and record performance data with the <code class="literal">--call-graph</code> option:
						</p><pre class="screen">$ perf record --call-graph <span class="emphasis"><em>method</em></span> <span class="emphasis"><em>command</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
								</li><li class="listitem"><p class="simpara">
									Replace <span class="emphasis"><em>method</em></span> with one of the following unwinding methods:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">fp</code></span></dt><dd>
												Uses the frame pointer method. Depending on compiler optimization, such as with binaries built with the GCC option <code class="literal option">--fomit-frame-pointer</code>, this may not be able to unwind the stack.
											</dd><dt><span class="term"><code class="literal">dwarf</code></span></dt><dd>
												Uses DWARF Call Frame Information to unwind the stack.
											</dd><dt><span class="term"><code class="literal">lbr</code></span></dt><dd>
												Uses the last branch record hardware on Intel processors.
											</dd></dl></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-record(1)</code> man page.
						</li></ul></div></section><section class="section" id="analyzing-perf-data-with-perf-report_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.6. Analyzing perf.data with perf report</h3></div></div></div><p>
					You can use <code class="literal">perf report</code> to display and analyze a <code class="literal file">perf.data</code> file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li><li class="listitem">
							There is a <code class="literal file">perf.data</code> file in the current directory.
						</li><li class="listitem">
							If the <code class="literal file">perf.data</code> file was created with root access, you need to run <code class="literal">perf report</code> with root access too.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the contents of the <code class="literal file">perf.data</code> file for further analysis:
						</p><pre class="screen"># perf report</pre><div class="example" id="idm140290636752560"><p class="title"><strong>Example 11.4. Example output</strong></p><div class="example-contents"><pre class="screen">Samples: 2K of event 'cycles', Event count (approx.): 235462960
Overhead  Command          Shared Object                     Symbol
   2.36%  kswapd0          [kernel.kallsyms]                 [k] page_vma_mapped_walk
   2.13%  sssd_kcm         libc-2.28.so                      [.] __memset_avx2_erms
   2.13%  perf             [kernel.kallsyms]                 [k] smp_call_function_single
   1.53%  gnome-shell      libc-2.28.so                      [.] __strcmp_avx2
   1.17%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_hash_table_lookup
   0.93%  Xorg             libc-2.28.so                      [.] __memmove_avx_unaligned_erms
   0.89%  gnome-shell      libgobject-2.0.so.0.5600.4        [.] g_object_unref
   0.87%  kswapd0          [kernel.kallsyms]                 [k] page_referenced_one
   0.86%  gnome-shell      libc-2.28.so                      [.] __memmove_avx_unaligned_erms
   0.83%  Xorg             [kernel.kallsyms]                 [k] alloc_vmap_area
   0.63%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_slice_alloc
   0.53%  gnome-shell      libgirepository-1.0.so.1.0.0      [.] g_base_info_unref
   0.53%  gnome-shell      ld-2.28.so                        [.] _dl_find_dso_for_object
   0.49%  kswapd0          [kernel.kallsyms]                 [k] vma_interval_tree_iter_next
   0.48%  gnome-shell      libpthread-2.28.so                [.] __pthread_getspecific
   0.47%  gnome-shell      libgirepository-1.0.so.1.0.0      [.] 0x0000000000013b1d
   0.45%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_slice_free1
   0.45%  gnome-shell      libgobject-2.0.so.0.5600.4        [.] g_type_check_instance_is_fundamentally_a
   0.44%  gnome-shell      libc-2.28.so                      [.] malloc
   0.41%  swapper          [kernel.kallsyms]                 [k] apic_timer_interrupt
   0.40%  gnome-shell      ld-2.28.so                        [.] _dl_lookup_symbol_x
   0.39%  kswapd0          [kernel.kallsyms]                 [k] __raw_callee_save___pv_queued_spin_unlock</pre></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additonal resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf-report(1)</code> man page.
						</li></ul></div></section><section class="section" id="interpretation-of-perf-report-output_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.7. Interpretation of perf report output</h3></div></div></div><p>
					The table displayed by running the <code class="literal command">perf report</code> command sorts the data into several columns:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The 'Overhead' column</span></dt><dd>
								Indicates what percentage of overall samples were collected in that particular function.
							</dd><dt><span class="term">The 'Command' column</span></dt><dd>
								Tells you which process the samples were collected from.
							</dd><dt><span class="term">The 'Shared Object' column</span></dt><dd>
								Displays the name of the ELF image where the samples come from (the name [kernel.kallsyms] is used when the samples come from the kernel).
							</dd><dt><span class="term">The 'Symbol' column</span></dt><dd>
								Displays the function name or symbol.
							</dd></dl></div><p>
					In default mode, the functions are sorted in descending order with those with the highest overhead displayed first.
				</p></section><section class="section" id="why-perf-displays-some-function-names-as-raw-function-addresses_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.8. Why perf displays some function names as raw function addresses</h3></div></div></div><p>
					For kernel functions, <code class="literal">perf</code> uses the information from the <code class="literal">/proc/kallsyms</code> file to map the samples to their respective function names or symbols. For functions executed in the user space, however, you might see raw function addresses because the binary is stripped.
				</p><p>
					The <code class="literal literal">debuginfo</code> package of the executable must be installed or, if the executable is a locally developed application, the application must be compiled with debugging information turned on (the <code class="literal option">-g</code> option in GCC) to display the function names or symbols in such a situation.
				</p><div class="itemizedlist"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/enabling-debugging-with-debugging-information_debugging-applications">Enabling debugging with debugging information.</a>
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						It is not necessary to re-run <code class="literal command">perf record</code> after installing the <code class="literal literal">debuginfo</code> associated with an executable. Simply re-run <code class="literal command">perf report</code>.
					</p></div></div></section><section class="section" id="enabling-debug-and-source-repositories_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.9. Enabling debug and source repositories</h3></div></div></div><p>
					A standard installation of Red Hat Enterprise Linux does not enable the debug and source repositories. These repositories contain information needed to debug the system components and measure their performance.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Enable the source and debug information package channels:
						</p><pre class="screen"># subscription-manager repos --enable rhel-8-for-$(uname -i)-baseos-debug-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-baseos-source-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-appstream-debug-rpms
# subscription-manager repos --enable rhel-8-for-$(uname -i)-appstream-source-rpms</pre><p class="simpara">
							The <code class="literal">$(uname -i)</code> part is automatically replaced with a matching value for architecture of your system:
						</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290641456816" scope="col">Architecture name</th><th align="left" valign="top" id="idm140290641455728" scope="col">Value</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290641456816"> <p>
											64-bit Intel and AMD
										</p>
										 </td><td align="left" valign="top" headers="idm140290641455728"> <p>
											x86_64
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290641456816"> <p>
											64-bit ARM
										</p>
										 </td><td align="left" valign="top" headers="idm140290641455728"> <p>
											aarch64
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290641456816"> <p>
											IBM POWER
										</p>
										 </td><td align="left" valign="top" headers="idm140290641455728"> <p>
											ppc64le
										</p>
										 </td></tr><tr><td align="left" valign="top" headers="idm140290641456816"> <p>
											IBM Z
										</p>
										 </td><td align="left" valign="top" headers="idm140290641455728"> <p>
											s390x
										</p>
										 </td></tr></tbody></table></div></li></ul></div></section><section class="section" id="getting-debuginfo-packages-for-an-application-or-library-using-gdb_recording-and-analyzing-performance-profiles-with-perf"><div class="titlepage"><div><div><h3 class="title">11.6.10. Getting debuginfo packages for an application or library using GDB</h3></div></div></div><p>
					Debugging information is required to debug code. For code that is installed from a package, the GNU Debugger (GDB) automatically recognizes missing debug information, resolves the package name and provides concrete advice on how to get the package.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The application or library you want to debug must be installed on the system.
						</li><li class="listitem">
							GDB and the <code class="literal command">debuginfo-install</code> tool must be installed on the system. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/setting-up-a-development-workstation_developing-applications#setting-up-to-debug-applications_setting-up-a-development-workstation">Setting up to debug applications</a>.
						</li><li class="listitem">
							Channels providing <code class="literal">debuginfo</code> and <code class="literal">debugsource</code> packages must be configured and enabled on the system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Start GDB attached to the application or library you want to debug. GDB automatically recognizes missing debugging information and suggests a command to run.
						</p><pre class="screen">$ gdb -q /bin/ls
Reading symbols from /bin/ls...Reading symbols from .gnu_debugdata for /usr/bin/ls...(no debugging symbols found)...done.
(no debugging symbols found)...done.
Missing separate debuginfos, use: dnf <span class="emphasis"><em>debuginfo-install coreutils-8.30-6.el8.x86_64</em></span>
(gdb)</pre></li><li class="listitem"><p class="simpara">
							Exit GDB: type <span class="keycap"><strong>q</strong></span> and confirm with <span class="keycap"><strong>Enter</strong></span>.
						</p><pre class="screen">(gdb) q</pre></li><li class="listitem"><p class="simpara">
							Run the command suggested by GDB to install the required <code class="literal">debuginfo</code> packages:
						</p><pre class="screen"># dnf debuginfo-install coreutils-8.30-6.el8.x86_64</pre><p class="simpara">
							The <code class="literal">dnf</code> package management tool provides a summary of the changes, asks for confirmation and once you confirm, downloads and installs all the necessary files.
						</p></li><li class="listitem">
							In case GDB is not able to suggest the <code class="literal">debuginfo</code> package, follow the procedure described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/enabling-debugging-with-debugging-information_debugging-applications#getting-debuginfo-packages-for-an-application-or-library-manually_enabling-debugging-with-debugging-information">Getting debuginfo packages for an application or library manually</a>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-US/Red_Hat_Developer_Toolset/6/html/User_Guide/sect-Red_Hat_Developer_Toolset-Install.html#sect-Red_Hat_Developer_Toolset-Install-Debugging">Red Hat Developer Toolset User Guide, section Installing Debugging Information</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/solutions/9907">How can I download or install debuginfo packages for RHEL systems?</a> — Red Hat Knowledgebase solution
						</li></ul></div></section></section></section><section class="chapter" id="monitoring-system-performance-with-perf_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Monitoring system performance with perf</h1></div></div></div><p>
			As a system administrator you can use the <code class="literal">perf</code> tool to collect and analyze performance data of your system.
		</p><section class="section" id="recording-a-performance-profile-in-per-cpu-mode_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.1. Recording a performance profile in per-CPU mode</h2></div></div></div><p>
				You can use <code class="literal">perf record</code> in per-CPU mode to sample and record performance data in both and user-space and the kernel-space simultaneously across all threads on a monitored CPU. By default, per-CPU mode monitors all online CPUs.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Sample and record the performance data:
					</p><pre class="screen"># perf record -a <span class="emphasis"><em>command</em></span></pre><p class="simpara">
						Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf-record(1)</code> man page.
					</li></ul></div></section><section class="section" id="capturing-call-graph-data-with-perf-record_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.2. Capturing call graph data with perf record</h2></div></div></div><p>
				You can configure the <code class="literal">perf record</code> tool so that it records which function is calling other functions in the performance profile. This helps to identify a bottleneck if several processes are calling the same function.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Sample and record performance data with the <code class="literal">--call-graph</code> option:
					</p><pre class="screen">$ perf record --call-graph <span class="emphasis"><em>method</em></span> <span class="emphasis"><em>command</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Replace <span class="emphasis"><em>method</em></span> with one of the following unwinding methods:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">fp</code></span></dt><dd>
											Uses the frame pointer method. Depending on compiler optimization, such as with binaries built with the GCC option <code class="literal option">--fomit-frame-pointer</code>, this may not be able to unwind the stack.
										</dd><dt><span class="term"><code class="literal">dwarf</code></span></dt><dd>
											Uses DWARF Call Frame Information to unwind the stack.
										</dd><dt><span class="term"><code class="literal">lbr</code></span></dt><dd>
											Uses the last branch record hardware on Intel processors.
										</dd></dl></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf-record(1)</code> man page.
					</li></ul></div></section><section class="section" id="identifying-busy-cpus-with-perf_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.3. Identifying busy CPUs with perf</h2></div></div></div><p>
				When investigating performance issues on a system, you can use the <code class="literal">perf</code> tool to identify the busiest CPUs in order to focus your efforts.
			</p><section class="section" id="displaying-which-cpu-events-were-counted-on-with-perf-stat_identifying-busy-cpus-with-perf"><div class="titlepage"><div><div><h3 class="title">12.3.1. Displaying which CPU events were counted on with perf stat</h3></div></div></div><p>
					You can use <code class="literal">perf stat</code> to display which CPU events were counted on by disabling CPU count aggregation. You must count events in system-wide mode by using the <code class="literal">-a</code> flag in order to use this functionality.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Count the events with CPU count aggregation disabled:
						</p><pre class="screen"># perf stat -a -A sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
							The previous example displays counts of a default set of common hardware and software events recorded over a time period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds, as dictated by using the <code class="literal">sleep</code> command, over each individual CPU in ascending order, starting with <code class="literal">CPU0</code>. As such, it may be useful to specify an event such as cycles:
						</p><pre class="screen"># perf stat -a -A -e cycles sleep <span class="emphasis"><em>seconds</em></span></pre></li></ul></div></section><section class="section" id="displaying-which-cpu-samples-were-taken-on-with-perf-report_identifying-busy-cpus-with-perf"><div class="titlepage"><div><div><h3 class="title">12.3.2. Displaying which CPU samples were taken on with perf report</h3></div></div></div><p>
					The <code class="literal">perf record</code> command samples performance data and stores this data in a <code class="literal">perf.data</code> file which can be read with the <code class="literal">perf report</code> command. The <code class="literal">perf record</code> command always records which CPU samples were taken on. You can configure <code class="literal">perf report</code> to display this information.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li><li class="listitem">
							There is a <code class="literal">perf.data</code> file created with <code class="literal">perf record</code> in the current directory. If the <code class="literal">perf.data</code> file was created with root access, you need to run <code class="literal">perf report</code> with root access too.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the contents of the <code class="literal">perf.data</code> file for further analysis while sorting by CPU:
						</p><pre class="screen"># perf report --sort cpu</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									You can sort by CPU and command to display more detailed information about where CPU time is being spent:
								</p><pre class="screen"># perf report --sort cpu,comm</pre><p class="simpara">
									This example will list commands from all monitored CPUs by total overhead in descending order of overhead usage and identify the CPU the command was executed on.
								</p></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information on recording a <code class="literal">perf.data</code> file, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-perf_monitoring-and-managing-system-status-and-performance#recording-and-analyzing-performance-profiles-with-perf_getting-started-with-perf">Recording and analyzing performance profiles with perf</a>.
						</li></ul></div></section><section class="section" id="displaying-specific-cpus-during-profiling-with-perf-top_identifying-busy-cpus-with-perf"><div class="titlepage"><div><div><h3 class="title">12.3.3. Displaying specific CPUs during profiling with perf top</h3></div></div></div><p>
					You can configure <code class="literal">perf top</code> to display specific CPUs and their relative usage while profiling your system in real time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Start the <code class="literal">perf top</code> interface while sorting by CPU:
						</p><pre class="screen"># perf top --sort cpu</pre><p class="simpara">
							This example will list CPUs and their respective overhead in descending order of overhead usage in real time.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									You can sort by CPU and command for more detailed information of where CPU time is being spent:
								</p><pre class="screen"># perf top --sort cpu,comm</pre><p class="simpara">
									This example will list commands by total overhead in descending order of overhead usage and identify the CPU the command was executed on in real time.
								</p></li></ul></div></li></ul></div></section></section><section class="section" id="monitoring-specific-cpus-with-perf_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.4. Monitoring specific CPUs with perf</h2></div></div></div><p>
				You can configure the <code class="literal">perf</code> tool to monitor only specific CPUs of interest.
			</p><section class="section" id="monitoring-specific-cpus-with-perf-record-and-perf-report_monitoring-specific-cpus-with-perf"><div class="titlepage"><div><div><h3 class="title">12.4.1. Monitoring specific CPUs with perf record and perf report</h3></div></div></div><p>
					You can configure <code class="literal">perf record</code> to only sample specific CPUs of interest and analyze the generated <code class="literal">perf.data</code> file with <code class="literal">perf report</code> for further analysis.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Sample and record the performance data in the specific CPU’s, generating a <code class="literal">perf.data</code> file:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Using a comma separated list of CPUs:
								</p><pre class="screen"># perf record -C <span class="emphasis"><em>0,1</em></span> sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
									The previous example samples and records data in CPUs 0 and 1 for a period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds as dictated by the use of the <code class="literal">sleep</code> command.
								</p></li><li class="listitem"><p class="simpara">
									Using a range of CPUs:
								</p><pre class="screen"># perf record -C <span class="emphasis"><em>0-2</em></span> sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
									The previous example samples and records data in all CPUs from CPU 0 to 2 for a period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds as dictated by the use of the <code class="literal">sleep</code> command.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Display the contents of the <code class="literal">perf.data</code> file for further analysis:
						</p><pre class="screen"># perf report</pre><p class="simpara">
							This example will display the contents of <code class="literal">perf.data</code>. If you are monitoring several CPUs and want to know which CPU data was sampled on, see <a class="link" href="index.html#displaying-which-cpu-samples-were-taken-on-with-perf-report_identifying-busy-cpus-with-perf" title="12.3.2. Displaying which CPU samples were taken on with perf report">Displaying which CPU samples were taken on with perf report</a>.
						</p></li></ol></div></section><section class="section" id="displaying-specific-cpus-during-profiling-with-perf-top_monitoring-specific-cpus-with-perf"><div class="titlepage"><div><div><h3 class="title">12.4.2. Displaying specific CPUs during profiling with perf top</h3></div></div></div><p>
					You can configure <code class="literal">perf top</code> to display specific CPUs and their relative usage while profiling your system in real time.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Start the <code class="literal">perf top</code> interface while sorting by CPU:
						</p><pre class="screen"># perf top --sort cpu</pre><p class="simpara">
							This example will list CPUs and their respective overhead in descending order of overhead usage in real time.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									You can sort by CPU and command for more detailed information of where CPU time is being spent:
								</p><pre class="screen"># perf top --sort cpu,comm</pre><p class="simpara">
									This example will list commands by total overhead in descending order of overhead usage and identify the CPU the command was executed on in real time.
								</p></li></ul></div></li></ul></div></section></section><section class="section" id="generating-a-perf-data-file-that-is-readable-on-a-different-device_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.5. Generating a perf.data file that is readable on a different device</h2></div></div></div><p>
				You can use the <code class="literal">perf</code> tool to record performance data into a <code class="literal">perf.data</code> file to be analyzed on a different device.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li><li class="listitem">
						The kernel <code class="literal">debuginfo</code> package is installed. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/developing_c_and_cpp_applications_in_rhel_8/enabling-debugging-with-debugging-information_debugging-applications#getting-debuginfo-packages-for-an-application-or-library-using-gdb_enabling-debugging-with-debugging-information">Getting debuginfo packages for an application or library using GDB.</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Capture performance data you are interested in investigating further:
					</p><pre class="screen"># perf record -a --call-graph fp sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
						This example would generate a <code class="literal">perf.data</code> over the entire system for a period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds as dictated by the use of the <code class="literal">sleep</code> command. It would also capture call graph data using the frame pointer method.
					</p></li><li class="listitem"><p class="simpara">
						Generate an archive file containing debug symbols of the recorded data:
					</p><pre class="screen"># perf archive</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the archive file has been generated in your current active directory:
					</p><pre class="screen"># ls perf.data*</pre><p class="simpara">
						The output will display every file in your current directory that begins with <code class="literal">perf.data</code>. The archive file will be named either:
					</p><p class="simpara">
						<code class="literal">perf.data.tar.gz</code>
					</p><p class="simpara">
						or
					</p><p class="simpara">
						<code class="literal">perf data.tar.bz2</code>
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information on recording a <code class="literal">perf.data</code> file, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-perf_monitoring-and-managing-system-status-and-performance#recording-and-analyzing-performance-profiles-with-perf_getting-started-with-perf">Recording and analyzing performance profiles with perf</a>.
					</li><li class="listitem">
						For more information on capturing call graph data with <code class="literal">perf record</code>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/monitoring_and_managing_system_status_and_performance/getting-started-with-perf_monitoring-and-managing-system-status-and-performance#capturing-call-graph-data-with-perf-record_recording-and-analyzing-performance-profiles-with-perf">Capturing call graph data with perf record</a>.
					</li></ul></div></section><section class="section" id="analyzing-a-perf-data-file-that-was-created-on-a-different-device_monitoring-system-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">12.6. Analyzing a perf.data file that was created on a different device</h2></div></div></div><p>
				You can use the <code class="literal">perf</code> tool to analyze a <code class="literal">perf.data</code> file that was generated on a different device.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li><li class="listitem">
						A <code class="literal">perf.data</code> file and associated archive file generated on a different device are present on the current device being used.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Copy both the <code class="literal">perf.data</code> file and the archive file into your current active directory.
					</li><li class="listitem"><p class="simpara">
						Extract the archive file into <code class="literal">~/.debug</code>:
					</p><pre class="screen"># mkdir -p ~/.debug
# tar xf <span class="emphasis"><em>perf.data.tar.bz2</em></span> -C ~/.debug</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The archive file might also be named <code class="literal"><span class="emphasis"><em>perf.data.tar.gz</em></span></code>.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Open the <code class="literal">perf.data</code> file for further analysis:
					</p><pre class="screen"># perf report</pre></li></ol></div></section></section><section class="chapter" id="monitoring-application-performance-with-perf_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Monitoring application performance with perf</h1></div></div></div><p>
			This section describes how to use the <code class="literal">perf</code> tool to monitor application performance.
		</p><section class="section" id="attaching-perf-record-to-a-running-process_monitoring-application-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">13.1. Attaching perf record to a running process</h2></div></div></div><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You can attach <code class="literal">perf record</code> to a running process. This will instruct <code class="literal">perf record</code> to only sample and record performance data in the specified processes.
				</p></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Attach <code class="literal">perf record</code> to a running process:
					</p><pre class="screen">$ perf record -p <span class="emphasis"><em>ID1,ID2</em></span> sleep <span class="emphasis"><em>seconds</em></span></pre><p class="simpara">
						The previous example samples and records performance data of the processes with the process ID’s <code class="literal"><span class="emphasis"><em>ID1</em></span></code> and <code class="literal"><span class="emphasis"><em>ID2</em></span></code> for a time period of <code class="literal"><span class="emphasis"><em>seconds</em></span></code> seconds as dictated by using the <code class="literal">sleep</code> command. You can also configure <code class="literal">perf</code> to record events in specific threads:
					</p><pre class="screen">$ perf record -t <span class="emphasis"><em>ID1,ID2</em></span> sleep <span class="emphasis"><em>seconds</em></span></pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When using the <code class="literal">-t</code> flag and stipulating thread ID’s, <code class="literal">perf</code> disables inheritance by default. You can enable inheritance by adding the <code class="literal">--inherit</code> option.
						</p></div></div></li></ul></div></section><section class="section" id="capturing-call-graph-data-with-perf-record_monitoring-application-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">13.2. Capturing call graph data with perf record</h2></div></div></div><p>
				You can configure the <code class="literal">perf record</code> tool so that it records which function is calling other functions in the performance profile. This helps to identify a bottleneck if several processes are calling the same function.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Sample and record performance data with the <code class="literal">--call-graph</code> option:
					</p><pre class="screen">$ perf record --call-graph <span class="emphasis"><em>method</em></span> <span class="emphasis"><em>command</em></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Replace <code class="literal"><span class="emphasis"><em>command</em></span></code> with the command you want to sample data during. If you do not specify a command, then <code class="literal">perf record</code> will sample data until you manually stop it by pressing <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>C</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Replace <span class="emphasis"><em>method</em></span> with one of the following unwinding methods:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">fp</code></span></dt><dd>
											Uses the frame pointer method. Depending on compiler optimization, such as with binaries built with the GCC option <code class="literal option">--fomit-frame-pointer</code>, this may not be able to unwind the stack.
										</dd><dt><span class="term"><code class="literal">dwarf</code></span></dt><dd>
											Uses DWARF Call Frame Information to unwind the stack.
										</dd><dt><span class="term"><code class="literal">lbr</code></span></dt><dd>
											Uses the last branch record hardware on Intel processors.
										</dd></dl></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf-record(1)</code> man page.
					</li></ul></div></section><section class="section" id="analyzing-perf-data-with-perf-report_monitoring-application-performance-with-perf"><div class="titlepage"><div><div><h2 class="title">13.3. Analyzing perf.data with perf report</h2></div></div></div><p>
				You can use <code class="literal">perf report</code> to display and analyze a <code class="literal file">perf.data</code> file.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf</code> user space tool is installed. For more information, see <a class="link" href="index.html#installing-perf_getting-started-with-perf" title="11.2. Installing perf">Installing perf</a>.
					</li><li class="listitem">
						There is a <code class="literal file">perf.data</code> file in the current directory.
					</li><li class="listitem">
						If the <code class="literal file">perf.data</code> file was created with root access, you need to run <code class="literal">perf report</code> with root access too.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the contents of the <code class="literal file">perf.data</code> file for further analysis:
					</p><pre class="screen"># perf report</pre><div class="example" id="idm140290640258960"><p class="title"><strong>Example 13.1. Example output</strong></p><div class="example-contents"><pre class="screen">Samples: 2K of event 'cycles', Event count (approx.): 235462960
Overhead  Command          Shared Object                     Symbol
   2.36%  kswapd0          [kernel.kallsyms]                 [k] page_vma_mapped_walk
   2.13%  sssd_kcm         libc-2.28.so                      [.] __memset_avx2_erms
   2.13%  perf             [kernel.kallsyms]                 [k] smp_call_function_single
   1.53%  gnome-shell      libc-2.28.so                      [.] __strcmp_avx2
   1.17%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_hash_table_lookup
   0.93%  Xorg             libc-2.28.so                      [.] __memmove_avx_unaligned_erms
   0.89%  gnome-shell      libgobject-2.0.so.0.5600.4        [.] g_object_unref
   0.87%  kswapd0          [kernel.kallsyms]                 [k] page_referenced_one
   0.86%  gnome-shell      libc-2.28.so                      [.] __memmove_avx_unaligned_erms
   0.83%  Xorg             [kernel.kallsyms]                 [k] alloc_vmap_area
   0.63%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_slice_alloc
   0.53%  gnome-shell      libgirepository-1.0.so.1.0.0      [.] g_base_info_unref
   0.53%  gnome-shell      ld-2.28.so                        [.] _dl_find_dso_for_object
   0.49%  kswapd0          [kernel.kallsyms]                 [k] vma_interval_tree_iter_next
   0.48%  gnome-shell      libpthread-2.28.so                [.] __pthread_getspecific
   0.47%  gnome-shell      libgirepository-1.0.so.1.0.0      [.] 0x0000000000013b1d
   0.45%  gnome-shell      libglib-2.0.so.0.5600.4           [.] g_slice_free1
   0.45%  gnome-shell      libgobject-2.0.so.0.5600.4        [.] g_type_check_instance_is_fundamentally_a
   0.44%  gnome-shell      libc-2.28.so                      [.] malloc
   0.41%  swapper          [kernel.kallsyms]                 [k] apic_timer_interrupt
   0.40%  gnome-shell      ld-2.28.so                        [.] _dl_lookup_symbol_x
   0.39%  kswapd0          [kernel.kallsyms]                 [k] __raw_callee_save___pv_queued_spin_unlock</pre></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additonal resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">perf-report(1)</code> man page.
					</li></ul></div></section></section><section class="chapter" id="configuring-an-operating-system-to-optimize-cpu-utilization_monitoring-and-managing-system-status-and-performance"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Configuring an operating system to optimize CPU utilization</h1></div></div></div><p>
			This section describes how to configure the operating system to optimize CPU utilization across their workloads.
		</p><section class="section" id="tools-for-monitoring-and-diagnosing-processor-issues_configuring-an-operating-system-to-optimize-cpu-utilization"><div class="titlepage"><div><div><h2 class="title">14.1. Tools for monitoring and diagnosing processor issues</h2></div></div></div><p>
				The following are the tools available in Red Hat Enterprise Linux 8 to monitor and diagnose processor-related performance issues:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">turbostat</code> tool prints counter results at specified intervals to help administrators identify unexpected behavior in servers, such as excessive power usage, failure to enter deep sleep states, or system management interrupts (SMIs) being created unnecessarily.
					</li><li class="listitem">
						<code class="literal">numactl</code> utility provides a number of options to manage processor and memory affinity. The <code class="literal">numactl</code> package includes the <code class="literal">libnuma</code> library which offers a simple programming interface to the NUMA policy supported by the kernel, and can be used for more fine-grained tuning than the <code class="literal">numactl</code> application.
					</li><li class="listitem">
						<code class="literal">numastat</code> tool displays per-NUMA node memory statistics for the operating system and its processes, and shows administrators whether the process memory is spread throughout a system or is centralized on specific nodes. This tool is provided by the <code class="literal">numactl</code> package.
					</li><li class="listitem">
						<code class="literal">numad</code> is an automatic NUMA affinity management daemon. It monitors NUMA topology and resource usage within a system in order to dynamically improve NUMA resource allocation and management.
					</li><li class="listitem">
						<code class="literal">/proc/interrupts</code> file displays the interrupt request (IRQ) number, the number of similar interrupt requests handled by each processor in the system, the type of interrupt sent, and a comma-separated list of devices that respond to the listed interrupt request.
					</li><li class="listitem"><p class="simpara">
						<code class="literal">pqos</code> utility is available in the <code class="literal">intel-cmt-cat</code> package. It monitors CPU cache and memory bandwidth on recent Intel processors. It monitors:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The instructions per cycle (IPC).
							</li><li class="listitem">
								The count of last level cache MISSES.
							</li><li class="listitem">
								The size in kilobytes that the program executing in a given CPU occupies in the LLC.
							</li><li class="listitem">
								The bandwidth to local memory (MBL).
							</li><li class="listitem">
								The bandwidth to remote memory (MBR).
							</li></ul></div></li><li class="listitem">
						<code class="literal">x86_energy_perf_policy</code> tool allows administrators to define the relative importance of performance and energy efficiency. This information can then be used to influence processors that support this feature when they select options that trade off between performance and energy efficiency.
					</li><li class="listitem">
						<code class="literal">taskset</code> tool is provided by the <code class="literal">util-linux</code> package. It allows administrators to retrieve and set the processor affinity of a running process, or launch a process with a specified processor affinity.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information, see the man pages of <code class="literal">turbostat</code>, <code class="literal">numactl</code>, <code class="literal">numastat</code>, <code class="literal">numa</code>, <code class="literal">numad</code>, <code class="literal">pqos</code>, <code class="literal">x86_energy_perf_policy</code>, and <code class="literal">taskset</code>.
					</li></ul></div></section><section class="section" id="determining-system-topology_configuring-an-operating-system-to-optimize-cpu-utilization"><div class="titlepage"><div><div><h2 class="title">14.2. Determining system topology</h2></div></div></div><p>
				In modern computing, the idea of a CPU is a misleading one, as most modern systems have multiple processors. The topology of the system is the way these processors are connected to each other and to other system resources. This can affect system and application performance, and the tuning considerations for a system.
			</p><section class="section" id="types-of-system-topology_determining-system-topology"><div class="titlepage"><div><div><h3 class="title">14.2.1. Types of system topology</h3></div></div></div><p>
					The following are the two primary types of topology used in modern computing:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Symmetric Multi-Processor (SMP) topology</span></dt><dd>
								SMP topology allows all processors to access memory in the same amount of time. However, because shared and equal memory access inherently forces serialized memory accesses from all the CPUs, SMP system scaling constraints are now generally viewed as unacceptable. For this reason, practically all modern server systems are NUMA machines.
							</dd><dt><span class="term">Non-Uniform Memory Access (NUMA) topology</span></dt><dd><p class="simpara">
								NUMA topology was developed more recently than SMP topology. In a NUMA system, multiple processors are physically grouped on a socket. Each socket has a dedicated area of memory and processors that have local access to that memory, these are referred to collectively as a node. Processors on the same node have high speed access to that node’s memory bank, and slower access to memory banks not on their node.
							</p><p class="simpara">
								Therefore, there is a performance penalty when accessing non-local memory. Thus, performance sensitive applications on a system with NUMA topology should access memory that is on the same node as the processor executing the application, and should avoid accessing remote memory wherever possible.
							</p><p class="simpara">
								Multi-threaded applications that are sensitive to performance may benefit from being configured to execute on a specific NUMA node rather than a specific processor. Whether this is suitable depends on your system and the requirements of your application. If multiple application threads access the same cached data, then configuring those threads to execute on the same processor may be suitable. However, if multiple threads that access and cache different data execute on the same processor, each thread may evict cached data accessed by a previous thread. This means that each thread 'misses' the cache and wastes execution time fetching data from memory and replacing it in the cache. Use the <code class="literal">perf</code> tool to check for an excessive number of cache misses.
							</p></dd></dl></div></section><section class="section" id="displaying-system-topologies_determining-system-topology"><div class="titlepage"><div><div><h3 class="title">14.2.2. Displaying system topologies</h3></div></div></div><p>
					There are a number of commands that help understand the topology of a system. This procedure describes how to determine the system topology.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To display an overview of your system topology:
						</p><pre class="screen">$ numactl --hardware
available: 4 nodes (0-3)
node 0 cpus: 0 4 8 12 16 20 24 28 32 36
node 0 size: 65415 MB
node 0 free: 43971 MB
[...]</pre></li><li class="listitem"><p class="simpara">
							To gather the information about the CPU architecture, such as the number of CPUs, threads, cores, sockets, and NUMA nodes:
						</p><pre class="screen">$ lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                40
On-line CPU(s) list:   0-39
Thread(s) per core:    1
Core(s) per socket:    10
Socket(s):             4
NUMA node(s):          4
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 47
Model name:            Intel(R) Xeon(R) CPU E7- 4870  @ 2.40GHz
Stepping:              2
CPU MHz:               2394.204
BogoMIPS:              4787.85
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              30720K
NUMA node0 CPU(s):     0,4,8,12,16,20,24,28,32,36
NUMA node1 CPU(s):     2,6,10,14,18,22,26,30,34,38
NUMA node2 CPU(s):     1,5,9,13,17,21,25,29,33,37
NUMA node3 CPU(s):     3,7,11,15,19,23,27,31,35,39</pre></li><li class="listitem"><p class="simpara">
							To view a graphical representation of your system:
						</p><pre class="screen"># yum install hwloc-gui
# lstopo</pre><div class="figure" id="idm140290640326208"><p class="title"><strong>Figure 14.1. The <code class="literal">lstopo</code> output</strong></p><div class="figure-contents"><div class="mediaobject"><img src="lstopo.png" alt="lstopo"/></div></div></div></li><li class="listitem"><p class="simpara">
							To view the detailed textual output:
						</p><pre class="screen"># yum install hwloc
# lstopo-no-graphics
Machine (15GB)
  Package L#0 + L3 L#0 (8192KB)
    L2 L#0 (256KB) + L1d L#0 (32KB) + L1i L#0 (32KB) + Core L#0
        PU L#0 (P#0)
        PU L#1 (P#4)
       HostBridge L#0
    PCI 8086:5917
        GPU L#0 "renderD128"
        GPU L#1 "controlD64"
        GPU L#2 "card0"
    PCIBridge
        PCI 8086:24fd
          Net L#3 "wlp61s0"
    PCIBridge
        PCI 8086:f1a6
    PCI 8086:15d7
        Net L#4 "enp0s31f6"</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information, see the <code class="literal">numactl</code>, <code class="literal">lscpu</code>, and <code class="literal">lstopo</code> man pages.
						</li></ul></div></section></section><section class="section" id="tuning-scheduling-policy_configuring-an-operating-system-to-optimize-cpu-utilization"><div class="titlepage"><div><div><h2 class="title">14.3. Tuning scheduling policy</h2></div></div></div><p>
				In Red Hat Enterprise Linux, the smallest unit of process execution is called a thread. The system scheduler determines which processor runs a thread, and for how long the thread runs. However, because the scheduler’s primary concern is to keep the system busy, it may not schedule threads optimally for application performance.
			</p><p>
				For example, say an application on a NUMA system is running on Node A when a processor on Node B becomes available. To keep the processor on Node B busy, the scheduler moves one of the application’s threads to Node B. However, the application thread still requires access to memory on Node A. But, this memory will take longer to access because the thread is now running on Node B and Node A memory is no longer local to the thread. Thus, it may take longer for the thread to finish running on Node B than it would have taken to wait for a processor on Node A to become available, and then to execute the thread on the original node with local memory access.
			</p><p>
				Performance sensitive applications often benefit from the designer or administrator determining where threads are run. The Linux scheduler implements a number of scheduling policies which determine where and for how long a thread runs. The following are the two major categories of scheduling policies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Normal policies: Normal threads are used for tasks of normal priority.
					</li><li class="listitem">
						Realtime policies: Realtime policies are used for time-sensitive tasks that must complete without interruptions. Realtime threads are not subject to time slicing. This means the thread runs until they block, exit, voluntarily yield, or are preempted by a higher priority thread. The lowest priority realtime thread is scheduled before any thread with a normal policy. For more information, see <a class="xref" href="index.html#static-priority-scheduling-with-SCHED_FIFO_tuning-scheduling-policy" title="14.3.1. Static priority scheduling with SCHED_FIFO">Section 14.3.1, “Static priority scheduling with SCHED_FIFO”</a> and <a class="xref" href="index.html#round-robin-priority-scheduling-with-sched_rr_tuning-scheduling-policy" title="14.3.2. Round robin priority scheduling with SCHED_RR">Section 14.3.2, “Round robin priority scheduling with SCHED_RR”</a>.
					</li></ul></div><section class="section" id="static-priority-scheduling-with-SCHED_FIFO_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.1. Static priority scheduling with SCHED_FIFO</h3></div></div></div><p>
					The <code class="literal">SCHED_FIFO</code>, also called static priority scheduling, is a realtime policy that defines a fixed priority for each thread. This policy allows administrators to improve event response time and reduce latency. It is recommended to not execute this policy for an extended period of time for time sensitive tasks.
				</p><p>
					When <code class="literal">SCHED_FIFO</code> is in use, the scheduler scans the list of all the <code class="literal">SCHED_FIFO</code> threads in order of priority and schedules the highest priority thread that is ready to run. The priority level of a <code class="literal">SCHED_FIFO</code> thread can be any integer from 1 to 99, where 99 is treated as the highest priority. Red Hat recommends starting with a lower number and increasing priority only when you identify latency issues.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Because realtime threads are not subject to time slicing, Red Hat does not recommend setting a priority as 99. This keeps your process at the same priority level as migration and watchdog threads; if your thread goes into a computational loop and these threads are blocked, they will not be able to run. Systems with a single processor will eventually hang in this situation.
					</p></div></div><p>
					Administrators can limit <code class="literal">SCHED_FIFO</code> bandwidth to prevent realtime application programmers from initiating realtime tasks that monopolize the processor.
				</p><p>
					The following are some of the parameters used in this policy:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">/proc/sys/kernel/sched_rt_period_us</code></span></dt><dd>
								This parameter defines the time period, in microseconds, that is considered to be one hundred percent of the processor bandwidth. The default value is <code class="literal">1000000 μs</code>, or <code class="literal">1 second</code>.
							</dd><dt><span class="term"><code class="literal">/proc/sys/kernel/sched_rt_runtime_us</code></span></dt><dd>
								This parameter defines the time period, in microseconds, that is devoted to running real-time threads. The default value is <code class="literal">950000 μs</code>, or <code class="literal">0.95 seconds</code>.
							</dd></dl></div></section><section class="section" id="round-robin-priority-scheduling-with-sched_rr_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.2. Round robin priority scheduling with SCHED_RR</h3></div></div></div><p>
					The <code class="literal">SCHED_RR</code> is a round-robin variant of the <code class="literal">SCHED_FIFO</code>. This policy is useful when multiple threads need to run at the same priority level.
				</p><p>
					Like <code class="literal">SCHED_FIFO</code>, <code class="literal">SCHED_RR</code> is a realtime policy that defines a fixed priority for each thread. The scheduler scans the list of all SCHED_RR threads in order of priority and schedules the highest priority thread that is ready to run. However, unlike <code class="literal">SCHED_FIFO</code>, threads that have the same priority are scheduled in a round-robin style within a certain time slice.
				</p><p>
					You can set the value of this time slice in milliseconds with the <code class="literal">sched_rr_timeslice_ms</code> kernel parameter in the <code class="literal">/proc/sys/kernel/sched_rr_timeslice_ms</code> file. The lowest value is <code class="literal">1 millisecond</code>.
				</p></section><section class="section" id="normal-scheduling-with-sched_other_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.3. Normal scheduling with SCHED_OTHER</h3></div></div></div><p>
					The <code class="literal">SCHED_OTHER</code> is the default scheduling policy in Red Hat Enterprise Linux 8. This policy uses the Completely Fair Scheduler (CFS) to allow fair processor access to all threads scheduled with this policy. This policy is most useful when there are a large number of threads or when data throughput is a priority, as it allows more efficient scheduling of threads over time.
				</p><p>
					When this policy is in use, the scheduler creates a dynamic priority list based partly on the niceness value of each process thread. Administrators can change the niceness value of a process, but cannot change the scheduler’s dynamic priority list directly.
				</p></section><section class="section" id="setting-scheduler-policies_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.4. Setting scheduler policies</h3></div></div></div><p>
					Check and adjust scheduler policies and priorities by using the <code class="literal">chrt</code> command line tool. It can start new processes with the desired properties, or change the properties of a running process. It can also be used for setting the policy at runtime.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							View the process ID (PID) of the active processes:
						</p><pre class="screen"># ps</pre><p class="simpara">
							Use the <code class="literal">--pid</code> or <code class="literal">-p</code> option with the <code class="literal">ps</code> command to view the details of the particular PID.
						</p></li><li class="listitem"><p class="simpara">
							Check the scheduling policy, PID, and priority of a particular process:
						</p><pre class="screen"># chrt -p <span class="emphasis"><em>468</em></span>
pid <span class="emphasis"><em>468</em></span>'s current scheduling policy: <span class="emphasis"><em>SCHED_FIFO</em></span>
pid <span class="emphasis"><em>468</em></span>'s current scheduling priority: <span class="emphasis"><em>85</em></span>

# chrt -p <span class="emphasis"><em>476</em></span>
pid <span class="emphasis"><em>476</em></span>'s current scheduling policy: <span class="emphasis"><em>SCHED_OTHER</em></span>
pid <span class="emphasis"><em>476</em></span>'s current scheduling priority: <span class="emphasis"><em>0</em></span></pre><p class="simpara">
							Here, <span class="emphasis"><em>468</em></span> and <span class="emphasis"><em>476</em></span> are PID of a process.
						</p></li><li class="listitem"><p class="simpara">
							Set the scheduling policy of a process:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									For example, to set the process with PID <span class="emphasis"><em>1000</em></span> to <span class="emphasis"><em>SCHED_FIFO</em></span>, with a priority of <span class="emphasis"><em>50</em></span>:
								</p><pre class="screen"># chrt -f -p <span class="emphasis"><em>50 1000</em></span></pre></li><li class="listitem"><p class="simpara">
									For example, to set the process with PID <span class="emphasis"><em>1000</em></span> to <span class="emphasis"><em>SCHED_OTHER</em></span>, with a priority of <span class="emphasis"><em>0</em></span>:
								</p><pre class="screen"># chrt -o -p <span class="emphasis"><em>0 1000</em></span></pre></li><li class="listitem"><p class="simpara">
									For example, to set the process with PID <span class="emphasis"><em>1000</em></span> to <span class="emphasis"><em>SCHED_RR</em></span>, with a priority of <span class="emphasis"><em>10</em></span>:
								</p><pre class="screen"># chrt -r -p <span class="emphasis"><em>10 1000</em></span></pre></li><li class="listitem"><p class="simpara">
									To start a new application with a particular policy and priority, specify the name of the application:
								</p><pre class="screen"># chrt -f <span class="emphasis"><em>36 /bin/my-app</em></span></pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">chrt</code> man page.
						</li><li class="listitem">
							For more information on the policy options, see <a class="link" href="index.html#policy-options-for-the-chrt-command_tuning-scheduling-policy" title="14.3.5. Policy options for the chrt command">Policy Options for the chrt command</a>.
						</li><li class="listitem">
							For information on setting the policy in a persistent manner, see <a class="xref" href="index.html#changing-the-priority-of-service-during-the-boot-process_tuning-scheduling-policy" title="14.3.6. Changing the priority of services during the boot process">Section 14.3.6, “Changing the priority of services during the boot process”</a>.
						</li></ul></div></section><section class="section" id="policy-options-for-the-chrt-command_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.5. Policy options for the chrt command</h3></div></div></div><p>
					To set the scheduling policy of a process, use the appropriate command option:
				</p><div class="table" id="idm140290641646288"><p class="title"><strong>Table 14.1. Policy Options for the chrt Command</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290641640512" scope="col">Short option</th><th align="left" valign="top" id="idm140290641639424" scope="col">Long option</th><th align="left" valign="top" id="idm140290641638336" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290641640512"> <p>
									<code class="literal">-f</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641639424"> <p>
									<code class="literal">--fifo</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641638336"> <p>
									Set schedule to <code class="literal">SCHED_FIFO</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140290641640512"> <p>
									<code class="literal">-o</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641639424"> <p>
									<code class="literal">--other</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641638336"> <p>
									Set schedule to <code class="literal">SCHED_OTHER</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140290641640512"> <p>
									<code class="literal">-r</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641639424"> <p>
									<code class="literal">--rr</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140290641638336"> <p>
									Set schedule to <code class="literal">SCHED_RR</code>
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="changing-the-priority-of-service-during-the-boot-process_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.6. Changing the priority of services during the boot process</h3></div></div></div><p>
					Using the <code class="literal">systemd</code> service, it is possible to set up real-time priorities for services launched during the boot process. The <span class="emphasis"><em>unit configuration directives</em></span> are used to change the priority of a service during the boot process.
				</p><p>
					The boot process priority change is done by using the following directives in the service section:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">CPUSchedulingPolicy=</code></span></dt><dd>
								Sets the CPU scheduling policy for executed processes. It is used to set <code class="literal">other</code>, <code class="literal">fifo</code>, and <code class="literal">rr</code> policies.
							</dd><dt><span class="term"><code class="literal">CPUSchedulingPriority=</code></span></dt><dd>
								Sets the CPU scheduling priority for executed processes. The available priority range depends on the selected CPU scheduling policy. For real-time scheduling policies, an integer between <code class="literal">1</code> (lowest priority) and <code class="literal">99</code> (highest priority) can be used.
							</dd></dl></div><p>
					The following procedure describes how to change the priority of a service, during the boot process, using the <code class="literal">mcelog</code> service.
				</p><div class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the tuned package:
						</p><pre class="screen"># yum install tuned</pre></li><li class="listitem"><p class="simpara">
							Enable and start the tuned service:
						</p><pre class="screen"># systemctl enable --now tuned</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							View the scheduling priorities of running threads:
						</p><pre class="literallayout white-space-pre"># tuna --show_threads
                      thread       ctxt_switches
    pid SCHED_ rtpri affinity voluntary nonvoluntary             cmd
  1      OTHER     0     0xff      3181          292         systemd
  2      OTHER     0     0xff       254            0        kthreadd
  3      OTHER     0     0xff         2            0          rcu_gp
  4      OTHER     0     0xff         2            0      rcu_par_gp
  6      OTHER     0        0         9            0 kworker/0:0H-kblockd
  7      OTHER     0     0xff      1301            1 kworker/u16:0-events_unbound
  8      OTHER     0     0xff         2            0    mm_percpu_wq
  9      OTHER     0        0       266            0     ksoftirqd/0
[...]</pre></li><li class="listitem"><p class="simpara">
							Create a supplementary <code class="literal">mcelog</code> service configuration directory file and insert the policy name and priority in this file:
						</p><pre class="screen"># cat &lt;&lt;-EOF &gt; /etc/systemd/system/mcelog.system.d/priority.conf

&gt;
[SERVICE]
CPUSchedulingPolicy=_fifo_
CPUSchedulingPriority=_20_
EOF</pre></li><li class="listitem"><p class="simpara">
							Reload the systemd scripts configuration:
						</p><pre class="screen"># systemctl daemon-reload</pre></li><li class="listitem"><p class="simpara">
							Restart the mcelog service:
						</p><pre class="screen"># systemctl restart mcelog</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the <code class="literal">mcelog</code> priority set by <code class="literal">systemd</code> issue:
						</p><pre class="literallayout white-space-pre"># tuna -t mcelog -P
thread       ctxt_switches
  pid SCHED_ rtpri affinity voluntary nonvoluntary             cmd
826     FIFO    20  0,1,2,3        13            0          mcelog</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information, see the man pages of <code class="literal">systemd</code> and <code class="literal">tuna</code>.
						</li><li class="listitem">
							For more information about priority range, see <a class="link" href="index.html#priority-map_tuning-scheduling-policy" title="14.3.7. Priority map">Description of the priority range</a>.
						</li></ul></div></section><section class="section" id="priority-map_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.7. Priority map</h3></div></div></div><p>
					Priorities are defined in groups, with some groups dedicated to certain kernel functions.
				</p><div class="table" id="idm140290636931632"><p class="title"><strong>Table 14.2. Description of the priority range</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--></col><col style="width: 33%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290636925904" scope="col">Priority</th><th align="left" valign="top" id="idm140290636924816" scope="col">Threads</th><th align="left" valign="top" id="idm140290636923728" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290636925904"> <p>
									1
								</p>
								 </td><td align="left" valign="top" headers="idm140290636924816"> <p>
									Low priority kernel threads
								</p>
								 </td><td align="left" valign="top" headers="idm140290636923728"> <p>
									This priority is usually reserved for the tasks that need to be just above SCHED_OTHER.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140290636925904"> <p>
									2 - 49
								</p>
								 </td><td align="left" valign="top" headers="idm140290636924816"> <p>
									Available for use
								</p>
								 </td><td align="left" valign="top" headers="idm140290636923728"> <p>
									The range used for typical application priorities.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140290636925904"> <p>
									50
								</p>
								 </td><td align="left" valign="top" headers="idm140290636924816"> <p>
									Default hard-IRQ value
								</p>
								 </td><td align="left" valign="top" headers="idm140290636923728"> </td></tr><tr><td align="left" valign="top" headers="idm140290636925904"> <p>
									51 - 98
								</p>
								 </td><td align="left" valign="top" headers="idm140290636924816"> <p>
									High priority threads
								</p>
								 </td><td align="left" valign="top" headers="idm140290636923728"> <p>
									Use this range for threads that execute periodically and must have quick response times. Do not use this range for CPU-bound threads as you will starve interrupts.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140290636925904"> <p>
									99
								</p>
								 </td><td align="left" valign="top" headers="idm140290636924816"> <p>
									Watchdogs and migration
								</p>
								 </td><td align="left" valign="top" headers="idm140290636923728"> <p>
									System threads that must run at the highest priority.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="cpu-partitioning-profile_tuning-scheduling-policy"><div class="titlepage"><div><div><h3 class="title">14.3.8. cpu-partitioning profile</h3></div></div></div><p>
					The <code class="literal">cpu-partitioning</code> profile is used to isolate CPUs from system level interruptions. Once you have isolated these CPUs, you can allocate them for specific applications. This is very useful in low-latency environments or in environments where you wish to extract the maximum performance from your hardware.
				</p><p>
					This profile also lets you designate housekeeping CPUs. A housekeeping CPU is used to run all services, daemons, shell processes, and kernel threads.
				</p><p>
					You can configure the <code class="literal">cpu-partitioning</code> profile in the <code class="literal">/etc/tuned/cpu-partitioning-variables.conf</code> file using the following configuration options:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">isolated_cores=cpu-list</code></span></dt><dd>
								Lists CPUs to isolate. The list of isolated CPUs is comma-separated or you can specify a range using a dash, such as 3-5. This option is mandatory. Any CPU missing from this list is automatically considered a housekeeping CPU.
							</dd><dt><span class="term"><code class="literal">no_balance_cores=cpu-list</code></span></dt><dd>
								Lists CPUs which are not considered by the kernel during system wide process load-balancing. This option is optional. This is usually the same list as <code class="literal">isolated_cores</code>.
							</dd></dl></div></section><section class="section" id="additional_resources_2"><div class="titlepage"><div><div><h3 class="title">14.3.9. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information, see the man pages of <code class="literal">sched</code>, <code class="literal">sched_setaffinity</code>, <code class="literal">sched_getaffinity</code>, <code class="literal">sched_setscheduler</code>, <code class="literal">sched_getscheduler</code>, <code class="literal">cpuset</code>, <code class="literal">tuna</code>, <code class="literal">chrt</code>, <code class="literal">systemd</code>, and <code class="literal">tuned-profiles-cpu-partitioning</code>.
						</li></ul></div></section></section><section class="section" id="configuring-kernel-tick-time_configuring-an-operating-system-to-optimize-cpu-utilization"><div class="titlepage"><div><div><h2 class="title">14.4. Configuring kernel tick time</h2></div></div></div><p>
				By default, Red Hat Enterprise Linux 8 uses a tickless kernel, which does not interrupt idle CPUs in order to reduce power usage and allow new processors to take advantage of deep sleep states.
			</p><p>
				Red Hat Enterprise Linux 8 also offers a dynamic tickless option, which is useful for latency-sensitive workloads, such as high performance computing or realtime computing. By default, the dynamic tickless option is disabled. This procedure describes how to persistently enable dynamic tickless behavior.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To enable dynamic tickless behavior in certain cores, specify those cores on the kernel command line with the <code class="literal">nohz_full</code> parameter. On a 16 core system, append this parameter in the <code class="literal">/etc/default/grub</code> file:
					</p><pre class="screen"># nohz_full=1-15</pre><p class="simpara">
						This enables dynamic tickless behavior on cores 1 through 15, moving all timekeeping to the only unspecified core (core 0).
					</p></li><li class="listitem"><p class="simpara">
						To persistently enable the dynamic tickless behavior, edit the <code class="literal">/etc/default/grub</code> file:
					</p><pre class="screen"># grub2-mkconfig -o /boot/grub2/grub.cfg</pre></li><li class="listitem"><p class="simpara">
						When the system boots, manually move the <code class="literal">rcu</code> threads to the non-latency-sensitive core, in this case core 0:
					</p><pre class="screen"># for i in `pgrep rcu[^c]` ; do taskset -pc 0 $i ; done</pre></li><li class="listitem">
						Optional: Use the <code class="literal">isolcpus</code> parameter on the kernel command line to isolate certain cores from user-space tasks.
					</li><li class="listitem"><p class="simpara">
						Optional: Set the CPU affinity for the kernel’s <code class="literal">write-back bdi-flush</code> threads to the housekeeping core:
					</p><pre class="screen">echo 1 &gt; /sys/bus/workqueue/devices/writeback/cpumask</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Once the system is rebooted, verify if <code class="literal">dynticks</code> are enabled:
					</p><pre class="screen"># grep dynticks var/log/dmesg
[    0.000000] NO_HZ: Full dynticks CPUs: 2-5,8-11</pre></li><li class="listitem"><p class="simpara">
						Verify that the dynamic tickless configuration is working correctly:
					</p><pre class="screen"># perf stat -C 1 -e irq_vectors:local_timer_entry taskset -c 1 stress -t 1 -c 1</pre><p class="simpara">
						Here, <code class="literal">stress</code> is a program that spins on the CPU for <code class="literal">1 second</code>.
					</p></li><li class="listitem"><p class="simpara">
						One possible replacement for <code class="literal">stress</code> is a script that executes:
					</p><pre class="screen">while :; do d=1; done</pre><p class="simpara">
						The default kernel timer configuration shows 1000 ticks on a busy CPU:
					</p><pre class="screen"># perf stat -C 1 -e irq_vectors:local_timer_entry taskset -c 1 stress -t 1 -c 1
1000 irq_vectors:local_timer_entry</pre></li><li class="listitem"><p class="simpara">
						With the dynamic tickless kernel configured, you should see 1 tick instead:
					</p><pre class="screen"># perf stat -C 1 -e irq_vectors:local_timer_entry taskset -c 1 stress -t 1 -c 1
1 irq_vectors:local_timer_entry</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For more information, see the man pages of <code class="literal">perf</code> and <code class="literal">cpuset</code>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/2273531">All about nohz_full kernel parameter Red Hat Knowledgebase article</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3875421">How to verify the list of "isolated" and "nohz_full" CPU information from sysfs? Red Hat Knowledgebase article</a>.
					</li></ul></div></section><section class="section" id="setting-interrupt-affinity-systems_configuring-an-operating-system-to-optimize-cpu-utilization"><div class="titlepage"><div><div><h2 class="title">14.5. Setting interrupt affinity systems</h2></div></div></div><p>
				An interrupt request or IRQ is a signal for immediate attention sent from a piece of hardware to a processor. Each device in a system is assigned one or more IRQ numbers which allow it to send unique interrupts. When interrupts are enabled, a processor that receives an interrupt request immediately pauses execution of the current application thread in order to address the interrupt request.
			</p><p>
				Because interrupt halts normal operation, high interrupt rates can severely degrade system performance. It is possible to reduce the amount of time taken by interrupts by configuring interrupt affinity or by sending a number of lower priority interrupts in a batch (coalescing a number of interrupts).
			</p><p>
				Interrupt requests have an associated affinity property, <code class="literal">smp_affinity</code>, which defines the processors that handle the interrupt request. To improve application performance, assign interrupt affinity and process affinity to the same processor, or processors on the same core. This allows the specified interrupt and application threads to share cache lines.
			</p><p>
				On systems that support interrupt steering, modifying the <code class="literal">smp_affinity</code> property of an interrupt request sets up the hardware so that the decision to service an interrupt with a particular processor is made at the hardware level with no intervention from the kernel.
			</p><section class="section" id="balancing-interrupts-manually_setting-interrupt-affinity-systems"><div class="titlepage"><div><div><h3 class="title">14.5.1. Balancing interrupts manually</h3></div></div></div><p>
					If your BIOS exports its NUMA topology, the <code class="literal">irqbalance</code> service can automatically serve interrupt requests on the node that is local to the hardware requesting service.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Check which devices correspond to the interrupt requests that you want to configure.
						</li><li class="listitem"><p class="simpara">
							Find the hardware specification for your platform. Check if the chipset on your system supports distributing interrupts.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									If it does, you can configure interrupt delivery as described in the following steps. Additionally, check which algorithm your chipset uses to balance interrupts. Some BIOSes have options to configure interrupt delivery.
								</li><li class="listitem">
									If it does not, your chipset always routes all interrupts to a single, static CPU. You cannot configure which CPU is used.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Check which Advanced Programmable Interrupt Controller (APIC) mode is in use on your system:
						</p><pre class="screen">$ journalctl --dmesg | grep APIC</pre><p class="simpara">
							Here,
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If your system uses a mode other than <code class="literal">flat</code>, you can see a line similar to <code class="literal">Setting APIC routing to physical flat</code>.
								</li><li class="listitem"><p class="simpara">
									If you can see no such message, your system uses <code class="literal">flat</code> mode.
								</p><p class="simpara">
									If your system uses <code class="literal">x2apic</code> mode, you can disable it by adding the <code class="literal">nox2apic</code> option to the kernel command line in the <code class="literal">bootloader</code> configuration.
								</p><p class="simpara">
									Only non-physical flat mode (<code class="literal">flat</code>) supports distributing interrupts to multiple CPUs. This mode is available only for systems that have up to 8 CPUs.
								</p></li></ul></div></li><li class="listitem">
							Calculate the <code class="literal">smp_affinity mask</code>. For more information on how to calculate the <code class="literal">smp_affinity mask</code>, see <a class="xref" href="index.html#setting-the-smp_affinity-mask_setting-interrupt-affinity-systems" title="14.5.2. Setting the smp_affinity mask">Section 14.5.2, “Setting the smp_affinity mask”</a>.
						</li></ol></div></section><section class="section" id="setting-the-smp_affinity-mask_setting-interrupt-affinity-systems"><div class="titlepage"><div><div><h3 class="title">14.5.2. Setting the smp_affinity mask</h3></div></div></div><p>
					The <code class="literal">smp_affinity</code> value is stored as a hexadecimal bit mask representing all processors in the system. Each bit configures a different CPU. The least significant bit is CPU 0. The default value of the mask is <code class="literal">f</code>, which means that an interrupt request can be handled on any processor in the system. Setting this value to 1 means that only processor 0 can handle the interrupt.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In binary, use the value 1 for CPUs that handle the interrupts. For example, to set CPU 0 and CPU 7 to handle interrupts, use <code class="literal">0000000010000001</code> as the binary code:
						</p><div class="table" id="idm140290639700528"><p class="title"><strong>Table 14.3. Binary Bits for CPUs</strong></p><div class="table-contents"><table class="gt-8-cols lt-7-rows"><colgroup><col style="width: 6%; " class="col_1"><!--Empty--></col><col style="width: 6%; " class="col_2"><!--Empty--></col><col style="width: 6%; " class="col_3"><!--Empty--></col><col style="width: 6%; " class="col_4"><!--Empty--></col><col style="width: 6%; " class="col_5"><!--Empty--></col><col style="width: 6%; " class="col_6"><!--Empty--></col><col style="width: 6%; " class="col_7"><!--Empty--></col><col style="width: 6%; " class="col_8"><!--Empty--></col><col style="width: 6%; " class="col_9"><!--Empty--></col><col style="width: 6%; " class="col_10"><!--Empty--></col><col style="width: 6%; " class="col_11"><!--Empty--></col><col style="width: 6%; " class="col_12"><!--Empty--></col><col style="width: 6%; " class="col_13"><!--Empty--></col><col style="width: 6%; " class="col_14"><!--Empty--></col><col style="width: 6%; " class="col_15"><!--Empty--></col><col style="width: 6%; " class="col_16"><!--Empty--></col><col style="width: 6%; " class="col_17"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140290639681776" scope="col">CPU</th><th align="left" valign="top" id="idm140290639680688" scope="col">15</th><th align="left" valign="top" id="idm140290639679600" scope="col">14</th><th align="left" valign="top" id="idm140290639678512" scope="col">13</th><th align="left" valign="top" id="idm140290639677424" scope="col">12</th><th align="left" valign="top" id="idm140290639676336" scope="col">11</th><th align="left" valign="top" id="idm140290639675248" scope="col">10</th><th align="left" valign="top" id="idm140290639674160" scope="col">9</th><th align="left" valign="top" id="idm140290639673072" scope="col">8</th><th align="left" valign="top" id="idm140290639671984" scope="col">7</th><th align="left" valign="top" id="idm140290639670896" scope="col">6</th><th align="left" valign="top" id="idm140290639669808" scope="col">5</th><th align="left" valign="top" id="idm140290639668720" scope="col">4</th><th align="left" valign="top" id="idm140290639667632" scope="col">3</th><th align="left" valign="top" id="idm140290639666544" scope="col">2</th><th align="left" valign="top" id="idm140290639665456" scope="col">1</th><th align="left" valign="top" id="idm140290639664368" scope="col">0</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140290639681776"> <p>
											Binary
										</p>
										 </td><td align="left" valign="top" headers="idm140290639680688"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639679600"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639678512"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639677424"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639676336"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639675248"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639674160"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639673072"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639671984"> <p>
											1
										</p>
										 </td><td align="left" valign="top" headers="idm140290639670896"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639669808"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639668720"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639667632"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639666544"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639665456"> <p>
											0
										</p>
										 </td><td align="left" valign="top" headers="idm140290639664368"> <p>
											1
										</p>
										 </td></tr></tbody></table></div></div></li><li class="listitem"><p class="simpara">
							Convert the binary code to hexadecimal:
						</p><p class="simpara">
							For example, to convert the binary code using Python:
						</p><pre class="screen">&gt;&gt;&gt; hex(int('0000000010000001', 2))

'0x81'</pre><p class="simpara">
							On systems with more than 32 processors, you must delimit the <code class="literal">smp_affinity</code> values for discrete 32 bit groups. For example, if you want only the first 32 processors of a 64 processor system to service an interrupt request, use <code class="literal">0xffffffff,00000000</code>.
						</p></li><li class="listitem"><p class="simpara">
							The interrupt affinity value for a particular interrupt request is stored in the associated <code class="literal">/proc/irq/irq_number/smp_affinity</code> file. Set the <code class="literal">smp_affinity</code> mask in this file:
						</p><pre class="screen"># echo mask &gt; /proc/irq/irq_number/smp_affinity</pre></li></ol></div></section><section class="section" id="additional_resources_3"><div class="titlepage"><div><div><h3 class="title">14.5.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For more information, see the man pages of <code class="literal">irqbalance</code>, <code class="literal">journalctl</code>, and <code class="literal">taskset</code>.
						</li></ul></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140290653236752"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2020 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div>
  
  </div>
  </div>
</div>
<div id="comments-footer" class="book-comments">
  </div>
<meta itemscope="" itemref="md1">

    <!-- Display: Next/Previous Nav -->
          
      </div>
</article>


  

            </div>
        </main>
    </div>
    <!--googleoff: all-->
    <div id="to-top"><a class="btn_slideto" href="index.html#masthead" aria-label="Back to Top"><span class="web-icon-upload"></span></a></div>
    <footer class="footer-main">
        <div class="footer-top">
            <div class="container">

              <div class="brand">
                <a href="https://redhat.com">
                  <svg class="rh-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 613 145">
                    <defs>
                      <style>
                        .rh-logo-hat {
                          fill: #e00;
                        }
                        .rh-logo-type {
                          fill: #fff;
                        }
                      </style>
                    </defs>
                    <title>Red Hat</title>
                    <path
                      class="rh-logo-hat"
                      d="M127.47,83.49c12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42l-7.45-32.36c-1.72-7.12-3.23-10.35-15.73-16.6C124.89,8.69,103.76.5,97.51.5,91.69.5,90,8,83.06,8c-6.68,0-11.64-5.6-17.89-5.6-6,0-9.91,4.09-12.93,12.5,0,0-8.41,23.72-9.49,27.16A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33C22.27,52,.5,55,.5,74.22c0,31.48,74.59,70.28,133.65,70.28,45.28,0,56.7-20.48,56.7-36.65,0-12.72-11-27.16-30.83-35.78"/>
                      <path class="rh-logo-band"
                      d="M160,72.07c1.73,8.19,1.73,9.05,1.73,10.13,0,14-15.74,21.77-36.43,21.77C78.54,104,37.58,76.6,37.58,58.49a18.45,18.45,0,0,1,1.51-7.33l3.66-9.06A6.43,6.43,0,0,0,42.53,44c0,9.22,36.3,39.45,84.94,39.45,12.51,0,30.61-2.58,30.61-17.46a14,14,0,0,0-.31-3.42Z"/>
                      <path
                      class="rh-logo-type"
                      d="M579.74,92.8c0,11.89,7.15,17.67,20.19,17.67a52.11,52.11,0,0,0,11.89-1.68V95a24.84,24.84,0,0,1-7.68,1.16c-5.37,0-7.36-1.68-7.36-6.73V68.3h15.56V54.1H596.78v-18l-17,3.68V54.1H568.49V68.3h11.25Zm-53,.32c0-3.68,3.69-5.47,9.26-5.47a43.12,43.12,0,0,1,10.1,1.26v7.15a21.51,21.51,0,0,1-10.63,2.63c-5.46,0-8.73-2.1-8.73-5.57m5.2,17.56c6,0,10.84-1.26,15.36-4.31v3.37h16.82V74.08c0-13.56-9.14-21-24.39-21-8.52,0-16.94,2-26,6.1l6.1,12.52c6.52-2.74,12-4.42,16.83-4.42,7,0,10.62,2.73,10.62,8.31v2.73a49.53,49.53,0,0,0-12.62-1.58c-14.31,0-22.93,6-22.93,16.73,0,9.78,7.78,17.24,20.19,17.24m-92.44-.94h18.09V80.92h30.29v28.82H506V36.12H487.93V64.41H457.64V36.12H439.55ZM370.62,81.87c0-8,6.31-14.1,14.62-14.1A17.22,17.22,0,0,1,397,72.09V91.54A16.36,16.36,0,0,1,385.24,96c-8.2,0-14.62-6.1-14.62-14.09m26.61,27.87h16.83V32.44l-17,3.68V57.05a28.3,28.3,0,0,0-14.2-3.68c-16.19,0-28.92,12.51-28.92,28.5a28.25,28.25,0,0,0,28.4,28.6,25.12,25.12,0,0,0,14.93-4.83ZM320,67c5.36,0,9.88,3.47,11.67,8.83H308.47C310.15,70.3,314.36,67,320,67M291.33,82c0,16.2,13.25,28.82,30.28,28.82,9.36,0,16.2-2.53,23.25-8.42l-11.26-10c-2.63,2.74-6.52,4.21-11.14,4.21a14.39,14.39,0,0,1-13.68-8.83h39.65V83.55c0-17.67-11.88-30.39-28.08-30.39a28.57,28.57,0,0,0-29,28.81M262,51.58c6,0,9.36,3.78,9.36,8.31S268,68.2,262,68.2H244.11V51.58Zm-36,58.16h18.09V82.92h13.77l13.89,26.82H292l-16.2-29.45a22.27,22.27,0,0,0,13.88-20.72c0-13.25-10.41-23.45-26-23.45H226Z"/>
                  </svg>
                </a>
              </div>

            <div role="navigation">
                <h3>Quick Links</h3>
                <ul>
                    <li><a class="download-software" href="https://access.redhat.com/downloads/">Downloads</a></li>
                    <li><a class="manage-subscriptions" href="https://access.redhat.com/management/subscriptions/#active">Subscriptions</a></li>
                    <li><a class="support-cases" href="https://access.redhat.com/support">Support Cases</a></li>
                    <li><a class="customer-service" href="https://access.redhat.com/support/customer-service">Customer Service</a></li>
                    <li><a class="quick-docs" href="https://access.redhat.com/documentation">Product Documentation</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Help</h3>
                <ul>
                    <li><a class="contact-us" href="https://access.redhat.com/support/contact/">Contact Us</a></li>
                    <li><a class="cp-faqs" href="https://access.redhat.com/articles/33844">Customer Portal FAQ</a></li>
                    <li><a class="login-problems" href="https://access.redhat.com/help/login_assistance">Log-in Assistance</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Site Info</h3>
                <ul>
                  <li><a class="trust-red-hat" href="https://www.redhat.com/en/trust">Trust Red Hat</a></li>
                  <li><a class="browser-support-policy" href="https://access.redhat.com/help/browsers/">Browser Support Policy</a></li>
                  <li><a class="accessibility" href="https://access.redhat.com/help/accessibility/">Accessibility</a></li>
                  <li><a class="recognition" href="https://access.redhat.com/recognition/">Awards and Recognition</a></li>
                  <li><a class="colophon" href="https://access.redhat.com/help/colophon/">Colophon</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>Related Sites</h3>
                <ul>
                    <li><a href="https://www.redhat.com/" class="red-hat-com">redhat.com</a></li>
                    <li><a href="https://www.openshift.com" class="openshift-com">openshift.com</a></li>
                    <li><a href="http://developers.redhat.com/" class="red-hat-developers">developers.redhat.com</a></li>
                    <li><a href="https://connect.redhat.com/" class="partner-connect">connect.redhat.com</a></li>
                </ul>
            </div>

            <div role="navigation">
                <h3>About</h3>
                <ul>
                    <li><a href="https://access.redhat.com/subscription-value" class="subscription-value">Red Hat Subscription Value</a></li>
                    <li><a href="https://www.redhat.com/about/" class="about-red-hat">About Red Hat</a></li>
                    <li><a href="http://jobs.redhat.com" class="about-jobs">Red Hat Jobs</a></li>
                </ul>
            </div>

            </div>
        </div>

        <div class="anchor">
            <div class="container">
                <div class="status-legal">
                    <a hidden href="https://status.redhat.com" class="status-page-widget">
                          <span class="status-description"></span>
                          <span class="status-dot shape-circle"></span>
                    </a>
                    <div class="legal-copyright">
                        <div class="copyright">Copyright © 2020 Red Hat, Inc.</div>

                        <div role="navigation" class="legal">
                            <ul>
                                <li><a href="http://www.redhat.com/en/about/privacy-policy" class="privacy-policy">Privacy Statement</a></li>
                                <li><a href="https://access.redhat.com/help/terms/" class="terms-of-use">Customer Portal Terms of Use</a></li>
                                <li><a href="http://www.redhat.com/en/about/all-policies-guidelines" class="all-policies">All Policies and Guidelines</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="social">
                    <a href="http://www.redhat.com/summit/" class="summit">
                      <img src="rh-summit-red-a.svg" alt="Red Hat Summit" />
                    </a>

                    <div class="social-media">
                        <a href="https://twitter.com/RedHatSupport" class="sm-icon twitter"><span class="nicon-twitter"></span><span class="offscreen">Twitter</span></a>
                        <a href="https://www.facebook.com/RedHatSupport" class="sm-icon facebook"><span class="nicon-facebook"></span><span class="offscreen">Facebook</span></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--googleon: all-->
</div>
  
  <div id="formatHelp" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="formatTitle" aria-hidden="true"><div class="modal-dialog"><div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="formatTitle">Formatting Tips</h3>
    </div>
    <div class="modal-body">
      <p>Here are the common uses of Markdown.</p><dl class="formatting-help">
        <dt class="codeblock">Code blocks</dt><dd class="codeblock"><pre><code>~~~
Code surrounded in tildes is easier to read
~~~</code></pre></dd>
        <dt class="urls">Links/URLs</dt><dd class="urls"><code>[Red Hat Customer Portal](https://access.redhat.com)</code></dd>
       </dl>
    </div>
    <div class="modal-footer">
      <a target="_blank" href="https://access.redhat.com/help/markdown" class="btn btn-primary">Learn more</a>
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div></div></div></body>
</html>
